ARM GAS  /tmp/cciSTofK.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 4
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"assembly_test.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.dma_init,"ax",%progbits
  16              		.align	1
  17              		.arch armv7-m
  18              		.syntax unified
  19              		.thumb
  20              		.thumb_func
  21              		.fpu softvfp
  23              	dma_init:
  24              	.LFB9:
  25              		.file 1 "assembly_test.c"
   1:assembly_test.c **** /*
   2:assembly_test.c ****  * Copyright 2010 Michael Ossmann
   3:assembly_test.c ****  *
   4:assembly_test.c ****  * This file is part of Project Ubertooth.
   5:assembly_test.c ****  *
   6:assembly_test.c ****  * This program is free software; you can redistribute it and/or modify
   7:assembly_test.c ****  * it under the terms of the GNU General Public License as published by
   8:assembly_test.c ****  * the Free Software Foundation; either version 2, or (at your option)
   9:assembly_test.c ****  * any later version.
  10:assembly_test.c ****  *
  11:assembly_test.c ****  * This program is distributed in the hope that it will be useful,
  12:assembly_test.c ****  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  13:assembly_test.c ****  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  14:assembly_test.c ****  * GNU General Public License for more details.
  15:assembly_test.c ****  *
  16:assembly_test.c ****  * You should have received a copy of the GNU General Public License
  17:assembly_test.c ****  * along with this program; see the file COPYING.  If not, write to
  18:assembly_test.c ****  * the Free Software Foundation, Inc., 51 Franklin Street,
  19:assembly_test.c ****  * Boston, MA 02110-1301, USA.
  20:assembly_test.c ****  */
  21:assembly_test.c **** 
  22:assembly_test.c **** /*
  23:assembly_test.c **** 	LPCUSB, an USB device driver for LPC microcontrollers	
  24:assembly_test.c **** 	Copyright (C) 2006 Bertrik Sikken (bertrik@sikken.nl)
  25:assembly_test.c **** 
  26:assembly_test.c **** 	Redistribution and use in source and binary forms, with or without
  27:assembly_test.c **** 	modification, are permitted provided that the following conditions are met:
  28:assembly_test.c **** 
  29:assembly_test.c **** 	1. Redistributions of source code must retain the above copyright
  30:assembly_test.c **** 	   notice, this list of conditions and the following disclaimer.
  31:assembly_test.c **** 	2. Redistributions in binary form must reproduce the above copyright
  32:assembly_test.c **** 	   notice, this list of conditions and the following disclaimer in the
  33:assembly_test.c **** 	   documentation and/or other materials provided with the distribution.
ARM GAS  /tmp/cciSTofK.s 			page 2


  34:assembly_test.c **** 	3. The name of the author may not be used to endorse or promote products
  35:assembly_test.c **** 	   derived from this software without specific prior written permission.
  36:assembly_test.c **** 
  37:assembly_test.c **** 	THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
  38:assembly_test.c **** 	IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
  39:assembly_test.c **** 	OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
  40:assembly_test.c **** 	IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, 
  41:assembly_test.c **** 	INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
  42:assembly_test.c **** 	NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
  43:assembly_test.c **** 	DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
  44:assembly_test.c **** 	THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  45:assembly_test.c **** 	(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
  46:assembly_test.c **** 	THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  47:assembly_test.c **** */
  48:assembly_test.c **** /* For git version strings */
  49:assembly_test.c **** #include <string.h>
  50:assembly_test.c **** 
  51:assembly_test.c **** #include "ubertooth.h"
  52:assembly_test.c **** #include "usbapi.h"
  53:assembly_test.c **** #include "usbhw_lpc.h"
  54:assembly_test.c **** 
  55:assembly_test.c **** /*
  56:assembly_test.c ****  * CLK100NS is a free-running clock with a period of 100ns.  It resets every
  57:assembly_test.c ****  * 2^15 * 10^5 cycles (about 5.5 minutes) and is used to compute CLKN.
  58:assembly_test.c ****  *
  59:assembly_test.c ****  * CLKN is the native (local) clock as defined in the Bluetooth specification.
  60:assembly_test.c ****  * It advances 3200 times per second.  Two CLKN periods make a Bluetooth time
  61:assembly_test.c ****  * slot.
  62:assembly_test.c ****  */
  63:assembly_test.c **** 
  64:assembly_test.c **** #define CLK100NS T0TC
  65:assembly_test.c **** volatile u8 clkn_high;
  66:assembly_test.c **** #define CLKN ((clkn_high << 20) | (CLK100NS / 3125))
  67:assembly_test.c **** 
  68:assembly_test.c **** #define BULK_IN_EP		0x82
  69:assembly_test.c **** #define BULK_OUT_EP		0x05
  70:assembly_test.c **** 
  71:assembly_test.c **** #define MAX_PACKET_SIZE	64
  72:assembly_test.c **** 
  73:assembly_test.c **** #define LE_WORD(x)		((x)&0xFF),((x)>>8)
  74:assembly_test.c **** 
  75:assembly_test.c **** /* DMA buffers */
  76:assembly_test.c **** #define DMA_SIZE 50
  77:assembly_test.c **** u8 rxbuf1[DMA_SIZE];
  78:assembly_test.c **** u8 rxbuf2[DMA_SIZE];
  79:assembly_test.c **** 
  80:assembly_test.c **** /*
  81:assembly_test.c ****  * The active buffer is the one with an active DMA transfer.
  82:assembly_test.c ****  * The idle buffer is the one we can read/write between transfers.
  83:assembly_test.c ****  */
  84:assembly_test.c **** u8 *active_rxbuf = &rxbuf1[0];
  85:assembly_test.c **** u8 *idle_rxbuf = &rxbuf2[0];
  86:assembly_test.c **** 
  87:assembly_test.c **** rangetest_result rr;
  88:assembly_test.c **** 
  89:assembly_test.c **** volatile u32 mode = MODE_IDLE;
  90:assembly_test.c **** volatile u32 requested_mode = MODE_IDLE;
ARM GAS  /tmp/cciSTofK.s 			page 3


  91:assembly_test.c **** volatile u32 modulation = MOD_BT_BASIC_RATE;
  92:assembly_test.c **** volatile u16 channel = 2441;
  93:assembly_test.c **** volatile u16 low_freq = 2400;
  94:assembly_test.c **** volatile u16 high_freq = 2483;
  95:assembly_test.c **** 
  96:assembly_test.c **** /* DMA linked list items */
  97:assembly_test.c **** typedef struct {
  98:assembly_test.c **** 	u32 src;
  99:assembly_test.c **** 	u32 dest;
 100:assembly_test.c **** 	u32 next_lli;
 101:assembly_test.c **** 	u32 control;
 102:assembly_test.c **** } dma_lli;
 103:assembly_test.c **** 
 104:assembly_test.c **** dma_lli rx_dma_lli1;
 105:assembly_test.c **** dma_lli rx_dma_lli2;
 106:assembly_test.c **** 
 107:assembly_test.c **** /* rx terminal count and error interrupt counters */
 108:assembly_test.c **** volatile u32 rx_tc;
 109:assembly_test.c **** volatile u32 rx_err;
 110:assembly_test.c **** 
 111:assembly_test.c **** /* number of rx USB packets to send */
 112:assembly_test.c **** volatile u32 rx_pkts = 0;
 113:assembly_test.c **** 
 114:assembly_test.c **** /* status information byte */
 115:assembly_test.c **** volatile u8 status = 0;
 116:assembly_test.c **** 
 117:assembly_test.c **** #define DMA_OVERFLOW  0x01
 118:assembly_test.c **** #define DMA_ERROR     0x02
 119:assembly_test.c **** #define FIFO_OVERFLOW 0x04
 120:assembly_test.c **** 
 121:assembly_test.c **** /*
 122:assembly_test.c ****  * This is supposed to be a lock-free ring buffer, but I haven't verified
 123:assembly_test.c ****  * atomicity of the operations on head and tail.
 124:assembly_test.c ****  */
 125:assembly_test.c **** 
 126:assembly_test.c **** usb_pkt_rx fifo[128];
 127:assembly_test.c **** 
 128:assembly_test.c **** volatile u32 head = 0;
 129:assembly_test.c **** volatile u32 tail = 0;
 130:assembly_test.c **** 
 131:assembly_test.c **** void queue_init()
 132:assembly_test.c **** {
 133:assembly_test.c **** 	head = 0;
 134:assembly_test.c **** 	tail = 0;
 135:assembly_test.c **** }
 136:assembly_test.c **** 
 137:assembly_test.c **** int enqueue(u8 *buf)
 138:assembly_test.c **** {
 139:assembly_test.c **** 	int i;
 140:assembly_test.c **** 	u8 h = head & 0x7F;
 141:assembly_test.c **** 	u8 t = tail & 0x7F;
 142:assembly_test.c **** 	u8 n = (t + 1) & 0x7F;
 143:assembly_test.c **** 
 144:assembly_test.c **** 	/* fail if queue is full */
 145:assembly_test.c **** 	if (h == n)
 146:assembly_test.c **** 		return 0;
 147:assembly_test.c **** 
ARM GAS  /tmp/cciSTofK.s 			page 4


 148:assembly_test.c **** 	fifo[t].clkn_high = clkn_high;
 149:assembly_test.c **** 	fifo[t].clk100ns = CLK100NS;
 150:assembly_test.c **** 
 151:assembly_test.c **** 	USRLED_SET;
 152:assembly_test.c **** 	for (i = 0; i < DMA_SIZE; i++)
 153:assembly_test.c **** 		fifo[t].data[i] = buf[i];
 154:assembly_test.c **** 	fifo[t].status = status;
 155:assembly_test.c **** 	status = 0;
 156:assembly_test.c **** 	++tail;
 157:assembly_test.c **** 
 158:assembly_test.c **** 	return 1;
 159:assembly_test.c **** }
 160:assembly_test.c **** 
 161:assembly_test.c **** int dequeue()
 162:assembly_test.c **** {
 163:assembly_test.c **** 	u8 h = head & 0x7F;
 164:assembly_test.c **** 	u8 t = tail & 0x7F;
 165:assembly_test.c **** 
 166:assembly_test.c **** 	/* fail if queue is empty */
 167:assembly_test.c **** 	if (h == t) {
 168:assembly_test.c **** 		USRLED_CLR;
 169:assembly_test.c **** 		return 0;
 170:assembly_test.c **** 	}
 171:assembly_test.c **** 
 172:assembly_test.c **** 	USBHwEPWrite(BULK_IN_EP, (u8 *)&fifo[h], sizeof(usb_pkt_rx));
 173:assembly_test.c **** 	++head;
 174:assembly_test.c **** 
 175:assembly_test.c **** 	return 1;
 176:assembly_test.c **** }
 177:assembly_test.c **** 
 178:assembly_test.c **** static const u8 abDescriptors[] = {
 179:assembly_test.c **** 
 180:assembly_test.c **** /* Device descriptor */
 181:assembly_test.c **** 	0x12,              		
 182:assembly_test.c **** 	DESC_DEVICE,       		
 183:assembly_test.c **** 	LE_WORD(0x0200),		// bcdUSB	
 184:assembly_test.c **** 	0xFF,              		// bDeviceClass
 185:assembly_test.c **** 	0x00,              		// bDeviceSubClass
 186:assembly_test.c **** 	0x00,              		// bDeviceProtocol
 187:assembly_test.c **** 	MAX_PACKET_SIZE0,  		// bMaxPacketSize
 188:assembly_test.c **** 	LE_WORD(0xFFFF),		// idVendor
 189:assembly_test.c **** 	LE_WORD(0x0004),		// idProduct
 190:assembly_test.c **** 	LE_WORD(0x0100),		// bcdDevice
 191:assembly_test.c **** 	0x01,              		// iManufacturer
 192:assembly_test.c **** 	0x02,              		// iProduct
 193:assembly_test.c **** 	0x03,              		// iSerialNumber
 194:assembly_test.c **** 	0x01,              		// bNumConfigurations
 195:assembly_test.c **** 
 196:assembly_test.c **** // configuration
 197:assembly_test.c **** 	0x09,
 198:assembly_test.c **** 	DESC_CONFIGURATION,
 199:assembly_test.c **** 	LE_WORD(0x20),  		// wTotalLength
 200:assembly_test.c **** 	0x01,  					// bNumInterfaces
 201:assembly_test.c **** 	0x01,  					// bConfigurationValue
 202:assembly_test.c **** 	0x00,  					// iConfiguration
 203:assembly_test.c **** 	0x80,  					// bmAttributes
 204:assembly_test.c **** 	0x32,  					// bMaxPower
ARM GAS  /tmp/cciSTofK.s 			page 5


 205:assembly_test.c **** 
 206:assembly_test.c **** // interface
 207:assembly_test.c **** 	0x09,   				
 208:assembly_test.c **** 	DESC_INTERFACE, 
 209:assembly_test.c **** 	0x00,  		 			// bInterfaceNumber
 210:assembly_test.c **** 	0x00,   				// bAlternateSetting
 211:assembly_test.c **** 	0x02,   				// bNumEndPoints
 212:assembly_test.c **** 	0xFF,   				// bInterfaceClass
 213:assembly_test.c **** 	0x00,   				// bInterfaceSubClass
 214:assembly_test.c **** 	0x00,   				// bInterfaceProtocol
 215:assembly_test.c **** 	0x00,   				// iInterface
 216:assembly_test.c **** 
 217:assembly_test.c **** // bulk in
 218:assembly_test.c **** 	0x07,   		
 219:assembly_test.c **** 	DESC_ENDPOINT,   		
 220:assembly_test.c **** 	BULK_IN_EP,				// bEndpointAddress
 221:assembly_test.c **** 	0x02,   				// bmAttributes = BULK
 222:assembly_test.c **** 	LE_WORD(MAX_PACKET_SIZE),// wMaxPacketSize
 223:assembly_test.c **** 	0,						// bInterval   		
 224:assembly_test.c **** 
 225:assembly_test.c **** // bulk out
 226:assembly_test.c **** 	0x07,   		
 227:assembly_test.c **** 	DESC_ENDPOINT,   		
 228:assembly_test.c **** 	BULK_OUT_EP,			// bEndpointAddress
 229:assembly_test.c **** 	0x02,   				// bmAttributes = BULK
 230:assembly_test.c **** 	LE_WORD(MAX_PACKET_SIZE),// wMaxPacketSize
 231:assembly_test.c **** 	0,						// bInterval 
 232:assembly_test.c **** 
 233:assembly_test.c **** // string descriptors
 234:assembly_test.c **** 	0x04,
 235:assembly_test.c **** 	DESC_STRING,
 236:assembly_test.c **** 	LE_WORD(0x0409),
 237:assembly_test.c **** 
 238:assembly_test.c **** 	// manufacturer string
 239:assembly_test.c **** 	0x44,
 240:assembly_test.c **** 	DESC_STRING,
 241:assembly_test.c **** 	'h', 0, 't', 0, 't', 0, 'p', 0, ':', 0, '/', 0, '/', 0, 'u', 0,
 242:assembly_test.c **** 	'b', 0, 'e', 0, 'r', 0, 't', 0, 'o', 0, 'o', 0, 't', 0, 'h', 0,
 243:assembly_test.c **** 	'.', 0, 's', 0, 'o', 0, 'u', 0, 'r', 0, 'c', 0, 'e', 0, 'f', 0,
 244:assembly_test.c **** 	'o', 0, 'r', 0, 'g', 0, 'e', 0, '.', 0, 'n', 0, 'e', 0, 't', 0,
 245:assembly_test.c **** 	'/', 0,
 246:assembly_test.c **** 
 247:assembly_test.c **** 	// product string
 248:assembly_test.c **** 	0x30,
 249:assembly_test.c **** 	DESC_STRING,
 250:assembly_test.c **** 	'u', 0, 'b', 0, 'e', 0, 'r', 0, 't', 0, 'o', 0, 'o', 0, 't', 0,
 251:assembly_test.c **** 	'h', 0, ' ', 0, 'a', 0, 's', 0, 's', 0, 'e', 0, 'm', 0, 'b', 0,
 252:assembly_test.c **** 	'l', 0, 'y', 0, '_', 0, 't', 0, 'e', 0, 's', 0, 't', 0,
 253:assembly_test.c **** 
 254:assembly_test.c **** 	// serial number string
 255:assembly_test.c **** 	0x12,
 256:assembly_test.c **** 	DESC_STRING,
 257:assembly_test.c **** 	'0', 0, '0', 0, '0', 0, '0', 0, '0', 0, '0', 0, '0', 0, '1', 0,
 258:assembly_test.c **** 
 259:assembly_test.c **** 	// terminator
 260:assembly_test.c **** 	0
 261:assembly_test.c **** };
ARM GAS  /tmp/cciSTofK.s 			page 6


 262:assembly_test.c **** 
 263:assembly_test.c **** static u8 abVendorReqData[17];
 264:assembly_test.c **** 
 265:assembly_test.c **** static void usb_bulk_in_handler(u8 bEP, u8 bEPStatus)
 266:assembly_test.c **** {
 267:assembly_test.c **** 	if (!(bEPStatus & EP_STATUS_DATA))
 268:assembly_test.c **** 		dequeue();
 269:assembly_test.c **** }
 270:assembly_test.c **** 
 271:assembly_test.c **** static void usb_bulk_out_handler(u8 bEP, u8 bEPStatus)
 272:assembly_test.c **** {
 273:assembly_test.c **** }
 274:assembly_test.c **** 
 275:assembly_test.c **** static BOOL usb_vendor_request_handler(TSetupPacket *pSetup, int *piLen, u8 **ppbData)
 276:assembly_test.c **** {
 277:assembly_test.c **** 	u8 *pbData = *ppbData;
 278:assembly_test.c **** 	u32 command[5];
 279:assembly_test.c **** 	u32 result[5];
 280:assembly_test.c **** 	u8 length; // string length
 281:assembly_test.c **** 
 282:assembly_test.c **** 	switch (pSetup->bRequest) {
 283:assembly_test.c **** 
 284:assembly_test.c **** 	case UBERTOOTH_PING:
 285:assembly_test.c **** 		*piLen = 0;
 286:assembly_test.c **** 		break;
 287:assembly_test.c **** 
 288:assembly_test.c **** 	case UBERTOOTH_RX_SYMBOLS:
 289:assembly_test.c **** 		rx_pkts += pSetup->wValue;
 290:assembly_test.c **** 		if (rx_pkts == 0)
 291:assembly_test.c **** 			rx_pkts = 0xFFFFFFFF;
 292:assembly_test.c **** 		*piLen = 0;
 293:assembly_test.c **** 		break;
 294:assembly_test.c **** 
 295:assembly_test.c **** 	case UBERTOOTH_GET_USRLED:
 296:assembly_test.c **** 		pbData[0] = (USRLED) ? 1 : 0;
 297:assembly_test.c **** 		*piLen = 1;
 298:assembly_test.c **** 		break;
 299:assembly_test.c **** 
 300:assembly_test.c **** 	case UBERTOOTH_SET_USRLED:
 301:assembly_test.c **** 		if (pSetup->wValue)
 302:assembly_test.c **** 			USRLED_SET;
 303:assembly_test.c **** 		else
 304:assembly_test.c **** 			USRLED_CLR;
 305:assembly_test.c **** 		break;
 306:assembly_test.c **** 
 307:assembly_test.c **** 	case UBERTOOTH_GET_RXLED:
 308:assembly_test.c **** 		pbData[0] = (RXLED) ? 1 : 0;
 309:assembly_test.c **** 		*piLen = 1;
 310:assembly_test.c **** 		break;
 311:assembly_test.c **** 
 312:assembly_test.c **** 	case UBERTOOTH_SET_RXLED:
 313:assembly_test.c **** 		if (pSetup->wValue)
 314:assembly_test.c **** 			RXLED_SET;
 315:assembly_test.c **** 		else
 316:assembly_test.c **** 			RXLED_CLR;
 317:assembly_test.c **** 		break;
 318:assembly_test.c **** 
ARM GAS  /tmp/cciSTofK.s 			page 7


 319:assembly_test.c **** 	case UBERTOOTH_GET_TXLED:
 320:assembly_test.c **** 		pbData[0] = (TXLED) ? 1 : 0;
 321:assembly_test.c **** 		*piLen = 1;
 322:assembly_test.c **** 		break;
 323:assembly_test.c **** 
 324:assembly_test.c **** 	case UBERTOOTH_SET_TXLED:
 325:assembly_test.c **** 		if (pSetup->wValue)
 326:assembly_test.c **** 			TXLED_SET;
 327:assembly_test.c **** 		else
 328:assembly_test.c **** 			TXLED_CLR;
 329:assembly_test.c **** 		break;
 330:assembly_test.c **** 
 331:assembly_test.c **** 	case UBERTOOTH_GET_1V8:
 332:assembly_test.c **** 		pbData[0] = (CC1V8) ? 1 : 0;
 333:assembly_test.c **** 		*piLen = 1;
 334:assembly_test.c **** 		break;
 335:assembly_test.c **** 
 336:assembly_test.c **** 	case UBERTOOTH_SET_1V8:
 337:assembly_test.c **** 		if (pSetup->wValue)
 338:assembly_test.c **** 			CC1V8_SET;
 339:assembly_test.c **** 		else
 340:assembly_test.c **** 			CC1V8_CLR;
 341:assembly_test.c **** 		break;
 342:assembly_test.c **** 
 343:assembly_test.c **** 	case UBERTOOTH_GET_PARTNUM:
 344:assembly_test.c **** 		command[0] = 54; /* read part number */
 345:assembly_test.c **** 		iap_entry(command, result);
 346:assembly_test.c **** 		pbData[0] = result[0] & 0xFF; /* status */
 347:assembly_test.c **** 		pbData[1] = result[1] & 0xFF;
 348:assembly_test.c **** 		pbData[2] = (result[1] >> 8) & 0xFF;
 349:assembly_test.c **** 		pbData[3] = (result[1] >> 16) & 0xFF;
 350:assembly_test.c **** 		pbData[4] = (result[1] >> 24) & 0xFF;
 351:assembly_test.c **** 		*piLen = 5;
 352:assembly_test.c **** 		break;
 353:assembly_test.c **** 
 354:assembly_test.c **** 	case UBERTOOTH_RESET:
 355:assembly_test.c **** 		reset();
 356:assembly_test.c **** 		break;
 357:assembly_test.c **** 
 358:assembly_test.c **** 	case UBERTOOTH_GET_SERIAL:
 359:assembly_test.c **** 		command[0] = 58; /* read device serial number */
 360:assembly_test.c **** 		iap_entry(command, result);
 361:assembly_test.c **** 		pbData[0] = result[0] & 0xFF; /* status */
 362:assembly_test.c **** 		pbData[1] = result[1] & 0xFF;
 363:assembly_test.c **** 		pbData[2] = (result[1] >> 8) & 0xFF;
 364:assembly_test.c **** 		pbData[3] = (result[1] >> 16) & 0xFF;
 365:assembly_test.c **** 		pbData[4] = (result[1] >> 24) & 0xFF;
 366:assembly_test.c **** 		pbData[5] = result[2] & 0xFF;
 367:assembly_test.c **** 		pbData[6] = (result[2] >> 8) & 0xFF;
 368:assembly_test.c **** 		pbData[7] = (result[2] >> 16) & 0xFF;
 369:assembly_test.c **** 		pbData[8] = (result[2] >> 24) & 0xFF;
 370:assembly_test.c **** 		pbData[9] = result[3] & 0xFF;
 371:assembly_test.c **** 		pbData[10] = (result[3] >> 8) & 0xFF;
 372:assembly_test.c **** 		pbData[11] = (result[3] >> 16) & 0xFF;
 373:assembly_test.c **** 		pbData[12] = (result[3] >> 24) & 0xFF;
 374:assembly_test.c **** 		pbData[13] = result[4] & 0xFF;
 375:assembly_test.c **** 		pbData[14] = (result[4] >> 8) & 0xFF;
ARM GAS  /tmp/cciSTofK.s 			page 8


 376:assembly_test.c **** 		pbData[15] = (result[4] >> 16) & 0xFF;
 377:assembly_test.c **** 		pbData[16] = (result[4] >> 24) & 0xFF;
 378:assembly_test.c **** 		*piLen = 17;
 379:assembly_test.c **** 		break;
 380:assembly_test.c **** 
 381:assembly_test.c **** #ifdef UBERTOOTH_ONE
 382:assembly_test.c **** 	case UBERTOOTH_GET_PAEN:
 383:assembly_test.c **** 		pbData[0] = (PAEN) ? 1 : 0;
 384:assembly_test.c **** 		*piLen = 1;
 385:assembly_test.c **** 		break;
 386:assembly_test.c **** 
 387:assembly_test.c **** 	case UBERTOOTH_SET_PAEN:
 388:assembly_test.c **** 		if (pSetup->wValue)
 389:assembly_test.c **** 			PAEN_SET;
 390:assembly_test.c **** 		else
 391:assembly_test.c **** 			PAEN_CLR;
 392:assembly_test.c **** 		break;
 393:assembly_test.c **** 
 394:assembly_test.c **** 	case UBERTOOTH_GET_HGM:
 395:assembly_test.c **** 		pbData[0] = (HGM) ? 1 : 0;
 396:assembly_test.c **** 		*piLen = 1;
 397:assembly_test.c **** 		break;
 398:assembly_test.c **** 
 399:assembly_test.c **** 	case UBERTOOTH_SET_HGM:
 400:assembly_test.c **** 		if (pSetup->wValue)
 401:assembly_test.c **** 			HGM_SET;
 402:assembly_test.c **** 		else
 403:assembly_test.c **** 			HGM_CLR;
 404:assembly_test.c **** 		break;
 405:assembly_test.c **** #endif
 406:assembly_test.c **** 
 407:assembly_test.c **** #ifdef TX_ENABLE
 408:assembly_test.c **** 	case UBERTOOTH_TX_TEST:
 409:assembly_test.c **** 		requested_mode = MODE_TX_TEST;
 410:assembly_test.c **** 		break;
 411:assembly_test.c **** 
 412:assembly_test.c **** 	case UBERTOOTH_GET_PALEVEL:
 413:assembly_test.c **** 		pbData[0] = cc2400_get(FREND) & 0x7;
 414:assembly_test.c **** 		*piLen = 1;
 415:assembly_test.c **** 		break;
 416:assembly_test.c **** 
 417:assembly_test.c **** 	case UBERTOOTH_SET_PALEVEL:
 418:assembly_test.c **** 		if( pSetup->wValue < 8 ) {
 419:assembly_test.c **** 			cc2400_set(FREND, 8 | pSetup->wValue);
 420:assembly_test.c **** 		} else {
 421:assembly_test.c **** 			return FALSE;
 422:assembly_test.c **** 		}
 423:assembly_test.c **** 		break;
 424:assembly_test.c **** 
 425:assembly_test.c **** 	case UBERTOOTH_RANGE_TEST:
 426:assembly_test.c **** 		requested_mode = MODE_RANGE_TEST;
 427:assembly_test.c **** 		break;
 428:assembly_test.c **** 
 429:assembly_test.c **** 	case UBERTOOTH_REPEATER:
 430:assembly_test.c **** 		requested_mode = MODE_REPEATER;
 431:assembly_test.c **** 		break;
 432:assembly_test.c **** #endif
ARM GAS  /tmp/cciSTofK.s 			page 9


 433:assembly_test.c **** 
 434:assembly_test.c **** 	case UBERTOOTH_RANGE_CHECK:
 435:assembly_test.c **** 		pbData[0] = rr.valid;
 436:assembly_test.c **** 		pbData[1] = rr.request_pa;
 437:assembly_test.c **** 		pbData[2] = rr.request_num;
 438:assembly_test.c **** 		pbData[3] = rr.reply_pa;
 439:assembly_test.c **** 		pbData[4] = rr.reply_num;
 440:assembly_test.c **** 		*piLen = 5;
 441:assembly_test.c **** 		break;
 442:assembly_test.c **** 
 443:assembly_test.c **** 	case UBERTOOTH_STOP:
 444:assembly_test.c **** 		requested_mode = MODE_IDLE;
 445:assembly_test.c **** 		break;
 446:assembly_test.c **** 
 447:assembly_test.c **** 	case UBERTOOTH_GET_MOD:
 448:assembly_test.c **** 		pbData[0] = modulation;
 449:assembly_test.c **** 		*piLen = 1;
 450:assembly_test.c **** 		break;
 451:assembly_test.c **** 
 452:assembly_test.c **** 	case UBERTOOTH_SET_MOD:
 453:assembly_test.c **** 		modulation = pSetup->wValue;
 454:assembly_test.c **** 		break;
 455:assembly_test.c **** 
 456:assembly_test.c **** 	case UBERTOOTH_GET_CHANNEL:
 457:assembly_test.c **** 		pbData[0] = channel & 0xFF;
 458:assembly_test.c **** 		pbData[1] = (channel >> 8) & 0xFF;
 459:assembly_test.c **** 		*piLen = 2;
 460:assembly_test.c **** 		break;
 461:assembly_test.c **** 
 462:assembly_test.c ****     case UBERTOOTH_SET_CHANNEL:
 463:assembly_test.c **** 		channel = pSetup->wValue;
 464:assembly_test.c **** 		channel = MAX(channel, MIN_FREQ);
 465:assembly_test.c **** 		channel = MIN(channel, MAX_FREQ);
 466:assembly_test.c **** 		break;
 467:assembly_test.c **** 
 468:assembly_test.c **** 	case UBERTOOTH_SET_ISP:
 469:assembly_test.c **** 		command[0] = 57;
 470:assembly_test.c **** 		iap_entry(command, result);
 471:assembly_test.c **** 		*piLen = 0; /* should never return */
 472:assembly_test.c **** 		break;
 473:assembly_test.c **** 
 474:assembly_test.c **** 	case UBERTOOTH_FLASH:
 475:assembly_test.c **** 		bootloader_ctrl = DFU_MODE;
 476:assembly_test.c **** 		reset();
 477:assembly_test.c **** 		break;
 478:assembly_test.c **** 
 479:assembly_test.c **** 	case UBERTOOTH_SPECAN:
 480:assembly_test.c **** 		if (pSetup->wValue < 2049 || pSetup->wValue > 3072 || 
 481:assembly_test.c **** 				pSetup->wIndex < 2049 || pSetup->wIndex > 3072 ||
 482:assembly_test.c **** 				pSetup->wIndex < pSetup->wValue)
 483:assembly_test.c **** 			return FALSE;
 484:assembly_test.c **** 		low_freq = pSetup->wValue;
 485:assembly_test.c **** 		high_freq = pSetup->wIndex;
 486:assembly_test.c **** 		requested_mode = MODE_SPECAN;
 487:assembly_test.c **** 		*piLen = 0;
 488:assembly_test.c **** 		break;
 489:assembly_test.c **** 
ARM GAS  /tmp/cciSTofK.s 			page 10


 490:assembly_test.c **** 	case UBERTOOTH_GET_REV_NUM:
 491:assembly_test.c **** 		pbData[0] = 0x00;
 492:assembly_test.c **** 		pbData[1] = 0x00;
 493:assembly_test.c **** 
 494:assembly_test.c **** 		length = (u8)strlen(GIT_REVISION);
 495:assembly_test.c **** 		pbData[2] = length;
 496:assembly_test.c **** 
 497:assembly_test.c **** 		memcpy(&pbData[3], GIT_REVISION, length);
 498:assembly_test.c **** 
 499:assembly_test.c **** 		*piLen = 2 + 1 + length;
 500:assembly_test.c **** 		break;
 501:assembly_test.c **** 
 502:assembly_test.c **** 	default:
 503:assembly_test.c **** 		return FALSE;
 504:assembly_test.c **** 	}
 505:assembly_test.c **** 	return TRUE;
 506:assembly_test.c **** }
 507:assembly_test.c **** 
 508:assembly_test.c **** int ubertooth_usb_init()
 509:assembly_test.c **** {
 510:assembly_test.c **** 	// initialise stack
 511:assembly_test.c **** 	USBInit();
 512:assembly_test.c **** 	
 513:assembly_test.c **** 	// register device descriptors
 514:assembly_test.c **** 	USBRegisterDescriptors(abDescriptors);
 515:assembly_test.c **** 
 516:assembly_test.c **** 	// override standard request handler
 517:assembly_test.c **** 	USBRegisterRequestHandler(REQTYPE_TYPE_VENDOR, usb_vendor_request_handler, abVendorReqData);
 518:assembly_test.c **** 
 519:assembly_test.c **** 	// register endpoints
 520:assembly_test.c **** 	//USBHwRegisterEPIntHandler(BULK_IN_EP, usb_bulk_in_handler);
 521:assembly_test.c **** 	//USBHwRegisterEPIntHandler(BULK_OUT_EP, usb_bulk_out_handler);
 522:assembly_test.c **** 
 523:assembly_test.c **** 	// enable USB interrupts
 524:assembly_test.c **** 	//ISER0 |= ISER0_ISE_USB;
 525:assembly_test.c **** 	
 526:assembly_test.c **** 	// connect to bus
 527:assembly_test.c **** 	USBHwConnect(TRUE);
 528:assembly_test.c **** 
 529:assembly_test.c **** 	return 0;
 530:assembly_test.c **** }
 531:assembly_test.c **** 
 532:assembly_test.c **** static void clkn_init()
 533:assembly_test.c **** {
 534:assembly_test.c **** 	/*
 535:assembly_test.c **** 	 * Because these are reset defaults, we're assuming TIMER0 is powered on
 536:assembly_test.c **** 	 * and in timer mode.  The TIMER0 peripheral clock should have been set to
 537:assembly_test.c **** 	 * cclk/2 (50 MHz) by clock_start().
 538:assembly_test.c **** 	 */
 539:assembly_test.c **** 
 540:assembly_test.c **** 	/* stop and reset the timer to zero */
 541:assembly_test.c **** 	T0TCR = TCR_Counter_Reset;
 542:assembly_test.c **** 	clkn_high = 0;
 543:assembly_test.c **** 
 544:assembly_test.c **** 	/*
 545:assembly_test.c **** 	 * The peripheral clock has a period of 20ns.  5 pclk periods makes one
 546:assembly_test.c **** 	 * CLK100NS period (100ns).  CLK100NS resets every 2^15 * 10^5 (3276800000)
ARM GAS  /tmp/cciSTofK.s 			page 11


 547:assembly_test.c **** 	 * steps, roughly 5.5 minutes.
 548:assembly_test.c **** 	 */
 549:assembly_test.c **** 	T0PR = 4;
 550:assembly_test.c **** 	T0MR0 = 3276799999;
 551:assembly_test.c **** 	T0MCR = TMCR_MR0R | TMCR_MR0I;
 552:assembly_test.c **** 	ISER0 |= ISER0_ISE_TIMER0;
 553:assembly_test.c **** 
 554:assembly_test.c **** 	/* start timer */
 555:assembly_test.c **** 	T0TCR = TCR_Counter_Enable;
 556:assembly_test.c **** }
 557:assembly_test.c **** 
 558:assembly_test.c **** /* clkn_high is incremented each time CLK100NS rolls over */
 559:assembly_test.c **** void TIMER0_IRQHandler()
 560:assembly_test.c **** {
 561:assembly_test.c **** 	if (T0IR & TIR_MR0_Interrupt) {
 562:assembly_test.c **** 		++clkn_high;
 563:assembly_test.c **** 		T0IR |= TIR_MR0_Interrupt;
 564:assembly_test.c **** 	}
 565:assembly_test.c **** }
 566:assembly_test.c **** 
 567:assembly_test.c **** static void dma_init()
 568:assembly_test.c **** {
  26              		.loc 1 568 1 view -0
  27              		.cfi_startproc
  28              		@ args = 0, pretend = 0, frame = 0
  29              		@ frame_needed = 0, uses_anonymous_args = 0
  30 0000 10B5     		push	{r4, lr}
  31              		.cfi_def_cfa_offset 8
  32              		.cfi_offset 4, -8
  33              		.cfi_offset 14, -4
 569:assembly_test.c **** 	/* power up GPDMA controller */
 570:assembly_test.c **** 	PCONP |= PCONP_PCGPDMA;
  34              		.loc 1 570 2 view .LVU1
  35              		.loc 1 570 8 is_stmt 0 view .LVU2
  36 0002 224A     		ldr	r2, .L5
 571:assembly_test.c **** 
 572:assembly_test.c **** 	/* zero out channel configs and clear interrupts */
 573:assembly_test.c **** 	DMACC0Config = 0;
  37              		.loc 1 573 15 view .LVU3
  38 0004 2249     		ldr	r1, .L5+4
 570:assembly_test.c **** 
  39              		.loc 1 570 8 view .LVU4
  40 0006 1368     		ldr	r3, [r2]
 574:assembly_test.c **** 	DMACC1Config = 0;
 575:assembly_test.c **** 	DMACC2Config = 0;
 576:assembly_test.c **** 	DMACC3Config = 0;
 577:assembly_test.c **** 	DMACC4Config = 0;
 578:assembly_test.c **** 	DMACC5Config = 0;
 579:assembly_test.c **** 	DMACC6Config = 0;
 580:assembly_test.c **** 	DMACC7Config = 0;
 581:assembly_test.c **** 	DMACIntTCClear = 0xFF;
 582:assembly_test.c **** 	DMACIntErrClr = 0xFF;
 583:assembly_test.c **** 
 584:assembly_test.c **** 	/* DMA linked lists */
 585:assembly_test.c **** 	rx_dma_lli1.src = (u32)&(DIO_SSP_DR);
  41              		.loc 1 585 18 view .LVU5
  42 0008 224C     		ldr	r4, .L5+8
ARM GAS  /tmp/cciSTofK.s 			page 12


 570:assembly_test.c **** 
  43              		.loc 1 570 8 view .LVU6
  44 000a 43F00053 		orr	r3, r3, #536870912
  45 000e 1360     		str	r3, [r2]
 573:assembly_test.c **** 	DMACC1Config = 0;
  46              		.loc 1 573 2 is_stmt 1 view .LVU7
 573:assembly_test.c **** 	DMACC1Config = 0;
  47              		.loc 1 573 15 is_stmt 0 view .LVU8
  48 0010 0023     		movs	r3, #0
 574:assembly_test.c **** 	DMACC1Config = 0;
  49              		.loc 1 574 15 view .LVU9
  50 0012 214A     		ldr	r2, .L5+12
 573:assembly_test.c **** 	DMACC1Config = 0;
  51              		.loc 1 573 15 view .LVU10
  52 0014 0B60     		str	r3, [r1]
 574:assembly_test.c **** 	DMACC1Config = 0;
  53              		.loc 1 574 2 is_stmt 1 view .LVU11
 574:assembly_test.c **** 	DMACC1Config = 0;
  54              		.loc 1 574 15 is_stmt 0 view .LVU12
  55 0016 1360     		str	r3, [r2]
 575:assembly_test.c **** 	DMACC3Config = 0;
  56              		.loc 1 575 2 is_stmt 1 view .LVU13
 575:assembly_test.c **** 	DMACC3Config = 0;
  57              		.loc 1 575 15 is_stmt 0 view .LVU14
  58 0018 1362     		str	r3, [r2, #32]
 576:assembly_test.c **** 	DMACC4Config = 0;
  59              		.loc 1 576 2 is_stmt 1 view .LVU15
 576:assembly_test.c **** 	DMACC4Config = 0;
  60              		.loc 1 576 15 is_stmt 0 view .LVU16
  61 001a 1364     		str	r3, [r2, #64]
 577:assembly_test.c **** 	DMACC5Config = 0;
  62              		.loc 1 577 2 is_stmt 1 view .LVU17
 577:assembly_test.c **** 	DMACC5Config = 0;
  63              		.loc 1 577 15 is_stmt 0 view .LVU18
  64 001c 1366     		str	r3, [r2, #96]
 578:assembly_test.c **** 	DMACC6Config = 0;
  65              		.loc 1 578 2 is_stmt 1 view .LVU19
 578:assembly_test.c **** 	DMACC6Config = 0;
  66              		.loc 1 578 15 is_stmt 0 view .LVU20
  67 001e C2F88030 		str	r3, [r2, #128]
 579:assembly_test.c **** 	DMACC7Config = 0;
  68              		.loc 1 579 2 is_stmt 1 view .LVU21
 579:assembly_test.c **** 	DMACC7Config = 0;
  69              		.loc 1 579 15 is_stmt 0 view .LVU22
  70 0022 C2F8A030 		str	r3, [r2, #160]
 580:assembly_test.c **** 	DMACIntTCClear = 0xFF;
  71              		.loc 1 580 2 is_stmt 1 view .LVU23
 580:assembly_test.c **** 	DMACIntTCClear = 0xFF;
  72              		.loc 1 580 15 is_stmt 0 view .LVU24
  73 0026 C2F8C030 		str	r3, [r2, #192]
 581:assembly_test.c **** 	DMACIntErrClr = 0xFF;
  74              		.loc 1 581 2 is_stmt 1 view .LVU25
 581:assembly_test.c **** 	DMACIntErrClr = 0xFF;
  75              		.loc 1 581 17 is_stmt 0 view .LVU26
  76 002a FF23     		movs	r3, #255
  77 002c A2F59472 		sub	r2, r2, #296
  78 0030 1360     		str	r3, [r2]
ARM GAS  /tmp/cciSTofK.s 			page 13


 582:assembly_test.c **** 
  79              		.loc 1 582 2 is_stmt 1 view .LVU27
 582:assembly_test.c **** 
  80              		.loc 1 582 16 is_stmt 0 view .LVU28
  81 0032 9360     		str	r3, [r2, #8]
  82              		.loc 1 585 2 is_stmt 1 view .LVU29
  83              		.loc 1 585 18 is_stmt 0 view .LVU30
  84 0034 194B     		ldr	r3, .L5+16
 586:assembly_test.c **** 	rx_dma_lli1.dest = (u32)&rxbuf1[0];
  85              		.loc 1 586 19 view .LVU31
  86 0036 1A4A     		ldr	r2, .L5+20
 585:assembly_test.c **** 	rx_dma_lli1.dest = (u32)&rxbuf1[0];
  87              		.loc 1 585 18 view .LVU32
  88 0038 1C60     		str	r4, [r3]
  89              		.loc 1 586 2 is_stmt 1 view .LVU33
  90              		.loc 1 586 19 is_stmt 0 view .LVU34
  91 003a 5A60     		str	r2, [r3, #4]
 587:assembly_test.c **** 	rx_dma_lli1.next_lli = (u32)&rx_dma_lli2;
  92              		.loc 1 587 2 is_stmt 1 view .LVU35
  93              		.loc 1 587 23 is_stmt 0 view .LVU36
  94 003c 194A     		ldr	r2, .L5+24
 588:assembly_test.c **** 	rx_dma_lli1.control = (DMA_SIZE) |
  95              		.loc 1 588 22 view .LVU37
  96 003e 1A48     		ldr	r0, .L5+28
 589:assembly_test.c **** 			(1 << 12) |        /* source burst size = 4 */
 590:assembly_test.c **** 			(1 << 15) |        /* destination burst size = 4 */
 591:assembly_test.c **** 			(0 << 18) |        /* source width 8 bits */
 592:assembly_test.c **** 			(0 << 21) |        /* destination width 8 bits */
 593:assembly_test.c **** 			DMACCxControl_DI | /* destination increment */
 594:assembly_test.c **** 			DMACCxControl_I;   /* terminal count interrupt enable */
 595:assembly_test.c **** 
 596:assembly_test.c **** 	rx_dma_lli2.src = (u32)&(DIO_SSP_DR);
  97              		.loc 1 596 18 view .LVU38
  98 0040 1460     		str	r4, [r2]
 597:assembly_test.c **** 	rx_dma_lli2.dest = (u32)&rxbuf2[0];
  99              		.loc 1 597 19 view .LVU39
 100 0042 1A4C     		ldr	r4, .L5+32
 588:assembly_test.c **** 	rx_dma_lli1.control = (DMA_SIZE) |
 101              		.loc 1 588 22 view .LVU40
 102 0044 D860     		str	r0, [r3, #12]
 598:assembly_test.c **** 	rx_dma_lli2.next_lli = (u32)&rx_dma_lli1;
 103              		.loc 1 598 23 view .LVU41
 104 0046 C2E90143 		strd	r4, r3, [r2, #4]
 599:assembly_test.c **** 	rx_dma_lli2.control = (DMA_SIZE) |
 105              		.loc 1 599 22 view .LVU42
 106 004a D060     		str	r0, [r2, #12]
 600:assembly_test.c **** 			(1 << 12) |        /* source burst size = 4 */
 601:assembly_test.c **** 			(1 << 15) |        /* destination burst size = 4 */
 602:assembly_test.c **** 			(0 << 18) |        /* source width 8 bits */
 603:assembly_test.c **** 			(0 << 21) |        /* destination width 8 bits */
 604:assembly_test.c **** 			DMACCxControl_DI | /* destination increment */
 605:assembly_test.c **** 			DMACCxControl_I;   /* terminal count interrupt enable */
 606:assembly_test.c **** 
 607:assembly_test.c **** 	/* disable DMA interrupts */
 608:assembly_test.c **** 	ISER0 &= ~ISER0_ISE_DMA;
 107              		.loc 1 608 8 view .LVU43
 108 004c 1848     		ldr	r0, .L5+36
ARM GAS  /tmp/cciSTofK.s 			page 14


 587:assembly_test.c **** 	rx_dma_lli1.control = (DMA_SIZE) |
 109              		.loc 1 587 23 view .LVU44
 110 004e 9A60     		str	r2, [r3, #8]
 588:assembly_test.c **** 			(1 << 12) |        /* source burst size = 4 */
 111              		.loc 1 588 2 is_stmt 1 view .LVU45
 596:assembly_test.c **** 	rx_dma_lli2.dest = (u32)&rxbuf2[0];
 112              		.loc 1 596 2 view .LVU46
 597:assembly_test.c **** 	rx_dma_lli2.next_lli = (u32)&rx_dma_lli1;
 113              		.loc 1 597 2 view .LVU47
 599:assembly_test.c **** 			(1 << 12) |        /* source burst size = 4 */
 114              		.loc 1 599 2 view .LVU48
 115              		.loc 1 608 2 view .LVU49
 116              		.loc 1 608 8 is_stmt 0 view .LVU50
 117 0050 0268     		ldr	r2, [r0]
 118 0052 22F08062 		bic	r2, r2, #67108864
 119 0056 0260     		str	r2, [r0]
 609:assembly_test.c **** 
 610:assembly_test.c **** 	/* enable DMA globally */
 611:assembly_test.c **** 	DMACConfig = DMACConfig_E;
 120              		.loc 1 611 2 is_stmt 1 view .LVU51
 121              		.loc 1 611 13 is_stmt 0 view .LVU52
 122 0058 0120     		movs	r0, #1
 123 005a 164A     		ldr	r2, .L5+40
 124 005c 1060     		str	r0, [r2]
 612:assembly_test.c **** 	while (!(DMACConfig & DMACConfig_E));
 125              		.loc 1 612 2 is_stmt 1 view .LVU53
 126              	.L2:
 127              		.loc 1 612 38 discriminator 1 view .LVU54
 128              		.loc 1 612 8 discriminator 1 view .LVU55
 129              		.loc 1 612 11 is_stmt 0 discriminator 1 view .LVU56
 130 005e 1068     		ldr	r0, [r2]
 131              		.loc 1 612 8 discriminator 1 view .LVU57
 132 0060 C007     		lsls	r0, r0, #31
 133 0062 FCD5     		bpl	.L2
 613:assembly_test.c **** 
 614:assembly_test.c **** 	/* configure DMA channel 1 */
 615:assembly_test.c **** 	DMACC0SrcAddr = rx_dma_lli1.src;
 134              		.loc 1 615 2 is_stmt 1 view .LVU58
 135              		.loc 1 615 29 is_stmt 0 view .LVU59
 136 0064 1868     		ldr	r0, [r3]
 137              		.loc 1 615 16 view .LVU60
 138 0066 144A     		ldr	r2, .L5+44
 139 0068 1060     		str	r0, [r2]
 616:assembly_test.c **** 	DMACC0DestAddr = rx_dma_lli1.dest;
 140              		.loc 1 616 2 is_stmt 1 view .LVU61
 141              		.loc 1 616 30 is_stmt 0 view .LVU62
 142 006a 5868     		ldr	r0, [r3, #4]
 143              		.loc 1 616 17 view .LVU63
 144 006c 5060     		str	r0, [r2, #4]
 617:assembly_test.c **** 	DMACC0LLI = rx_dma_lli1.next_lli;
 145              		.loc 1 617 2 is_stmt 1 view .LVU64
 146              		.loc 1 617 25 is_stmt 0 view .LVU65
 147 006e 9868     		ldr	r0, [r3, #8]
 148              		.loc 1 617 12 view .LVU66
 149 0070 9060     		str	r0, [r2, #8]
 618:assembly_test.c **** 	DMACC0Control = rx_dma_lli1.control;
 150              		.loc 1 618 2 is_stmt 1 view .LVU67
ARM GAS  /tmp/cciSTofK.s 			page 15


 151              		.loc 1 618 29 is_stmt 0 view .LVU68
 152 0072 DA68     		ldr	r2, [r3, #12]
 153              		.loc 1 618 16 view .LVU69
 154 0074 114B     		ldr	r3, .L5+48
 155 0076 1A60     		str	r2, [r3]
 619:assembly_test.c **** 	DMACC0Config =
 156              		.loc 1 619 2 is_stmt 1 view .LVU70
 157              		.loc 1 619 15 is_stmt 0 view .LVU71
 158 0078 4DF20603 		movw	r3, #53254
 159 007c 0B60     		str	r3, [r1]
 620:assembly_test.c **** 			DIO_SSP_SRC |
 621:assembly_test.c **** 			(0x2 << 11) |           /* peripheral to memory */
 622:assembly_test.c **** 			DMACCxConfig_IE |       /* allow error interrupts */
 623:assembly_test.c **** 			DMACCxConfig_ITC;       /* allow terminal count interrupts */
 624:assembly_test.c **** 
 625:assembly_test.c **** 	/* reset interrupt counters */
 626:assembly_test.c **** 	rx_tc = 0;
 160              		.loc 1 626 2 is_stmt 1 view .LVU72
 161              		.loc 1 626 8 is_stmt 0 view .LVU73
 162 007e 0023     		movs	r3, #0
 163 0080 0F4A     		ldr	r2, .L5+52
 164 0082 1360     		str	r3, [r2]
 627:assembly_test.c **** 	rx_err = 0;
 165              		.loc 1 627 2 is_stmt 1 view .LVU74
 166              		.loc 1 627 9 is_stmt 0 view .LVU75
 167 0084 0F4A     		ldr	r2, .L5+56
 168 0086 1360     		str	r3, [r2]
 628:assembly_test.c **** }
 169              		.loc 1 628 1 view .LVU76
 170 0088 10BD     		pop	{r4, pc}
 171              	.L6:
 172 008a 00BF     		.align	2
 173              	.L5:
 174 008c C4C00F40 		.word	1074774212
 175 0090 10410050 		.word	1342193936
 176 0094 08000340 		.word	1073938440
 177 0098 30410050 		.word	1342193968
 178 009c 00000000 		.word	rx_dma_lli1
 179 00a0 00000000 		.word	rxbuf1
 180 00a4 00000000 		.word	rx_dma_lli2
 181 00a8 32900088 		.word	-2013229006
 182 00ac 00000000 		.word	rxbuf2
 183 00b0 00E100E0 		.word	-536813312
 184 00b4 30400050 		.word	1342193712
 185 00b8 00410050 		.word	1342193920
 186 00bc 0C410050 		.word	1342193932
 187 00c0 00000000 		.word	rx_tc
 188 00c4 00000000 		.word	rx_err
 189              		.cfi_endproc
 190              	.LFE9:
 192              		.section	.text.dio_ssp_start,"ax",%progbits
 193              		.align	1
 194              		.syntax unified
 195              		.thumb
 196              		.thumb_func
 197              		.fpu softvfp
 199              	dio_ssp_start:
ARM GAS  /tmp/cciSTofK.s 			page 16


 200              	.LFB11:
 629:assembly_test.c **** 
 630:assembly_test.c **** void DMA_IRQHandler()
 631:assembly_test.c **** {
 632:assembly_test.c **** 	/* interrupt on channel 0 */
 633:assembly_test.c **** 	if (DMACIntStat & (1 << 0)) {
 634:assembly_test.c **** 		if (DMACIntTCStat & (1 << 0)) {
 635:assembly_test.c **** 			DMACIntTCClear |= (1 << 0);
 636:assembly_test.c **** 			++rx_tc;
 637:assembly_test.c **** 		}
 638:assembly_test.c **** 		if (DMACIntErrStat & (1 << 0)) {
 639:assembly_test.c **** 			DMACIntErrClr |= (1 << 0);
 640:assembly_test.c **** 			++rx_err;
 641:assembly_test.c **** 		}
 642:assembly_test.c **** 	}
 643:assembly_test.c **** }
 644:assembly_test.c **** 
 645:assembly_test.c **** static void dio_ssp_start()
 646:assembly_test.c **** {
 201              		.loc 1 646 1 is_stmt 1 view -0
 202              		.cfi_startproc
 203              		@ args = 0, pretend = 0, frame = 0
 204              		@ frame_needed = 0, uses_anonymous_args = 0
 205              		@ link register save eliminated.
 647:assembly_test.c **** 	/* make sure the (active low) slave select signal is not active */
 648:assembly_test.c **** 	DIO_SSEL_SET;
 206              		.loc 1 648 2 view .LVU78
 207 0000 4FF08052 		mov	r2, #268435456
 208 0004 0C4B     		ldr	r3, .L8
 649:assembly_test.c **** 
 650:assembly_test.c **** 	/* enable rx DMA on DIO_SSP */
 651:assembly_test.c **** 	DIO_SSP_DMACR |= SSPDMACR_RXDMAE;
 209              		.loc 1 651 16 is_stmt 0 view .LVU79
 210 0006 0D49     		ldr	r1, .L8+4
 648:assembly_test.c **** 
 211              		.loc 1 648 2 view .LVU80
 212 0008 1A60     		str	r2, [r3]
 213              		.loc 1 651 2 is_stmt 1 view .LVU81
 214              		.loc 1 651 16 is_stmt 0 view .LVU82
 215 000a 0B68     		ldr	r3, [r1]
 216 000c 43F00103 		orr	r3, r3, #1
 217 0010 0B60     		str	r3, [r1]
 652:assembly_test.c **** 	DIO_SSP_CR1 |= SSPCR1_SSE;
 218              		.loc 1 652 2 is_stmt 1 view .LVU83
 219              		.loc 1 652 14 is_stmt 0 view .LVU84
 220 0012 51F8203C 		ldr	r3, [r1, #-32]
 221 0016 43F00203 		orr	r3, r3, #2
 222 001a 41F8203C 		str	r3, [r1, #-32]
 653:assembly_test.c **** 	
 654:assembly_test.c **** 	/* enable DMA */
 655:assembly_test.c **** 	DMACC0Config |= DMACCxConfig_E;
 223              		.loc 1 655 2 is_stmt 1 view .LVU85
 224              		.loc 1 655 15 is_stmt 0 view .LVU86
 225 001e 0849     		ldr	r1, .L8+8
 226 0020 0B68     		ldr	r3, [r1]
 227 0022 43F00103 		orr	r3, r3, #1
 228 0026 0B60     		str	r3, [r1]
ARM GAS  /tmp/cciSTofK.s 			page 17


 656:assembly_test.c **** 	ISER0 |= ISER0_ISE_DMA;
 229              		.loc 1 656 2 is_stmt 1 view .LVU87
 230              		.loc 1 656 8 is_stmt 0 view .LVU88
 231 0028 0649     		ldr	r1, .L8+12
 232 002a 0B68     		ldr	r3, [r1]
 233 002c 43F08063 		orr	r3, r3, #67108864
 234 0030 0B60     		str	r3, [r1]
 657:assembly_test.c **** 
 658:assembly_test.c **** 	/* activate slave select pin */
 659:assembly_test.c **** 	DIO_SSEL_CLR;
 235              		.loc 1 659 2 is_stmt 1 view .LVU89
 236 0032 054B     		ldr	r3, .L8+16
 237 0034 1A60     		str	r2, [r3]
 660:assembly_test.c **** }
 238              		.loc 1 660 1 is_stmt 0 view .LVU90
 239 0036 7047     		bx	lr
 240              	.L9:
 241              		.align	2
 242              	.L8:
 243 0038 98C00920 		.word	537510040
 244 003c 24000340 		.word	1073938468
 245 0040 10410050 		.word	1342193936
 246 0044 00E100E0 		.word	-536813312
 247 0048 9CC00920 		.word	537510044
 248              		.cfi_endproc
 249              	.LFE11:
 251              		.section	.rodata.str1.1,"aMS",%progbits,1
 252              	.LC1:
 253 0000 32303230 		.ascii	"2020-12-R1\000"
 253      2D31322D 
 253      523100
 254              		.section	.text.usb_vendor_request_handler,"ax",%progbits
 255              		.align	1
 256              		.syntax unified
 257              		.thumb
 258              		.thumb_func
 259              		.fpu softvfp
 261              	usb_vendor_request_handler:
 262              	.LVL0:
 263              	.LFB5:
 276:assembly_test.c **** 	u8 *pbData = *ppbData;
 264              		.loc 1 276 1 is_stmt 1 view -0
 265              		.cfi_startproc
 266              		@ args = 0, pretend = 0, frame = 40
 267              		@ frame_needed = 0, uses_anonymous_args = 0
 276:assembly_test.c **** 	u8 *pbData = *ppbData;
 268              		.loc 1 276 1 is_stmt 0 view .LVU92
 269 0000 70B5     		push	{r4, r5, r6, lr}
 270              		.cfi_def_cfa_offset 16
 271              		.cfi_offset 4, -16
 272              		.cfi_offset 5, -12
 273              		.cfi_offset 6, -8
 274              		.cfi_offset 14, -4
 275 0002 8AB0     		sub	sp, sp, #40
 276              		.cfi_def_cfa_offset 56
 277:assembly_test.c **** 	u32 command[5];
 277              		.loc 1 277 2 is_stmt 1 view .LVU93
ARM GAS  /tmp/cciSTofK.s 			page 18


 278 0004 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
 276:assembly_test.c **** 	u8 *pbData = *ppbData;
 279              		.loc 1 276 1 is_stmt 0 view .LVU94
 280 0006 0C46     		mov	r4, r1
 277:assembly_test.c **** 	u32 command[5];
 281              		.loc 1 277 6 view .LVU95
 282 0008 1568     		ldr	r5, [r2]
 283              	.LVL1:
 278:assembly_test.c **** 	u32 result[5];
 284              		.loc 1 278 2 is_stmt 1 view .LVU96
 279:assembly_test.c **** 	u8 length; // string length
 285              		.loc 1 279 2 view .LVU97
 280:assembly_test.c **** 
 286              		.loc 1 280 2 view .LVU98
 282:assembly_test.c **** 
 287              		.loc 1 282 2 view .LVU99
 288 000a 212B     		cmp	r3, #33
 289 000c 00F24181 		bhi	.L60
 290 0010 DFE813F0 		tbh	[pc, r3, lsl #1]
 291              	.LVL2:
 292              	.L13:
 293 0014 2C00     		.2byte	(.L65-.L13)/2
 294 0016 2200     		.2byte	(.L43-.L13)/2
 295 0018 3F01     		.2byte	(.L60-.L13)/2
 296 001a 2E00     		.2byte	(.L42-.L13)/2
 297 001c 3400     		.2byte	(.L41-.L13)/2
 298 001e 3B00     		.2byte	(.L40-.L13)/2
 299 0020 4000     		.2byte	(.L39-.L13)/2
 300 0022 4300     		.2byte	(.L38-.L13)/2
 301 0024 4800     		.2byte	(.L37-.L13)/2
 302 0026 4C00     		.2byte	(.L36-.L13)/2
 303 0028 5100     		.2byte	(.L35-.L13)/2
 304 002a E900     		.2byte	(.L34-.L13)/2
 305 002c F200     		.2byte	(.L33-.L13)/2
 306 002e 1501     		.2byte	(.L68-.L13)/2
 307 0030 6D00     		.2byte	(.L31-.L13)/2
 308 0032 5700     		.2byte	(.L30-.L13)/2
 309 0034 A500     		.2byte	(.L29-.L13)/2
 310 0036 AA00     		.2byte	(.L28-.L13)/2
 311 0038 AF00     		.2byte	(.L27-.L13)/2
 312 003a B100     		.2byte	(.L26-.L13)/2
 313 003c B700     		.2byte	(.L25-.L13)/2
 314 003e DF00     		.2byte	(.L24-.L13)/2
 315 0040 E200     		.2byte	(.L23-.L13)/2
 316 0042 E500     		.2byte	(.L22-.L13)/2
 317 0044 0A01     		.2byte	(.L21-.L13)/2
 318 0046 1201     		.2byte	(.L20-.L13)/2
 319 0048 3F01     		.2byte	(.L60-.L13)/2
 320 004a 1801     		.2byte	(.L19-.L13)/2
 321 004c BB00     		.2byte	(.L18-.L13)/2
 322 004e C500     		.2byte	(.L17-.L13)/2
 323 0050 D100     		.2byte	(.L16-.L13)/2
 324 0052 CE00     		.2byte	(.L15-.L13)/2
 325 0054 D400     		.2byte	(.L14-.L13)/2
 326 0056 2F01     		.2byte	(.L12-.L13)/2
 327              		.p2align 1
 328              	.L43:
ARM GAS  /tmp/cciSTofK.s 			page 19


 289:assembly_test.c **** 		if (rx_pkts == 0)
 329              		.loc 1 289 3 view .LVU100
 289:assembly_test.c **** 		if (rx_pkts == 0)
 330              		.loc 1 289 11 is_stmt 0 view .LVU101
 331 0058 8F4B     		ldr	r3, .L81
 289:assembly_test.c **** 		if (rx_pkts == 0)
 332              		.loc 1 289 20 view .LVU102
 333 005a 4288     		ldrh	r2, [r0, #2]
 289:assembly_test.c **** 		if (rx_pkts == 0)
 334              		.loc 1 289 11 view .LVU103
 335 005c 1968     		ldr	r1, [r3]
 336              	.LVL3:
 289:assembly_test.c **** 		if (rx_pkts == 0)
 337              		.loc 1 289 11 view .LVU104
 338 005e 0A44     		add	r2, r2, r1
 339 0060 1A60     		str	r2, [r3]
 290:assembly_test.c **** 			rx_pkts = 0xFFFFFFFF;
 340              		.loc 1 290 3 is_stmt 1 view .LVU105
 290:assembly_test.c **** 			rx_pkts = 0xFFFFFFFF;
 341              		.loc 1 290 15 is_stmt 0 view .LVU106
 342 0062 1A68     		ldr	r2, [r3]
 290:assembly_test.c **** 			rx_pkts = 0xFFFFFFFF;
 343              		.loc 1 290 6 view .LVU107
 344 0064 12B9     		cbnz	r2, .L65
 291:assembly_test.c **** 		*piLen = 0;
 345              		.loc 1 291 4 is_stmt 1 view .LVU108
 291:assembly_test.c **** 		*piLen = 0;
 346              		.loc 1 291 12 is_stmt 0 view .LVU109
 347 0066 4FF0FF32 		mov	r2, #-1
 348 006a 1A60     		str	r2, [r3]
 292:assembly_test.c **** 		break;
 349              		.loc 1 292 3 is_stmt 1 view .LVU110
 350              	.LVL4:
 351              	.L65:
 487:assembly_test.c **** 		break;
 352              		.loc 1 487 3 view .LVU111
 487:assembly_test.c **** 		break;
 353              		.loc 1 487 10 is_stmt 0 view .LVU112
 354 006c 0023     		movs	r3, #0
 355 006e 74E0     		b	.L67
 356              	.LVL5:
 357              	.L42:
 296:assembly_test.c **** 		*piLen = 1;
 358              		.loc 1 296 3 is_stmt 1 view .LVU113
 296:assembly_test.c **** 		*piLen = 1;
 359              		.loc 1 296 16 is_stmt 0 view .LVU114
 360 0070 8A4B     		ldr	r3, .L81+4
 361 0072 1B68     		ldr	r3, [r3]
 296:assembly_test.c **** 		*piLen = 1;
 362              		.loc 1 296 28 view .LVU115
 363 0074 C3F34003 		ubfx	r3, r3, #1, #1
 364              	.L63:
 448:assembly_test.c **** 		*piLen = 1;
 365              		.loc 1 448 13 view .LVU116
 366 0078 2B70     		strb	r3, [r5]
 367 007a 8CE0     		b	.L62
 368              	.L41:
ARM GAS  /tmp/cciSTofK.s 			page 20


 301:assembly_test.c **** 			USRLED_SET;
 369              		.loc 1 301 3 is_stmt 1 view .LVU117
 370 007c 0223     		movs	r3, #2
 301:assembly_test.c **** 			USRLED_SET;
 371              		.loc 1 301 6 is_stmt 0 view .LVU118
 372 007e 4288     		ldrh	r2, [r0, #2]
 373              	.L76:
 337:assembly_test.c **** 			CC1V8_SET;
 374              		.loc 1 337 6 view .LVU119
 375 0080 EAB1     		cbz	r2, .L49
 338:assembly_test.c **** 		else
 376              		.loc 1 338 4 is_stmt 1 view .LVU120
 377 0082 874A     		ldr	r2, .L81+8
 378              	.L66:
 403:assembly_test.c **** 		break;
 379              		.loc 1 403 4 is_stmt 0 view .LVU121
 380 0084 1360     		str	r3, [r2]
 381              	.LVL6:
 382              	.L61:
 500:assembly_test.c **** 
 383              		.loc 1 500 3 is_stmt 1 view .LVU122
 505:assembly_test.c **** }
 384              		.loc 1 505 9 is_stmt 0 view .LVU123
 385 0086 0120     		movs	r0, #1
 500:assembly_test.c **** 
 386              		.loc 1 500 3 view .LVU124
 387 0088 87E0     		b	.L10
 388              	.LVL7:
 389              	.L40:
 308:assembly_test.c **** 		*piLen = 1;
 390              		.loc 1 308 3 is_stmt 1 view .LVU125
 308:assembly_test.c **** 		*piLen = 1;
 391              		.loc 1 308 16 is_stmt 0 view .LVU126
 392 008a 844B     		ldr	r3, .L81+4
 393 008c 1B68     		ldr	r3, [r3]
 308:assembly_test.c **** 		*piLen = 1;
 394              		.loc 1 308 27 view .LVU127
 395 008e C3F30013 		ubfx	r3, r3, #4, #1
 396 0092 F1E7     		b	.L63
 397              	.L39:
 313:assembly_test.c **** 			RXLED_SET;
 398              		.loc 1 313 3 is_stmt 1 view .LVU128
 399 0094 1023     		movs	r3, #16
 313:assembly_test.c **** 			RXLED_SET;
 400              		.loc 1 313 6 is_stmt 0 view .LVU129
 401 0096 4288     		ldrh	r2, [r0, #2]
 402 0098 F2E7     		b	.L76
 403              	.L38:
 320:assembly_test.c **** 		*piLen = 1;
 404              		.loc 1 320 3 is_stmt 1 view .LVU130
 320:assembly_test.c **** 		*piLen = 1;
 405              		.loc 1 320 16 is_stmt 0 view .LVU131
 406 009a 804B     		ldr	r3, .L81+4
 407              	.L64:
 395:assembly_test.c **** 		*piLen = 1;
 408              		.loc 1 395 16 view .LVU132
 409 009c 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/cciSTofK.s 			page 21


 395:assembly_test.c **** 		*piLen = 1;
 410              		.loc 1 395 25 view .LVU133
 411 009e C3F30023 		ubfx	r3, r3, #8, #1
 412 00a2 E9E7     		b	.L63
 413              	.L37:
 325:assembly_test.c **** 			TXLED_SET;
 414              		.loc 1 325 3 is_stmt 1 view .LVU134
 415 00a4 4FF48073 		mov	r3, #256
 325:assembly_test.c **** 			TXLED_SET;
 416              		.loc 1 325 6 is_stmt 0 view .LVU135
 417 00a8 4288     		ldrh	r2, [r0, #2]
 418 00aa E9E7     		b	.L76
 419              	.L36:
 332:assembly_test.c **** 		*piLen = 1;
 420              		.loc 1 332 3 is_stmt 1 view .LVU136
 332:assembly_test.c **** 		*piLen = 1;
 421              		.loc 1 332 16 is_stmt 0 view .LVU137
 422 00ac 7B4B     		ldr	r3, .L81+4
 423 00ae 1B68     		ldr	r3, [r3]
 332:assembly_test.c **** 		*piLen = 1;
 424              		.loc 1 332 27 view .LVU138
 425 00b0 C3F34023 		ubfx	r3, r3, #9, #1
 426 00b4 E0E7     		b	.L63
 427              	.L35:
 337:assembly_test.c **** 			CC1V8_SET;
 428              		.loc 1 337 3 is_stmt 1 view .LVU139
 429 00b6 4FF40073 		mov	r3, #512
 337:assembly_test.c **** 			CC1V8_SET;
 430              		.loc 1 337 6 is_stmt 0 view .LVU140
 431 00ba 4288     		ldrh	r2, [r0, #2]
 432 00bc E0E7     		b	.L76
 433              	.L49:
 340:assembly_test.c **** 		break;
 434              		.loc 1 340 4 is_stmt 1 view .LVU141
 435 00be 794A     		ldr	r2, .L81+12
 436 00c0 E0E7     		b	.L66
 437              	.L30:
 344:assembly_test.c **** 		iap_entry(command, result);
 438              		.loc 1 344 3 view .LVU142
 344:assembly_test.c **** 		iap_entry(command, result);
 439              		.loc 1 344 14 is_stmt 0 view .LVU143
 440 00c2 3623     		movs	r3, #54
 441 00c4 0093     		str	r3, [sp]
 345:assembly_test.c **** 		pbData[0] = result[0] & 0xFF; /* status */
 442              		.loc 1 345 3 is_stmt 1 view .LVU144
 443 00c6 784B     		ldr	r3, .L81+16
 444 00c8 6846     		mov	r0, sp
 445              	.LVL8:
 345:assembly_test.c **** 		pbData[0] = result[0] & 0xFF; /* status */
 446              		.loc 1 345 3 is_stmt 0 view .LVU145
 447 00ca 1B68     		ldr	r3, [r3]
 448 00cc 05A9     		add	r1, sp, #20
 449              	.LVL9:
 345:assembly_test.c **** 		pbData[0] = result[0] & 0xFF; /* status */
 450              		.loc 1 345 3 view .LVU146
 451 00ce 9847     		blx	r3
 452              	.LVL10:
ARM GAS  /tmp/cciSTofK.s 			page 22


 346:assembly_test.c **** 		pbData[1] = result[1] & 0xFF;
 453              		.loc 1 346 3 is_stmt 1 view .LVU147
 346:assembly_test.c **** 		pbData[1] = result[1] & 0xFF;
 454              		.loc 1 346 13 is_stmt 0 view .LVU148
 455 00d0 059B     		ldr	r3, [sp, #20]
 456 00d2 2B70     		strb	r3, [r5]
 347:assembly_test.c **** 		pbData[2] = (result[1] >> 8) & 0xFF;
 457              		.loc 1 347 3 is_stmt 1 view .LVU149
 347:assembly_test.c **** 		pbData[2] = (result[1] >> 8) & 0xFF;
 458              		.loc 1 347 13 is_stmt 0 view .LVU150
 459 00d4 069B     		ldr	r3, [sp, #24]
 460 00d6 6B70     		strb	r3, [r5, #1]
 348:assembly_test.c **** 		pbData[3] = (result[1] >> 16) & 0xFF;
 461              		.loc 1 348 3 is_stmt 1 view .LVU151
 348:assembly_test.c **** 		pbData[3] = (result[1] >> 16) & 0xFF;
 462              		.loc 1 348 26 is_stmt 0 view .LVU152
 463 00d8 069B     		ldr	r3, [sp, #24]
 464 00da 1B0A     		lsrs	r3, r3, #8
 348:assembly_test.c **** 		pbData[3] = (result[1] >> 16) & 0xFF;
 465              		.loc 1 348 13 view .LVU153
 466 00dc AB70     		strb	r3, [r5, #2]
 349:assembly_test.c **** 		pbData[4] = (result[1] >> 24) & 0xFF;
 467              		.loc 1 349 3 is_stmt 1 view .LVU154
 349:assembly_test.c **** 		pbData[4] = (result[1] >> 24) & 0xFF;
 468              		.loc 1 349 26 is_stmt 0 view .LVU155
 469 00de BDF81A30 		ldrh	r3, [sp, #26]
 349:assembly_test.c **** 		pbData[4] = (result[1] >> 24) & 0xFF;
 470              		.loc 1 349 13 view .LVU156
 471 00e2 EB70     		strb	r3, [r5, #3]
 350:assembly_test.c **** 		*piLen = 5;
 472              		.loc 1 350 3 is_stmt 1 view .LVU157
 350:assembly_test.c **** 		*piLen = 5;
 473              		.loc 1 350 26 is_stmt 0 view .LVU158
 474 00e4 9DF81B30 		ldrb	r3, [sp, #27]	@ zero_extendqisi2
 475              	.L74:
 439:assembly_test.c **** 		*piLen = 5;
 476              		.loc 1 439 13 view .LVU159
 477 00e8 2B71     		strb	r3, [r5, #4]
 440:assembly_test.c **** 		break;
 478              		.loc 1 440 3 is_stmt 1 view .LVU160
 440:assembly_test.c **** 		break;
 479              		.loc 1 440 10 is_stmt 0 view .LVU161
 480 00ea 0523     		movs	r3, #5
 481 00ec 35E0     		b	.L67
 482              	.LVL11:
 483              	.L31:
 359:assembly_test.c **** 		iap_entry(command, result);
 484              		.loc 1 359 3 is_stmt 1 view .LVU162
 359:assembly_test.c **** 		iap_entry(command, result);
 485              		.loc 1 359 14 is_stmt 0 view .LVU163
 486 00ee 3A23     		movs	r3, #58
 487 00f0 0093     		str	r3, [sp]
 360:assembly_test.c **** 		pbData[0] = result[0] & 0xFF; /* status */
 488              		.loc 1 360 3 is_stmt 1 view .LVU164
 489 00f2 6D4B     		ldr	r3, .L81+16
 490 00f4 6846     		mov	r0, sp
 491              	.LVL12:
ARM GAS  /tmp/cciSTofK.s 			page 23


 360:assembly_test.c **** 		pbData[0] = result[0] & 0xFF; /* status */
 492              		.loc 1 360 3 is_stmt 0 view .LVU165
 493 00f6 1B68     		ldr	r3, [r3]
 494 00f8 05A9     		add	r1, sp, #20
 495              	.LVL13:
 360:assembly_test.c **** 		pbData[0] = result[0] & 0xFF; /* status */
 496              		.loc 1 360 3 view .LVU166
 497 00fa 9847     		blx	r3
 498              	.LVL14:
 361:assembly_test.c **** 		pbData[1] = result[1] & 0xFF;
 499              		.loc 1 361 3 is_stmt 1 view .LVU167
 361:assembly_test.c **** 		pbData[1] = result[1] & 0xFF;
 500              		.loc 1 361 13 is_stmt 0 view .LVU168
 501 00fc 059B     		ldr	r3, [sp, #20]
 502 00fe 2B70     		strb	r3, [r5]
 362:assembly_test.c **** 		pbData[2] = (result[1] >> 8) & 0xFF;
 503              		.loc 1 362 3 is_stmt 1 view .LVU169
 362:assembly_test.c **** 		pbData[2] = (result[1] >> 8) & 0xFF;
 504              		.loc 1 362 13 is_stmt 0 view .LVU170
 505 0100 069B     		ldr	r3, [sp, #24]
 506 0102 6B70     		strb	r3, [r5, #1]
 363:assembly_test.c **** 		pbData[3] = (result[1] >> 16) & 0xFF;
 507              		.loc 1 363 3 is_stmt 1 view .LVU171
 363:assembly_test.c **** 		pbData[3] = (result[1] >> 16) & 0xFF;
 508              		.loc 1 363 26 is_stmt 0 view .LVU172
 509 0104 069B     		ldr	r3, [sp, #24]
 510 0106 1B0A     		lsrs	r3, r3, #8
 363:assembly_test.c **** 		pbData[3] = (result[1] >> 16) & 0xFF;
 511              		.loc 1 363 13 view .LVU173
 512 0108 AB70     		strb	r3, [r5, #2]
 364:assembly_test.c **** 		pbData[4] = (result[1] >> 24) & 0xFF;
 513              		.loc 1 364 3 is_stmt 1 view .LVU174
 364:assembly_test.c **** 		pbData[4] = (result[1] >> 24) & 0xFF;
 514              		.loc 1 364 26 is_stmt 0 view .LVU175
 515 010a BDF81A30 		ldrh	r3, [sp, #26]
 364:assembly_test.c **** 		pbData[4] = (result[1] >> 24) & 0xFF;
 516              		.loc 1 364 13 view .LVU176
 517 010e EB70     		strb	r3, [r5, #3]
 365:assembly_test.c **** 		pbData[5] = result[2] & 0xFF;
 518              		.loc 1 365 3 is_stmt 1 view .LVU177
 365:assembly_test.c **** 		pbData[5] = result[2] & 0xFF;
 519              		.loc 1 365 26 is_stmt 0 view .LVU178
 520 0110 9DF81B30 		ldrb	r3, [sp, #27]	@ zero_extendqisi2
 365:assembly_test.c **** 		pbData[5] = result[2] & 0xFF;
 521              		.loc 1 365 13 view .LVU179
 522 0114 2B71     		strb	r3, [r5, #4]
 366:assembly_test.c **** 		pbData[6] = (result[2] >> 8) & 0xFF;
 523              		.loc 1 366 3 is_stmt 1 view .LVU180
 366:assembly_test.c **** 		pbData[6] = (result[2] >> 8) & 0xFF;
 524              		.loc 1 366 13 is_stmt 0 view .LVU181
 525 0116 079B     		ldr	r3, [sp, #28]
 526 0118 6B71     		strb	r3, [r5, #5]
 367:assembly_test.c **** 		pbData[7] = (result[2] >> 16) & 0xFF;
 527              		.loc 1 367 3 is_stmt 1 view .LVU182
 367:assembly_test.c **** 		pbData[7] = (result[2] >> 16) & 0xFF;
 528              		.loc 1 367 26 is_stmt 0 view .LVU183
 529 011a 079B     		ldr	r3, [sp, #28]
ARM GAS  /tmp/cciSTofK.s 			page 24


 530 011c 1B0A     		lsrs	r3, r3, #8
 367:assembly_test.c **** 		pbData[7] = (result[2] >> 16) & 0xFF;
 531              		.loc 1 367 13 view .LVU184
 532 011e AB71     		strb	r3, [r5, #6]
 368:assembly_test.c **** 		pbData[8] = (result[2] >> 24) & 0xFF;
 533              		.loc 1 368 3 is_stmt 1 view .LVU185
 368:assembly_test.c **** 		pbData[8] = (result[2] >> 24) & 0xFF;
 534              		.loc 1 368 26 is_stmt 0 view .LVU186
 535 0120 BDF81E30 		ldrh	r3, [sp, #30]
 368:assembly_test.c **** 		pbData[8] = (result[2] >> 24) & 0xFF;
 536              		.loc 1 368 13 view .LVU187
 537 0124 EB71     		strb	r3, [r5, #7]
 369:assembly_test.c **** 		pbData[9] = result[3] & 0xFF;
 538              		.loc 1 369 3 is_stmt 1 view .LVU188
 369:assembly_test.c **** 		pbData[9] = result[3] & 0xFF;
 539              		.loc 1 369 26 is_stmt 0 view .LVU189
 540 0126 9DF81F30 		ldrb	r3, [sp, #31]	@ zero_extendqisi2
 369:assembly_test.c **** 		pbData[9] = result[3] & 0xFF;
 541              		.loc 1 369 13 view .LVU190
 542 012a 2B72     		strb	r3, [r5, #8]
 370:assembly_test.c **** 		pbData[10] = (result[3] >> 8) & 0xFF;
 543              		.loc 1 370 3 is_stmt 1 view .LVU191
 370:assembly_test.c **** 		pbData[10] = (result[3] >> 8) & 0xFF;
 544              		.loc 1 370 13 is_stmt 0 view .LVU192
 545 012c 089B     		ldr	r3, [sp, #32]
 546 012e 6B72     		strb	r3, [r5, #9]
 371:assembly_test.c **** 		pbData[11] = (result[3] >> 16) & 0xFF;
 547              		.loc 1 371 3 is_stmt 1 view .LVU193
 371:assembly_test.c **** 		pbData[11] = (result[3] >> 16) & 0xFF;
 548              		.loc 1 371 27 is_stmt 0 view .LVU194
 549 0130 089B     		ldr	r3, [sp, #32]
 550 0132 1B0A     		lsrs	r3, r3, #8
 371:assembly_test.c **** 		pbData[11] = (result[3] >> 16) & 0xFF;
 551              		.loc 1 371 14 view .LVU195
 552 0134 AB72     		strb	r3, [r5, #10]
 372:assembly_test.c **** 		pbData[12] = (result[3] >> 24) & 0xFF;
 553              		.loc 1 372 3 is_stmt 1 view .LVU196
 372:assembly_test.c **** 		pbData[12] = (result[3] >> 24) & 0xFF;
 554              		.loc 1 372 27 is_stmt 0 view .LVU197
 555 0136 BDF82230 		ldrh	r3, [sp, #34]
 372:assembly_test.c **** 		pbData[12] = (result[3] >> 24) & 0xFF;
 556              		.loc 1 372 14 view .LVU198
 557 013a EB72     		strb	r3, [r5, #11]
 373:assembly_test.c **** 		pbData[13] = result[4] & 0xFF;
 558              		.loc 1 373 3 is_stmt 1 view .LVU199
 373:assembly_test.c **** 		pbData[13] = result[4] & 0xFF;
 559              		.loc 1 373 27 is_stmt 0 view .LVU200
 560 013c 9DF82330 		ldrb	r3, [sp, #35]	@ zero_extendqisi2
 373:assembly_test.c **** 		pbData[13] = result[4] & 0xFF;
 561              		.loc 1 373 14 view .LVU201
 562 0140 2B73     		strb	r3, [r5, #12]
 374:assembly_test.c **** 		pbData[14] = (result[4] >> 8) & 0xFF;
 563              		.loc 1 374 3 is_stmt 1 view .LVU202
 374:assembly_test.c **** 		pbData[14] = (result[4] >> 8) & 0xFF;
 564              		.loc 1 374 14 is_stmt 0 view .LVU203
 565 0142 099B     		ldr	r3, [sp, #36]
 566 0144 6B73     		strb	r3, [r5, #13]
ARM GAS  /tmp/cciSTofK.s 			page 25


 375:assembly_test.c **** 		pbData[15] = (result[4] >> 16) & 0xFF;
 567              		.loc 1 375 3 is_stmt 1 view .LVU204
 375:assembly_test.c **** 		pbData[15] = (result[4] >> 16) & 0xFF;
 568              		.loc 1 375 27 is_stmt 0 view .LVU205
 569 0146 099B     		ldr	r3, [sp, #36]
 570 0148 1B0A     		lsrs	r3, r3, #8
 375:assembly_test.c **** 		pbData[15] = (result[4] >> 16) & 0xFF;
 571              		.loc 1 375 14 view .LVU206
 572 014a AB73     		strb	r3, [r5, #14]
 376:assembly_test.c **** 		pbData[16] = (result[4] >> 24) & 0xFF;
 573              		.loc 1 376 3 is_stmt 1 view .LVU207
 376:assembly_test.c **** 		pbData[16] = (result[4] >> 24) & 0xFF;
 574              		.loc 1 376 27 is_stmt 0 view .LVU208
 575 014c BDF82630 		ldrh	r3, [sp, #38]
 376:assembly_test.c **** 		pbData[16] = (result[4] >> 24) & 0xFF;
 576              		.loc 1 376 14 view .LVU209
 577 0150 EB73     		strb	r3, [r5, #15]
 377:assembly_test.c **** 		*piLen = 17;
 578              		.loc 1 377 3 is_stmt 1 view .LVU210
 377:assembly_test.c **** 		*piLen = 17;
 579              		.loc 1 377 27 is_stmt 0 view .LVU211
 580 0152 9DF82730 		ldrb	r3, [sp, #39]	@ zero_extendqisi2
 377:assembly_test.c **** 		*piLen = 17;
 581              		.loc 1 377 14 view .LVU212
 582 0156 2B74     		strb	r3, [r5, #16]
 378:assembly_test.c **** 		break;
 583              		.loc 1 378 3 is_stmt 1 view .LVU213
 378:assembly_test.c **** 		break;
 584              		.loc 1 378 10 is_stmt 0 view .LVU214
 585 0158 1123     		movs	r3, #17
 586              	.LVL15:
 587              	.L67:
 487:assembly_test.c **** 		break;
 588              		.loc 1 487 10 view .LVU215
 589 015a 2360     		str	r3, [r4]
 488:assembly_test.c **** 
 590              		.loc 1 488 3 is_stmt 1 view .LVU216
 591 015c 93E7     		b	.L61
 592              	.LVL16:
 593              	.L29:
 383:assembly_test.c **** 		*piLen = 1;
 594              		.loc 1 383 3 view .LVU217
 383:assembly_test.c **** 		*piLen = 1;
 595              		.loc 1 383 16 is_stmt 0 view .LVU218
 596 015e 534B     		ldr	r3, .L81+20
 597 0160 1B68     		ldr	r3, [r3]
 383:assembly_test.c **** 		*piLen = 1;
 598              		.loc 1 383 26 view .LVU219
 599 0162 C3F3C013 		ubfx	r3, r3, #7, #1
 600 0166 87E7     		b	.L63
 601              	.L28:
 388:assembly_test.c **** 			PAEN_SET;
 602              		.loc 1 388 3 is_stmt 1 view .LVU220
 603 0168 8023     		movs	r3, #128
 388:assembly_test.c **** 			PAEN_SET;
 604              		.loc 1 388 6 is_stmt 0 view .LVU221
 605 016a 4288     		ldrh	r2, [r0, #2]
ARM GAS  /tmp/cciSTofK.s 			page 26


 606              	.L80:
 400:assembly_test.c **** 			HGM_SET;
 607              		.loc 1 400 6 view .LVU222
 608 016c 3AB1     		cbz	r2, .L51
 401:assembly_test.c **** 		else
 609              		.loc 1 401 4 is_stmt 1 view .LVU223
 610 016e 504A     		ldr	r2, .L81+24
 611 0170 88E7     		b	.L66
 612              	.L27:
 395:assembly_test.c **** 		*piLen = 1;
 613              		.loc 1 395 3 view .LVU224
 395:assembly_test.c **** 		*piLen = 1;
 614              		.loc 1 395 16 is_stmt 0 view .LVU225
 615 0172 4E4B     		ldr	r3, .L81+20
 616 0174 92E7     		b	.L64
 617              	.L26:
 400:assembly_test.c **** 			HGM_SET;
 618              		.loc 1 400 3 is_stmt 1 view .LVU226
 619 0176 4FF48073 		mov	r3, #256
 400:assembly_test.c **** 			HGM_SET;
 620              		.loc 1 400 6 is_stmt 0 view .LVU227
 621 017a 4288     		ldrh	r2, [r0, #2]
 622 017c F6E7     		b	.L80
 623              	.L51:
 403:assembly_test.c **** 		break;
 624              		.loc 1 403 4 is_stmt 1 view .LVU228
 625 017e 4D4A     		ldr	r2, .L81+28
 626 0180 80E7     		b	.L66
 627              	.L25:
 409:assembly_test.c **** 		break;
 628              		.loc 1 409 3 view .LVU229
 409:assembly_test.c **** 		break;
 629              		.loc 1 409 18 is_stmt 0 view .LVU230
 630 0182 0322     		movs	r2, #3
 631 0184 444B     		ldr	r3, .L81
 632              	.L69:
 444:assembly_test.c **** 		break;
 633              		.loc 1 444 18 view .LVU231
 634 0186 5A60     		str	r2, [r3, #4]
 445:assembly_test.c **** 
 635              		.loc 1 445 3 is_stmt 1 view .LVU232
 636 0188 7DE7     		b	.L61
 637              	.L18:
 413:assembly_test.c **** 		*piLen = 1;
 638              		.loc 1 413 3 view .LVU233
 413:assembly_test.c **** 		*piLen = 1;
 639              		.loc 1 413 15 is_stmt 0 view .LVU234
 640 018a 0520     		movs	r0, #5
 641              	.LVL17:
 413:assembly_test.c **** 		*piLen = 1;
 642              		.loc 1 413 15 view .LVU235
 643 018c FFF7FEFF 		bl	cc2400_get
 644              	.LVL18:
 413:assembly_test.c **** 		*piLen = 1;
 645              		.loc 1 413 33 view .LVU236
 646 0190 00F00700 		and	r0, r0, #7
 413:assembly_test.c **** 		*piLen = 1;
ARM GAS  /tmp/cciSTofK.s 			page 27


 647              		.loc 1 413 13 view .LVU237
 648 0194 2870     		strb	r0, [r5]
 414:assembly_test.c **** 		break;
 649              		.loc 1 414 3 is_stmt 1 view .LVU238
 650              	.L62:
 449:assembly_test.c **** 		break;
 651              		.loc 1 449 3 view .LVU239
 449:assembly_test.c **** 		break;
 652              		.loc 1 449 10 is_stmt 0 view .LVU240
 653 0196 0120     		movs	r0, #1
 654 0198 2060     		str	r0, [r4]
 450:assembly_test.c **** 
 655              		.loc 1 450 3 is_stmt 1 view .LVU241
 656              	.LVL19:
 657              	.L10:
 506:assembly_test.c **** 
 658              		.loc 1 506 1 is_stmt 0 view .LVU242
 659 019a 0AB0     		add	sp, sp, #40
 660              		.cfi_remember_state
 661              		.cfi_def_cfa_offset 16
 662              		@ sp needed
 663 019c 70BD     		pop	{r4, r5, r6, pc}
 664              	.LVL20:
 665              	.L17:
 666              		.cfi_restore_state
 418:assembly_test.c **** 			cc2400_set(FREND, 8 | pSetup->wValue);
 667              		.loc 1 418 3 is_stmt 1 view .LVU243
 418:assembly_test.c **** 			cc2400_set(FREND, 8 | pSetup->wValue);
 668              		.loc 1 418 13 is_stmt 0 view .LVU244
 669 019e 4188     		ldrh	r1, [r0, #2]
 670              	.LVL21:
 418:assembly_test.c **** 			cc2400_set(FREND, 8 | pSetup->wValue);
 671              		.loc 1 418 5 view .LVU245
 672 01a0 0729     		cmp	r1, #7
 673 01a2 76D8     		bhi	.L60
 419:assembly_test.c **** 		} else {
 674              		.loc 1 419 4 is_stmt 1 view .LVU246
 675 01a4 0520     		movs	r0, #5
 676              	.LVL22:
 419:assembly_test.c **** 		} else {
 677              		.loc 1 419 4 is_stmt 0 view .LVU247
 678 01a6 41F00801 		orr	r1, r1, #8
 679 01aa FFF7FEFF 		bl	cc2400_set
 680              	.LVL23:
 423:assembly_test.c **** 
 681              		.loc 1 423 3 is_stmt 1 view .LVU248
 682 01ae 6AE7     		b	.L61
 683              	.LVL24:
 684              	.L15:
 426:assembly_test.c **** 		break;
 685              		.loc 1 426 3 view .LVU249
 426:assembly_test.c **** 		break;
 686              		.loc 1 426 18 is_stmt 0 view .LVU250
 687 01b0 0522     		movs	r2, #5
 688 01b2 394B     		ldr	r3, .L81
 689 01b4 E7E7     		b	.L69
 690              	.L16:
ARM GAS  /tmp/cciSTofK.s 			page 28


 430:assembly_test.c **** 		break;
 691              		.loc 1 430 3 is_stmt 1 view .LVU251
 430:assembly_test.c **** 		break;
 692              		.loc 1 430 18 is_stmt 0 view .LVU252
 693 01b6 0622     		movs	r2, #6
 694 01b8 374B     		ldr	r3, .L81
 695 01ba E4E7     		b	.L69
 696              	.L14:
 435:assembly_test.c **** 		pbData[1] = rr.request_pa;
 697              		.loc 1 435 3 is_stmt 1 view .LVU253
 435:assembly_test.c **** 		pbData[1] = rr.request_pa;
 698              		.loc 1 435 17 is_stmt 0 view .LVU254
 699 01bc 3E4B     		ldr	r3, .L81+32
 700 01be 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 435:assembly_test.c **** 		pbData[1] = rr.request_pa;
 701              		.loc 1 435 13 view .LVU255
 702 01c0 2A70     		strb	r2, [r5]
 436:assembly_test.c **** 		pbData[2] = rr.request_num;
 703              		.loc 1 436 3 is_stmt 1 view .LVU256
 436:assembly_test.c **** 		pbData[2] = rr.request_num;
 704              		.loc 1 436 17 is_stmt 0 view .LVU257
 705 01c2 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 436:assembly_test.c **** 		pbData[2] = rr.request_num;
 706              		.loc 1 436 13 view .LVU258
 707 01c4 6A70     		strb	r2, [r5, #1]
 437:assembly_test.c **** 		pbData[3] = rr.reply_pa;
 708              		.loc 1 437 3 is_stmt 1 view .LVU259
 437:assembly_test.c **** 		pbData[3] = rr.reply_pa;
 709              		.loc 1 437 17 is_stmt 0 view .LVU260
 710 01c6 9A78     		ldrb	r2, [r3, #2]	@ zero_extendqisi2
 437:assembly_test.c **** 		pbData[3] = rr.reply_pa;
 711              		.loc 1 437 13 view .LVU261
 712 01c8 AA70     		strb	r2, [r5, #2]
 438:assembly_test.c **** 		pbData[4] = rr.reply_num;
 713              		.loc 1 438 3 is_stmt 1 view .LVU262
 438:assembly_test.c **** 		pbData[4] = rr.reply_num;
 714              		.loc 1 438 17 is_stmt 0 view .LVU263
 715 01ca DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 438:assembly_test.c **** 		pbData[4] = rr.reply_num;
 716              		.loc 1 438 13 view .LVU264
 717 01cc EA70     		strb	r2, [r5, #3]
 439:assembly_test.c **** 		*piLen = 5;
 718              		.loc 1 439 3 is_stmt 1 view .LVU265
 439:assembly_test.c **** 		*piLen = 5;
 719              		.loc 1 439 17 is_stmt 0 view .LVU266
 720 01ce 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
 721 01d0 8AE7     		b	.L74
 722              	.L24:
 444:assembly_test.c **** 		break;
 723              		.loc 1 444 3 is_stmt 1 view .LVU267
 444:assembly_test.c **** 		break;
 724              		.loc 1 444 18 is_stmt 0 view .LVU268
 725 01d2 0022     		movs	r2, #0
 726 01d4 304B     		ldr	r3, .L81
 727 01d6 D6E7     		b	.L69
 728              	.L23:
 448:assembly_test.c **** 		*piLen = 1;
ARM GAS  /tmp/cciSTofK.s 			page 29


 729              		.loc 1 448 3 is_stmt 1 view .LVU269
 448:assembly_test.c **** 		*piLen = 1;
 730              		.loc 1 448 13 is_stmt 0 view .LVU270
 731 01d8 2F4B     		ldr	r3, .L81
 732 01da 9B68     		ldr	r3, [r3, #8]
 733 01dc 4CE7     		b	.L63
 734              	.L22:
 453:assembly_test.c **** 		break;
 735              		.loc 1 453 3 is_stmt 1 view .LVU271
 453:assembly_test.c **** 		break;
 736              		.loc 1 453 22 is_stmt 0 view .LVU272
 737 01de 4288     		ldrh	r2, [r0, #2]
 453:assembly_test.c **** 		break;
 738              		.loc 1 453 14 view .LVU273
 739 01e0 2D4B     		ldr	r3, .L81
 740 01e2 9A60     		str	r2, [r3, #8]
 454:assembly_test.c **** 
 741              		.loc 1 454 3 is_stmt 1 view .LVU274
 742 01e4 4FE7     		b	.L61
 743              	.L34:
 457:assembly_test.c **** 		pbData[1] = (channel >> 8) & 0xFF;
 744              		.loc 1 457 3 view .LVU275
 457:assembly_test.c **** 		pbData[1] = (channel >> 8) & 0xFF;
 745              		.loc 1 457 13 is_stmt 0 view .LVU276
 746 01e6 354B     		ldr	r3, .L81+36
 747 01e8 1A88     		ldrh	r2, [r3]
 748 01ea 2A70     		strb	r2, [r5]
 458:assembly_test.c **** 		*piLen = 2;
 749              		.loc 1 458 3 is_stmt 1 view .LVU277
 458:assembly_test.c **** 		*piLen = 2;
 750              		.loc 1 458 13 is_stmt 0 view .LVU278
 751 01ec 1B88     		ldrh	r3, [r3]
 752 01ee C3F30723 		ubfx	r3, r3, #8, #8
 753 01f2 6B70     		strb	r3, [r5, #1]
 459:assembly_test.c **** 		break;
 754              		.loc 1 459 3 is_stmt 1 view .LVU279
 459:assembly_test.c **** 		break;
 755              		.loc 1 459 10 is_stmt 0 view .LVU280
 756 01f4 0223     		movs	r3, #2
 757 01f6 B0E7     		b	.L67
 758              	.L33:
 463:assembly_test.c **** 		channel = MAX(channel, MIN_FREQ);
 759              		.loc 1 463 3 is_stmt 1 view .LVU281
 463:assembly_test.c **** 		channel = MAX(channel, MIN_FREQ);
 760              		.loc 1 463 11 is_stmt 0 view .LVU282
 761 01f8 304B     		ldr	r3, .L81+36
 463:assembly_test.c **** 		channel = MAX(channel, MIN_FREQ);
 762              		.loc 1 463 19 view .LVU283
 763 01fa 4288     		ldrh	r2, [r0, #2]
 463:assembly_test.c **** 		channel = MAX(channel, MIN_FREQ);
 764              		.loc 1 463 11 view .LVU284
 765 01fc 1A80     		strh	r2, [r3]	@ movhi
 464:assembly_test.c **** 		channel = MIN(channel, MAX_FREQ);
 766              		.loc 1 464 3 is_stmt 1 view .LVU285
 464:assembly_test.c **** 		channel = MIN(channel, MAX_FREQ);
 767              		.loc 1 464 11 is_stmt 0 view .LVU286
 768 01fe 40F6DC02 		movw	r2, #2268
ARM GAS  /tmp/cciSTofK.s 			page 30


 464:assembly_test.c **** 		channel = MIN(channel, MAX_FREQ);
 769              		.loc 1 464 13 view .LVU287
 770 0202 1988     		ldrh	r1, [r3]
 771              	.LVL25:
 464:assembly_test.c **** 		channel = MIN(channel, MAX_FREQ);
 772              		.loc 1 464 13 view .LVU288
 773 0204 89B2     		uxth	r1, r1
 464:assembly_test.c **** 		channel = MIN(channel, MAX_FREQ);
 774              		.loc 1 464 11 view .LVU289
 775 0206 9142     		cmp	r1, r2
 465:assembly_test.c **** 		break;
 776              		.loc 1 465 11 view .LVU290
 777 0208 40F6E921 		movw	r1, #2793
 464:assembly_test.c **** 		channel = MIN(channel, MAX_FREQ);
 778              		.loc 1 464 11 view .LVU291
 779 020c 84BF     		itt	hi
 780 020e 1A88     		ldrhhi	r2, [r3]
 781 0210 92B2     		uxthhi	r2, r2
 782 0212 1A80     		strh	r2, [r3]	@ movhi
 465:assembly_test.c **** 		break;
 783              		.loc 1 465 3 is_stmt 1 view .LVU292
 465:assembly_test.c **** 		break;
 784              		.loc 1 465 13 is_stmt 0 view .LVU293
 785 0214 1A88     		ldrh	r2, [r3]
 786 0216 92B2     		uxth	r2, r2
 465:assembly_test.c **** 		break;
 787              		.loc 1 465 11 view .LVU294
 788 0218 8A42     		cmp	r2, r1
 789 021a 8EBF     		itee	hi
 790 021c 40F6EA22 		movwhi	r2, #2794
 791 0220 1A88     		ldrhls	r2, [r3]
 792 0222 92B2     		uxthls	r2, r2
 793 0224 1A80     		strh	r2, [r3]	@ movhi
 466:assembly_test.c **** 
 794              		.loc 1 466 3 is_stmt 1 view .LVU295
 795 0226 2EE7     		b	.L61
 796              	.LVL26:
 797              	.L21:
 469:assembly_test.c **** 		iap_entry(command, result);
 798              		.loc 1 469 3 view .LVU296
 469:assembly_test.c **** 		iap_entry(command, result);
 799              		.loc 1 469 14 is_stmt 0 view .LVU297
 800 0228 3923     		movs	r3, #57
 801 022a 0093     		str	r3, [sp]
 470:assembly_test.c **** 		*piLen = 0; /* should never return */
 802              		.loc 1 470 3 is_stmt 1 view .LVU298
 803 022c 1E4B     		ldr	r3, .L81+16
 804 022e 6846     		mov	r0, sp
 805              	.LVL27:
 470:assembly_test.c **** 		*piLen = 0; /* should never return */
 806              		.loc 1 470 3 is_stmt 0 view .LVU299
 807 0230 1B68     		ldr	r3, [r3]
 808 0232 05A9     		add	r1, sp, #20
 809              	.LVL28:
 470:assembly_test.c **** 		*piLen = 0; /* should never return */
 810              		.loc 1 470 3 view .LVU300
 811 0234 9847     		blx	r3
ARM GAS  /tmp/cciSTofK.s 			page 31


 812              	.LVL29:
 471:assembly_test.c **** 		break;
 813              		.loc 1 471 3 is_stmt 1 view .LVU301
 814 0236 19E7     		b	.L65
 815              	.LVL30:
 816              	.L20:
 475:assembly_test.c **** 		reset();
 817              		.loc 1 475 3 view .LVU302
 475:assembly_test.c **** 		reset();
 818              		.loc 1 475 19 is_stmt 0 view .LVU303
 819 0238 214B     		ldr	r3, .L81+40
 820 023a 224A     		ldr	r2, .L81+44
 821 023c 1A60     		str	r2, [r3]
 822              	.L68:
 476:assembly_test.c **** 		break;
 823              		.loc 1 476 3 is_stmt 1 view .LVU304
 824 023e FFF7FEFF 		bl	reset
 825              	.LVL31:
 477:assembly_test.c **** 
 826              		.loc 1 477 3 view .LVU305
 827 0242 20E7     		b	.L61
 828              	.LVL32:
 829              	.L19:
 480:assembly_test.c **** 				pSetup->wIndex < 2049 || pSetup->wIndex > 3072 ||
 830              		.loc 1 480 3 view .LVU306
 480:assembly_test.c **** 				pSetup->wIndex < 2049 || pSetup->wIndex > 3072 ||
 831              		.loc 1 480 6 is_stmt 0 view .LVU307
 832 0244 6FF40065 		mvn	r5, #2048
 833              	.LVL33:
 480:assembly_test.c **** 				pSetup->wIndex < 2049 || pSetup->wIndex > 3072 ||
 834              		.loc 1 480 13 view .LVU308
 835 0248 4288     		ldrh	r2, [r0, #2]
 480:assembly_test.c **** 				pSetup->wIndex < 2049 || pSetup->wIndex > 3072 ||
 836              		.loc 1 480 6 view .LVU309
 837 024a 5319     		adds	r3, r2, r5
 838 024c B3F5806F 		cmp	r3, #1024
 839 0250 1FD2     		bcs	.L60
 480:assembly_test.c **** 				pSetup->wIndex < 2049 || pSetup->wIndex > 3072 ||
 840              		.loc 1 480 54 discriminator 1 view .LVU310
 841 0252 6FF40061 		mvn	r1, #2048
 842              	.LVL34:
 481:assembly_test.c **** 				pSetup->wIndex < pSetup->wValue)
 843              		.loc 1 481 11 discriminator 1 view .LVU311
 844 0256 8388     		ldrh	r3, [r0, #4]
 480:assembly_test.c **** 				pSetup->wIndex < 2049 || pSetup->wIndex > 3072 ||
 845              		.loc 1 480 54 discriminator 1 view .LVU312
 846 0258 5918     		adds	r1, r3, r1
 847 025a B1F5806F 		cmp	r1, #1024
 848 025e 18D2     		bcs	.L60
 481:assembly_test.c **** 				pSetup->wIndex < pSetup->wValue)
 849              		.loc 1 481 52 discriminator 1 view .LVU313
 850 0260 9A42     		cmp	r2, r3
 851 0262 16D8     		bhi	.L60
 484:assembly_test.c **** 		high_freq = pSetup->wIndex;
 852              		.loc 1 484 3 is_stmt 1 view .LVU314
 484:assembly_test.c **** 		high_freq = pSetup->wIndex;
 853              		.loc 1 484 12 is_stmt 0 view .LVU315
ARM GAS  /tmp/cciSTofK.s 			page 32


 854 0264 1549     		ldr	r1, .L81+36
 855 0266 4A80     		strh	r2, [r1, #2]	@ movhi
 485:assembly_test.c **** 		requested_mode = MODE_SPECAN;
 856              		.loc 1 485 3 is_stmt 1 view .LVU316
 486:assembly_test.c **** 		*piLen = 0;
 857              		.loc 1 486 18 is_stmt 0 view .LVU317
 858 0268 0422     		movs	r2, #4
 485:assembly_test.c **** 		requested_mode = MODE_SPECAN;
 859              		.loc 1 485 13 view .LVU318
 860 026a 8B80     		strh	r3, [r1, #4]	@ movhi
 486:assembly_test.c **** 		*piLen = 0;
 861              		.loc 1 486 3 is_stmt 1 view .LVU319
 486:assembly_test.c **** 		*piLen = 0;
 862              		.loc 1 486 18 is_stmt 0 view .LVU320
 863 026c 0A4B     		ldr	r3, .L81
 864 026e 5A60     		str	r2, [r3, #4]
 865 0270 FCE6     		b	.L65
 866              	.LVL35:
 867              	.L12:
 491:assembly_test.c **** 		pbData[1] = 0x00;
 868              		.loc 1 491 3 is_stmt 1 view .LVU321
 491:assembly_test.c **** 		pbData[1] = 0x00;
 869              		.loc 1 491 13 is_stmt 0 view .LVU322
 870 0272 0023     		movs	r3, #0
 494:assembly_test.c **** 		pbData[2] = length;
 871              		.loc 1 494 16 view .LVU323
 872 0274 1448     		ldr	r0, .L81+48
 873              	.LVL36:
 491:assembly_test.c **** 		pbData[1] = 0x00;
 874              		.loc 1 491 13 view .LVU324
 875 0276 2B70     		strb	r3, [r5]
 492:assembly_test.c **** 
 876              		.loc 1 492 3 is_stmt 1 view .LVU325
 492:assembly_test.c **** 
 877              		.loc 1 492 13 is_stmt 0 view .LVU326
 878 0278 6B70     		strb	r3, [r5, #1]
 494:assembly_test.c **** 		pbData[2] = length;
 879              		.loc 1 494 3 is_stmt 1 view .LVU327
 494:assembly_test.c **** 		pbData[2] = length;
 880              		.loc 1 494 16 is_stmt 0 view .LVU328
 881 027a FFF7FEFF 		bl	strlen
 882              	.LVL37:
 495:assembly_test.c **** 
 883              		.loc 1 495 3 is_stmt 1 view .LVU329
 884 027e C6B2     		uxtb	r6, r0
 497:assembly_test.c **** 
 885              		.loc 1 497 3 is_stmt 0 view .LVU330
 886 0280 3246     		mov	r2, r6
 494:assembly_test.c **** 		pbData[2] = length;
 887              		.loc 1 494 10 view .LVU331
 888 0282 A870     		strb	r0, [r5, #2]
 497:assembly_test.c **** 
 889              		.loc 1 497 3 is_stmt 1 view .LVU332
 890 0284 1049     		ldr	r1, .L81+48
 891 0286 E81C     		adds	r0, r5, #3
 892              	.LVL38:
 499:assembly_test.c **** 		break;
ARM GAS  /tmp/cciSTofK.s 			page 33


 893              		.loc 1 499 18 is_stmt 0 view .LVU333
 894 0288 0336     		adds	r6, r6, #3
 497:assembly_test.c **** 
 895              		.loc 1 497 3 view .LVU334
 896 028a FFF7FEFF 		bl	memcpy
 897              	.LVL39:
 499:assembly_test.c **** 		break;
 898              		.loc 1 499 3 is_stmt 1 view .LVU335
 499:assembly_test.c **** 		break;
 899              		.loc 1 499 10 is_stmt 0 view .LVU336
 900 028e 2660     		str	r6, [r4]
 901 0290 F9E6     		b	.L61
 902              	.LVL40:
 903              	.L60:
 421:assembly_test.c **** 		}
 904              		.loc 1 421 11 view .LVU337
 905 0292 0020     		movs	r0, #0
 906              	.LVL41:
 421:assembly_test.c **** 		}
 907              		.loc 1 421 11 view .LVU338
 908 0294 81E7     		b	.L10
 909              	.L82:
 910 0296 00BF     		.align	2
 911              	.L81:
 912 0298 00000000 		.word	.LANCHOR0
 913 029c 34C00920 		.word	537509940
 914 02a0 38C00920 		.word	537509944
 915 02a4 3CC00920 		.word	537509948
 916 02a8 00000000 		.word	iap_entry
 917 02ac 54C00920 		.word	537509972
 918 02b0 58C00920 		.word	537509976
 919 02b4 5CC00920 		.word	537509980
 920 02b8 00000000 		.word	rr
 921 02bc 00000000 		.word	.LANCHOR1
 922 02c0 00000000 		.word	bootloader_ctrl
 923 02c4 21BB0543 		.word	1124449057
 924 02c8 00000000 		.word	.LC1
 925              		.cfi_endproc
 926              	.LFE5:
 928              		.section	.text.queue_init,"ax",%progbits
 929              		.align	1
 930              		.global	queue_init
 931              		.syntax unified
 932              		.thumb
 933              		.thumb_func
 934              		.fpu softvfp
 936              	queue_init:
 937              	.LFB0:
 132:assembly_test.c **** 	head = 0;
 938              		.loc 1 132 1 is_stmt 1 view -0
 939              		.cfi_startproc
 940              		@ args = 0, pretend = 0, frame = 0
 941              		@ frame_needed = 0, uses_anonymous_args = 0
 942              		@ link register save eliminated.
 133:assembly_test.c **** 	tail = 0;
 943              		.loc 1 133 2 view .LVU340
 133:assembly_test.c **** 	tail = 0;
ARM GAS  /tmp/cciSTofK.s 			page 34


 944              		.loc 1 133 7 is_stmt 0 view .LVU341
 945 0000 0022     		movs	r2, #0
 946 0002 024B     		ldr	r3, .L84
 947 0004 DA60     		str	r2, [r3, #12]
 134:assembly_test.c **** }
 948              		.loc 1 134 2 is_stmt 1 view .LVU342
 134:assembly_test.c **** }
 949              		.loc 1 134 7 is_stmt 0 view .LVU343
 950 0006 1A61     		str	r2, [r3, #16]
 135:assembly_test.c **** 
 951              		.loc 1 135 1 view .LVU344
 952 0008 7047     		bx	lr
 953              	.L85:
 954 000a 00BF     		.align	2
 955              	.L84:
 956 000c 00000000 		.word	.LANCHOR0
 957              		.cfi_endproc
 958              	.LFE0:
 960              		.section	.text.enqueue,"ax",%progbits
 961              		.align	1
 962              		.global	enqueue
 963              		.syntax unified
 964              		.thumb
 965              		.thumb_func
 966              		.fpu softvfp
 968              	enqueue:
 969              	.LVL42:
 970              	.LFB1:
 138:assembly_test.c **** 	int i;
 971              		.loc 1 138 1 is_stmt 1 view -0
 972              		.cfi_startproc
 973              		@ args = 0, pretend = 0, frame = 0
 974              		@ frame_needed = 0, uses_anonymous_args = 0
 138:assembly_test.c **** 	int i;
 975              		.loc 1 138 1 is_stmt 0 view .LVU346
 976 0000 70B5     		push	{r4, r5, r6, lr}
 977              		.cfi_def_cfa_offset 16
 978              		.cfi_offset 4, -16
 979              		.cfi_offset 5, -12
 980              		.cfi_offset 6, -8
 981              		.cfi_offset 14, -4
 139:assembly_test.c **** 	u8 h = head & 0x7F;
 982              		.loc 1 139 2 is_stmt 1 view .LVU347
 140:assembly_test.c **** 	u8 t = tail & 0x7F;
 983              		.loc 1 140 2 view .LVU348
 140:assembly_test.c **** 	u8 t = tail & 0x7F;
 984              		.loc 1 140 14 is_stmt 0 view .LVU349
 985 0002 184B     		ldr	r3, .L91
 986 0004 DC68     		ldr	r4, [r3, #12]
 987              	.LVL43:
 141:assembly_test.c **** 	u8 n = (t + 1) & 0x7F;
 988              		.loc 1 141 2 is_stmt 1 view .LVU350
 141:assembly_test.c **** 	u8 n = (t + 1) & 0x7F;
 989              		.loc 1 141 14 is_stmt 0 view .LVU351
 990 0006 1A69     		ldr	r2, [r3, #16]
 145:assembly_test.c **** 		return 0;
 991              		.loc 1 145 5 view .LVU352
ARM GAS  /tmp/cciSTofK.s 			page 35


 992 0008 04F07F04 		and	r4, r4, #127
 993              	.LVL44:
 141:assembly_test.c **** 	u8 n = (t + 1) & 0x7F;
 994              		.loc 1 141 5 view .LVU353
 995 000c 02F07F02 		and	r2, r2, #127
 996              	.LVL45:
 142:assembly_test.c **** 
 997              		.loc 1 142 2 is_stmt 1 view .LVU354
 145:assembly_test.c **** 		return 0;
 998              		.loc 1 145 2 view .LVU355
 142:assembly_test.c **** 
 999              		.loc 1 142 12 is_stmt 0 view .LVU356
 1000 0010 511C     		adds	r1, r2, #1
 145:assembly_test.c **** 		return 0;
 1001              		.loc 1 145 5 view .LVU357
 1002 0012 01F07F01 		and	r1, r1, #127
 1003 0016 8C42     		cmp	r4, r1
 1004 0018 21D0     		beq	.L89
 148:assembly_test.c **** 	fifo[t].clk100ns = CLK100NS;
 1005              		.loc 1 148 2 is_stmt 1 view .LVU358
 148:assembly_test.c **** 	fifo[t].clk100ns = CLK100NS;
 1006              		.loc 1 148 20 is_stmt 0 view .LVU359
 1007 001a 1349     		ldr	r1, .L91+4
 1008 001c 9501     		lsls	r5, r2, #6
 1009 001e 0C78     		ldrb	r4, [r1]	@ zero_extendqisi2
 1010 0020 1249     		ldr	r1, .L91+8
 1011 0022 01EB8212 		add	r2, r1, r2, lsl #6
 1012              	.LVL46:
 148:assembly_test.c **** 	fifo[t].clk100ns = CLK100NS;
 1013              		.loc 1 148 20 view .LVU360
 1014 0026 D470     		strb	r4, [r2, #3]
 149:assembly_test.c **** 
 1015              		.loc 1 149 2 is_stmt 1 view .LVU361
 149:assembly_test.c **** 
 1016              		.loc 1 149 21 is_stmt 0 view .LVU362
 1017 0028 114C     		ldr	r4, .L91+12
 1018 002a 2468     		ldr	r4, [r4]
 149:assembly_test.c **** 
 1019              		.loc 1 149 19 view .LVU363
 1020 002c 5460     		str	r4, [r2, #4]
 151:assembly_test.c **** 	for (i = 0; i < DMA_SIZE; i++)
 1021              		.loc 1 151 2 is_stmt 1 view .LVU364
 1022 002e 0224     		movs	r4, #2
 1023 0030 104A     		ldr	r2, .L91+16
 1024 0032 1460     		str	r4, [r2]
 152:assembly_test.c **** 		fifo[t].data[i] = buf[i];
 1025              		.loc 1 152 2 view .LVU365
 1026              	.LVL47:
 152:assembly_test.c **** 		fifo[t].data[i] = buf[i];
 1027              		.loc 1 152 14 view .LVU366
 1028 0034 05F10E02 		add	r2, r5, #14
 1029 0038 441E     		subs	r4, r0, #1
 1030 003a 0A44     		add	r2, r2, r1
 1031 003c 3130     		adds	r0, r0, #49
 1032              	.LVL48:
 1033              	.L88:
 153:assembly_test.c **** 	fifo[t].status = status;
ARM GAS  /tmp/cciSTofK.s 			page 36


 1034              		.loc 1 153 3 discriminator 3 view .LVU367
 153:assembly_test.c **** 	fifo[t].status = status;
 1035              		.loc 1 153 24 is_stmt 0 discriminator 3 view .LVU368
 1036 003e 14F8016F 		ldrb	r6, [r4, #1]!	@ zero_extendqisi2
 1037              	.LVL49:
 152:assembly_test.c **** 		fifo[t].data[i] = buf[i];
 1038              		.loc 1 152 2 discriminator 3 view .LVU369
 1039 0042 8442     		cmp	r4, r0
 153:assembly_test.c **** 	fifo[t].status = status;
 1040              		.loc 1 153 19 discriminator 3 view .LVU370
 1041 0044 02F8016B 		strb	r6, [r2], #1
 152:assembly_test.c **** 		fifo[t].data[i] = buf[i];
 1042              		.loc 1 152 28 is_stmt 1 discriminator 3 view .LVU371
 1043              	.LVL50:
 152:assembly_test.c **** 		fifo[t].data[i] = buf[i];
 1044              		.loc 1 152 14 discriminator 3 view .LVU372
 152:assembly_test.c **** 		fifo[t].data[i] = buf[i];
 1045              		.loc 1 152 2 is_stmt 0 discriminator 3 view .LVU373
 1046 0048 F9D1     		bne	.L88
 154:assembly_test.c **** 	status = 0;
 1047              		.loc 1 154 2 is_stmt 1 view .LVU374
 154:assembly_test.c **** 	status = 0;
 1048              		.loc 1 154 17 is_stmt 0 view .LVU375
 1049 004a 1A7D     		ldrb	r2, [r3, #20]	@ zero_extendqisi2
 1050 004c 2944     		add	r1, r1, r5
 1051 004e 4A70     		strb	r2, [r1, #1]
 155:assembly_test.c **** 	++tail;
 1052              		.loc 1 155 2 is_stmt 1 view .LVU376
 155:assembly_test.c **** 	++tail;
 1053              		.loc 1 155 9 is_stmt 0 view .LVU377
 1054 0050 0022     		movs	r2, #0
 158:assembly_test.c **** }
 1055              		.loc 1 158 9 view .LVU378
 1056 0052 0120     		movs	r0, #1
 1057              	.LVL51:
 155:assembly_test.c **** 	++tail;
 1058              		.loc 1 155 9 view .LVU379
 1059 0054 1A75     		strb	r2, [r3, #20]
 156:assembly_test.c **** 
 1060              		.loc 1 156 2 is_stmt 1 view .LVU380
 1061 0056 1A69     		ldr	r2, [r3, #16]
 1062 0058 0132     		adds	r2, r2, #1
 1063 005a 1A61     		str	r2, [r3, #16]
 158:assembly_test.c **** }
 1064              		.loc 1 158 2 view .LVU381
 1065              	.LVL52:
 1066              	.L86:
 159:assembly_test.c **** 
 1067              		.loc 1 159 1 is_stmt 0 view .LVU382
 1068 005c 70BD     		pop	{r4, r5, r6, pc}
 1069              	.LVL53:
 1070              	.L89:
 146:assembly_test.c **** 
 1071              		.loc 1 146 10 view .LVU383
 1072 005e 0020     		movs	r0, #0
 1073              	.LVL54:
 146:assembly_test.c **** 
ARM GAS  /tmp/cciSTofK.s 			page 37


 1074              		.loc 1 146 10 view .LVU384
 1075 0060 FCE7     		b	.L86
 1076              	.L92:
 1077 0062 00BF     		.align	2
 1078              	.L91:
 1079 0064 00000000 		.word	.LANCHOR0
 1080 0068 00000000 		.word	clkn_high
 1081 006c 00000000 		.word	fifo
 1082 0070 08400040 		.word	1073758216
 1083 0074 38C00920 		.word	537509944
 1084              		.cfi_endproc
 1085              	.LFE1:
 1087              		.section	.text.dequeue,"ax",%progbits
 1088              		.align	1
 1089              		.global	dequeue
 1090              		.syntax unified
 1091              		.thumb
 1092              		.thumb_func
 1093              		.fpu softvfp
 1095              	dequeue:
 1096              	.LFB2:
 162:assembly_test.c **** 	u8 h = head & 0x7F;
 1097              		.loc 1 162 1 is_stmt 1 view -0
 1098              		.cfi_startproc
 1099              		@ args = 0, pretend = 0, frame = 0
 1100              		@ frame_needed = 0, uses_anonymous_args = 0
 1101 0000 10B5     		push	{r4, lr}
 1102              		.cfi_def_cfa_offset 8
 1103              		.cfi_offset 4, -8
 1104              		.cfi_offset 14, -4
 163:assembly_test.c **** 	u8 t = tail & 0x7F;
 1105              		.loc 1 163 2 view .LVU386
 163:assembly_test.c **** 	u8 t = tail & 0x7F;
 1106              		.loc 1 163 14 is_stmt 0 view .LVU387
 1107 0002 0D4C     		ldr	r4, .L96
 1108 0004 E368     		ldr	r3, [r4, #12]
 164:assembly_test.c **** 
 1109              		.loc 1 164 14 view .LVU388
 1110 0006 2269     		ldr	r2, [r4, #16]
 163:assembly_test.c **** 	u8 t = tail & 0x7F;
 1111              		.loc 1 163 5 view .LVU389
 1112 0008 03F07F03 		and	r3, r3, #127
 1113              	.LVL55:
 164:assembly_test.c **** 
 1114              		.loc 1 164 2 is_stmt 1 view .LVU390
 167:assembly_test.c **** 		USRLED_CLR;
 1115              		.loc 1 167 2 view .LVU391
 167:assembly_test.c **** 		USRLED_CLR;
 1116              		.loc 1 167 5 is_stmt 0 view .LVU392
 1117 000c 02F07F02 		and	r2, r2, #127
 1118              	.LVL56:
 167:assembly_test.c **** 		USRLED_CLR;
 1119              		.loc 1 167 5 view .LVU393
 1120 0010 9342     		cmp	r3, r2
 1121 0012 04D1     		bne	.L94
 168:assembly_test.c **** 		return 0;
 1122              		.loc 1 168 3 is_stmt 1 view .LVU394
ARM GAS  /tmp/cciSTofK.s 			page 38


 1123 0014 0222     		movs	r2, #2
 169:assembly_test.c **** 	}
 1124              		.loc 1 169 10 is_stmt 0 view .LVU395
 1125 0016 0020     		movs	r0, #0
 168:assembly_test.c **** 		return 0;
 1126              		.loc 1 168 3 view .LVU396
 1127 0018 084B     		ldr	r3, .L96+4
 1128              	.LVL57:
 168:assembly_test.c **** 		return 0;
 1129              		.loc 1 168 3 view .LVU397
 1130 001a 1A60     		str	r2, [r3]
 169:assembly_test.c **** 	}
 1131              		.loc 1 169 3 is_stmt 1 view .LVU398
 1132              	.L93:
 176:assembly_test.c **** 
 1133              		.loc 1 176 1 is_stmt 0 view .LVU399
 1134 001c 10BD     		pop	{r4, pc}
 1135              	.LVL58:
 1136              	.L94:
 172:assembly_test.c **** 	++head;
 1137              		.loc 1 172 2 is_stmt 1 view .LVU400
 1138 001e 0849     		ldr	r1, .L96+8
 1139 0020 4022     		movs	r2, #64
 1140 0022 01EB8311 		add	r1, r1, r3, lsl #6
 1141 0026 8220     		movs	r0, #130
 1142 0028 FFF7FEFF 		bl	USBHwEPWrite
 1143              	.LVL59:
 173:assembly_test.c **** 
 1144              		.loc 1 173 2 view .LVU401
 1145 002c E368     		ldr	r3, [r4, #12]
 175:assembly_test.c **** }
 1146              		.loc 1 175 9 is_stmt 0 view .LVU402
 1147 002e 0120     		movs	r0, #1
 173:assembly_test.c **** 
 1148              		.loc 1 173 2 view .LVU403
 1149 0030 0133     		adds	r3, r3, #1
 1150 0032 E360     		str	r3, [r4, #12]
 175:assembly_test.c **** }
 1151              		.loc 1 175 2 is_stmt 1 view .LVU404
 175:assembly_test.c **** }
 1152              		.loc 1 175 9 is_stmt 0 view .LVU405
 1153 0034 F2E7     		b	.L93
 1154              	.L97:
 1155 0036 00BF     		.align	2
 1156              	.L96:
 1157 0038 00000000 		.word	.LANCHOR0
 1158 003c 3CC00920 		.word	537509948
 1159 0040 00000000 		.word	fifo
 1160              		.cfi_endproc
 1161              	.LFE2:
 1163              		.section	.text.ubertooth_usb_init,"ax",%progbits
 1164              		.align	1
 1165              		.global	ubertooth_usb_init
 1166              		.syntax unified
 1167              		.thumb
 1168              		.thumb_func
 1169              		.fpu softvfp
ARM GAS  /tmp/cciSTofK.s 			page 39


 1171              	ubertooth_usb_init:
 1172              	.LFB6:
 509:assembly_test.c **** 	// initialise stack
 1173              		.loc 1 509 1 is_stmt 1 view -0
 1174              		.cfi_startproc
 1175              		@ args = 0, pretend = 0, frame = 0
 1176              		@ frame_needed = 0, uses_anonymous_args = 0
 1177 0000 08B5     		push	{r3, lr}
 1178              		.cfi_def_cfa_offset 8
 1179              		.cfi_offset 3, -8
 1180              		.cfi_offset 14, -4
 511:assembly_test.c **** 	
 1181              		.loc 1 511 2 view .LVU407
 1182 0002 FFF7FEFF 		bl	USBInit
 1183              	.LVL60:
 514:assembly_test.c **** 
 1184              		.loc 1 514 2 view .LVU408
 1185 0006 0648     		ldr	r0, .L99
 1186 0008 FFF7FEFF 		bl	USBRegisterDescriptors
 1187              	.LVL61:
 517:assembly_test.c **** 
 1188              		.loc 1 517 2 view .LVU409
 1189 000c 054A     		ldr	r2, .L99+4
 1190 000e 0649     		ldr	r1, .L99+8
 1191 0010 0220     		movs	r0, #2
 1192 0012 FFF7FEFF 		bl	USBRegisterRequestHandler
 1193              	.LVL62:
 527:assembly_test.c **** 
 1194              		.loc 1 527 2 view .LVU410
 1195 0016 0120     		movs	r0, #1
 1196 0018 FFF7FEFF 		bl	USBHwConnect
 1197              	.LVL63:
 529:assembly_test.c **** }
 1198              		.loc 1 529 2 view .LVU411
 530:assembly_test.c **** 
 1199              		.loc 1 530 1 is_stmt 0 view .LVU412
 1200 001c 0020     		movs	r0, #0
 1201 001e 08BD     		pop	{r3, pc}
 1202              	.L100:
 1203              		.align	2
 1204              	.L99:
 1205 0020 00000000 		.word	.LANCHOR2
 1206 0024 15000000 		.word	.LANCHOR0+21
 1207 0028 00000000 		.word	usb_vendor_request_handler
 1208              		.cfi_endproc
 1209              	.LFE6:
 1211              		.section	.text.TIMER0_IRQHandler,"ax",%progbits
 1212              		.align	1
 1213              		.global	TIMER0_IRQHandler
 1214              		.syntax unified
 1215              		.thumb
 1216              		.thumb_func
 1217              		.fpu softvfp
 1219              	TIMER0_IRQHandler:
 1220              	.LFB8:
 560:assembly_test.c **** 	if (T0IR & TIR_MR0_Interrupt) {
 1221              		.loc 1 560 1 is_stmt 1 view -0
ARM GAS  /tmp/cciSTofK.s 			page 40


 1222              		.cfi_startproc
 1223              		@ args = 0, pretend = 0, frame = 0
 1224              		@ frame_needed = 0, uses_anonymous_args = 0
 1225              		@ link register save eliminated.
 561:assembly_test.c **** 		++clkn_high;
 1226              		.loc 1 561 2 view .LVU414
 561:assembly_test.c **** 		++clkn_high;
 1227              		.loc 1 561 6 is_stmt 0 view .LVU415
 1228 0000 4FF04022 		mov	r2, #1073758208
 1229 0004 1368     		ldr	r3, [r2]
 561:assembly_test.c **** 		++clkn_high;
 1230              		.loc 1 561 5 view .LVU416
 1231 0006 DB07     		lsls	r3, r3, #31
 1232 0008 08D5     		bpl	.L101
 562:assembly_test.c **** 		T0IR |= TIR_MR0_Interrupt;
 1233              		.loc 1 562 3 is_stmt 1 view .LVU417
 1234 000a 0549     		ldr	r1, .L106
 1235 000c 0B78     		ldrb	r3, [r1]	@ zero_extendqisi2
 1236 000e 0133     		adds	r3, r3, #1
 1237 0010 DBB2     		uxtb	r3, r3
 1238 0012 0B70     		strb	r3, [r1]
 563:assembly_test.c **** 	}
 1239              		.loc 1 563 3 view .LVU418
 563:assembly_test.c **** 	}
 1240              		.loc 1 563 8 is_stmt 0 view .LVU419
 1241 0014 1368     		ldr	r3, [r2]
 1242 0016 43F00103 		orr	r3, r3, #1
 1243 001a 1360     		str	r3, [r2]
 1244              	.L101:
 565:assembly_test.c **** 
 1245              		.loc 1 565 1 view .LVU420
 1246 001c 7047     		bx	lr
 1247              	.L107:
 1248 001e 00BF     		.align	2
 1249              	.L106:
 1250 0020 00000000 		.word	clkn_high
 1251              		.cfi_endproc
 1252              	.LFE8:
 1254              		.section	.text.DMA_IRQHandler,"ax",%progbits
 1255              		.align	1
 1256              		.global	DMA_IRQHandler
 1257              		.syntax unified
 1258              		.thumb
 1259              		.thumb_func
 1260              		.fpu softvfp
 1262              	DMA_IRQHandler:
 1263              	.LFB10:
 631:assembly_test.c **** 	/* interrupt on channel 0 */
 1264              		.loc 1 631 1 is_stmt 1 view -0
 1265              		.cfi_startproc
 1266              		@ args = 0, pretend = 0, frame = 0
 1267              		@ frame_needed = 0, uses_anonymous_args = 0
 1268              		@ link register save eliminated.
 633:assembly_test.c **** 		if (DMACIntTCStat & (1 << 0)) {
 1269              		.loc 1 633 2 view .LVU422
 633:assembly_test.c **** 		if (DMACIntTCStat & (1 << 0)) {
 1270              		.loc 1 633 6 is_stmt 0 view .LVU423
ARM GAS  /tmp/cciSTofK.s 			page 41


 1271 0000 0F4B     		ldr	r3, .L119
 1272 0002 1B68     		ldr	r3, [r3]
 633:assembly_test.c **** 		if (DMACIntTCStat & (1 << 0)) {
 1273              		.loc 1 633 5 view .LVU424
 1274 0004 D907     		lsls	r1, r3, #31
 1275 0006 19D5     		bpl	.L108
 634:assembly_test.c **** 			DMACIntTCClear |= (1 << 0);
 1276              		.loc 1 634 3 is_stmt 1 view .LVU425
 634:assembly_test.c **** 			DMACIntTCClear |= (1 << 0);
 1277              		.loc 1 634 7 is_stmt 0 view .LVU426
 1278 0008 0E4B     		ldr	r3, .L119+4
 1279 000a 1B68     		ldr	r3, [r3]
 634:assembly_test.c **** 			DMACIntTCClear |= (1 << 0);
 1280              		.loc 1 634 6 view .LVU427
 1281 000c DA07     		lsls	r2, r3, #31
 1282 000e 08D5     		bpl	.L111
 635:assembly_test.c **** 			++rx_tc;
 1283              		.loc 1 635 4 is_stmt 1 view .LVU428
 635:assembly_test.c **** 			++rx_tc;
 1284              		.loc 1 635 19 is_stmt 0 view .LVU429
 1285 0010 0D4A     		ldr	r2, .L119+8
 1286 0012 1368     		ldr	r3, [r2]
 1287 0014 43F00103 		orr	r3, r3, #1
 1288 0018 1360     		str	r3, [r2]
 636:assembly_test.c **** 		}
 1289              		.loc 1 636 4 is_stmt 1 view .LVU430
 1290 001a 0C4A     		ldr	r2, .L119+12
 1291 001c 1368     		ldr	r3, [r2]
 1292 001e 0133     		adds	r3, r3, #1
 1293 0020 1360     		str	r3, [r2]
 1294              	.L111:
 638:assembly_test.c **** 			DMACIntErrClr |= (1 << 0);
 1295              		.loc 1 638 3 view .LVU431
 638:assembly_test.c **** 			DMACIntErrClr |= (1 << 0);
 1296              		.loc 1 638 7 is_stmt 0 view .LVU432
 1297 0022 0B4B     		ldr	r3, .L119+16
 1298 0024 1B68     		ldr	r3, [r3]
 638:assembly_test.c **** 			DMACIntErrClr |= (1 << 0);
 1299              		.loc 1 638 6 view .LVU433
 1300 0026 DB07     		lsls	r3, r3, #31
 1301 0028 08D5     		bpl	.L108
 639:assembly_test.c **** 			++rx_err;
 1302              		.loc 1 639 4 is_stmt 1 view .LVU434
 639:assembly_test.c **** 			++rx_err;
 1303              		.loc 1 639 18 is_stmt 0 view .LVU435
 1304 002a 0A4A     		ldr	r2, .L119+20
 1305 002c 1368     		ldr	r3, [r2]
 1306 002e 43F00103 		orr	r3, r3, #1
 1307 0032 1360     		str	r3, [r2]
 640:assembly_test.c **** 		}
 1308              		.loc 1 640 4 is_stmt 1 view .LVU436
 1309 0034 084A     		ldr	r2, .L119+24
 1310 0036 1368     		ldr	r3, [r2]
 1311 0038 0133     		adds	r3, r3, #1
 1312 003a 1360     		str	r3, [r2]
 1313              	.L108:
 643:assembly_test.c **** 
ARM GAS  /tmp/cciSTofK.s 			page 42


 1314              		.loc 1 643 1 is_stmt 0 view .LVU437
 1315 003c 7047     		bx	lr
 1316              	.L120:
 1317 003e 00BF     		.align	2
 1318              	.L119:
 1319 0040 00400050 		.word	1342193664
 1320 0044 04400050 		.word	1342193668
 1321 0048 08400050 		.word	1342193672
 1322 004c 00000000 		.word	rx_tc
 1323 0050 0C400050 		.word	1342193676
 1324 0054 10400050 		.word	1342193680
 1325 0058 00000000 		.word	rx_err
 1326              		.cfi_endproc
 1327              	.LFE10:
 1329              		.section	.text.cc2400_rx,"ax",%progbits
 1330              		.align	1
 1331              		.global	cc2400_rx
 1332              		.syntax unified
 1333              		.thumb
 1334              		.thumb_func
 1335              		.fpu softvfp
 1337              	cc2400_rx:
 1338              	.LFB12:
 661:assembly_test.c **** 
 662:assembly_test.c **** /* start un-buffered rx */
 663:assembly_test.c **** void cc2400_rx()
 664:assembly_test.c **** {
 1339              		.loc 1 664 1 is_stmt 1 view -0
 1340              		.cfi_startproc
 1341              		@ args = 0, pretend = 0, frame = 0
 1342              		@ frame_needed = 0, uses_anonymous_args = 0
 1343 0000 08B5     		push	{r3, lr}
 1344              		.cfi_def_cfa_offset 8
 1345              		.cfi_offset 3, -8
 1346              		.cfi_offset 14, -4
 665:assembly_test.c **** 	if (modulation == MOD_BT_BASIC_RATE) {
 1347              		.loc 1 665 2 view .LVU439
 1348              		.loc 1 665 17 is_stmt 0 view .LVU440
 1349 0002 2B4B     		ldr	r3, .L132
 1350 0004 9A68     		ldr	r2, [r3, #8]
 1351              		.loc 1 665 5 view .LVU441
 1352 0006 9ABB     		cbnz	r2, .L122
 666:assembly_test.c **** 		cc2400_set(MANAND,  0x7fff);
 1353              		.loc 1 666 3 is_stmt 1 view .LVU442
 1354 0008 47F6FF71 		movw	r1, #32767
 1355 000c 0D20     		movs	r0, #13
 1356 000e FFF7FEFF 		bl	cc2400_set
 1357              	.LVL64:
 667:assembly_test.c **** 		cc2400_set(LMTST,   0x2b22);
 1358              		.loc 1 667 3 view .LVU443
 1359 0012 42F62231 		movw	r1, #11042
 1360 0016 1220     		movs	r0, #18
 1361 0018 FFF7FEFF 		bl	cc2400_set
 1362              	.LVL65:
 668:assembly_test.c **** 		cc2400_set(MDMTST0, 0x134b); // without PRNG
 1363              		.loc 1 668 3 view .LVU444
 1364 001c 41F24B31 		movw	r1, #4939
ARM GAS  /tmp/cciSTofK.s 			page 43


 1365 0020 1420     		movs	r0, #20
 1366 0022 FFF7FEFF 		bl	cc2400_set
 1367              	.LVL66:
 669:assembly_test.c **** 		cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 1368              		.loc 1 669 3 view .LVU445
 1369 0026 40F20111 		movw	r1, #257
 1370 002a 2020     		movs	r0, #32
 1371 002c FFF7FEFF 		bl	cc2400_set
 1372              	.LVL67:
 670:assembly_test.c **** 		cc2400_set(FSDIV,   channel - 1); // 1 MHz IF
 1373              		.loc 1 670 3 view .LVU446
 1374 0030 204B     		ldr	r3, .L132+4
 1375 0032 0220     		movs	r0, #2
 1376 0034 1988     		ldrh	r1, [r3]
 1377 0036 0139     		subs	r1, r1, #1
 1378 0038 89B2     		uxth	r1, r1
 1379 003a FFF7FEFF 		bl	cc2400_set
 1380              	.LVL68:
 671:assembly_test.c **** 		cc2400_set(MDMCTRL, 0x0029); // 160 kHz frequency deviation
 1381              		.loc 1 671 3 view .LVU447
 1382 003e 2921     		movs	r1, #41
 1383              	.L131:
 672:assembly_test.c **** 	} else if (modulation == MOD_BT_LOW_ENERGY) {
 673:assembly_test.c **** 		cc2400_set(MANAND,  0x7fff);
 674:assembly_test.c **** 		cc2400_set(LMTST,   0x2b22);
 675:assembly_test.c **** 		cc2400_set(MDMTST0, 0x134b); // without PRNG
 676:assembly_test.c **** 		cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 677:assembly_test.c **** 		cc2400_set(FSDIV,   channel - 1); // 1 MHz IF
 678:assembly_test.c **** 		cc2400_set(MDMCTRL, 0x0040); // 250 kHz frequency deviation
 1384              		.loc 1 678 3 is_stmt 0 view .LVU448
 1385 0040 0320     		movs	r0, #3
 1386 0042 FFF7FEFF 		bl	cc2400_set
 1387              	.LVL69:
 1388              	.L125:
 679:assembly_test.c **** 	} else {
 680:assembly_test.c **** 		/* oops */
 681:assembly_test.c **** 		return;
 682:assembly_test.c **** 	}
 683:assembly_test.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 1389              		.loc 1 683 45 is_stmt 1 discriminator 1 view .LVU449
 1390              		.loc 1 683 8 discriminator 1 view .LVU450
 1391              		.loc 1 683 11 is_stmt 0 discriminator 1 view .LVU451
 1392 0046 FFF7FEFF 		bl	cc2400_status
 1393              	.LVL70:
 1394              		.loc 1 683 8 discriminator 1 view .LVU452
 1395 004a 4206     		lsls	r2, r0, #25
 1396 004c FBD5     		bpl	.L125
 684:assembly_test.c **** 	cc2400_strobe(SFSON);
 1397              		.loc 1 684 2 is_stmt 1 view .LVU453
 1398 004e 6120     		movs	r0, #97
 1399 0050 FFF7FEFF 		bl	cc2400_strobe
 1400              	.LVL71:
 685:assembly_test.c **** 	while (!(cc2400_status() & FS_LOCK));
 1401              		.loc 1 685 2 view .LVU454
 1402              	.L126:
 1403              		.loc 1 685 38 discriminator 1 view .LVU455
 1404              		.loc 1 685 8 discriminator 1 view .LVU456
ARM GAS  /tmp/cciSTofK.s 			page 44


 1405              		.loc 1 685 11 is_stmt 0 discriminator 1 view .LVU457
 1406 0054 FFF7FEFF 		bl	cc2400_status
 1407              	.LVL72:
 1408              		.loc 1 685 8 discriminator 1 view .LVU458
 1409 0058 4307     		lsls	r3, r0, #29
 1410 005a FBD5     		bpl	.L126
 686:assembly_test.c **** 	cc2400_strobe(SRX);
 1411              		.loc 1 686 2 is_stmt 1 view .LVU459
 1412 005c 6220     		movs	r0, #98
 1413 005e FFF7FEFF 		bl	cc2400_strobe
 1414              	.LVL73:
 687:assembly_test.c **** #ifdef UBERTOOTH_ONE
 688:assembly_test.c **** 	PAEN_SET;
 1415              		.loc 1 688 2 view .LVU460
 1416 0062 8022     		movs	r2, #128
 1417 0064 144B     		ldr	r3, .L132+8
 1418 0066 1A60     		str	r2, [r3]
 689:assembly_test.c **** 	HGM_SET;
 1419              		.loc 1 689 2 view .LVU461
 1420 0068 4FF48072 		mov	r2, #256
 1421 006c 1A60     		str	r2, [r3]
 1422              	.L121:
 690:assembly_test.c **** #endif
 691:assembly_test.c **** }
 1423              		.loc 1 691 1 is_stmt 0 view .LVU462
 1424 006e 08BD     		pop	{r3, pc}
 1425              	.L122:
 672:assembly_test.c **** 		cc2400_set(MANAND,  0x7fff);
 1426              		.loc 1 672 9 is_stmt 1 view .LVU463
 672:assembly_test.c **** 		cc2400_set(MANAND,  0x7fff);
 1427              		.loc 1 672 24 is_stmt 0 view .LVU464
 1428 0070 9B68     		ldr	r3, [r3, #8]
 672:assembly_test.c **** 		cc2400_set(MANAND,  0x7fff);
 1429              		.loc 1 672 12 view .LVU465
 1430 0072 012B     		cmp	r3, #1
 1431 0074 FBD1     		bne	.L121
 673:assembly_test.c **** 		cc2400_set(LMTST,   0x2b22);
 1432              		.loc 1 673 3 is_stmt 1 view .LVU466
 1433 0076 47F6FF71 		movw	r1, #32767
 1434 007a 0D20     		movs	r0, #13
 1435 007c FFF7FEFF 		bl	cc2400_set
 1436              	.LVL74:
 674:assembly_test.c **** 		cc2400_set(MDMTST0, 0x134b); // without PRNG
 1437              		.loc 1 674 3 view .LVU467
 1438 0080 42F62231 		movw	r1, #11042
 1439 0084 1220     		movs	r0, #18
 1440 0086 FFF7FEFF 		bl	cc2400_set
 1441              	.LVL75:
 675:assembly_test.c **** 		cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 1442              		.loc 1 675 3 view .LVU468
 1443 008a 41F24B31 		movw	r1, #4939
 1444 008e 1420     		movs	r0, #20
 1445 0090 FFF7FEFF 		bl	cc2400_set
 1446              	.LVL76:
 676:assembly_test.c **** 		cc2400_set(FSDIV,   channel - 1); // 1 MHz IF
 1447              		.loc 1 676 3 view .LVU469
 1448 0094 40F20111 		movw	r1, #257
ARM GAS  /tmp/cciSTofK.s 			page 45


 1449 0098 2020     		movs	r0, #32
 1450 009a FFF7FEFF 		bl	cc2400_set
 1451              	.LVL77:
 677:assembly_test.c **** 		cc2400_set(MDMCTRL, 0x0040); // 250 kHz frequency deviation
 1452              		.loc 1 677 3 view .LVU470
 1453 009e 054B     		ldr	r3, .L132+4
 1454 00a0 0220     		movs	r0, #2
 1455 00a2 1988     		ldrh	r1, [r3]
 1456 00a4 0139     		subs	r1, r1, #1
 1457 00a6 89B2     		uxth	r1, r1
 1458 00a8 FFF7FEFF 		bl	cc2400_set
 1459              	.LVL78:
 678:assembly_test.c **** 	} else {
 1460              		.loc 1 678 3 view .LVU471
 1461 00ac 4021     		movs	r1, #64
 1462 00ae C7E7     		b	.L131
 1463              	.L133:
 1464              		.align	2
 1465              	.L132:
 1466 00b0 00000000 		.word	.LANCHOR0
 1467 00b4 00000000 		.word	.LANCHOR1
 1468 00b8 58C00920 		.word	537509976
 1469              		.cfi_endproc
 1470              	.LFE12:
 1472              		.section	.text.cc2400_txtest,"ax",%progbits
 1473              		.align	1
 1474              		.global	cc2400_txtest
 1475              		.syntax unified
 1476              		.thumb
 1477              		.thumb_func
 1478              		.fpu softvfp
 1480              	cc2400_txtest:
 1481              	.LFB13:
 692:assembly_test.c **** 
 693:assembly_test.c **** void cc2400_txtest()
 694:assembly_test.c **** {
 1482              		.loc 1 694 1 view -0
 1483              		.cfi_startproc
 1484              		@ args = 0, pretend = 0, frame = 0
 1485              		@ frame_needed = 0, uses_anonymous_args = 0
 1486 0000 10B5     		push	{r4, lr}
 1487              		.cfi_def_cfa_offset 8
 1488              		.cfi_offset 4, -8
 1489              		.cfi_offset 14, -4
 695:assembly_test.c **** #ifdef TX_ENABLE
 696:assembly_test.c **** 	if (modulation == MOD_BT_BASIC_RATE) {
 1490              		.loc 1 696 2 view .LVU473
 1491              		.loc 1 696 17 is_stmt 0 view .LVU474
 1492 0002 274C     		ldr	r4, .L145
 1493 0004 A368     		ldr	r3, [r4, #8]
 1494              		.loc 1 696 5 view .LVU475
 1495 0006 83BB     		cbnz	r3, .L135
 697:assembly_test.c **** 		cc2400_set(MANAND,  0x7fff);
 1496              		.loc 1 697 3 is_stmt 1 view .LVU476
 1497 0008 47F6FF71 		movw	r1, #32767
 1498 000c 0D20     		movs	r0, #13
 1499 000e FFF7FEFF 		bl	cc2400_set
ARM GAS  /tmp/cciSTofK.s 			page 46


 1500              	.LVL79:
 698:assembly_test.c **** 		cc2400_set(LMTST,   0x2b22);
 1501              		.loc 1 698 3 view .LVU477
 1502 0012 42F62231 		movw	r1, #11042
 1503 0016 1220     		movs	r0, #18
 1504 0018 FFF7FEFF 		bl	cc2400_set
 1505              	.LVL80:
 699:assembly_test.c **** 		cc2400_set(MDMTST0, 0x334b); // with PRNG
 1506              		.loc 1 699 3 view .LVU478
 1507 001c 43F24B31 		movw	r1, #13131
 1508 0020 1420     		movs	r0, #20
 1509 0022 FFF7FEFF 		bl	cc2400_set
 1510              	.LVL81:
 700:assembly_test.c **** 		cc2400_set(FSDIV,   channel);
 1511              		.loc 1 700 3 view .LVU479
 1512 0026 1F4B     		ldr	r3, .L145+4
 1513 0028 0220     		movs	r0, #2
 1514 002a 1988     		ldrh	r1, [r3]
 1515 002c 89B2     		uxth	r1, r1
 1516 002e FFF7FEFF 		bl	cc2400_set
 1517              	.LVL82:
 701:assembly_test.c **** 		cc2400_set(MDMCTRL, 0x0029); // 160 kHz frequency deviation
 1518              		.loc 1 701 3 view .LVU480
 1519 0032 2921     		movs	r1, #41
 1520              	.L144:
 702:assembly_test.c **** 	} else if (modulation == MOD_BT_LOW_ENERGY) {
 703:assembly_test.c **** 		cc2400_set(MANAND,  0x7fff);
 704:assembly_test.c **** 		cc2400_set(LMTST,   0x2b22);
 705:assembly_test.c **** 		cc2400_set(MDMTST0, 0x334b); // with PRNG
 706:assembly_test.c **** 		cc2400_set(FSDIV,   channel);
 707:assembly_test.c **** 		cc2400_set(MDMCTRL, 0x0040); // 250 kHz frequency deviation
 1521              		.loc 1 707 3 is_stmt 0 view .LVU481
 1522 0034 0320     		movs	r0, #3
 1523 0036 FFF7FEFF 		bl	cc2400_set
 1524              	.LVL83:
 1525              	.L138:
 708:assembly_test.c **** 	} else {
 709:assembly_test.c **** 		/* oops */
 710:assembly_test.c **** 		return;
 711:assembly_test.c **** 	}
 712:assembly_test.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 1526              		.loc 1 712 45 is_stmt 1 discriminator 1 view .LVU482
 1527              		.loc 1 712 8 discriminator 1 view .LVU483
 1528              		.loc 1 712 11 is_stmt 0 discriminator 1 view .LVU484
 1529 003a FFF7FEFF 		bl	cc2400_status
 1530              	.LVL84:
 1531              		.loc 1 712 8 discriminator 1 view .LVU485
 1532 003e 4206     		lsls	r2, r0, #25
 1533 0040 FBD5     		bpl	.L138
 713:assembly_test.c **** 	cc2400_strobe(SFSON);
 1534              		.loc 1 713 2 is_stmt 1 view .LVU486
 1535 0042 6120     		movs	r0, #97
 1536 0044 FFF7FEFF 		bl	cc2400_strobe
 1537              	.LVL85:
 714:assembly_test.c **** 	while (!(cc2400_status() & FS_LOCK));
 1538              		.loc 1 714 2 view .LVU487
 1539              	.L139:
ARM GAS  /tmp/cciSTofK.s 			page 47


 1540              		.loc 1 714 38 discriminator 1 view .LVU488
 1541              		.loc 1 714 8 discriminator 1 view .LVU489
 1542              		.loc 1 714 11 is_stmt 0 discriminator 1 view .LVU490
 1543 0048 FFF7FEFF 		bl	cc2400_status
 1544              	.LVL86:
 1545              		.loc 1 714 8 discriminator 1 view .LVU491
 1546 004c 4307     		lsls	r3, r0, #29
 1547 004e FBD5     		bpl	.L139
 715:assembly_test.c **** 	TXLED_SET;
 1548              		.loc 1 715 2 is_stmt 1 view .LVU492
 1549 0050 4FF48072 		mov	r2, #256
 1550 0054 144B     		ldr	r3, .L145+8
 716:assembly_test.c **** 	cc2400_strobe(STX);
 1551              		.loc 1 716 2 is_stmt 0 view .LVU493
 1552 0056 6320     		movs	r0, #99
 715:assembly_test.c **** 	TXLED_SET;
 1553              		.loc 1 715 2 view .LVU494
 1554 0058 1A60     		str	r2, [r3]
 1555              		.loc 1 716 2 is_stmt 1 view .LVU495
 1556 005a FFF7FEFF 		bl	cc2400_strobe
 1557              	.LVL87:
 717:assembly_test.c **** #ifdef UBERTOOTH_ONE
 718:assembly_test.c **** 	PAEN_SET;
 1558              		.loc 1 718 2 view .LVU496
 1559 005e 8022     		movs	r2, #128
 1560 0060 124B     		ldr	r3, .L145+12
 1561 0062 1A60     		str	r2, [r3]
 719:assembly_test.c **** #endif
 720:assembly_test.c **** 	mode = MODE_TX_TEST;
 1562              		.loc 1 720 2 view .LVU497
 1563              		.loc 1 720 7 is_stmt 0 view .LVU498
 1564 0064 0323     		movs	r3, #3
 1565 0066 A362     		str	r3, [r4, #40]
 1566              	.L134:
 721:assembly_test.c **** #endif
 722:assembly_test.c **** }
 1567              		.loc 1 722 1 view .LVU499
 1568 0068 10BD     		pop	{r4, pc}
 1569              	.L135:
 702:assembly_test.c **** 		cc2400_set(MANAND,  0x7fff);
 1570              		.loc 1 702 9 is_stmt 1 view .LVU500
 702:assembly_test.c **** 		cc2400_set(MANAND,  0x7fff);
 1571              		.loc 1 702 24 is_stmt 0 view .LVU501
 1572 006a A368     		ldr	r3, [r4, #8]
 702:assembly_test.c **** 		cc2400_set(MANAND,  0x7fff);
 1573              		.loc 1 702 12 view .LVU502
 1574 006c 012B     		cmp	r3, #1
 1575 006e FBD1     		bne	.L134
 703:assembly_test.c **** 		cc2400_set(LMTST,   0x2b22);
 1576              		.loc 1 703 3 is_stmt 1 view .LVU503
 1577 0070 47F6FF71 		movw	r1, #32767
 1578 0074 0D20     		movs	r0, #13
 1579 0076 FFF7FEFF 		bl	cc2400_set
 1580              	.LVL88:
 704:assembly_test.c **** 		cc2400_set(MDMTST0, 0x334b); // with PRNG
 1581              		.loc 1 704 3 view .LVU504
 1582 007a 42F62231 		movw	r1, #11042
ARM GAS  /tmp/cciSTofK.s 			page 48


 1583 007e 1220     		movs	r0, #18
 1584 0080 FFF7FEFF 		bl	cc2400_set
 1585              	.LVL89:
 705:assembly_test.c **** 		cc2400_set(FSDIV,   channel);
 1586              		.loc 1 705 3 view .LVU505
 1587 0084 43F24B31 		movw	r1, #13131
 1588 0088 1420     		movs	r0, #20
 1589 008a FFF7FEFF 		bl	cc2400_set
 1590              	.LVL90:
 706:assembly_test.c **** 		cc2400_set(MDMCTRL, 0x0040); // 250 kHz frequency deviation
 1591              		.loc 1 706 3 view .LVU506
 1592 008e 054B     		ldr	r3, .L145+4
 1593 0090 0220     		movs	r0, #2
 1594 0092 1988     		ldrh	r1, [r3]
 1595 0094 89B2     		uxth	r1, r1
 1596 0096 FFF7FEFF 		bl	cc2400_set
 1597              	.LVL91:
 707:assembly_test.c **** 	} else {
 1598              		.loc 1 707 3 view .LVU507
 1599 009a 4021     		movs	r1, #64
 1600 009c CAE7     		b	.L144
 1601              	.L146:
 1602 009e 00BF     		.align	2
 1603              	.L145:
 1604 00a0 00000000 		.word	.LANCHOR0
 1605 00a4 00000000 		.word	.LANCHOR1
 1606 00a8 38C00920 		.word	537509944
 1607 00ac 58C00920 		.word	537509976
 1608              		.cfi_endproc
 1609              	.LFE13:
 1611              		.section	.text.cc2400_rangetest,"ax",%progbits
 1612              		.align	1
 1613              		.global	cc2400_rangetest
 1614              		.syntax unified
 1615              		.thumb
 1616              		.thumb_func
 1617              		.fpu softvfp
 1619              	cc2400_rangetest:
 1620              	.LFB14:
 723:assembly_test.c **** 
 724:assembly_test.c **** /*
 725:assembly_test.c ****  * This range test transmits a Bluetooth-like (but not Bluetooth compatible)
 726:assembly_test.c ****  * packet to a repeater and then receives the repeated packet.  It is only
 727:assembly_test.c ****  * useful if another device is running cc2400_repeater() some distance away.
 728:assembly_test.c ****  *
 729:assembly_test.c ****  * The outgoing packet is transmitted at each power amplifier (PA) level from
 730:assembly_test.c ****  * lowest to highest.  It is sent several times at each level.  The repeater
 731:assembly_test.c ****  * takes the first packet to be received correctly and repeats it in a similar
 732:assembly_test.c ****  * manner.  The result should indicate the lowest successful PA level in each
 733:assembly_test.c ****  * direction.
 734:assembly_test.c ****  *
 735:assembly_test.c ****  * The range test packet consists of:
 736:assembly_test.c ****  *   preamble: 4 bytes
 737:assembly_test.c ****  *   sync word: 4 bytes
 738:assembly_test.c ****  *   payload:
 739:assembly_test.c ****  *     length: 1 byte (21)
 740:assembly_test.c ****  *     packet type: 1 byte (0 = request; 1 = reply)
ARM GAS  /tmp/cciSTofK.s 			page 49


 741:assembly_test.c ****  *     LPC17xx serial number: 16 bytes
 742:assembly_test.c ****  *     request pa: 1 byte
 743:assembly_test.c ****  *     request number: 1 byte
 744:assembly_test.c ****  *     reply pa: 1 byte
 745:assembly_test.c ****  *     reply number: 1 byte
 746:assembly_test.c ****  *   crc: 2 bytes
 747:assembly_test.c ****  */
 748:assembly_test.c **** 
 749:assembly_test.c **** void cc2400_rangetest()
 750:assembly_test.c **** {
 1621              		.loc 1 750 1 view -0
 1622              		.cfi_startproc
 1623              		@ args = 0, pretend = 0, frame = 96
 1624              		@ frame_needed = 1, uses_anonymous_args = 0
 1625 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1626              		.cfi_def_cfa_offset 36
 1627              		.cfi_offset 4, -36
 1628              		.cfi_offset 5, -32
 1629              		.cfi_offset 6, -28
 1630              		.cfi_offset 7, -24
 1631              		.cfi_offset 8, -20
 1632              		.cfi_offset 9, -16
 1633              		.cfi_offset 10, -12
 1634              		.cfi_offset 11, -8
 1635              		.cfi_offset 14, -4
 1636 0004 99B0     		sub	sp, sp, #100
 1637              		.cfi_def_cfa_offset 136
 1638 0006 00AF     		add	r7, sp, #0
 1639              		.cfi_def_cfa_register 7
 751:assembly_test.c **** #ifdef TX_ENABLE
 752:assembly_test.c **** 	u32 command[5];
 753:assembly_test.c **** 	u32 result[5];
 754:assembly_test.c **** 	int i;
 755:assembly_test.c **** 	int j;
 756:assembly_test.c **** 	u8 len = 22;
 757:assembly_test.c **** 	u8 pa = 0;
 758:assembly_test.c **** 	u8 txbuf[len];
 759:assembly_test.c **** 	u8 rxbuf[len];
 760:assembly_test.c **** 
 761:assembly_test.c **** 	mode = MODE_RANGE_TEST;
 1640              		.loc 1 761 7 is_stmt 0 view .LVU509
 1641 0008 0525     		movs	r5, #5
 1642 000a 9B4B     		ldr	r3, .L195
 762:assembly_test.c **** 
 763:assembly_test.c **** 	txbuf[0] = len - 1; // length of data (rest of payload)
 764:assembly_test.c **** 	txbuf[1] = 0; // request
 765:assembly_test.c **** 
 766:assembly_test.c **** 	// read device serial number
 767:assembly_test.c **** 	command[0] = 58;
 768:assembly_test.c **** 	iap_entry(command, result);
 1643              		.loc 1 768 2 view .LVU510
 1644 000c 07F11C01 		add	r1, r7, #28
 761:assembly_test.c **** 
 1645              		.loc 1 761 7 view .LVU511
 1646 0010 9D62     		str	r5, [r3, #40]
 763:assembly_test.c **** 	txbuf[1] = 0; // request
 1647              		.loc 1 763 11 view .LVU512
ARM GAS  /tmp/cciSTofK.s 			page 50


 1648 0012 1523     		movs	r3, #21
 1649 0014 3B86     		strh	r3, [r7, #48]	@ movhi
 767:assembly_test.c **** 	iap_entry(command, result);
 1650              		.loc 1 767 13 view .LVU513
 1651 0016 3A23     		movs	r3, #58
 1652 0018 BB60     		str	r3, [r7, #8]
 1653              		.loc 1 768 2 view .LVU514
 1654 001a 984B     		ldr	r3, .L195+4
 1655 001c 07F10800 		add	r0, r7, #8
 1656 0020 1B68     		ldr	r3, [r3]
 750:assembly_test.c **** #ifdef TX_ENABLE
 1657              		.loc 1 750 1 view .LVU515
 1658 0022 C7F804D0 		str	sp, [r7, #4]
 752:assembly_test.c **** 	u32 result[5];
 1659              		.loc 1 752 2 is_stmt 1 view .LVU516
 753:assembly_test.c **** 	int i;
 1660              		.loc 1 753 2 view .LVU517
 754:assembly_test.c **** 	int j;
 1661              		.loc 1 754 2 view .LVU518
 755:assembly_test.c **** 	u8 len = 22;
 1662              		.loc 1 755 2 view .LVU519
 756:assembly_test.c **** 	u8 pa = 0;
 1663              		.loc 1 756 2 view .LVU520
 1664              	.LVL92:
 757:assembly_test.c **** 	u8 txbuf[len];
 1665              		.loc 1 757 2 view .LVU521
 758:assembly_test.c **** 	u8 rxbuf[len];
 1666              		.loc 1 758 2 view .LVU522
 759:assembly_test.c **** 
 1667              		.loc 1 759 2 view .LVU523
 761:assembly_test.c **** 
 1668              		.loc 1 761 2 view .LVU524
 763:assembly_test.c **** 	txbuf[1] = 0; // request
 1669              		.loc 1 763 2 view .LVU525
 764:assembly_test.c **** 
 1670              		.loc 1 764 2 view .LVU526
 767:assembly_test.c **** 	iap_entry(command, result);
 1671              		.loc 1 767 2 view .LVU527
 1672              		.loc 1 768 2 view .LVU528
 1673 0026 9847     		blx	r3
 1674              	.LVL93:
 769:assembly_test.c **** 	if ((result[0] & 0xFF) != 0) //status check
 1675              		.loc 1 769 2 view .LVU529
 1676              		.loc 1 769 17 is_stmt 0 view .LVU530
 1677 0028 3C7F     		ldrb	r4, [r7, #28]	@ zero_extendqisi2
 1678              		.loc 1 769 5 view .LVU531
 1679 002a 002C     		cmp	r4, #0
 1680 002c 40F02081 		bne	.L147
 770:assembly_test.c **** 		return;
 771:assembly_test.c **** 	txbuf[2] = (result[1] >> 24) & 0xFF;
 1681              		.loc 1 771 2 is_stmt 1 view .LVU532
 1682              		.loc 1 771 20 is_stmt 0 view .LVU533
 1683 0030 3B6A     		ldr	r3, [r7, #32]
 1684 0032 3A8C     		ldrh	r2, [r7, #32]
 1685              		.loc 1 771 24 view .LVU534
 1686 0034 190E     		lsrs	r1, r3, #24
 772:assembly_test.c **** 	txbuf[3] = (result[1] >> 16) & 0xFF;
ARM GAS  /tmp/cciSTofK.s 			page 51


 1687              		.loc 1 772 24 view .LVU535
 1688 0036 1B0C     		lsrs	r3, r3, #16
 1689              		.loc 1 772 11 view .LVU536
 1690 0038 87F83330 		strb	r3, [r7, #51]
 773:assembly_test.c **** 	txbuf[4] = (result[1] >> 8) & 0xFF;
 774:assembly_test.c **** 	txbuf[5] = result[1] & 0xFF;
 775:assembly_test.c **** 	txbuf[6] = (result[2] >> 24) & 0xFF;
 1691              		.loc 1 775 20 view .LVU537
 1692 003c 7B6A     		ldr	r3, [r7, #36]
 771:assembly_test.c **** 	txbuf[3] = (result[1] >> 16) & 0xFF;
 1693              		.loc 1 771 11 view .LVU538
 1694 003e 87F83210 		strb	r1, [r7, #50]
 772:assembly_test.c **** 	txbuf[3] = (result[1] >> 16) & 0xFF;
 1695              		.loc 1 772 2 is_stmt 1 view .LVU539
 773:assembly_test.c **** 	txbuf[4] = (result[1] >> 8) & 0xFF;
 1696              		.loc 1 773 2 view .LVU540
 774:assembly_test.c **** 	txbuf[6] = (result[2] >> 24) & 0xFF;
 1697              		.loc 1 774 2 view .LVU541
 1698              		.loc 1 775 24 is_stmt 0 view .LVU542
 1699 0042 190E     		lsrs	r1, r3, #24
 776:assembly_test.c **** 	txbuf[7] = (result[2] >> 16) & 0xFF;
 1700              		.loc 1 776 24 view .LVU543
 1701 0044 1B0C     		lsrs	r3, r3, #16
 1702              		.loc 1 776 11 view .LVU544
 1703 0046 87F83730 		strb	r3, [r7, #55]
 777:assembly_test.c **** 	txbuf[8] = (result[2] >> 8) & 0xFF;
 778:assembly_test.c **** 	txbuf[9] = result[2] & 0xFF;
 779:assembly_test.c **** 	txbuf[10] = (result[3] >> 24) & 0xFF;
 1704              		.loc 1 779 21 view .LVU545
 1705 004a BB6A     		ldr	r3, [r7, #40]
 775:assembly_test.c **** 	txbuf[7] = (result[2] >> 16) & 0xFF;
 1706              		.loc 1 775 11 view .LVU546
 1707 004c 87F83610 		strb	r1, [r7, #54]
 1708              		.loc 1 779 25 view .LVU547
 1709 0050 190E     		lsrs	r1, r3, #24
 780:assembly_test.c **** 	txbuf[11] = (result[3] >> 16) & 0xFF;
 1710              		.loc 1 780 25 view .LVU548
 1711 0052 1B0C     		lsrs	r3, r3, #16
 1712              		.loc 1 780 12 view .LVU549
 1713 0054 87F83B30 		strb	r3, [r7, #59]
 781:assembly_test.c **** 	txbuf[12] = (result[3] >> 8) & 0xFF;
 782:assembly_test.c **** 	txbuf[13] = result[3] & 0xFF;
 783:assembly_test.c **** 	txbuf[14] = (result[4] >> 24) & 0xFF;
 1714              		.loc 1 783 21 view .LVU550
 1715 0058 FB6A     		ldr	r3, [r7, #44]
 779:assembly_test.c **** 	txbuf[11] = (result[3] >> 16) & 0xFF;
 1716              		.loc 1 779 12 view .LVU551
 1717 005a 87F83A10 		strb	r1, [r7, #58]
 1718              		.loc 1 783 25 view .LVU552
 1719 005e 190E     		lsrs	r1, r3, #24
 784:assembly_test.c **** 	txbuf[15] = (result[4] >> 16) & 0xFF;
 1720              		.loc 1 784 25 view .LVU553
 1721 0060 1B0C     		lsrs	r3, r3, #16
 1722              		.loc 1 784 12 view .LVU554
 1723 0062 87F83F30 		strb	r3, [r7, #63]
 785:assembly_test.c **** 	txbuf[16] = (result[4] >> 8) & 0xFF;
 786:assembly_test.c **** 	txbuf[17] = result[4] & 0xFF;
ARM GAS  /tmp/cciSTofK.s 			page 52


 787:assembly_test.c **** 
 788:assembly_test.c **** 	txbuf[18] = pa; // request pa
 789:assembly_test.c **** 	txbuf[19] = 0; // request number
 790:assembly_test.c **** 	txbuf[20] = 0xff; // reply pa
 1724              		.loc 1 790 12 view .LVU555
 1725 0066 4FF6FF73 		movw	r3, #65535
 1726 006a 52BA     		rev16	r2, r2
 773:assembly_test.c **** 	txbuf[5] = result[1] & 0xFF;
 1727              		.loc 1 773 11 view .LVU556
 1728 006c BA86     		strh	r2, [r7, #52]	@ movhi
 775:assembly_test.c **** 	txbuf[7] = (result[2] >> 16) & 0xFF;
 1729              		.loc 1 775 2 is_stmt 1 view .LVU557
 776:assembly_test.c **** 	txbuf[8] = (result[2] >> 8) & 0xFF;
 1730              		.loc 1 776 2 view .LVU558
 777:assembly_test.c **** 	txbuf[9] = result[2] & 0xFF;
 1731              		.loc 1 777 2 view .LVU559
 778:assembly_test.c **** 	txbuf[10] = (result[3] >> 24) & 0xFF;
 1732              		.loc 1 778 2 view .LVU560
 1733 006e BA8C     		ldrh	r2, [r7, #36]
 791:assembly_test.c **** 	txbuf[21] = 0xff; // reply number
 792:assembly_test.c **** 
 793:assembly_test.c **** 	// Bluetooth-like modulation
 794:assembly_test.c **** 	cc2400_set(MANAND,  0x7fff);
 1734              		.loc 1 794 2 is_stmt 0 view .LVU561
 1735 0070 0D20     		movs	r0, #13
 1736 0072 52BA     		rev16	r2, r2
 777:assembly_test.c **** 	txbuf[9] = result[2] & 0xFF;
 1737              		.loc 1 777 11 view .LVU562
 1738 0074 3A87     		strh	r2, [r7, #56]	@ movhi
 779:assembly_test.c **** 	txbuf[11] = (result[3] >> 16) & 0xFF;
 1739              		.loc 1 779 2 is_stmt 1 view .LVU563
 780:assembly_test.c **** 	txbuf[12] = (result[3] >> 8) & 0xFF;
 1740              		.loc 1 780 2 view .LVU564
 781:assembly_test.c **** 	txbuf[13] = result[3] & 0xFF;
 1741              		.loc 1 781 2 view .LVU565
 782:assembly_test.c **** 	txbuf[14] = (result[4] >> 24) & 0xFF;
 1742              		.loc 1 782 2 view .LVU566
 1743 0076 3A8D     		ldrh	r2, [r7, #40]
 783:assembly_test.c **** 	txbuf[15] = (result[4] >> 16) & 0xFF;
 1744              		.loc 1 783 12 is_stmt 0 view .LVU567
 1745 0078 87F83E10 		strb	r1, [r7, #62]
 1746 007c 52BA     		rev16	r2, r2
 781:assembly_test.c **** 	txbuf[13] = result[3] & 0xFF;
 1747              		.loc 1 781 12 view .LVU568
 1748 007e BA87     		strh	r2, [r7, #60]	@ movhi
 783:assembly_test.c **** 	txbuf[15] = (result[4] >> 16) & 0xFF;
 1749              		.loc 1 783 2 is_stmt 1 view .LVU569
 784:assembly_test.c **** 	txbuf[16] = (result[4] >> 8) & 0xFF;
 1750              		.loc 1 784 2 view .LVU570
 785:assembly_test.c **** 	txbuf[17] = result[4] & 0xFF;
 1751              		.loc 1 785 2 view .LVU571
 786:assembly_test.c **** 
 1752              		.loc 1 786 2 view .LVU572
 1753 0080 BA8D     		ldrh	r2, [r7, #44]
 1754              		.loc 1 794 2 is_stmt 0 view .LVU573
 1755 0082 47F6FF71 		movw	r1, #32767
 1756 0086 52BA     		rev16	r2, r2
ARM GAS  /tmp/cciSTofK.s 			page 53


 785:assembly_test.c **** 	txbuf[17] = result[4] & 0xFF;
 1757              		.loc 1 785 12 view .LVU574
 1758 0088 A7F84020 		strh	r2, [r7, #64]	@ movhi
 788:assembly_test.c **** 	txbuf[19] = 0; // request number
 1759              		.loc 1 788 2 is_stmt 1 view .LVU575
 789:assembly_test.c **** 	txbuf[20] = 0xff; // reply pa
 1760              		.loc 1 789 2 view .LVU576
 790:assembly_test.c **** 	txbuf[21] = 0xff; // reply number
 1761              		.loc 1 790 2 view .LVU577
 791:assembly_test.c **** 
 1762              		.loc 1 791 2 view .LVU578
 790:assembly_test.c **** 	txbuf[21] = 0xff; // reply number
 1763              		.loc 1 790 12 is_stmt 0 view .LVU579
 1764 008c A7F84430 		strh	r3, [r7, #68]	@ movhi
 1765              		.loc 1 794 2 is_stmt 1 view .LVU580
 795:assembly_test.c **** 	cc2400_set(LMTST,   0x2b22);
 796:assembly_test.c **** 	cc2400_set(MDMTST0, 0x134b);
 797:assembly_test.c **** 	cc2400_set(FSDIV,   channel);
 1766              		.loc 1 797 2 is_stmt 0 view .LVU581
 1767 0090 7B4E     		ldr	r6, .L195+8
 794:assembly_test.c **** 	cc2400_set(LMTST,   0x2b22);
 1768              		.loc 1 794 2 view .LVU582
 1769 0092 FFF7FEFF 		bl	cc2400_set
 1770              	.LVL94:
 795:assembly_test.c **** 	cc2400_set(LMTST,   0x2b22);
 1771              		.loc 1 795 2 is_stmt 1 view .LVU583
 1772 0096 42F62231 		movw	r1, #11042
 1773 009a 1220     		movs	r0, #18
 1774 009c FFF7FEFF 		bl	cc2400_set
 1775              	.LVL95:
 796:assembly_test.c **** 	cc2400_set(FSDIV,   channel);
 1776              		.loc 1 796 2 view .LVU584
 1777 00a0 41F24B31 		movw	r1, #4939
 1778 00a4 1420     		movs	r0, #20
 1779 00a6 FFF7FEFF 		bl	cc2400_set
 1780              	.LVL96:
 1781              		.loc 1 797 2 view .LVU585
 1782 00aa 3188     		ldrh	r1, [r6]
 1783 00ac 0220     		movs	r0, #2
 1784 00ae 89B2     		uxth	r1, r1
 1785 00b0 FFF7FEFF 		bl	cc2400_set
 1786              	.LVL97:
 798:assembly_test.c **** 	cc2400_set(SYNCH,   0xf9ae);
 1787              		.loc 1 798 2 view .LVU586
 1788 00b4 4FF6AE11 		movw	r1, #63918
 1789 00b8 2D20     		movs	r0, #45
 1790 00ba FFF7FEFF 		bl	cc2400_set
 1791              	.LVL98:
 799:assembly_test.c **** 	cc2400_set(SYNCL,   0x1584);
 1792              		.loc 1 799 2 view .LVU587
 1793 00be 41F28451 		movw	r1, #5508
 1794 00c2 2C20     		movs	r0, #44
 1795 00c4 FFF7FEFF 		bl	cc2400_set
 1796              	.LVL99:
 800:assembly_test.c **** 	cc2400_set(FREND,   8 | pa);
 1797              		.loc 1 800 2 view .LVU588
 1798 00c8 0821     		movs	r1, #8
ARM GAS  /tmp/cciSTofK.s 			page 54


 1799 00ca 2846     		mov	r0, r5
 1800 00cc FFF7FEFF 		bl	cc2400_set
 1801              	.LVL100:
 801:assembly_test.c **** 	cc2400_set(MDMCTRL, 0x0029);
 1802              		.loc 1 801 2 view .LVU589
 1803 00d0 2921     		movs	r1, #41
 1804 00d2 0320     		movs	r0, #3
 1805 00d4 FFF7FEFF 		bl	cc2400_set
 1806              	.LVL101:
 802:assembly_test.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 1807              		.loc 1 802 2 view .LVU590
 1808              	.L150:
 1809              		.loc 1 802 45 discriminator 1 view .LVU591
 1810              		.loc 1 802 8 discriminator 1 view .LVU592
 1811              		.loc 1 802 11 is_stmt 0 discriminator 1 view .LVU593
 1812 00d8 FFF7FEFF 		bl	cc2400_status
 1813              	.LVL102:
 1814              		.loc 1 802 8 discriminator 1 view .LVU594
 1815 00dc 4106     		lsls	r1, r0, #25
 1816 00de FBD5     		bpl	.L150
 803:assembly_test.c **** 	cc2400_strobe(SFSON);
 1817              		.loc 1 803 2 is_stmt 1 view .LVU595
 1818 00e0 6120     		movs	r0, #97
 1819 00e2 FFF7FEFF 		bl	cc2400_strobe
 1820              	.LVL103:
 804:assembly_test.c **** 	while (!(cc2400_status() & FS_LOCK));
 1821              		.loc 1 804 2 view .LVU596
 1822              	.L151:
 1823              		.loc 1 804 38 discriminator 1 view .LVU597
 1824              		.loc 1 804 8 discriminator 1 view .LVU598
 1825              		.loc 1 804 11 is_stmt 0 discriminator 1 view .LVU599
 1826 00e6 FFF7FEFF 		bl	cc2400_status
 1827              	.LVL104:
 1828              		.loc 1 804 8 discriminator 1 view .LVU600
 1829 00ea 4207     		lsls	r2, r0, #29
 1830 00ec FBD5     		bpl	.L151
 805:assembly_test.c **** 	TXLED_SET;
 1831              		.loc 1 805 2 is_stmt 1 view .LVU601
 1832 00ee 4FF48072 		mov	r2, #256
 1833 00f2 644B     		ldr	r3, .L195+12
 806:assembly_test.c **** #ifdef UBERTOOTH_ONE
 807:assembly_test.c **** 	PAEN_SET;
 1834              		.loc 1 807 2 is_stmt 0 view .LVU602
 1835 00f4 8021     		movs	r1, #128
 1836 00f6 9846     		mov	r8, r3
 805:assembly_test.c **** 	TXLED_SET;
 1837              		.loc 1 805 2 view .LVU603
 1838 00f8 1A60     		str	r2, [r3]
 1839              		.loc 1 807 2 is_stmt 1 view .LVU604
 1840 00fa 634A     		ldr	r2, .L195+16
 1841 00fc 1160     		str	r1, [r2]
 808:assembly_test.c **** #endif
 809:assembly_test.c **** 	for (pa = 0; pa < 8; pa++) {
 1842              		.loc 1 809 2 view .LVU605
 1843              		.loc 1 809 15 view .LVU606
 1844              	.LVL105:
 1845              	.L155:
ARM GAS  /tmp/cciSTofK.s 			page 55


 810:assembly_test.c **** 		cc2400_set(FREND, 8 | pa);
 811:assembly_test.c **** 		txbuf[18] = pa;
 812:assembly_test.c **** 		for (i = 0; i < 16; i++) {
 1846              		.loc 1 812 10 is_stmt 0 view .LVU607
 1847 00fe 4FF00009 		mov	r9, #0
 1848 0102 E5B2     		uxtb	r5, r4
 1849              	.LVL106:
 810:assembly_test.c **** 		cc2400_set(FREND, 8 | pa);
 1850              		.loc 1 810 3 is_stmt 1 view .LVU608
 1851 0104 0520     		movs	r0, #5
 1852 0106 45F00801 		orr	r1, r5, #8
 1853 010a FFF7FEFF 		bl	cc2400_set
 1854              	.LVL107:
 811:assembly_test.c **** 		for (i = 0; i < 16; i++) {
 1855              		.loc 1 811 3 view .LVU609
 811:assembly_test.c **** 		for (i = 0; i < 16; i++) {
 1856              		.loc 1 811 13 is_stmt 0 view .LVU610
 1857 010e 87F84250 		strb	r5, [r7, #66]
 1858              		.loc 1 812 3 is_stmt 1 view .LVU611
 1859              	.LVL108:
 1860              		.loc 1 812 15 view .LVU612
 1861              	.L154:
 813:assembly_test.c **** 			txbuf[19] = i;
 1862              		.loc 1 813 4 view .LVU613
 1863              		.loc 1 813 14 is_stmt 0 view .LVU614
 1864 0112 87F84390 		strb	r9, [r7, #67]
 814:assembly_test.c **** 			while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 1865              		.loc 1 814 4 is_stmt 1 view .LVU615
 1866              	.L152:
 1867              		.loc 1 814 63 discriminator 1 view .LVU616
 1868              		.loc 1 814 10 discriminator 1 view .LVU617
 1869              		.loc 1 814 12 is_stmt 0 discriminator 1 view .LVU618
 1870 0116 0E20     		movs	r0, #14
 1871 0118 FFF7FEFF 		bl	cc2400_get
 1872              	.LVL109:
 1873              		.loc 1 814 10 discriminator 1 view .LVU619
 1874 011c 00F01F00 		and	r0, r0, #31
 1875 0120 0F28     		cmp	r0, #15
 1876 0122 F8D1     		bne	.L152
 1877 0124 07F13005 		add	r5, r7, #48
 1878              	.LVL110:
 1879              		.loc 1 814 10 view .LVU620
 1880 0128 AB46     		mov	fp, r5
 815:assembly_test.c **** 			// transmit a packet
 816:assembly_test.c **** 			for (j = 0; j < len; j++)
 1881              		.loc 1 816 11 view .LVU621
 1882 012a 4FF0000A 		mov	r10, #0
 1883              	.L153:
 1884              	.LVL111:
 817:assembly_test.c **** 				cc2400_set8(FIFOREG, txbuf[j]);
 1885              		.loc 1 817 5 is_stmt 1 discriminator 3 view .LVU622
 1886 012e 7020     		movs	r0, #112
 1887 0130 1BF8011B 		ldrb	r1, [fp], #1	@ zero_extendqisi2
 816:assembly_test.c **** 				cc2400_set8(FIFOREG, txbuf[j]);
 1888              		.loc 1 816 26 is_stmt 0 discriminator 3 view .LVU623
 1889 0134 0AF1010A 		add	r10, r10, #1
 1890              	.LVL112:
ARM GAS  /tmp/cciSTofK.s 			page 56


 1891              		.loc 1 817 5 discriminator 3 view .LVU624
 1892 0138 FFF7FEFF 		bl	cc2400_set8
 1893              	.LVL113:
 816:assembly_test.c **** 				cc2400_set8(FIFOREG, txbuf[j]);
 1894              		.loc 1 816 25 is_stmt 1 discriminator 3 view .LVU625
 816:assembly_test.c **** 				cc2400_set8(FIFOREG, txbuf[j]);
 1895              		.loc 1 816 16 discriminator 3 view .LVU626
 816:assembly_test.c **** 				cc2400_set8(FIFOREG, txbuf[j]);
 1896              		.loc 1 816 4 is_stmt 0 discriminator 3 view .LVU627
 1897 013c BAF1160F 		cmp	r10, #22
 1898 0140 F5D1     		bne	.L153
 818:assembly_test.c **** 			cc2400_strobe(STX);
 1899              		.loc 1 818 4 is_stmt 1 discriminator 2 view .LVU628
 1900 0142 6320     		movs	r0, #99
 812:assembly_test.c **** 			txbuf[19] = i;
 1901              		.loc 1 812 24 is_stmt 0 discriminator 2 view .LVU629
 1902 0144 09F10109 		add	r9, r9, #1
 1903              	.LVL114:
 1904              		.loc 1 818 4 discriminator 2 view .LVU630
 1905 0148 FFF7FEFF 		bl	cc2400_strobe
 1906              	.LVL115:
 812:assembly_test.c **** 			txbuf[19] = i;
 1907              		.loc 1 812 23 is_stmt 1 discriminator 2 view .LVU631
 812:assembly_test.c **** 			txbuf[19] = i;
 1908              		.loc 1 812 15 discriminator 2 view .LVU632
 812:assembly_test.c **** 			txbuf[19] = i;
 1909              		.loc 1 812 3 is_stmt 0 discriminator 2 view .LVU633
 1910 014c B9F1100F 		cmp	r9, #16
 1911 0150 DFD1     		bne	.L154
 809:assembly_test.c **** 		cc2400_set(FREND, 8 | pa);
 1912              		.loc 1 809 23 is_stmt 1 discriminator 2 view .LVU634
 1913              	.LVL116:
 809:assembly_test.c **** 		cc2400_set(FREND, 8 | pa);
 1914              		.loc 1 809 15 discriminator 2 view .LVU635
 1915 0152 0134     		adds	r4, r4, #1
 1916              	.LVL117:
 809:assembly_test.c **** 		cc2400_set(FREND, 8 | pa);
 1917              		.loc 1 809 2 is_stmt 0 discriminator 2 view .LVU636
 1918 0154 082C     		cmp	r4, #8
 1919 0156 D2D1     		bne	.L155
 1920              	.L156:
 819:assembly_test.c **** 		}
 820:assembly_test.c **** 	}
 821:assembly_test.c **** 	// sent packet, now look for repeated packet
 822:assembly_test.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 1921              		.loc 1 822 61 is_stmt 1 discriminator 1 view .LVU637
 1922              		.loc 1 822 8 discriminator 1 view .LVU638
 1923              		.loc 1 822 10 is_stmt 0 discriminator 1 view .LVU639
 1924 0158 0E20     		movs	r0, #14
 1925 015a FFF7FEFF 		bl	cc2400_get
 1926              	.LVL118:
 1927              		.loc 1 822 8 discriminator 1 view .LVU640
 1928 015e 00F01F00 		and	r0, r0, #31
 1929 0162 0F28     		cmp	r0, #15
 1930 0164 F8D1     		bne	.L156
 823:assembly_test.c **** 	TXLED_CLR;
 1931              		.loc 1 823 2 is_stmt 1 view .LVU641
ARM GAS  /tmp/cciSTofK.s 			page 57


 1932 0166 4FF48073 		mov	r3, #256
 1933 016a 484C     		ldr	r4, .L195+20
 824:assembly_test.c **** 	cc2400_strobe(SRFOFF);
 1934              		.loc 1 824 2 is_stmt 0 view .LVU642
 1935 016c 6420     		movs	r0, #100
 823:assembly_test.c **** 	TXLED_CLR;
 1936              		.loc 1 823 2 view .LVU643
 1937 016e 2360     		str	r3, [r4]
 1938              		.loc 1 824 2 is_stmt 1 view .LVU644
 1939 0170 FFF7FEFF 		bl	cc2400_strobe
 1940              	.LVL119:
 825:assembly_test.c **** 	while ((cc2400_status() & FS_LOCK));
 1941              		.loc 1 825 2 view .LVU645
 1942              	.L157:
 1943              		.loc 1 825 37 discriminator 1 view .LVU646
 1944              		.loc 1 825 8 discriminator 1 view .LVU647
 1945              		.loc 1 825 10 is_stmt 0 discriminator 1 view .LVU648
 1946 0174 FFF7FEFF 		bl	cc2400_status
 1947              	.LVL120:
 1948              		.loc 1 825 8 discriminator 1 view .LVU649
 1949 0178 4307     		lsls	r3, r0, #29
 1950 017a FBD4     		bmi	.L157
 826:assembly_test.c **** 	cc2400_set(FSDIV, channel - 1);
 1951              		.loc 1 826 2 is_stmt 1 view .LVU650
 1952 017c 3188     		ldrh	r1, [r6]
 1953 017e 0220     		movs	r0, #2
 1954 0180 0139     		subs	r1, r1, #1
 1955 0182 89B2     		uxth	r1, r1
 1956 0184 FFF7FEFF 		bl	cc2400_set
 1957              	.LVL121:
 827:assembly_test.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 1958              		.loc 1 827 2 view .LVU651
 1959              	.L158:
 1960              		.loc 1 827 45 discriminator 1 view .LVU652
 1961              		.loc 1 827 8 discriminator 1 view .LVU653
 1962              		.loc 1 827 11 is_stmt 0 discriminator 1 view .LVU654
 1963 0188 FFF7FEFF 		bl	cc2400_status
 1964              	.LVL122:
 1965              		.loc 1 827 8 discriminator 1 view .LVU655
 1966 018c 4006     		lsls	r0, r0, #25
 1967 018e FBD5     		bpl	.L158
 828:assembly_test.c **** 	cc2400_strobe(SFSON);
 1968              		.loc 1 828 2 is_stmt 1 view .LVU656
 1969 0190 6120     		movs	r0, #97
 1970 0192 FFF7FEFF 		bl	cc2400_strobe
 1971              	.LVL123:
 829:assembly_test.c **** 	while (!(cc2400_status() & FS_LOCK));
 1972              		.loc 1 829 2 view .LVU657
 1973              	.L159:
 1974              		.loc 1 829 38 discriminator 1 view .LVU658
 1975              		.loc 1 829 8 discriminator 1 view .LVU659
 1976              		.loc 1 829 11 is_stmt 0 discriminator 1 view .LVU660
 1977 0196 FFF7FEFF 		bl	cc2400_status
 1978              	.LVL124:
 1979              		.loc 1 829 8 discriminator 1 view .LVU661
 1980 019a 4107     		lsls	r1, r0, #29
 1981 019c FBD5     		bpl	.L159
ARM GAS  /tmp/cciSTofK.s 			page 58


 830:assembly_test.c **** 	RXLED_SET;
 1982              		.loc 1 830 2 is_stmt 1 view .LVU662
 1983 019e 1023     		movs	r3, #16
 831:assembly_test.c **** 	while (1) {
 832:assembly_test.c **** 		while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 833:assembly_test.c **** 		cc2400_strobe(SRX);
 834:assembly_test.c **** 		while (!(cc2400_status() & SYNC_RECEIVED));
 835:assembly_test.c **** 		USRLED_SET;
 1984              		.loc 1 835 3 is_stmt 0 view .LVU663
 1985 01a0 4FF0020A 		mov	r10, #2
 1986              	.LVL125:
 830:assembly_test.c **** 	RXLED_SET;
 1987              		.loc 1 830 2 view .LVU664
 1988 01a4 C8F80030 		str	r3, [r8]
 1989              	.LVL126:
 1990              	.L160:
 832:assembly_test.c **** 		cc2400_strobe(SRX);
 1991              		.loc 1 832 62 is_stmt 1 discriminator 1 view .LVU665
 832:assembly_test.c **** 		cc2400_strobe(SRX);
 1992              		.loc 1 832 9 discriminator 1 view .LVU666
 832:assembly_test.c **** 		cc2400_strobe(SRX);
 1993              		.loc 1 832 11 is_stmt 0 discriminator 1 view .LVU667
 1994 01a8 0E20     		movs	r0, #14
 1995 01aa FFF7FEFF 		bl	cc2400_get
 1996              	.LVL127:
 832:assembly_test.c **** 		cc2400_strobe(SRX);
 1997              		.loc 1 832 9 discriminator 1 view .LVU668
 1998 01ae 00F01F00 		and	r0, r0, #31
 1999 01b2 0F28     		cmp	r0, #15
 2000 01b4 F8D1     		bne	.L160
 833:assembly_test.c **** 		while (!(cc2400_status() & SYNC_RECEIVED));
 2001              		.loc 1 833 3 is_stmt 1 view .LVU669
 2002 01b6 6220     		movs	r0, #98
 2003 01b8 FFF7FEFF 		bl	cc2400_strobe
 2004              	.LVL128:
 834:assembly_test.c **** 		USRLED_SET;
 2005              		.loc 1 834 3 view .LVU670
 2006              	.L161:
 834:assembly_test.c **** 		USRLED_SET;
 2007              		.loc 1 834 45 discriminator 1 view .LVU671
 834:assembly_test.c **** 		USRLED_SET;
 2008              		.loc 1 834 9 discriminator 1 view .LVU672
 834:assembly_test.c **** 		USRLED_SET;
 2009              		.loc 1 834 12 is_stmt 0 discriminator 1 view .LVU673
 2010 01bc FFF7FEFF 		bl	cc2400_status
 2011              	.LVL129:
 834:assembly_test.c **** 		USRLED_SET;
 2012              		.loc 1 834 9 discriminator 1 view .LVU674
 2013 01c0 C206     		lsls	r2, r0, #27
 2014 01c2 FBD5     		bpl	.L161
 2015              		.loc 1 835 3 is_stmt 1 view .LVU675
 2016 01c4 07F14806 		add	r6, r7, #72
 2017              	.LVL130:
 2018              		.loc 1 835 3 is_stmt 0 view .LVU676
 2019 01c8 B346     		mov	fp, r6
 836:assembly_test.c **** 		for (j = 0; j < len; j++)
 2020              		.loc 1 836 10 view .LVU677
ARM GAS  /tmp/cciSTofK.s 			page 59


 2021 01ca 4FF00009 		mov	r9, #0
 835:assembly_test.c **** 		for (j = 0; j < len; j++)
 2022              		.loc 1 835 3 view .LVU678
 2023 01ce C8F800A0 		str	r10, [r8]
 2024              		.loc 1 836 3 is_stmt 1 view .LVU679
 2025              	.LVL131:
 2026              		.loc 1 836 15 view .LVU680
 2027              	.L162:
 837:assembly_test.c **** 			rxbuf[j] = cc2400_get8(FIFOREG);
 2028              		.loc 1 837 4 discriminator 3 view .LVU681
 2029              		.loc 1 837 15 is_stmt 0 discriminator 3 view .LVU682
 2030 01d2 7020     		movs	r0, #112
 2031 01d4 FFF7FEFF 		bl	cc2400_get8
 2032              	.LVL132:
 836:assembly_test.c **** 		for (j = 0; j < len; j++)
 2033              		.loc 1 836 25 discriminator 3 view .LVU683
 2034 01d8 09F10109 		add	r9, r9, #1
 2035              	.LVL133:
 836:assembly_test.c **** 		for (j = 0; j < len; j++)
 2036              		.loc 1 836 3 discriminator 3 view .LVU684
 2037 01dc B9F1160F 		cmp	r9, #22
 2038              		.loc 1 837 13 discriminator 3 view .LVU685
 2039 01e0 0BF8010B 		strb	r0, [fp], #1
 836:assembly_test.c **** 		for (j = 0; j < len; j++)
 2040              		.loc 1 836 24 is_stmt 1 discriminator 3 view .LVU686
 2041              	.LVL134:
 836:assembly_test.c **** 		for (j = 0; j < len; j++)
 2042              		.loc 1 836 15 discriminator 3 view .LVU687
 836:assembly_test.c **** 		for (j = 0; j < len; j++)
 2043              		.loc 1 836 3 is_stmt 0 discriminator 3 view .LVU688
 2044 01e4 F5D1     		bne	.L162
 838:assembly_test.c **** 		if (cc2400_status() & STATUS_CRC_OK)
 2045              		.loc 1 838 3 is_stmt 1 view .LVU689
 2046              		.loc 1 838 7 is_stmt 0 view .LVU690
 2047 01e6 FFF7FEFF 		bl	cc2400_status
 2048              	.LVL135:
 2049              		.loc 1 838 6 view .LVU691
 2050 01ea 0307     		lsls	r3, r0, #28
 2051 01ec 02D4     		bmi	.L163
 839:assembly_test.c **** 			break;
 840:assembly_test.c **** 		USRLED_CLR;
 2052              		.loc 1 840 3 is_stmt 1 view .LVU692
 2053 01ee C4F800A0 		str	r10, [r4]
 831:assembly_test.c **** 		while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 2054              		.loc 1 831 8 view .LVU693
 832:assembly_test.c **** 		cc2400_strobe(SRX);
 2055              		.loc 1 832 9 is_stmt 0 view .LVU694
 2056 01f2 D9E7     		b	.L160
 2057              	.L163:
 841:assembly_test.c **** 	}
 842:assembly_test.c **** 
 843:assembly_test.c **** 	// done
 844:assembly_test.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 2058              		.loc 1 844 61 is_stmt 1 discriminator 1 view .LVU695
 2059              		.loc 1 844 8 discriminator 1 view .LVU696
 2060              		.loc 1 844 10 is_stmt 0 discriminator 1 view .LVU697
 2061 01f4 0E20     		movs	r0, #14
ARM GAS  /tmp/cciSTofK.s 			page 60


 2062 01f6 FFF7FEFF 		bl	cc2400_get
 2063              	.LVL136:
 2064              		.loc 1 844 8 discriminator 1 view .LVU698
 2065 01fa 00F01F00 		and	r0, r0, #31
 2066 01fe 0F28     		cmp	r0, #15
 2067 0200 F8D1     		bne	.L163
 845:assembly_test.c **** 	cc2400_strobe(SRFOFF);
 2068              		.loc 1 845 2 is_stmt 1 view .LVU699
 2069 0202 6420     		movs	r0, #100
 2070 0204 FFF7FEFF 		bl	cc2400_strobe
 2071              	.LVL137:
 846:assembly_test.c **** 	while ((cc2400_status() & FS_LOCK));
 2072              		.loc 1 846 2 view .LVU700
 2073              	.L165:
 2074              		.loc 1 846 37 discriminator 1 view .LVU701
 2075              		.loc 1 846 8 discriminator 1 view .LVU702
 2076              		.loc 1 846 10 is_stmt 0 discriminator 1 view .LVU703
 2077 0208 FFF7FEFF 		bl	cc2400_status
 2078              	.LVL138:
 2079              		.loc 1 846 8 discriminator 1 view .LVU704
 2080 020c 10F00400 		ands	r0, r0, #4
 2081 0210 FAD1     		bne	.L165
 847:assembly_test.c **** #ifdef UBERTOOTH_ONE
 848:assembly_test.c **** 	PAEN_CLR;
 2082              		.loc 1 848 2 is_stmt 1 view .LVU705
 2083 0212 8022     		movs	r2, #128
 2084 0214 1E4B     		ldr	r3, .L195+24
 2085 0216 1A60     		str	r2, [r3]
 849:assembly_test.c **** #endif
 850:assembly_test.c **** 	RXLED_CLR;
 2086              		.loc 1 850 2 view .LVU706
 2087 0218 1023     		movs	r3, #16
 2088 021a 2360     		str	r3, [r4]
 851:assembly_test.c **** 
 852:assembly_test.c **** 	// get test result
 853:assembly_test.c **** 	rr.valid       = 1;
 2089              		.loc 1 853 2 view .LVU707
 854:assembly_test.c **** 	rr.request_pa  = rxbuf[18];
 2090              		.loc 1 854 17 is_stmt 0 view .LVU708
 2091 021c 97F85A10 		ldrb	r1, [r7, #90]	@ zero_extendqisi2
 853:assembly_test.c **** 	rr.request_pa  = rxbuf[18];
 2092              		.loc 1 853 17 view .LVU709
 2093 0220 1C4B     		ldr	r3, .L195+28
 2094 0222 0122     		movs	r2, #1
 2095              		.loc 1 854 17 view .LVU710
 2096 0224 5970     		strb	r1, [r3, #1]
 855:assembly_test.c **** 	rr.request_num = rxbuf[19];
 2097              		.loc 1 855 17 view .LVU711
 2098 0226 97F85B10 		ldrb	r1, [r7, #91]	@ zero_extendqisi2
 853:assembly_test.c **** 	rr.request_pa  = rxbuf[18];
 2099              		.loc 1 853 17 view .LVU712
 2100 022a 1A70     		strb	r2, [r3]
 854:assembly_test.c **** 	rr.request_pa  = rxbuf[18];
 2101              		.loc 1 854 2 is_stmt 1 view .LVU713
 2102              		.loc 1 855 2 view .LVU714
 2103              		.loc 1 855 17 is_stmt 0 view .LVU715
 2104 022c 9970     		strb	r1, [r3, #2]
ARM GAS  /tmp/cciSTofK.s 			page 61


 856:assembly_test.c **** 	rr.reply_pa    = rxbuf[20];
 2105              		.loc 1 856 2 is_stmt 1 view .LVU716
 2106              		.loc 1 856 17 is_stmt 0 view .LVU717
 2107 022e 97F85C10 		ldrb	r1, [r7, #92]	@ zero_extendqisi2
 857:assembly_test.c **** 	rr.reply_num   = rxbuf[21];
 858:assembly_test.c **** 
 859:assembly_test.c **** 	// make sure rx packet is as expected
 860:assembly_test.c **** 	txbuf[1] = 1; // expected value in rxbuf
 2108              		.loc 1 860 11 view .LVU718
 2109 0232 87F83120 		strb	r2, [r7, #49]
 856:assembly_test.c **** 	rr.reply_pa    = rxbuf[20];
 2110              		.loc 1 856 17 view .LVU719
 2111 0236 D970     		strb	r1, [r3, #3]
 857:assembly_test.c **** 	rr.reply_num   = rxbuf[21];
 2112              		.loc 1 857 2 is_stmt 1 view .LVU720
 857:assembly_test.c **** 	rr.reply_num   = rxbuf[21];
 2113              		.loc 1 857 17 is_stmt 0 view .LVU721
 2114 0238 97F85D10 		ldrb	r1, [r7, #93]	@ zero_extendqisi2
 2115 023c 1971     		strb	r1, [r3, #4]
 2116              		.loc 1 860 2 is_stmt 1 view .LVU722
 861:assembly_test.c **** 	for (i = 0; i < 18; i++)
 2117              		.loc 1 861 2 view .LVU723
 2118              	.LVL139:
 2119              		.loc 1 861 14 view .LVU724
 2120              		.loc 1 861 9 is_stmt 0 view .LVU725
 2121 023e 0146     		mov	r1, r0
 2122              	.LVL140:
 2123              	.L167:
 862:assembly_test.c **** 		if (rxbuf[i] != txbuf[i])
 2124              		.loc 1 862 3 is_stmt 1 view .LVU726
 2125              		.loc 1 862 12 is_stmt 0 view .LVU727
 2126 0240 16F801EB 		ldrb	lr, [r6], #1	@ zero_extendqisi2
 2127              		.loc 1 862 24 view .LVU728
 2128 0244 15F801CB 		ldrb	ip, [r5], #1	@ zero_extendqisi2
 861:assembly_test.c **** 	for (i = 0; i < 18; i++)
 2129              		.loc 1 861 23 view .LVU729
 2130 0248 0131     		adds	r1, r1, #1
 2131              	.LVL141:
 863:assembly_test.c **** 			rr.valid = 0;
 2132              		.loc 1 863 13 view .LVU730
 2133 024a E645     		cmp	lr, ip
 2134 024c 1CBF     		itt	ne
 2135 024e 0022     		movne	r2, #0
 2136 0250 0120     		movne	r0, #1
 861:assembly_test.c **** 	for (i = 0; i < 18; i++)
 2137              		.loc 1 861 22 is_stmt 1 view .LVU731
 2138              	.LVL142:
 861:assembly_test.c **** 	for (i = 0; i < 18; i++)
 2139              		.loc 1 861 14 view .LVU732
 861:assembly_test.c **** 	for (i = 0; i < 18; i++)
 2140              		.loc 1 861 2 is_stmt 0 view .LVU733
 2141 0252 1229     		cmp	r1, #18
 2142 0254 F4D1     		bne	.L167
 2143 0256 00B1     		cbz	r0, .L168
 2144 0258 1A70     		strb	r2, [r3]
 2145              	.L168:
 864:assembly_test.c **** 
ARM GAS  /tmp/cciSTofK.s 			page 62


 865:assembly_test.c **** 	USRLED_CLR;
 2146              		.loc 1 865 2 is_stmt 1 view .LVU734
 2147 025a 0223     		movs	r3, #2
 866:assembly_test.c **** 	mode = MODE_IDLE;
 2148              		.loc 1 866 7 is_stmt 0 view .LVU735
 2149 025c 0022     		movs	r2, #0
 865:assembly_test.c **** 	mode = MODE_IDLE;
 2150              		.loc 1 865 2 view .LVU736
 2151 025e 2360     		str	r3, [r4]
 2152              		.loc 1 866 2 is_stmt 1 view .LVU737
 2153              		.loc 1 866 7 is_stmt 0 view .LVU738
 2154 0260 054B     		ldr	r3, .L195
 2155 0262 9A62     		str	r2, [r3, #40]
 867:assembly_test.c **** 	if (requested_mode == MODE_RANGE_TEST)
 2156              		.loc 1 867 2 is_stmt 1 view .LVU739
 2157              		.loc 1 867 21 is_stmt 0 view .LVU740
 2158 0264 5968     		ldr	r1, [r3, #4]
 2159              	.LVL143:
 2160              		.loc 1 867 5 view .LVU741
 2161 0266 0529     		cmp	r1, #5
 868:assembly_test.c **** 		requested_mode = MODE_IDLE;
 2162              		.loc 1 868 3 is_stmt 1 view .LVU742
 2163              		.loc 1 868 18 is_stmt 0 view .LVU743
 2164 0268 08BF     		it	eq
 2165 026a 5A60     		streq	r2, [r3, #4]
 2166 026c D7F804D0 		ldr	sp, [r7, #4]
 2167              	.LVL144:
 2168              	.L147:
 869:assembly_test.c **** #endif
 870:assembly_test.c **** }
 2169              		.loc 1 870 1 view .LVU744
 2170 0270 6437     		adds	r7, r7, #100
 2171              		.cfi_def_cfa_offset 36
 2172              	.LVL145:
 2173              		.loc 1 870 1 view .LVU745
 2174 0272 BD46     		mov	sp, r7
 2175              		.cfi_def_cfa_register 13
 2176              		@ sp needed
 2177 0274 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2178              	.L196:
 2179              		.align	2
 2180              	.L195:
 2181 0278 00000000 		.word	.LANCHOR0
 2182 027c 00000000 		.word	iap_entry
 2183 0280 00000000 		.word	.LANCHOR1
 2184 0284 38C00920 		.word	537509944
 2185 0288 58C00920 		.word	537509976
 2186 028c 3CC00920 		.word	537509948
 2187 0290 5CC00920 		.word	537509980
 2188 0294 00000000 		.word	rr
 2189              		.cfi_endproc
 2190              	.LFE14:
 2192              		.section	.text.cc2400_repeater,"ax",%progbits
 2193              		.align	1
 2194              		.global	cc2400_repeater
 2195              		.syntax unified
 2196              		.thumb
ARM GAS  /tmp/cciSTofK.s 			page 63


 2197              		.thumb_func
 2198              		.fpu softvfp
 2200              	cc2400_repeater:
 2201              	.LFB15:
 871:assembly_test.c **** 
 872:assembly_test.c **** /* This is the repeater implementation to be used with cc2400_rangetest(). */
 873:assembly_test.c **** void cc2400_repeater()
 874:assembly_test.c **** {
 2202              		.loc 1 874 1 is_stmt 1 view -0
 2203              		.cfi_startproc
 2204              		@ args = 0, pretend = 0, frame = 24
 2205              		@ frame_needed = 0, uses_anonymous_args = 0
 2206 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2207              		.cfi_def_cfa_offset 36
 2208              		.cfi_offset 4, -36
 2209              		.cfi_offset 5, -32
 2210              		.cfi_offset 6, -28
 2211              		.cfi_offset 7, -24
 2212              		.cfi_offset 8, -20
 2213              		.cfi_offset 9, -16
 2214              		.cfi_offset 10, -12
 2215              		.cfi_offset 11, -8
 2216              		.cfi_offset 14, -4
 2217 0004 87B0     		sub	sp, sp, #28
 2218              		.cfi_def_cfa_offset 64
 875:assembly_test.c **** #ifdef TX_ENABLE
 876:assembly_test.c **** 	int i;
 2219              		.loc 1 876 2 view .LVU747
 877:assembly_test.c **** 	int j;
 2220              		.loc 1 877 2 view .LVU748
 878:assembly_test.c **** 	u8 len = 22;
 2221              		.loc 1 878 2 view .LVU749
 2222              	.LVL146:
 879:assembly_test.c **** 	u8 pa = 0;
 2223              		.loc 1 879 2 view .LVU750
 880:assembly_test.c **** 	u8 buf[len];
 2224              		.loc 1 880 2 view .LVU751
 881:assembly_test.c **** 
 882:assembly_test.c **** 	mode = MODE_REPEATER;
 2225              		.loc 1 882 2 view .LVU752
 883:assembly_test.c **** 
 884:assembly_test.c **** 	//FIXME allow to be turned off
 885:assembly_test.c **** 	while (1) {
 886:assembly_test.c **** 		cc2400_set(MANAND,  0x7fff);
 887:assembly_test.c **** 		cc2400_set(LMTST,   0x2b22);
 888:assembly_test.c **** 		cc2400_set(MDMTST0, 0x134b);
 889:assembly_test.c **** 		cc2400_set(FSDIV,   channel - 1);
 890:assembly_test.c **** 		cc2400_set(SYNCH,   0xf9ae);
 891:assembly_test.c **** 		cc2400_set(SYNCL,   0x1584);
 892:assembly_test.c **** 		cc2400_set(FREND,   0x0008); // minimum tx power
 893:assembly_test.c **** 		cc2400_set(MDMCTRL, 0x0029); // 160 kHz frequency deviation
 894:assembly_test.c **** 		while (!(cc2400_status() & XOSC16M_STABLE));
 895:assembly_test.c **** 		cc2400_strobe(SFSON);
 896:assembly_test.c **** 		while (!(cc2400_status() & FS_LOCK));
 897:assembly_test.c **** 		RXLED_SET;
 2226              		.loc 1 897 3 is_stmt 0 view .LVU753
 2227 0006 DFF88891 		ldr	r9, .L233+16
ARM GAS  /tmp/cciSTofK.s 			page 64


 882:assembly_test.c **** 
 2228              		.loc 1 882 7 view .LVU754
 2229 000a 0622     		movs	r2, #6
 889:assembly_test.c **** 		cc2400_set(SYNCH,   0xf9ae);
 2230              		.loc 1 889 3 view .LVU755
 2231 000c 0225     		movs	r5, #2
 2232 000e CA46     		mov	r10, r9
 882:assembly_test.c **** 
 2233              		.loc 1 882 7 view .LVU756
 2234 0010 5B4B     		ldr	r3, .L233
 2235 0012 9A62     		str	r2, [r3, #40]
 2236              	.LVL147:
 2237              	.L212:
 885:assembly_test.c **** 		cc2400_set(MANAND,  0x7fff);
 2238              		.loc 1 885 2 is_stmt 1 view .LVU757
 886:assembly_test.c **** 		cc2400_set(LMTST,   0x2b22);
 2239              		.loc 1 886 3 view .LVU758
 2240 0014 47F6FF71 		movw	r1, #32767
 2241 0018 0D20     		movs	r0, #13
 2242 001a FFF7FEFF 		bl	cc2400_set
 2243              	.LVL148:
 887:assembly_test.c **** 		cc2400_set(MDMTST0, 0x134b);
 2244              		.loc 1 887 3 view .LVU759
 889:assembly_test.c **** 		cc2400_set(SYNCH,   0xf9ae);
 2245              		.loc 1 889 3 is_stmt 0 view .LVU760
 2246 001e 594F     		ldr	r7, .L233+4
 887:assembly_test.c **** 		cc2400_set(MDMTST0, 0x134b);
 2247              		.loc 1 887 3 view .LVU761
 2248 0020 42F62231 		movw	r1, #11042
 2249 0024 1220     		movs	r0, #18
 2250 0026 FFF7FEFF 		bl	cc2400_set
 2251              	.LVL149:
 888:assembly_test.c **** 		cc2400_set(FSDIV,   channel - 1);
 2252              		.loc 1 888 3 is_stmt 1 view .LVU762
 2253 002a 41F24B31 		movw	r1, #4939
 2254 002e 1420     		movs	r0, #20
 2255 0030 FFF7FEFF 		bl	cc2400_set
 2256              	.LVL150:
 889:assembly_test.c **** 		cc2400_set(SYNCH,   0xf9ae);
 2257              		.loc 1 889 3 view .LVU763
 2258 0034 3988     		ldrh	r1, [r7]
 2259 0036 0220     		movs	r0, #2
 2260 0038 0139     		subs	r1, r1, #1
 2261 003a 89B2     		uxth	r1, r1
 2262 003c FFF7FEFF 		bl	cc2400_set
 2263              	.LVL151:
 890:assembly_test.c **** 		cc2400_set(SYNCL,   0x1584);
 2264              		.loc 1 890 3 view .LVU764
 2265 0040 4FF6AE11 		movw	r1, #63918
 2266 0044 2D20     		movs	r0, #45
 2267 0046 FFF7FEFF 		bl	cc2400_set
 2268              	.LVL152:
 891:assembly_test.c **** 		cc2400_set(FREND,   0x0008); // minimum tx power
 2269              		.loc 1 891 3 view .LVU765
 2270 004a 41F28451 		movw	r1, #5508
 2271 004e 2C20     		movs	r0, #44
 2272 0050 FFF7FEFF 		bl	cc2400_set
ARM GAS  /tmp/cciSTofK.s 			page 65


 2273              	.LVL153:
 892:assembly_test.c **** 		cc2400_set(MDMCTRL, 0x0029); // 160 kHz frequency deviation
 2274              		.loc 1 892 3 view .LVU766
 2275 0054 0821     		movs	r1, #8
 2276 0056 0520     		movs	r0, #5
 2277 0058 FFF7FEFF 		bl	cc2400_set
 2278              	.LVL154:
 893:assembly_test.c **** 		while (!(cc2400_status() & XOSC16M_STABLE));
 2279              		.loc 1 893 3 view .LVU767
 2280 005c 2921     		movs	r1, #41
 2281 005e 0320     		movs	r0, #3
 2282 0060 FFF7FEFF 		bl	cc2400_set
 2283              	.LVL155:
 894:assembly_test.c **** 		cc2400_strobe(SFSON);
 2284              		.loc 1 894 3 view .LVU768
 2285              	.L198:
 894:assembly_test.c **** 		cc2400_strobe(SFSON);
 2286              		.loc 1 894 46 discriminator 1 view .LVU769
 894:assembly_test.c **** 		cc2400_strobe(SFSON);
 2287              		.loc 1 894 9 discriminator 1 view .LVU770
 894:assembly_test.c **** 		cc2400_strobe(SFSON);
 2288              		.loc 1 894 12 is_stmt 0 discriminator 1 view .LVU771
 2289 0064 FFF7FEFF 		bl	cc2400_status
 2290              	.LVL156:
 894:assembly_test.c **** 		cc2400_strobe(SFSON);
 2291              		.loc 1 894 9 discriminator 1 view .LVU772
 2292 0068 4106     		lsls	r1, r0, #25
 2293 006a FBD5     		bpl	.L198
 895:assembly_test.c **** 		while (!(cc2400_status() & FS_LOCK));
 2294              		.loc 1 895 3 is_stmt 1 view .LVU773
 2295 006c 6120     		movs	r0, #97
 2296 006e FFF7FEFF 		bl	cc2400_strobe
 2297              	.LVL157:
 896:assembly_test.c **** 		RXLED_SET;
 2298              		.loc 1 896 3 view .LVU774
 2299              	.L199:
 896:assembly_test.c **** 		RXLED_SET;
 2300              		.loc 1 896 39 discriminator 1 view .LVU775
 896:assembly_test.c **** 		RXLED_SET;
 2301              		.loc 1 896 9 discriminator 1 view .LVU776
 896:assembly_test.c **** 		RXLED_SET;
 2302              		.loc 1 896 12 is_stmt 0 discriminator 1 view .LVU777
 2303 0072 FFF7FEFF 		bl	cc2400_status
 2304              	.LVL158:
 896:assembly_test.c **** 		RXLED_SET;
 2305              		.loc 1 896 9 discriminator 1 view .LVU778
 2306 0076 4207     		lsls	r2, r0, #29
 2307 0078 FBD5     		bpl	.L199
 2308              		.loc 1 897 3 is_stmt 1 view .LVU779
 2309 007a 1023     		movs	r3, #16
 2310 007c C9F80030 		str	r3, [r9]
 898:assembly_test.c **** 		TXLED_CLR;
 2311              		.loc 1 898 3 view .LVU780
 2312 0080 4FF48073 		mov	r3, #256
 2313 0084 404C     		ldr	r4, .L233+8
 899:assembly_test.c **** 		USRLED_CLR;
 900:assembly_test.c **** #ifdef UBERTOOTH_ONE
ARM GAS  /tmp/cciSTofK.s 			page 66


 901:assembly_test.c **** 		PAEN_SET;
 2314              		.loc 1 901 3 is_stmt 0 view .LVU781
 2315 0086 8022     		movs	r2, #128
 2316 0088 A046     		mov	r8, r4
 898:assembly_test.c **** 		TXLED_CLR;
 2317              		.loc 1 898 3 view .LVU782
 2318 008a 2360     		str	r3, [r4]
 899:assembly_test.c **** 		USRLED_CLR;
 2319              		.loc 1 899 3 is_stmt 1 view .LVU783
 2320              		.loc 1 901 3 is_stmt 0 view .LVU784
 2321 008c 3F4B     		ldr	r3, .L233+12
 899:assembly_test.c **** 		USRLED_CLR;
 2322              		.loc 1 899 3 view .LVU785
 2323 008e 2560     		str	r5, [r4]
 2324              		.loc 1 901 3 is_stmt 1 view .LVU786
 2325 0090 1A60     		str	r2, [r3]
 2326              	.L200:
 902:assembly_test.c **** #endif
 903:assembly_test.c **** 		while (1) {
 904:assembly_test.c **** 			while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 2327              		.loc 1 904 63 discriminator 1 view .LVU787
 2328              		.loc 1 904 10 discriminator 1 view .LVU788
 2329              		.loc 1 904 12 is_stmt 0 discriminator 1 view .LVU789
 2330 0092 0E20     		movs	r0, #14
 2331 0094 FFF7FEFF 		bl	cc2400_get
 2332              	.LVL159:
 2333              		.loc 1 904 10 discriminator 1 view .LVU790
 2334 0098 00F01F00 		and	r0, r0, #31
 2335 009c 0F28     		cmp	r0, #15
 2336 009e F8D1     		bne	.L200
 905:assembly_test.c **** 			USRLED_CLR;
 2337              		.loc 1 905 4 is_stmt 1 view .LVU791
 906:assembly_test.c **** 			cc2400_strobe(SRX);
 2338              		.loc 1 906 4 is_stmt 0 view .LVU792
 2339 00a0 6220     		movs	r0, #98
 905:assembly_test.c **** 			USRLED_CLR;
 2340              		.loc 1 905 4 view .LVU793
 2341 00a2 C8F80050 		str	r5, [r8]
 2342              		.loc 1 906 4 is_stmt 1 view .LVU794
 2343 00a6 FFF7FEFF 		bl	cc2400_strobe
 2344              	.LVL160:
 907:assembly_test.c **** 			while (!(cc2400_status() & SYNC_RECEIVED));
 2345              		.loc 1 907 4 view .LVU795
 2346              	.L201:
 2347              		.loc 1 907 46 discriminator 1 view .LVU796
 2348              		.loc 1 907 10 discriminator 1 view .LVU797
 2349              		.loc 1 907 13 is_stmt 0 discriminator 1 view .LVU798
 2350 00aa FFF7FEFF 		bl	cc2400_status
 2351              	.LVL161:
 2352              		.loc 1 907 10 discriminator 1 view .LVU799
 2353 00ae C306     		lsls	r3, r0, #27
 2354 00b0 FBD5     		bpl	.L201
 908:assembly_test.c **** 			USRLED_SET;
 2355              		.loc 1 908 4 is_stmt 1 view .LVU800
 2356 00b2 EB46     		mov	fp, sp
 909:assembly_test.c **** 			for (i = 0; i < len; i++)
 2357              		.loc 1 909 11 is_stmt 0 view .LVU801
ARM GAS  /tmp/cciSTofK.s 			page 67


 2358 00b4 0026     		movs	r6, #0
 908:assembly_test.c **** 			USRLED_SET;
 2359              		.loc 1 908 4 view .LVU802
 2360 00b6 CAF80050 		str	r5, [r10]
 2361              		.loc 1 909 4 is_stmt 1 view .LVU803
 2362              	.LVL162:
 2363              		.loc 1 909 16 view .LVU804
 2364              	.L202:
 910:assembly_test.c **** 				buf[i] = cc2400_get8(FIFOREG);
 2365              		.loc 1 910 5 discriminator 3 view .LVU805
 2366              		.loc 1 910 14 is_stmt 0 discriminator 3 view .LVU806
 2367 00ba 7020     		movs	r0, #112
 2368 00bc FFF7FEFF 		bl	cc2400_get8
 2369              	.LVL163:
 909:assembly_test.c **** 			for (i = 0; i < len; i++)
 2370              		.loc 1 909 26 discriminator 3 view .LVU807
 2371 00c0 0136     		adds	r6, r6, #1
 2372              	.LVL164:
 909:assembly_test.c **** 			for (i = 0; i < len; i++)
 2373              		.loc 1 909 4 discriminator 3 view .LVU808
 2374 00c2 162E     		cmp	r6, #22
 2375              		.loc 1 910 12 discriminator 3 view .LVU809
 2376 00c4 0BF8010B 		strb	r0, [fp], #1
 909:assembly_test.c **** 			for (i = 0; i < len; i++)
 2377              		.loc 1 909 25 is_stmt 1 discriminator 3 view .LVU810
 2378              	.LVL165:
 909:assembly_test.c **** 			for (i = 0; i < len; i++)
 2379              		.loc 1 909 16 discriminator 3 view .LVU811
 909:assembly_test.c **** 			for (i = 0; i < len; i++)
 2380              		.loc 1 909 4 is_stmt 0 discriminator 3 view .LVU812
 2381 00c8 F7D1     		bne	.L202
 911:assembly_test.c **** 			if (cc2400_status() & STATUS_CRC_OK)
 2382              		.loc 1 911 4 is_stmt 1 view .LVU813
 2383              		.loc 1 911 8 is_stmt 0 view .LVU814
 2384 00ca FFF7FEFF 		bl	cc2400_status
 2385              	.LVL166:
 2386              		.loc 1 911 7 view .LVU815
 2387 00ce 0607     		lsls	r6, r0, #28
 2388              	.LVL167:
 2389              		.loc 1 911 7 view .LVU816
 2390 00d0 DFD5     		bpl	.L200
 912:assembly_test.c **** 				break;
 913:assembly_test.c **** 		}
 914:assembly_test.c **** 		// got packet, now repeat it
 915:assembly_test.c **** 		i = 2000000; while (--i); // allow time for requester to switch to rx
 2391              		.loc 1 915 27 is_stmt 1 view .LVU817
 2392              		.loc 1 915 22 view .LVU818
 916:assembly_test.c **** 		USRLED_CLR;
 2393              		.loc 1 916 3 view .LVU819
 917:assembly_test.c **** 		RXLED_CLR;
 2394              		.loc 1 917 3 is_stmt 0 view .LVU820
 2395 00d2 1023     		movs	r3, #16
 916:assembly_test.c **** 		USRLED_CLR;
 2396              		.loc 1 916 3 view .LVU821
 2397 00d4 2560     		str	r5, [r4]
 2398              		.loc 1 917 3 is_stmt 1 view .LVU822
 918:assembly_test.c **** 		cc2400_strobe(SRFOFF);
ARM GAS  /tmp/cciSTofK.s 			page 68


 2399              		.loc 1 918 3 is_stmt 0 view .LVU823
 2400 00d6 6420     		movs	r0, #100
 917:assembly_test.c **** 		RXLED_CLR;
 2401              		.loc 1 917 3 view .LVU824
 2402 00d8 2360     		str	r3, [r4]
 2403              		.loc 1 918 3 is_stmt 1 view .LVU825
 2404 00da FFF7FEFF 		bl	cc2400_strobe
 2405              	.LVL168:
 919:assembly_test.c **** 		while ((cc2400_status() & FS_LOCK));
 2406              		.loc 1 919 3 view .LVU826
 2407              	.L204:
 2408              		.loc 1 919 38 discriminator 1 view .LVU827
 2409              		.loc 1 919 9 discriminator 1 view .LVU828
 2410              		.loc 1 919 11 is_stmt 0 discriminator 1 view .LVU829
 2411 00de FFF7FEFF 		bl	cc2400_status
 2412              	.LVL169:
 2413              		.loc 1 919 9 discriminator 1 view .LVU830
 2414 00e2 4007     		lsls	r0, r0, #29
 2415 00e4 FBD4     		bmi	.L204
 2416              	.L205:
 920:assembly_test.c **** 		while (!(cc2400_status() & XOSC16M_STABLE));
 2417              		.loc 1 920 46 is_stmt 1 discriminator 1 view .LVU831
 2418              		.loc 1 920 9 discriminator 1 view .LVU832
 2419              		.loc 1 920 12 is_stmt 0 discriminator 1 view .LVU833
 2420 00e6 FFF7FEFF 		bl	cc2400_status
 2421              	.LVL170:
 2422              		.loc 1 920 9 discriminator 1 view .LVU834
 2423 00ea 4106     		lsls	r1, r0, #25
 2424 00ec FBD5     		bpl	.L205
 921:assembly_test.c **** 		cc2400_set(FSDIV, channel);
 2425              		.loc 1 921 3 is_stmt 1 view .LVU835
 2426 00ee 3988     		ldrh	r1, [r7]
 2427 00f0 0220     		movs	r0, #2
 2428 00f2 89B2     		uxth	r1, r1
 2429 00f4 FFF7FEFF 		bl	cc2400_set
 2430              	.LVL171:
 922:assembly_test.c **** 		while (!(cc2400_status() & XOSC16M_STABLE));
 2431              		.loc 1 922 3 view .LVU836
 2432              	.L206:
 2433              		.loc 1 922 46 discriminator 1 view .LVU837
 2434              		.loc 1 922 9 discriminator 1 view .LVU838
 2435              		.loc 1 922 12 is_stmt 0 discriminator 1 view .LVU839
 2436 00f8 FFF7FEFF 		bl	cc2400_status
 2437              	.LVL172:
 2438              		.loc 1 922 9 discriminator 1 view .LVU840
 2439 00fc 4206     		lsls	r2, r0, #25
 2440 00fe FBD5     		bpl	.L206
 923:assembly_test.c **** 		cc2400_strobe(SFSON);
 2441              		.loc 1 923 3 is_stmt 1 view .LVU841
 2442 0100 6120     		movs	r0, #97
 2443 0102 FFF7FEFF 		bl	cc2400_strobe
 2444              	.LVL173:
 924:assembly_test.c **** 		TXLED_SET;
 2445              		.loc 1 924 3 view .LVU842
 2446 0106 4FF48073 		mov	r3, #256
 2447 010a CAF80030 		str	r3, [r10]
 925:assembly_test.c **** 		buf[0] = len - 1; // length of data (rest of payload)
ARM GAS  /tmp/cciSTofK.s 			page 69


 2448              		.loc 1 925 3 view .LVU843
 926:assembly_test.c **** 		buf[1] = 1; // reply
 2449              		.loc 1 926 3 view .LVU844
 925:assembly_test.c **** 		buf[0] = len - 1; // length of data (rest of payload)
 2450              		.loc 1 925 10 is_stmt 0 view .LVU845
 2451 010e 40F21513 		movw	r3, #277
 2452 0112 0026     		movs	r6, #0
 2453 0114 ADF80030 		strh	r3, [sp]	@ movhi
 927:assembly_test.c **** 		for (pa = 0; pa < 8; pa++) {
 2454              		.loc 1 927 3 is_stmt 1 view .LVU846
 2455              	.LVL174:
 2456              		.loc 1 927 16 view .LVU847
 2457              	.L210:
 2458              		.loc 1 927 16 is_stmt 0 view .LVU848
 2459 0118 F7B2     		uxtb	r7, r6
 2460              	.LVL175:
 928:assembly_test.c **** 			cc2400_set(FREND, 8 | pa);
 2461              		.loc 1 928 4 is_stmt 1 view .LVU849
 2462 011a 47F00801 		orr	r1, r7, #8
 2463 011e 0520     		movs	r0, #5
 2464 0120 FFF7FEFF 		bl	cc2400_set
 2465              	.LVL176:
 929:assembly_test.c **** 			buf[20] = pa;
 2466              		.loc 1 929 4 view .LVU850
 2467              		.loc 1 929 12 is_stmt 0 view .LVU851
 2468 0124 8DF81470 		strb	r7, [sp, #20]
 930:assembly_test.c **** 			for (i = 0; i < 16; i++) {
 2469              		.loc 1 930 4 is_stmt 1 view .LVU852
 2470              	.LVL177:
 2471              		.loc 1 930 16 view .LVU853
 2472              		.loc 1 930 11 is_stmt 0 view .LVU854
 2473 0128 0027     		movs	r7, #0
 2474              	.LVL178:
 2475              	.L209:
 931:assembly_test.c **** 				buf[21] = i;
 2476              		.loc 1 931 5 is_stmt 1 view .LVU855
 2477              		.loc 1 931 13 is_stmt 0 view .LVU856
 2478 012a 8DF81570 		strb	r7, [sp, #21]
 932:assembly_test.c **** 				while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 2479              		.loc 1 932 5 is_stmt 1 view .LVU857
 2480              	.L207:
 2481              		.loc 1 932 64 discriminator 1 view .LVU858
 2482              		.loc 1 932 11 discriminator 1 view .LVU859
 2483              		.loc 1 932 13 is_stmt 0 discriminator 1 view .LVU860
 2484 012e 0E20     		movs	r0, #14
 2485 0130 FFF7FEFF 		bl	cc2400_get
 2486              	.LVL179:
 2487              		.loc 1 932 11 discriminator 1 view .LVU861
 2488 0134 00F01F00 		and	r0, r0, #31
 2489 0138 0F28     		cmp	r0, #15
 2490 013a F8D1     		bne	.L207
 2491 013c EB46     		mov	fp, sp
 933:assembly_test.c **** 					for (j = 0; j < len; j++)
 2492              		.loc 1 933 13 view .LVU862
 2493 013e 4FF00008 		mov	r8, #0
 2494              	.L208:
 2495              	.LVL180:
ARM GAS  /tmp/cciSTofK.s 			page 70


 934:assembly_test.c **** 						cc2400_set8(FIFOREG, buf[j]);
 2496              		.loc 1 934 7 is_stmt 1 discriminator 3 view .LVU863
 2497 0142 7020     		movs	r0, #112
 2498 0144 1BF8011B 		ldrb	r1, [fp], #1	@ zero_extendqisi2
 933:assembly_test.c **** 					for (j = 0; j < len; j++)
 2499              		.loc 1 933 28 is_stmt 0 discriminator 3 view .LVU864
 2500 0148 08F10108 		add	r8, r8, #1
 2501              	.LVL181:
 2502              		.loc 1 934 7 discriminator 3 view .LVU865
 2503 014c FFF7FEFF 		bl	cc2400_set8
 2504              	.LVL182:
 933:assembly_test.c **** 					for (j = 0; j < len; j++)
 2505              		.loc 1 933 27 is_stmt 1 discriminator 3 view .LVU866
 933:assembly_test.c **** 					for (j = 0; j < len; j++)
 2506              		.loc 1 933 18 discriminator 3 view .LVU867
 933:assembly_test.c **** 					for (j = 0; j < len; j++)
 2507              		.loc 1 933 6 is_stmt 0 discriminator 3 view .LVU868
 2508 0150 B8F1160F 		cmp	r8, #22
 2509 0154 F5D1     		bne	.L208
 935:assembly_test.c **** 				cc2400_strobe(STX);
 2510              		.loc 1 935 5 is_stmt 1 discriminator 2 view .LVU869
 2511 0156 6320     		movs	r0, #99
 930:assembly_test.c **** 				buf[21] = i;
 2512              		.loc 1 930 25 is_stmt 0 discriminator 2 view .LVU870
 2513 0158 0137     		adds	r7, r7, #1
 2514              	.LVL183:
 2515              		.loc 1 935 5 discriminator 2 view .LVU871
 2516 015a FFF7FEFF 		bl	cc2400_strobe
 2517              	.LVL184:
 930:assembly_test.c **** 				buf[21] = i;
 2518              		.loc 1 930 24 is_stmt 1 discriminator 2 view .LVU872
 930:assembly_test.c **** 				buf[21] = i;
 2519              		.loc 1 930 16 discriminator 2 view .LVU873
 930:assembly_test.c **** 				buf[21] = i;
 2520              		.loc 1 930 4 is_stmt 0 discriminator 2 view .LVU874
 2521 015e 102F     		cmp	r7, #16
 2522 0160 E3D1     		bne	.L209
 927:assembly_test.c **** 			cc2400_set(FREND, 8 | pa);
 2523              		.loc 1 927 24 is_stmt 1 discriminator 2 view .LVU875
 2524              	.LVL185:
 927:assembly_test.c **** 			cc2400_set(FREND, 8 | pa);
 2525              		.loc 1 927 16 discriminator 2 view .LVU876
 2526 0162 0136     		adds	r6, r6, #1
 2527              	.LVL186:
 927:assembly_test.c **** 			cc2400_set(FREND, 8 | pa);
 2528              		.loc 1 927 3 is_stmt 0 discriminator 2 view .LVU877
 2529 0164 082E     		cmp	r6, #8
 2530 0166 D7D1     		bne	.L210
 936:assembly_test.c **** 			}
 937:assembly_test.c **** 		}
 938:assembly_test.c **** 		TXLED_CLR;
 2531              		.loc 1 938 3 is_stmt 1 view .LVU878
 2532 0168 4FF48073 		mov	r3, #256
 939:assembly_test.c **** 		cc2400_strobe(SRFOFF);
 2533              		.loc 1 939 3 is_stmt 0 view .LVU879
 2534 016c 6420     		movs	r0, #100
 938:assembly_test.c **** 		cc2400_strobe(SRFOFF);
ARM GAS  /tmp/cciSTofK.s 			page 71


 2535              		.loc 1 938 3 view .LVU880
 2536 016e 2360     		str	r3, [r4]
 2537              		.loc 1 939 3 is_stmt 1 view .LVU881
 2538 0170 FFF7FEFF 		bl	cc2400_strobe
 2539              	.LVL187:
 940:assembly_test.c **** 		while ((cc2400_status() & FS_LOCK));
 2540              		.loc 1 940 3 view .LVU882
 2541              	.L211:
 2542              		.loc 1 940 38 discriminator 1 view .LVU883
 2543              		.loc 1 940 9 discriminator 1 view .LVU884
 2544              		.loc 1 940 11 is_stmt 0 discriminator 1 view .LVU885
 2545 0174 FFF7FEFF 		bl	cc2400_status
 2546              	.LVL188:
 2547              		.loc 1 940 9 discriminator 1 view .LVU886
 2548 0178 4307     		lsls	r3, r0, #29
 2549 017a FBD4     		bmi	.L211
 2550 017c 4AE7     		b	.L212
 2551              	.L234:
 2552 017e 00BF     		.align	2
 2553              	.L233:
 2554 0180 00000000 		.word	.LANCHOR0
 2555 0184 00000000 		.word	.LANCHOR1
 2556 0188 3CC00920 		.word	537509948
 2557 018c 58C00920 		.word	537509976
 2558 0190 38C00920 		.word	537509944
 2559              		.cfi_endproc
 2560              	.LFE15:
 2562              		.section	.text.bt_stream_rx,"ax",%progbits
 2563              		.align	1
 2564              		.global	bt_stream_rx
 2565              		.syntax unified
 2566              		.thumb
 2567              		.thumb_func
 2568              		.fpu softvfp
 2570              	bt_stream_rx:
 2571              	.LFB16:
 941:assembly_test.c **** 	}
 942:assembly_test.c **** #endif
 943:assembly_test.c **** }
 944:assembly_test.c **** 
 945:assembly_test.c **** void bt_stream_rx()
 946:assembly_test.c **** {
 2572              		.loc 1 946 1 is_stmt 1 view -0
 2573              		.cfi_startproc
 2574              		@ args = 0, pretend = 0, frame = 0
 2575              		@ frame_needed = 0, uses_anonymous_args = 0
 2576 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 2577              		.cfi_def_cfa_offset 24
 2578              		.cfi_offset 4, -24
 2579              		.cfi_offset 5, -20
 2580              		.cfi_offset 6, -16
 2581              		.cfi_offset 7, -12
 2582              		.cfi_offset 8, -8
 2583              		.cfi_offset 14, -4
 947:assembly_test.c **** 	u8 *tmp = NULL;
 2584              		.loc 1 947 2 view .LVU888
 2585              	.LVL189:
ARM GAS  /tmp/cciSTofK.s 			page 72


 948:assembly_test.c **** 	u8 epstat;
 2586              		.loc 1 948 2 view .LVU889
 949:assembly_test.c **** 	int i;
 2587              		.loc 1 949 2 view .LVU890
 950:assembly_test.c **** 
 951:assembly_test.c **** 	RXLED_SET;
 2588              		.loc 1 951 2 view .LVU891
 2589 0004 1022     		movs	r2, #16
 2590 0006 2A4B     		ldr	r3, .L259
 952:assembly_test.c **** 
 953:assembly_test.c **** 	queue_init();
 954:assembly_test.c **** 	dio_ssp_init();
 955:assembly_test.c **** 	dma_init();
 956:assembly_test.c **** 	dio_ssp_start();
 957:assembly_test.c **** 	cc2400_rx();
 958:assembly_test.c **** 
 959:assembly_test.c **** 	while (rx_pkts) {
 2591              		.loc 1 959 9 is_stmt 0 view .LVU892
 2592 0008 DFF8B880 		ldr	r8, .L259+20
 951:assembly_test.c **** 
 2593              		.loc 1 951 2 view .LVU893
 2594 000c 1A60     		str	r2, [r3]
 953:assembly_test.c **** 	dio_ssp_init();
 2595              		.loc 1 953 2 is_stmt 1 view .LVU894
 2596 000e FFF7FEFF 		bl	queue_init
 2597              	.LVL190:
 954:assembly_test.c **** 	dma_init();
 2598              		.loc 1 954 2 view .LVU895
 2599 0012 4446     		mov	r4, r8
 2600 0014 FFF7FEFF 		bl	dio_ssp_init
 2601              	.LVL191:
 955:assembly_test.c **** 	dio_ssp_start();
 2602              		.loc 1 955 2 view .LVU896
 2603 0018 FFF7FEFF 		bl	dma_init
 2604              	.LVL192:
 956:assembly_test.c **** 	cc2400_rx();
 2605              		.loc 1 956 2 view .LVU897
 2606 001c FFF7FEFF 		bl	dio_ssp_start
 2607              	.LVL193:
 957:assembly_test.c **** 
 2608              		.loc 1 957 2 view .LVU898
 2609 0020 FFF7FEFF 		bl	cc2400_rx
 2610              	.LVL194:
 2611              		.loc 1 959 2 view .LVU899
 960:assembly_test.c **** 		/* wait for DMA transfer */
 961:assembly_test.c **** 		while ((rx_tc == 0) && (rx_err == 0));
 2612              		.loc 1 961 17 is_stmt 0 view .LVU900
 2613 0024 234D     		ldr	r5, .L259+4
 2614              	.L236:
 959:assembly_test.c **** 		/* wait for DMA transfer */
 2615              		.loc 1 959 8 is_stmt 1 view .LVU901
 959:assembly_test.c **** 		/* wait for DMA transfer */
 2616              		.loc 1 959 9 is_stmt 0 view .LVU902
 2617 0026 D8F80030 		ldr	r3, [r8]
 959:assembly_test.c **** 		/* wait for DMA transfer */
 2618              		.loc 1 959 8 view .LVU903
 2619 002a 002B     		cmp	r3, #0
ARM GAS  /tmp/cciSTofK.s 			page 73


 2620 002c 3BD0     		beq	.L258
 2621 002e 224F     		ldr	r7, .L259+8
 2622              	.L238:
 2623              		.loc 1 961 40 is_stmt 1 discriminator 2 view .LVU904
 2624              		.loc 1 961 9 discriminator 2 view .LVU905
 2625              		.loc 1 961 17 is_stmt 0 discriminator 2 view .LVU906
 2626 0030 2B68     		ldr	r3, [r5]
 2627              		.loc 1 961 9 discriminator 2 view .LVU907
 2628 0032 13B9     		cbnz	r3, .L237
 2629              		.loc 1 961 34 discriminator 1 view .LVU908
 2630 0034 3B68     		ldr	r3, [r7]
 2631              		.loc 1 961 23 discriminator 1 view .LVU909
 2632 0036 002B     		cmp	r3, #0
 2633 0038 FAD0     		beq	.L238
 2634              	.L237:
 962:assembly_test.c **** 		if (rx_tc % 2) {
 2635              		.loc 1 962 3 is_stmt 1 view .LVU910
 2636              		.loc 1 962 13 is_stmt 0 view .LVU911
 2637 003a 2B68     		ldr	r3, [r5]
 2638              		.loc 1 962 6 view .LVU912
 2639 003c D907     		lsls	r1, r3, #31
 963:assembly_test.c **** 			/* swap buffers */
 964:assembly_test.c **** 			tmp = active_rxbuf;
 2640              		.loc 1 964 4 is_stmt 1 view .LVU913
 2641              		.loc 1 964 8 is_stmt 0 view .LVU914
 2642 003e 42BF     		ittt	mi
 2643 0040 1E4B     		ldrmi	r3, .L259+12
 965:assembly_test.c **** 			active_rxbuf = idle_rxbuf;
 2644              		.loc 1 965 17 view .LVU915
 2645 0042 D3E90221 		ldrdmi	r2, r1, [r3, #8]
 966:assembly_test.c **** 			idle_rxbuf = tmp;
 2646              		.loc 1 966 15 view .LVU916
 2647 0046 C3E90212 		strdmi	r1, r2, [r3, #8]
 967:assembly_test.c **** 		}
 968:assembly_test.c **** 		if (rx_err)
 2648              		.loc 1 968 3 is_stmt 1 view .LVU917
 2649              		.loc 1 968 7 is_stmt 0 view .LVU918
 2650 004a 3B68     		ldr	r3, [r7]
 2651              		.loc 1 968 6 view .LVU919
 2652 004c 1BB1     		cbz	r3, .L240
 969:assembly_test.c **** 			status |= DMA_ERROR;
 2653              		.loc 1 969 4 is_stmt 1 view .LVU920
 2654              		.loc 1 969 11 is_stmt 0 view .LVU921
 2655 004e 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
 2656 0050 43F00203 		orr	r3, r3, #2
 2657 0054 2375     		strb	r3, [r4, #20]
 2658              	.L240:
 970:assembly_test.c **** 		if (rx_tc) {
 2659              		.loc 1 970 3 is_stmt 1 view .LVU922
 2660              		.loc 1 970 7 is_stmt 0 view .LVU923
 2661 0056 2B68     		ldr	r3, [r5]
 2662              		.loc 1 970 6 view .LVU924
 2663 0058 73B1     		cbz	r3, .L241
 971:assembly_test.c **** 			if (rx_tc > 1)
 2664              		.loc 1 971 4 is_stmt 1 view .LVU925
 2665              		.loc 1 971 14 is_stmt 0 view .LVU926
 2666 005a 2B68     		ldr	r3, [r5]
ARM GAS  /tmp/cciSTofK.s 			page 74


 2667              		.loc 1 971 7 view .LVU927
 2668 005c 012B     		cmp	r3, #1
 972:assembly_test.c **** 				status |= DMA_OVERFLOW;
 2669              		.loc 1 972 5 is_stmt 1 view .LVU928
 2670              		.loc 1 972 12 is_stmt 0 view .LVU929
 2671 005e 82BF     		ittt	hi
 2672 0060 237D     		ldrbhi	r3, [r4, #20]	@ zero_extendqisi2
 2673 0062 43F00103 		orrhi	r3, r3, #1
 2674 0066 2375     		strbhi	r3, [r4, #20]
 973:assembly_test.c **** 			if (enqueue(idle_rxbuf))
 2675              		.loc 1 973 4 is_stmt 1 view .LVU930
 2676              		.loc 1 973 8 is_stmt 0 view .LVU931
 2677 0068 144B     		ldr	r3, .L259+12
 2678 006a D868     		ldr	r0, [r3, #12]
 2679 006c FFF7FEFF 		bl	enqueue
 2680              	.LVL195:
 2681              		.loc 1 973 7 view .LVU932
 2682 0070 A0B1     		cbz	r0, .L243
 974:assembly_test.c **** 				--rx_pkts;
 2683              		.loc 1 974 5 is_stmt 1 view .LVU933
 2684 0072 2368     		ldr	r3, [r4]
 2685 0074 013B     		subs	r3, r3, #1
 2686 0076 2360     		str	r3, [r4]
 2687              	.L241:
 975:assembly_test.c **** 			else
 976:assembly_test.c **** 				status |= FIFO_OVERFLOW;
 977:assembly_test.c **** 		}
 978:assembly_test.c **** 
 979:assembly_test.c **** 		/* send via USB */
 980:assembly_test.c **** 		epstat = USBHwEPGetStatus(BULK_IN_EP);
 2688              		.loc 1 980 3 view .LVU934
 2689              		.loc 1 980 12 is_stmt 0 view .LVU935
 2690 0078 8220     		movs	r0, #130
 2691 007a FFF7FEFF 		bl	USBHwEPGetStatus
 2692              	.LVL196:
 981:assembly_test.c **** 		if (!(epstat & EPSTAT_B1FULL))
 2693              		.loc 1 981 6 view .LVU936
 2694 007e 8206     		lsls	r2, r0, #26
 980:assembly_test.c **** 		if (!(epstat & EPSTAT_B1FULL))
 2695              		.loc 1 980 12 view .LVU937
 2696 0080 0646     		mov	r6, r0
 2697              	.LVL197:
 2698              		.loc 1 981 3 is_stmt 1 view .LVU938
 2699              		.loc 1 981 6 is_stmt 0 view .LVU939
 2700 0082 01D4     		bmi	.L244
 982:assembly_test.c **** 			dequeue();
 2701              		.loc 1 982 4 is_stmt 1 view .LVU940
 2702 0084 FFF7FEFF 		bl	dequeue
 2703              	.LVL198:
 2704              	.L244:
 983:assembly_test.c **** 		if (!(epstat & EPSTAT_B2FULL))
 2705              		.loc 1 983 3 view .LVU941
 2706              		.loc 1 983 6 is_stmt 0 view .LVU942
 2707 0088 7306     		lsls	r3, r6, #25
 2708 008a 01D4     		bmi	.L245
 984:assembly_test.c **** 			dequeue();
 2709              		.loc 1 984 4 is_stmt 1 view .LVU943
ARM GAS  /tmp/cciSTofK.s 			page 75


 2710 008c FFF7FEFF 		bl	dequeue
 2711              	.LVL199:
 2712              	.L245:
 985:assembly_test.c **** 		USBHwISR();
 2713              		.loc 1 985 3 view .LVU944
 2714 0090 FFF7FEFF 		bl	USBHwISR
 2715              	.LVL200:
 986:assembly_test.c **** 
 987:assembly_test.c **** 		rx_tc = 0;
 2716              		.loc 1 987 3 view .LVU945
 2717              		.loc 1 987 9 is_stmt 0 view .LVU946
 2718 0094 0023     		movs	r3, #0
 2719 0096 2B60     		str	r3, [r5]
 988:assembly_test.c **** 		rx_err = 0;
 2720              		.loc 1 988 3 is_stmt 1 view .LVU947
 2721              		.loc 1 988 10 is_stmt 0 view .LVU948
 2722 0098 3B60     		str	r3, [r7]
 2723 009a C4E7     		b	.L236
 2724              	.L243:
 976:assembly_test.c **** 		}
 2725              		.loc 1 976 5 is_stmt 1 view .LVU949
 976:assembly_test.c **** 		}
 2726              		.loc 1 976 12 is_stmt 0 view .LVU950
 2727 009c 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
 2728 009e 43F00403 		orr	r3, r3, #4
 2729 00a2 2375     		strb	r3, [r4, #20]
 2730 00a4 E8E7     		b	.L241
 2731              	.L258:
 989:assembly_test.c **** 	}
 990:assembly_test.c **** 	//FIXME turn off rx
 991:assembly_test.c **** 	RXLED_CLR;
 2732              		.loc 1 991 2 is_stmt 1 view .LVU951
 2733 00a6 1022     		movs	r2, #16
 2734 00a8 054B     		ldr	r3, .L259+16
 2735 00aa 1A60     		str	r2, [r3]
 992:assembly_test.c **** }
 2736              		.loc 1 992 1 is_stmt 0 view .LVU952
 2737 00ac BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2738              	.L260:
 2739              		.align	2
 2740              	.L259:
 2741 00b0 38C00920 		.word	537509944
 2742 00b4 00000000 		.word	rx_tc
 2743 00b8 00000000 		.word	rx_err
 2744 00bc 00000000 		.word	.LANCHOR1
 2745 00c0 3CC00920 		.word	537509948
 2746 00c4 00000000 		.word	.LANCHOR0
 2747              		.cfi_endproc
 2748              	.LFE16:
 2750              		.section	.text.specan,"ax",%progbits
 2751              		.align	1
 2752              		.global	specan
 2753              		.syntax unified
 2754              		.thumb
 2755              		.thumb_func
 2756              		.fpu softvfp
 2758              	specan:
ARM GAS  /tmp/cciSTofK.s 			page 76


 2759              	.LFB17:
 993:assembly_test.c **** 
 994:assembly_test.c **** /* spectrum analysis */
 995:assembly_test.c **** void specan()
 996:assembly_test.c **** {
 2760              		.loc 1 996 1 is_stmt 1 view -0
 2761              		.cfi_startproc
 2762              		@ args = 0, pretend = 0, frame = 56
 2763              		@ frame_needed = 0, uses_anonymous_args = 0
 2764 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 2765              		.cfi_def_cfa_offset 24
 2766              		.cfi_offset 4, -24
 2767              		.cfi_offset 5, -20
 2768              		.cfi_offset 6, -16
 2769              		.cfi_offset 7, -12
 2770              		.cfi_offset 8, -8
 2771              		.cfi_offset 14, -4
 2772 0004 8EB0     		sub	sp, sp, #56
 2773              		.cfi_def_cfa_offset 80
 997:assembly_test.c **** 	u8 epstat;
 2774              		.loc 1 997 2 view .LVU954
 998:assembly_test.c **** 	u16 f;
 2775              		.loc 1 998 2 view .LVU955
 999:assembly_test.c **** 	u8 i = 0;
 2776              		.loc 1 999 2 view .LVU956
 2777              	.LVL201:
1000:assembly_test.c **** 	u8 buf[DMA_SIZE];
 2778              		.loc 1 1000 2 view .LVU957
1001:assembly_test.c **** 
1002:assembly_test.c **** 	RXLED_SET;
 2779              		.loc 1 1002 2 view .LVU958
 2780 0006 1022     		movs	r2, #16
 2781 0008 3D4B     		ldr	r3, .L280
 2782 000a 1A60     		str	r2, [r3]
1003:assembly_test.c **** 
1004:assembly_test.c **** 	queue_init();
 2783              		.loc 1 1004 2 view .LVU959
 2784 000c FFF7FEFF 		bl	queue_init
 2785              	.LVL202:
1005:assembly_test.c **** 
1006:assembly_test.c **** #ifdef UBERTOOTH_ONE
1007:assembly_test.c **** 	PAEN_SET;
 2786              		.loc 1 1007 2 view .LVU960
 2787 0010 8022     		movs	r2, #128
 2788 0012 3C4B     		ldr	r3, .L280+4
1008:assembly_test.c **** 	//HGM_SET;
1009:assembly_test.c **** #endif
1010:assembly_test.c **** 	cc2400_set(MANAND,  0x7fff);
 2789              		.loc 1 1010 2 is_stmt 0 view .LVU961
 2790 0014 47F6FF71 		movw	r1, #32767
1007:assembly_test.c **** 	//HGM_SET;
 2791              		.loc 1 1007 2 view .LVU962
 2792 0018 1A60     		str	r2, [r3]
 2793              		.loc 1 1010 2 is_stmt 1 view .LVU963
 2794 001a 0D20     		movs	r0, #13
 2795 001c FFF7FEFF 		bl	cc2400_set
 2796              	.LVL203:
ARM GAS  /tmp/cciSTofK.s 			page 77


1011:assembly_test.c **** 	cc2400_set(LMTST,   0x2b22);
 2797              		.loc 1 1011 2 view .LVU964
 2798 0020 42F62231 		movw	r1, #11042
 2799 0024 1220     		movs	r0, #18
 2800 0026 FFF7FEFF 		bl	cc2400_set
 2801              	.LVL204:
1012:assembly_test.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 2802              		.loc 1 1012 2 view .LVU965
 2803 002a 41F24B31 		movw	r1, #4939
 2804 002e 1420     		movs	r0, #20
 2805 0030 FFF7FEFF 		bl	cc2400_set
 2806              	.LVL205:
1013:assembly_test.c **** 	cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 2807              		.loc 1 1013 2 view .LVU966
 2808 0034 40F20111 		movw	r1, #257
 2809 0038 2020     		movs	r0, #32
 2810 003a FFF7FEFF 		bl	cc2400_set
 2811              	.LVL206:
1014:assembly_test.c **** 	cc2400_set(MDMCTRL, 0x0029); // 160 kHz frequency deviation
 2812              		.loc 1 1014 2 view .LVU967
 2813 003e 2921     		movs	r1, #41
 2814 0040 0320     		movs	r0, #3
 2815 0042 FFF7FEFF 		bl	cc2400_set
 2816              	.LVL207:
1015:assembly_test.c **** 	//FIXME maybe set RSSI.RSSI_FILT
1016:assembly_test.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 2817              		.loc 1 1016 2 view .LVU968
 2818              	.L262:
 2819              		.loc 1 1016 45 discriminator 1 view .LVU969
 2820              		.loc 1 1016 8 discriminator 1 view .LVU970
 2821              		.loc 1 1016 11 is_stmt 0 discriminator 1 view .LVU971
 2822 0046 FFF7FEFF 		bl	cc2400_status
 2823              	.LVL208:
 2824              		.loc 1 1016 8 discriminator 1 view .LVU972
 2825 004a 4406     		lsls	r4, r0, #25
 2826 004c FBD5     		bpl	.L262
 2827              	.L263:
1017:assembly_test.c **** 	while ((cc2400_status() & FS_LOCK));
 2828              		.loc 1 1017 37 is_stmt 1 discriminator 1 view .LVU973
 2829              		.loc 1 1017 8 discriminator 1 view .LVU974
 2830              		.loc 1 1017 10 is_stmt 0 discriminator 1 view .LVU975
 2831 004e FFF7FEFF 		bl	cc2400_status
 2832              	.LVL209:
 2833              		.loc 1 1017 8 discriminator 1 view .LVU976
 2834 0052 10F00404 		ands	r4, r0, #4
 2835 0056 FAD1     		bne	.L263
1018:assembly_test.c **** 
1019:assembly_test.c **** 	while (requested_mode == MODE_SPECAN) {
 2836              		.loc 1 1019 24 view .LVU977
 2837 0058 2B4F     		ldr	r7, .L280+8
1020:assembly_test.c **** 		for (f = low_freq; f < high_freq + 1; f++) {
 2838              		.loc 1 1020 10 view .LVU978
 2839 005a DFF8B480 		ldr	r8, .L280+16
 2840              	.LVL210:
 2841              	.L264:
1019:assembly_test.c **** 		for (f = low_freq; f < high_freq + 1; f++) {
 2842              		.loc 1 1019 8 is_stmt 1 view .LVU979
ARM GAS  /tmp/cciSTofK.s 			page 78


1019:assembly_test.c **** 		for (f = low_freq; f < high_freq + 1; f++) {
 2843              		.loc 1 1019 24 is_stmt 0 view .LVU980
 2844 005e 7B68     		ldr	r3, [r7, #4]
1019:assembly_test.c **** 		for (f = low_freq; f < high_freq + 1; f++) {
 2845              		.loc 1 1019 8 view .LVU981
 2846 0060 042B     		cmp	r3, #4
 2847 0062 07D0     		beq	.L272
1021:assembly_test.c **** 			cc2400_set(FSDIV, f - 1);
1022:assembly_test.c **** 			cc2400_strobe(SFSON);
1023:assembly_test.c **** 			while (!(cc2400_status() & FS_LOCK));
1024:assembly_test.c **** 			cc2400_strobe(SRX);
1025:assembly_test.c **** 
1026:assembly_test.c **** 			//u32 j = 100; while (--j); //FIXME crude delay
1027:assembly_test.c **** 			buf[3 * i] = (f >> 8) & 0xFF;
1028:assembly_test.c **** 			buf[(3 * i) + 1] = f  & 0xFF;
1029:assembly_test.c **** 			buf[(3 * i) + 2] = cc2400_get(RSSI) >> 8;
1030:assembly_test.c **** 			i++;
1031:assembly_test.c **** 			if (i == 16) {
1032:assembly_test.c **** 				//FIXME ought to use different packet type
1033:assembly_test.c **** 				enqueue(buf);
1034:assembly_test.c **** 				i = 0;
1035:assembly_test.c **** 				/* send via USB */
1036:assembly_test.c **** 				epstat = USBHwEPGetStatus(BULK_IN_EP);
1037:assembly_test.c **** 				if (!(epstat & EPSTAT_B1FULL))
1038:assembly_test.c **** 					dequeue();
1039:assembly_test.c **** 				if (!(epstat & EPSTAT_B2FULL))
1040:assembly_test.c **** 					dequeue();
1041:assembly_test.c **** 				USBHwISR();
1042:assembly_test.c **** 			}
1043:assembly_test.c **** 
1044:assembly_test.c **** 			cc2400_strobe(SRFOFF);
1045:assembly_test.c **** 			while ((cc2400_status() & FS_LOCK));
1046:assembly_test.c **** 		}
1047:assembly_test.c **** 	}
1048:assembly_test.c **** 	mode = MODE_IDLE;
 2848              		.loc 1 1048 2 is_stmt 1 view .LVU982
 2849              		.loc 1 1048 7 is_stmt 0 view .LVU983
 2850 0064 0023     		movs	r3, #0
1049:assembly_test.c **** 	RXLED_CLR;
 2851              		.loc 1 1049 2 view .LVU984
 2852 0066 1022     		movs	r2, #16
1048:assembly_test.c **** 	RXLED_CLR;
 2853              		.loc 1 1048 7 view .LVU985
 2854 0068 BB62     		str	r3, [r7, #40]
 2855              		.loc 1 1049 2 is_stmt 1 view .LVU986
 2856 006a 284B     		ldr	r3, .L280+12
 2857 006c 1A60     		str	r2, [r3]
1050:assembly_test.c **** }
 2858              		.loc 1 1050 1 is_stmt 0 view .LVU987
 2859 006e 0EB0     		add	sp, sp, #56
 2860              		.cfi_remember_state
 2861              		.cfi_def_cfa_offset 24
 2862              		@ sp needed
 2863 0070 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2864              	.LVL211:
 2865              	.L272:
 2866              		.cfi_restore_state
ARM GAS  /tmp/cciSTofK.s 			page 79


1020:assembly_test.c **** 			cc2400_set(FSDIV, f - 1);
 2867              		.loc 1 1020 3 is_stmt 1 view .LVU988
1020:assembly_test.c **** 			cc2400_set(FSDIV, f - 1);
 2868              		.loc 1 1020 10 is_stmt 0 view .LVU989
 2869 0074 B8F80260 		ldrh	r6, [r8, #2]
 2870              	.L279:
1020:assembly_test.c **** 			cc2400_set(FSDIV, f - 1);
 2871              		.loc 1 1020 24 discriminator 2 view .LVU990
 2872 0078 B8F80430 		ldrh	r3, [r8, #4]
1020:assembly_test.c **** 			cc2400_set(FSDIV, f - 1);
 2873              		.loc 1 1020 42 discriminator 2 view .LVU991
 2874 007c B6B2     		uxth	r6, r6
 2875              	.LVL212:
1020:assembly_test.c **** 			cc2400_set(FSDIV, f - 1);
 2876              		.loc 1 1020 22 is_stmt 1 discriminator 2 view .LVU992
1020:assembly_test.c **** 			cc2400_set(FSDIV, f - 1);
 2877              		.loc 1 1020 24 is_stmt 0 discriminator 2 view .LVU993
 2878 007e 9BB2     		uxth	r3, r3
1020:assembly_test.c **** 			cc2400_set(FSDIV, f - 1);
 2879              		.loc 1 1020 3 discriminator 2 view .LVU994
 2880 0080 B342     		cmp	r3, r6
 2881 0082 ECD3     		bcc	.L264
1021:assembly_test.c **** 			cc2400_strobe(SFSON);
 2882              		.loc 1 1021 4 is_stmt 1 view .LVU995
 2883 0084 711E     		subs	r1, r6, #1
 2884 0086 0220     		movs	r0, #2
 2885 0088 89B2     		uxth	r1, r1
 2886 008a FFF7FEFF 		bl	cc2400_set
 2887              	.LVL213:
1022:assembly_test.c **** 			while (!(cc2400_status() & FS_LOCK));
 2888              		.loc 1 1022 4 view .LVU996
 2889 008e 6120     		movs	r0, #97
 2890 0090 FFF7FEFF 		bl	cc2400_strobe
 2891              	.LVL214:
1023:assembly_test.c **** 			cc2400_strobe(SRX);
 2892              		.loc 1 1023 4 view .LVU997
 2893              	.L266:
1023:assembly_test.c **** 			cc2400_strobe(SRX);
 2894              		.loc 1 1023 40 discriminator 1 view .LVU998
1023:assembly_test.c **** 			cc2400_strobe(SRX);
 2895              		.loc 1 1023 10 discriminator 1 view .LVU999
1023:assembly_test.c **** 			cc2400_strobe(SRX);
 2896              		.loc 1 1023 13 is_stmt 0 discriminator 1 view .LVU1000
 2897 0094 FFF7FEFF 		bl	cc2400_status
 2898              	.LVL215:
1023:assembly_test.c **** 			cc2400_strobe(SRX);
 2899              		.loc 1 1023 10 discriminator 1 view .LVU1001
 2900 0098 4007     		lsls	r0, r0, #29
 2901 009a FBD5     		bpl	.L266
1024:assembly_test.c **** 
 2902              		.loc 1 1024 4 is_stmt 1 view .LVU1002
 2903 009c 6220     		movs	r0, #98
 2904 009e FFF7FEFF 		bl	cc2400_strobe
 2905              	.LVL216:
1027:assembly_test.c **** 			buf[(3 * i) + 1] = f  & 0xFF;
 2906              		.loc 1 1027 4 view .LVU1003
1027:assembly_test.c **** 			buf[(3 * i) + 1] = f  & 0xFF;
ARM GAS  /tmp/cciSTofK.s 			page 80


 2907              		.loc 1 1027 10 is_stmt 0 view .LVU1004
 2908 00a2 04EB4405 		add	r5, r4, r4, lsl #1
1027:assembly_test.c **** 			buf[(3 * i) + 1] = f  & 0xFF;
 2909              		.loc 1 1027 15 view .LVU1005
 2910 00a6 0EAB     		add	r3, sp, #56
 2911 00a8 1D44     		add	r5, r5, r3
1029:assembly_test.c **** 			i++;
 2912              		.loc 1 1029 23 view .LVU1006
 2913 00aa 0620     		movs	r0, #6
1027:assembly_test.c **** 			buf[(3 * i) + 1] = f  & 0xFF;
 2914              		.loc 1 1027 15 view .LVU1007
 2915 00ac 330A     		lsrs	r3, r6, #8
 2916 00ae 05F8343C 		strb	r3, [r5, #-52]
1028:assembly_test.c **** 			buf[(3 * i) + 2] = cc2400_get(RSSI) >> 8;
 2917              		.loc 1 1028 4 is_stmt 1 view .LVU1008
1028:assembly_test.c **** 			buf[(3 * i) + 2] = cc2400_get(RSSI) >> 8;
 2918              		.loc 1 1028 21 is_stmt 0 view .LVU1009
 2919 00b2 05F8336C 		strb	r6, [r5, #-51]
1029:assembly_test.c **** 			i++;
 2920              		.loc 1 1029 4 is_stmt 1 view .LVU1010
1029:assembly_test.c **** 			i++;
 2921              		.loc 1 1029 23 is_stmt 0 view .LVU1011
 2922 00b6 FFF7FEFF 		bl	cc2400_get
 2923              	.LVL217:
1030:assembly_test.c **** 			if (i == 16) {
 2924              		.loc 1 1030 5 view .LVU1012
 2925 00ba 0134     		adds	r4, r4, #1
 2926              	.LVL218:
1030:assembly_test.c **** 			if (i == 16) {
 2927              		.loc 1 1030 5 view .LVU1013
 2928 00bc E4B2     		uxtb	r4, r4
1029:assembly_test.c **** 			i++;
 2929              		.loc 1 1029 21 view .LVU1014
 2930 00be 000A     		lsrs	r0, r0, #8
1031:assembly_test.c **** 				//FIXME ought to use different packet type
 2931              		.loc 1 1031 7 view .LVU1015
 2932 00c0 102C     		cmp	r4, #16
1029:assembly_test.c **** 			i++;
 2933              		.loc 1 1029 21 view .LVU1016
 2934 00c2 05F8320C 		strb	r0, [r5, #-50]
1030:assembly_test.c **** 			if (i == 16) {
 2935              		.loc 1 1030 4 is_stmt 1 view .LVU1017
 2936              	.LVL219:
1031:assembly_test.c **** 				//FIXME ought to use different packet type
 2937              		.loc 1 1031 4 view .LVU1018
1031:assembly_test.c **** 				//FIXME ought to use different packet type
 2938              		.loc 1 1031 7 is_stmt 0 view .LVU1019
 2939 00c6 11D1     		bne	.L267
1033:assembly_test.c **** 				i = 0;
 2940              		.loc 1 1033 5 is_stmt 1 view .LVU1020
 2941 00c8 01A8     		add	r0, sp, #4
 2942 00ca FFF7FEFF 		bl	enqueue
 2943              	.LVL220:
1034:assembly_test.c **** 				/* send via USB */
 2944              		.loc 1 1034 5 view .LVU1021
1036:assembly_test.c **** 				if (!(epstat & EPSTAT_B1FULL))
 2945              		.loc 1 1036 5 view .LVU1022
ARM GAS  /tmp/cciSTofK.s 			page 81


1036:assembly_test.c **** 				if (!(epstat & EPSTAT_B1FULL))
 2946              		.loc 1 1036 14 is_stmt 0 view .LVU1023
 2947 00ce 8220     		movs	r0, #130
 2948 00d0 FFF7FEFF 		bl	USBHwEPGetStatus
 2949              	.LVL221:
1037:assembly_test.c **** 					dequeue();
 2950              		.loc 1 1037 8 view .LVU1024
 2951 00d4 8106     		lsls	r1, r0, #26
1036:assembly_test.c **** 				if (!(epstat & EPSTAT_B1FULL))
 2952              		.loc 1 1036 14 view .LVU1025
 2953 00d6 0446     		mov	r4, r0
 2954              	.LVL222:
1037:assembly_test.c **** 					dequeue();
 2955              		.loc 1 1037 5 is_stmt 1 view .LVU1026
1037:assembly_test.c **** 					dequeue();
 2956              		.loc 1 1037 8 is_stmt 0 view .LVU1027
 2957 00d8 01D4     		bmi	.L268
1038:assembly_test.c **** 				if (!(epstat & EPSTAT_B2FULL))
 2958              		.loc 1 1038 6 is_stmt 1 view .LVU1028
 2959 00da FFF7FEFF 		bl	dequeue
 2960              	.LVL223:
 2961              	.L268:
1039:assembly_test.c **** 					dequeue();
 2962              		.loc 1 1039 5 view .LVU1029
1039:assembly_test.c **** 					dequeue();
 2963              		.loc 1 1039 8 is_stmt 0 view .LVU1030
 2964 00de 6206     		lsls	r2, r4, #25
 2965 00e0 01D4     		bmi	.L269
1040:assembly_test.c **** 				USBHwISR();
 2966              		.loc 1 1040 6 is_stmt 1 view .LVU1031
 2967 00e2 FFF7FEFF 		bl	dequeue
 2968              	.LVL224:
 2969              	.L269:
1041:assembly_test.c **** 			}
 2970              		.loc 1 1041 5 view .LVU1032
 2971 00e6 FFF7FEFF 		bl	USBHwISR
 2972              	.LVL225:
1034:assembly_test.c **** 				/* send via USB */
 2973              		.loc 1 1034 7 is_stmt 0 view .LVU1033
 2974 00ea 0024     		movs	r4, #0
 2975              	.LVL226:
 2976              	.L267:
1044:assembly_test.c **** 			while ((cc2400_status() & FS_LOCK));
 2977              		.loc 1 1044 4 is_stmt 1 view .LVU1034
 2978 00ec 6420     		movs	r0, #100
 2979 00ee FFF7FEFF 		bl	cc2400_strobe
 2980              	.LVL227:
1045:assembly_test.c **** 		}
 2981              		.loc 1 1045 4 view .LVU1035
 2982              	.L270:
1045:assembly_test.c **** 		}
 2983              		.loc 1 1045 39 discriminator 1 view .LVU1036
1045:assembly_test.c **** 		}
 2984              		.loc 1 1045 10 discriminator 1 view .LVU1037
1045:assembly_test.c **** 		}
 2985              		.loc 1 1045 12 is_stmt 0 discriminator 1 view .LVU1038
 2986 00f2 FFF7FEFF 		bl	cc2400_status
ARM GAS  /tmp/cciSTofK.s 			page 82


 2987              	.LVL228:
1045:assembly_test.c **** 		}
 2988              		.loc 1 1045 10 discriminator 1 view .LVU1039
 2989 00f6 4307     		lsls	r3, r0, #29
 2990 00f8 FBD4     		bmi	.L270
1020:assembly_test.c **** 			cc2400_set(FSDIV, f - 1);
 2991              		.loc 1 1020 41 is_stmt 1 discriminator 2 view .LVU1040
1020:assembly_test.c **** 			cc2400_set(FSDIV, f - 1);
 2992              		.loc 1 1020 42 is_stmt 0 discriminator 2 view .LVU1041
 2993 00fa 0136     		adds	r6, r6, #1
 2994              	.LVL229:
1020:assembly_test.c **** 			cc2400_set(FSDIV, f - 1);
 2995              		.loc 1 1020 42 discriminator 2 view .LVU1042
 2996 00fc BCE7     		b	.L279
 2997              	.L281:
 2998 00fe 00BF     		.align	2
 2999              	.L280:
 3000 0100 38C00920 		.word	537509944
 3001 0104 58C00920 		.word	537509976
 3002 0108 00000000 		.word	.LANCHOR0
 3003 010c 3CC00920 		.word	537509948
 3004 0110 00000000 		.word	.LANCHOR1
 3005              		.cfi_endproc
 3006              	.LFE17:
 3008              		.section	.text.find_giac,"ax",%progbits
 3009              		.align	1
 3010              		.global	find_giac
 3011              		.syntax unified
 3012              		.thumb
 3013              		.thumb_func
 3014              		.fpu softvfp
 3016              	find_giac:
 3017              	.LVL230:
 3018              	.LFB18:
1051:assembly_test.c **** 
1052:assembly_test.c **** /* an ugly but effective way to identify a GIAC (inquiry packet) */
1053:assembly_test.c **** int find_giac(u8 *buf)
1054:assembly_test.c **** {
 3019              		.loc 1 1054 1 is_stmt 1 view -0
 3020              		.cfi_startproc
 3021              		@ args = 0, pretend = 0, frame = 56
 3022              		@ frame_needed = 0, uses_anonymous_args = 0
 3023              		.loc 1 1054 1 is_stmt 0 view .LVU1044
 3024 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 3025              		.cfi_def_cfa_offset 20
 3026              		.cfi_offset 4, -20
 3027              		.cfi_offset 5, -16
 3028              		.cfi_offset 6, -12
 3029              		.cfi_offset 7, -8
 3030              		.cfi_offset 14, -4
 3031 0002 8FB0     		sub	sp, sp, #60
 3032              		.cfi_def_cfa_offset 80
1055:assembly_test.c **** 	int i, j;
 3033              		.loc 1 1055 2 is_stmt 1 view .LVU1045
1056:assembly_test.c **** 	const uint8_t giac[8][7] = {
 3034              		.loc 1 1056 2 view .LVU1046
 3035              		.loc 1 1056 16 is_stmt 0 view .LVU1047
ARM GAS  /tmp/cciSTofK.s 			page 83


 3036 0004 6A46     		mov	r2, sp
1054:assembly_test.c **** 	int i, j;
 3037              		.loc 1 1054 1 view .LVU1048
 3038 0006 0546     		mov	r5, r0
 3039 0008 1646     		mov	r6, r2
 3040              		.loc 1 1056 16 view .LVU1049
 3041 000a 1C4B     		ldr	r3, .L292
 3042 000c 03F13807 		add	r7, r3, #56
 3043              	.LVL231:
 3044              	.L283:
 3045              		.loc 1 1056 16 view .LVU1050
 3046 0010 1446     		mov	r4, r2
 3047 0012 1868     		ldr	r0, [r3]	@ unaligned
 3048 0014 5968     		ldr	r1, [r3, #4]	@ unaligned
 3049 0016 0833     		adds	r3, r3, #8
 3050 0018 03C4     		stmia	r4!, {r0, r1}
 3051 001a BB42     		cmp	r3, r7
 3052 001c 2246     		mov	r2, r4
 3053 001e F7D1     		bne	.L283
1057:assembly_test.c **** 			{0x47, 0x5c, 0x58, 0xcc, 0x73, 0x34, 0x5e},
1058:assembly_test.c **** 			{0x8e, 0xb8, 0xb1, 0x98, 0xe6, 0x68, 0xbc},
1059:assembly_test.c **** 			{0x11, 0xd7, 0x16, 0x33, 0x1c, 0xcd, 0x17},
1060:assembly_test.c **** 			{0x23, 0xae, 0x2c, 0x66, 0x39, 0x9a, 0x2f},
1061:assembly_test.c **** 			{0x75, 0xc5, 0x8c, 0xc7, 0x33, 0x45, 0xe7},
1062:assembly_test.c **** 			{0xeb, 0x8b, 0x19, 0x8e, 0x66, 0x8b, 0xce},
1063:assembly_test.c **** 			{0x1d, 0x71, 0x63, 0x31, 0xcc, 0xd1, 0x79},
1064:assembly_test.c **** 			{0x3a, 0xe2, 0xc6, 0x63, 0x99, 0xa2, 0xf3}};
1065:assembly_test.c **** 
1066:assembly_test.c ****     for (i = 0; i < (DMA_SIZE - 6); i++)
 3054              		.loc 1 1066 5 is_stmt 1 view .LVU1051
 3055              	.LVL232:
 3056              		.loc 1 1066 17 view .LVU1052
 3057 0020 2846     		mov	r0, r5
 3058 0022 05F12C04 		add	r4, r5, #44
 3059              	.LVL233:
 3060              	.L284:
1067:assembly_test.c **** 			for (j = 0; j < 8; j++)
 3061              		.loc 1 1067 16 view .LVU1053
 3062 0026 3346     		mov	r3, r6
 3063              		.loc 1 1067 11 is_stmt 0 view .LVU1054
 3064 0028 0022     		movs	r2, #0
1068:assembly_test.c **** 	        	if (buf[i] == giac[j][0]
 3065              		.loc 1 1068 18 view .LVU1055
 3066 002a 10F8011B 		ldrb	r1, [r0], #1	@ zero_extendqisi2
 3067              	.LVL234:
 3068              	.L287:
 3069              		.loc 1 1068 11 is_stmt 1 view .LVU1056
 3070              		.loc 1 1068 14 is_stmt 0 view .LVU1057
 3071 002e 1D78     		ldrb	r5, [r3]	@ zero_extendqisi2
 3072 0030 8D42     		cmp	r5, r1
 3073 0032 17D1     		bne	.L285
1069:assembly_test.c **** 						&& buf[i + 1] == giac[j][1]
 3074              		.loc 1 1069 7 view .LVU1058
 3075 0034 0778     		ldrb	r7, [r0]	@ zero_extendqisi2
 3076 0036 5D78     		ldrb	r5, [r3, #1]	@ zero_extendqisi2
 3077 0038 AF42     		cmp	r7, r5
 3078 003a 13D1     		bne	.L285
ARM GAS  /tmp/cciSTofK.s 			page 84


1070:assembly_test.c **** 						&& buf[i + 2] == giac[j][2]
 3079              		.loc 1 1070 7 view .LVU1059
 3080 003c 4778     		ldrb	r7, [r0, #1]	@ zero_extendqisi2
 3081 003e 9D78     		ldrb	r5, [r3, #2]	@ zero_extendqisi2
 3082 0040 AF42     		cmp	r7, r5
 3083 0042 0FD1     		bne	.L285
1071:assembly_test.c **** 						&& buf[i + 3] == giac[j][3]
 3084              		.loc 1 1071 7 view .LVU1060
 3085 0044 8778     		ldrb	r7, [r0, #2]	@ zero_extendqisi2
 3086 0046 DD78     		ldrb	r5, [r3, #3]	@ zero_extendqisi2
 3087 0048 AF42     		cmp	r7, r5
 3088 004a 0BD1     		bne	.L285
1072:assembly_test.c **** 						&& buf[i + 4] == giac[j][4]
 3089              		.loc 1 1072 7 view .LVU1061
 3090 004c C778     		ldrb	r7, [r0, #3]	@ zero_extendqisi2
 3091 004e 1D79     		ldrb	r5, [r3, #4]	@ zero_extendqisi2
 3092 0050 AF42     		cmp	r7, r5
 3093 0052 07D1     		bne	.L285
1073:assembly_test.c **** 						&& buf[i + 5] == giac[j][5]
 3094              		.loc 1 1073 7 view .LVU1062
 3095 0054 0779     		ldrb	r7, [r0, #4]	@ zero_extendqisi2
 3096 0056 5D79     		ldrb	r5, [r3, #5]	@ zero_extendqisi2
 3097 0058 AF42     		cmp	r7, r5
 3098 005a 03D1     		bne	.L285
1074:assembly_test.c **** 						&& buf[i + 6] == giac[j][6])
 3099              		.loc 1 1074 7 view .LVU1063
 3100 005c 4779     		ldrb	r7, [r0, #5]	@ zero_extendqisi2
 3101 005e 9D79     		ldrb	r5, [r3, #6]	@ zero_extendqisi2
 3102 0060 AF42     		cmp	r7, r5
 3103 0062 08D0     		beq	.L288
 3104              	.L285:
1067:assembly_test.c **** 	        	if (buf[i] == giac[j][0]
 3105              		.loc 1 1067 23 is_stmt 1 discriminator 2 view .LVU1064
1067:assembly_test.c **** 	        	if (buf[i] == giac[j][0]
 3106              		.loc 1 1067 24 is_stmt 0 discriminator 2 view .LVU1065
 3107 0064 0132     		adds	r2, r2, #1
 3108              	.LVL235:
1067:assembly_test.c **** 	        	if (buf[i] == giac[j][0]
 3109              		.loc 1 1067 16 is_stmt 1 discriminator 2 view .LVU1066
1067:assembly_test.c **** 	        	if (buf[i] == giac[j][0]
 3110              		.loc 1 1067 4 is_stmt 0 discriminator 2 view .LVU1067
 3111 0066 082A     		cmp	r2, #8
 3112 0068 03F10703 		add	r3, r3, #7
 3113 006c DFD1     		bne	.L287
1066:assembly_test.c **** 			for (j = 0; j < 8; j++)
 3114              		.loc 1 1066 37 is_stmt 1 discriminator 2 view .LVU1068
 3115              	.LVL236:
1066:assembly_test.c **** 			for (j = 0; j < 8; j++)
 3116              		.loc 1 1066 17 discriminator 2 view .LVU1069
1066:assembly_test.c **** 			for (j = 0; j < 8; j++)
 3117              		.loc 1 1066 5 is_stmt 0 discriminator 2 view .LVU1070
 3118 006e A042     		cmp	r0, r4
 3119 0070 D9D1     		bne	.L284
1075:assembly_test.c **** 					return 1;
1076:assembly_test.c **** 
1077:assembly_test.c **** 	return 0;
 3120              		.loc 1 1077 9 view .LVU1071
ARM GAS  /tmp/cciSTofK.s 			page 85


 3121 0072 0020     		movs	r0, #0
 3122              	.LVL237:
 3123              		.loc 1 1077 9 view .LVU1072
 3124 0074 00E0     		b	.L282
 3125              	.LVL238:
 3126              	.L288:
1075:assembly_test.c **** 					return 1;
 3127              		.loc 1 1075 13 view .LVU1073
 3128 0076 0120     		movs	r0, #1
 3129              	.LVL239:
 3130              	.L282:
1078:assembly_test.c **** }
 3131              		.loc 1 1078 1 view .LVU1074
 3132 0078 0FB0     		add	sp, sp, #60
 3133              		.cfi_def_cfa_offset 20
 3134              		@ sp needed
 3135 007a F0BD     		pop	{r4, r5, r6, r7, pc}
 3136              	.LVL240:
 3137              	.L293:
 3138              		.loc 1 1078 1 view .LVU1075
 3139              		.align	2
 3140              	.L292:
 3141 007c BD000000 		.word	.LANCHOR2+189
 3142              		.cfi_endproc
 3143              	.LFE18:
 3145              		.section	.text.bt_test_rx,"ax",%progbits
 3146              		.align	1
 3147              		.global	bt_test_rx
 3148              		.syntax unified
 3149              		.thumb
 3150              		.thumb_func
 3151              		.fpu softvfp
 3153              	bt_test_rx:
 3154              	.LFB19:
1079:assembly_test.c **** 
1080:assembly_test.c **** void bt_test_rx()
1081:assembly_test.c **** {
 3155              		.loc 1 1081 1 is_stmt 1 view -0
 3156              		.cfi_startproc
 3157              		@ args = 0, pretend = 0, frame = 0
 3158              		@ frame_needed = 0, uses_anonymous_args = 0
 3159 0000 2DE9F84F 		push	{r3, r4, r5, r6, r7, r8, r9, r10, fp, lr}
 3160              		.cfi_def_cfa_offset 40
 3161              		.cfi_offset 3, -40
 3162              		.cfi_offset 4, -36
 3163              		.cfi_offset 5, -32
 3164              		.cfi_offset 6, -28
 3165              		.cfi_offset 7, -24
 3166              		.cfi_offset 8, -20
 3167              		.cfi_offset 9, -16
 3168              		.cfi_offset 10, -12
 3169              		.cfi_offset 11, -8
 3170              		.cfi_offset 14, -4
1082:assembly_test.c **** 	u8 *tmp = NULL;
 3171              		.loc 1 1082 2 view .LVU1077
 3172              	.LVL241:
1083:assembly_test.c **** 	int i;
ARM GAS  /tmp/cciSTofK.s 			page 86


 3173              		.loc 1 1083 2 view .LVU1078
1084:assembly_test.c **** 	int countdown = 0;
 3174              		.loc 1 1084 2 view .LVU1079
1085:assembly_test.c **** 	int num_giacs = 0;
 3175              		.loc 1 1085 2 view .LVU1080
1086:assembly_test.c **** 
1087:assembly_test.c **** 	dio_ssp_init();
 3176              		.loc 1 1087 2 view .LVU1081
1085:assembly_test.c **** 	int num_giacs = 0;
 3177              		.loc 1 1085 6 is_stmt 0 view .LVU1082
 3178 0004 0024     		movs	r4, #0
1088:assembly_test.c **** 	dma_init();
1089:assembly_test.c **** 	dio_ssp_start();
1090:assembly_test.c **** 	cc2400_rx();
1091:assembly_test.c **** 
1092:assembly_test.c **** 	while (num_giacs < 20) {
1093:assembly_test.c **** 		/* wait for DMA transfer */
1094:assembly_test.c **** 		while ((rx_tc == 0) && (rx_err == 0));
 3179              		.loc 1 1094 17 view .LVU1083
 3180 0006 DFF89CA0 		ldr	r10, .L316+8
1087:assembly_test.c **** 	dma_init();
 3181              		.loc 1 1087 2 view .LVU1084
 3182 000a FFF7FEFF 		bl	dio_ssp_init
 3183              	.LVL242:
1088:assembly_test.c **** 	dma_init();
 3184              		.loc 1 1088 2 is_stmt 1 view .LVU1085
1084:assembly_test.c **** 	int num_giacs = 0;
 3185              		.loc 1 1084 6 is_stmt 0 view .LVU1086
 3186 000e 2546     		mov	r5, r4
1088:assembly_test.c **** 	dma_init();
 3187              		.loc 1 1088 2 view .LVU1087
 3188 0010 FFF7FEFF 		bl	dma_init
 3189              	.LVL243:
1089:assembly_test.c **** 	cc2400_rx();
 3190              		.loc 1 1089 2 is_stmt 1 view .LVU1088
 3191 0014 5746     		mov	r7, r10
 3192 0016 FFF7FEFF 		bl	dio_ssp_start
 3193              	.LVL244:
1090:assembly_test.c **** 
 3194              		.loc 1 1090 2 view .LVU1089
1095:assembly_test.c **** 		if (rx_tc % 2) {
1096:assembly_test.c **** 			/* swap buffers */
1097:assembly_test.c **** 			tmp = active_rxbuf;
1098:assembly_test.c **** 			active_rxbuf = idle_rxbuf;
1099:assembly_test.c **** 			idle_rxbuf = tmp;
1100:assembly_test.c **** 		}
1101:assembly_test.c **** 		if (rx_err)
1102:assembly_test.c **** 			RXLED_CLR;
1103:assembly_test.c **** 		if (rx_tc) {
1104:assembly_test.c **** 			if (rx_tc > 1)
1105:assembly_test.c **** 				TXLED_CLR;
1106:assembly_test.c **** 			if (find_giac(idle_rxbuf)) {
1107:assembly_test.c **** 				USRLED_SET;
1108:assembly_test.c **** 				countdown = 100;
1109:assembly_test.c **** 				num_giacs++;
1110:assembly_test.c **** 			} else {
1111:assembly_test.c **** 				if (countdown == 0) {
ARM GAS  /tmp/cciSTofK.s 			page 87


1112:assembly_test.c **** 					/* win if more than 32 GIACs seen during this countdown */
1113:assembly_test.c **** 					//if (num_giacs > 32)
1114:assembly_test.c **** 						//break;
1115:assembly_test.c **** 					USRLED_CLR;
 3195              		.loc 1 1115 6 is_stmt 0 view .LVU1090
 3196 001a 4FF0020B 		mov	fp, #2
1090:assembly_test.c **** 
 3197              		.loc 1 1090 2 view .LVU1091
 3198 001e FFF7FEFF 		bl	cc2400_rx
 3199              	.LVL245:
1092:assembly_test.c **** 		/* wait for DMA transfer */
 3200              		.loc 1 1092 2 is_stmt 1 view .LVU1092
1092:assembly_test.c **** 		/* wait for DMA transfer */
 3201              		.loc 1 1092 8 view .LVU1093
1105:assembly_test.c **** 			if (find_giac(idle_rxbuf)) {
 3202              		.loc 1 1105 5 is_stmt 0 view .LVU1094
 3203 0022 4FF48071 		mov	r1, #256
 3204 0026 DFF88080 		ldr	r8, .L316+12
1097:assembly_test.c **** 			active_rxbuf = idle_rxbuf;
 3205              		.loc 1 1097 8 view .LVU1095
 3206 002a 1C4E     		ldr	r6, .L316
1102:assembly_test.c **** 		if (rx_tc) {
 3207              		.loc 1 1102 4 view .LVU1096
 3208 002c DFF87C90 		ldr	r9, .L316+16
 3209              	.LVL246:
 3210              	.L296:
1094:assembly_test.c **** 		if (rx_tc % 2) {
 3211              		.loc 1 1094 40 is_stmt 1 discriminator 2 view .LVU1097
1094:assembly_test.c **** 		if (rx_tc % 2) {
 3212              		.loc 1 1094 9 discriminator 2 view .LVU1098
1094:assembly_test.c **** 		if (rx_tc % 2) {
 3213              		.loc 1 1094 17 is_stmt 0 discriminator 2 view .LVU1099
 3214 0030 DAF80000 		ldr	r0, [r10]
1094:assembly_test.c **** 		if (rx_tc % 2) {
 3215              		.loc 1 1094 9 discriminator 2 view .LVU1100
 3216 0034 18B9     		cbnz	r0, .L295
1094:assembly_test.c **** 		if (rx_tc % 2) {
 3217              		.loc 1 1094 34 discriminator 1 view .LVU1101
 3218 0036 D8F80000 		ldr	r0, [r8]
1094:assembly_test.c **** 		if (rx_tc % 2) {
 3219              		.loc 1 1094 23 discriminator 1 view .LVU1102
 3220 003a 0028     		cmp	r0, #0
 3221 003c F8D0     		beq	.L296
 3222              	.L295:
1095:assembly_test.c **** 			/* swap buffers */
 3223              		.loc 1 1095 3 is_stmt 1 view .LVU1103
1095:assembly_test.c **** 			/* swap buffers */
 3224              		.loc 1 1095 13 is_stmt 0 view .LVU1104
 3225 003e 3868     		ldr	r0, [r7]
1095:assembly_test.c **** 			/* swap buffers */
 3226              		.loc 1 1095 6 view .LVU1105
 3227 0040 C307     		lsls	r3, r0, #31
1097:assembly_test.c **** 			active_rxbuf = idle_rxbuf;
 3228              		.loc 1 1097 4 is_stmt 1 view .LVU1106
1098:assembly_test.c **** 			idle_rxbuf = tmp;
 3229              		.loc 1 1098 17 is_stmt 0 view .LVU1107
 3230 0042 44BF     		itt	mi
ARM GAS  /tmp/cciSTofK.s 			page 88


 3231 0044 D6E90230 		ldrdmi	r3, r0, [r6, #8]
1099:assembly_test.c **** 		}
 3232              		.loc 1 1099 15 view .LVU1108
 3233 0048 C6E90203 		strdmi	r0, r3, [r6, #8]
1101:assembly_test.c **** 			RXLED_CLR;
 3234              		.loc 1 1101 3 is_stmt 1 view .LVU1109
1101:assembly_test.c **** 			RXLED_CLR;
 3235              		.loc 1 1101 7 is_stmt 0 view .LVU1110
 3236 004c D8F80000 		ldr	r0, [r8]
1101:assembly_test.c **** 			RXLED_CLR;
 3237              		.loc 1 1101 6 view .LVU1111
 3238 0050 10B1     		cbz	r0, .L298
1102:assembly_test.c **** 		if (rx_tc) {
 3239              		.loc 1 1102 4 is_stmt 1 view .LVU1112
 3240 0052 1023     		movs	r3, #16
 3241 0054 C9F80030 		str	r3, [r9]
 3242              	.L298:
1103:assembly_test.c **** 			if (rx_tc > 1)
 3243              		.loc 1 1103 3 view .LVU1113
1103:assembly_test.c **** 			if (rx_tc > 1)
 3244              		.loc 1 1103 7 is_stmt 0 view .LVU1114
 3245 0058 3868     		ldr	r0, [r7]
1103:assembly_test.c **** 			if (rx_tc > 1)
 3246              		.loc 1 1103 6 view .LVU1115
 3247 005a 78B1     		cbz	r0, .L299
1104:assembly_test.c **** 				TXLED_CLR;
 3248              		.loc 1 1104 4 is_stmt 1 view .LVU1116
1104:assembly_test.c **** 				TXLED_CLR;
 3249              		.loc 1 1104 14 is_stmt 0 view .LVU1117
 3250 005c 3868     		ldr	r0, [r7]
1104:assembly_test.c **** 				TXLED_CLR;
 3251              		.loc 1 1104 7 view .LVU1118
 3252 005e 0128     		cmp	r0, #1
1105:assembly_test.c **** 			if (find_giac(idle_rxbuf)) {
 3253              		.loc 1 1105 5 is_stmt 1 view .LVU1119
1106:assembly_test.c **** 				USRLED_SET;
 3254              		.loc 1 1106 4 view .LVU1120
1105:assembly_test.c **** 			if (find_giac(idle_rxbuf)) {
 3255              		.loc 1 1105 5 is_stmt 0 view .LVU1121
 3256 0060 88BF     		it	hi
 3257 0062 C9F80010 		strhi	r1, [r9]
1106:assembly_test.c **** 				USRLED_SET;
 3258              		.loc 1 1106 8 view .LVU1122
 3259 0066 F068     		ldr	r0, [r6, #12]
 3260 0068 FFF7FEFF 		bl	find_giac
 3261              	.LVL247:
1106:assembly_test.c **** 				USRLED_SET;
 3262              		.loc 1 1106 7 view .LVU1123
 3263 006c 4FF48071 		mov	r1, #256
 3264 0070 0B4A     		ldr	r2, .L316+4
 3265 0072 58B1     		cbz	r0, .L301
1107:assembly_test.c **** 				countdown = 100;
 3266              		.loc 1 1107 5 is_stmt 1 view .LVU1124
1108:assembly_test.c **** 				num_giacs++;
 3267              		.loc 1 1108 15 is_stmt 0 view .LVU1125
 3268 0074 6425     		movs	r5, #100
1107:assembly_test.c **** 				countdown = 100;
ARM GAS  /tmp/cciSTofK.s 			page 89


 3269              		.loc 1 1107 5 view .LVU1126
 3270 0076 C2F800B0 		str	fp, [r2]
1108:assembly_test.c **** 				num_giacs++;
 3271              		.loc 1 1108 5 is_stmt 1 view .LVU1127
 3272              	.LVL248:
1109:assembly_test.c **** 			} else {
 3273              		.loc 1 1109 5 view .LVU1128
1109:assembly_test.c **** 			} else {
 3274              		.loc 1 1109 14 is_stmt 0 view .LVU1129
 3275 007a 0134     		adds	r4, r4, #1
 3276              	.LVL249:
 3277              	.L299:
1116:assembly_test.c **** 					num_giacs = 0;
1117:assembly_test.c **** 				} else {
1118:assembly_test.c **** 					--countdown;
1119:assembly_test.c **** 				}
1120:assembly_test.c **** 			}
1121:assembly_test.c **** 		}
1122:assembly_test.c **** 
1123:assembly_test.c **** 		rx_tc = 0;
 3278              		.loc 1 1123 3 is_stmt 1 view .LVU1130
 3279              		.loc 1 1123 9 is_stmt 0 view .LVU1131
 3280 007c 0020     		movs	r0, #0
1092:assembly_test.c **** 		/* wait for DMA transfer */
 3281              		.loc 1 1092 8 view .LVU1132
 3282 007e 142C     		cmp	r4, #20
 3283              		.loc 1 1123 9 view .LVU1133
 3284 0080 3860     		str	r0, [r7]
1124:assembly_test.c **** 		rx_err = 0;
 3285              		.loc 1 1124 3 is_stmt 1 view .LVU1134
 3286              		.loc 1 1124 10 is_stmt 0 view .LVU1135
 3287 0082 C8F80000 		str	r0, [r8]
1092:assembly_test.c **** 		/* wait for DMA transfer */
 3288              		.loc 1 1092 8 is_stmt 1 view .LVU1136
 3289 0086 D3D1     		bne	.L296
1125:assembly_test.c **** 	}
1126:assembly_test.c **** 	//FIXME turn off rx
1127:assembly_test.c **** }
 3290              		.loc 1 1127 1 is_stmt 0 view .LVU1137
 3291 0088 BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
 3292              	.LVL250:
 3293              	.L301:
1111:assembly_test.c **** 					/* win if more than 32 GIACs seen during this countdown */
 3294              		.loc 1 1111 5 is_stmt 1 view .LVU1138
1111:assembly_test.c **** 					/* win if more than 32 GIACs seen during this countdown */
 3295              		.loc 1 1111 8 is_stmt 0 view .LVU1139
 3296 008c 1DB9     		cbnz	r5, .L302
1115:assembly_test.c **** 					num_giacs = 0;
 3297              		.loc 1 1115 6 is_stmt 1 view .LVU1140
1116:assembly_test.c **** 				} else {
 3298              		.loc 1 1116 16 is_stmt 0 view .LVU1141
 3299 008e 2C46     		mov	r4, r5
1115:assembly_test.c **** 					num_giacs = 0;
 3300              		.loc 1 1115 6 view .LVU1142
 3301 0090 C9F800B0 		str	fp, [r9]
1116:assembly_test.c **** 				} else {
 3302              		.loc 1 1116 6 is_stmt 1 view .LVU1143
ARM GAS  /tmp/cciSTofK.s 			page 90


 3303              	.LVL251:
1116:assembly_test.c **** 				} else {
 3304              		.loc 1 1116 6 is_stmt 0 view .LVU1144
 3305 0094 F2E7     		b	.L299
 3306              	.LVL252:
 3307              	.L302:
1118:assembly_test.c **** 				}
 3308              		.loc 1 1118 6 is_stmt 1 view .LVU1145
 3309 0096 013D     		subs	r5, r5, #1
 3310              	.LVL253:
1118:assembly_test.c **** 				}
 3311              		.loc 1 1118 6 is_stmt 0 view .LVU1146
 3312 0098 F0E7     		b	.L299
 3313              	.L317:
 3314 009a 00BF     		.align	2
 3315              	.L316:
 3316 009c 00000000 		.word	.LANCHOR1
 3317 00a0 38C00920 		.word	537509944
 3318 00a4 00000000 		.word	rx_tc
 3319 00a8 00000000 		.word	rx_err
 3320 00ac 3CC00920 		.word	537509948
 3321              		.cfi_endproc
 3322              	.LFE19:
 3324              		.section	.text.waitms,"ax",%progbits
 3325              		.align	1
 3326              		.global	waitms
 3327              		.syntax unified
 3328              		.thumb
 3329              		.thumb_func
 3330              		.fpu softvfp
 3332              	waitms:
 3333              	.LVL254:
 3334              	.LFB20:
1128:assembly_test.c **** 
1129:assembly_test.c **** /* delay a number of milliseconds while on internal oscillator (4 MHz) */
1130:assembly_test.c **** void waitms(u8 ms)
1131:assembly_test.c **** {
 3335              		.loc 1 1131 1 is_stmt 1 view -0
 3336              		.cfi_startproc
 3337              		@ args = 0, pretend = 0, frame = 0
 3338              		@ frame_needed = 0, uses_anonymous_args = 0
 3339              		@ link register save eliminated.
 3340              		.loc 1 1131 1 is_stmt 0 view .LVU1148
1132:assembly_test.c **** 	u32 i = 400 * ms;
 3341              		.loc 1 1132 2 is_stmt 1 view .LVU1149
 3342              	.LVL255:
1133:assembly_test.c **** 	while (--i);
 3343              		.loc 1 1133 2 view .LVU1150
 3344              		.loc 1 1133 13 view .LVU1151
 3345              		.loc 1 1133 8 view .LVU1152
1134:assembly_test.c **** }
 3346              		.loc 1 1134 1 is_stmt 0 view .LVU1153
 3347 0000 7047     		bx	lr
 3348              		.cfi_endproc
 3349              	.LFE20:
 3351              		.section	.text.startup.main,"ax",%progbits
 3352              		.align	1
ARM GAS  /tmp/cciSTofK.s 			page 91


 3353              		.global	main
 3354              		.syntax unified
 3355              		.thumb
 3356              		.thumb_func
 3357              		.fpu softvfp
 3359              	main:
 3360              	.LFB21:
1135:assembly_test.c **** 
1136:assembly_test.c **** int main()
1137:assembly_test.c **** {
 3361              		.loc 1 1137 1 is_stmt 1 view -0
 3362              		.cfi_startproc
 3363              		@ args = 0, pretend = 0, frame = 0
 3364              		@ frame_needed = 0, uses_anonymous_args = 0
 3365 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 3366              		.cfi_def_cfa_offset 24
 3367              		.cfi_offset 3, -24
 3368              		.cfi_offset 4, -20
 3369              		.cfi_offset 5, -16
 3370              		.cfi_offset 6, -12
 3371              		.cfi_offset 7, -8
 3372              		.cfi_offset 14, -4
1138:assembly_test.c **** 	int i;
 3373              		.loc 1 1138 2 view .LVU1155
1139:assembly_test.c **** 
1140:assembly_test.c **** 	gpio_init();
 3374              		.loc 1 1140 2 view .LVU1156
 3375 0002 FFF7FEFF 		bl	gpio_init
 3376              	.LVL256:
1141:assembly_test.c **** 
1142:assembly_test.c **** 	/* blinky */
1143:assembly_test.c **** 	for (i = 0; i < 2; i++) {
 3377              		.loc 1 1143 2 view .LVU1157
 3378              		.loc 1 1143 14 view .LVU1158
1144:assembly_test.c **** 		TXLED_SET;
 3379              		.loc 1 1144 3 view .LVU1159
 3380 0006 4FF48076 		mov	r6, #256
1145:assembly_test.c **** 		RXLED_SET;
1146:assembly_test.c **** 		USRLED_SET;
 3381              		.loc 1 1146 3 is_stmt 0 view .LVU1160
 3382 000a 0223     		movs	r3, #2
1145:assembly_test.c **** 		RXLED_SET;
 3383              		.loc 1 1145 3 view .LVU1161
 3384 000c 1025     		movs	r5, #16
1144:assembly_test.c **** 		TXLED_SET;
 3385              		.loc 1 1144 3 view .LVU1162
 3386 000e 374F     		ldr	r7, .L342
1147:assembly_test.c **** 		waitms(200);
1148:assembly_test.c **** 		TXLED_CLR;
 3387              		.loc 1 1148 3 view .LVU1163
 3388 0010 374C     		ldr	r4, .L342+4
1144:assembly_test.c **** 		RXLED_SET;
 3389              		.loc 1 1144 3 view .LVU1164
 3390 0012 3E60     		str	r6, [r7]
1145:assembly_test.c **** 		RXLED_SET;
 3391              		.loc 1 1145 3 is_stmt 1 view .LVU1165
 3392 0014 3D60     		str	r5, [r7]
ARM GAS  /tmp/cciSTofK.s 			page 92


1146:assembly_test.c **** 		waitms(200);
 3393              		.loc 1 1146 3 view .LVU1166
 3394 0016 3B60     		str	r3, [r7]
1147:assembly_test.c **** 		waitms(200);
 3395              		.loc 1 1147 3 view .LVU1167
 3396              	.LVL257:
1132:assembly_test.c **** 	while (--i);
 3397              		.loc 1 1132 2 view .LVU1168
1133:assembly_test.c **** }
 3398              		.loc 1 1133 2 view .LVU1169
1133:assembly_test.c **** }
 3399              		.loc 1 1133 13 view .LVU1170
1133:assembly_test.c **** }
 3400              		.loc 1 1133 8 view .LVU1171
 3401              		.loc 1 1148 3 view .LVU1172
 3402 0018 2660     		str	r6, [r4]
1149:assembly_test.c **** 		RXLED_CLR;
 3403              		.loc 1 1149 3 view .LVU1173
 3404 001a 2560     		str	r5, [r4]
1150:assembly_test.c **** 		USRLED_CLR;
 3405              		.loc 1 1150 3 view .LVU1174
 3406 001c 2360     		str	r3, [r4]
1151:assembly_test.c **** 		waitms(200);
 3407              		.loc 1 1151 3 view .LVU1175
 3408              	.LVL258:
1132:assembly_test.c **** 	while (--i);
 3409              		.loc 1 1132 2 view .LVU1176
1133:assembly_test.c **** }
 3410              		.loc 1 1133 2 view .LVU1177
1133:assembly_test.c **** }
 3411              		.loc 1 1133 13 view .LVU1178
1133:assembly_test.c **** }
 3412              		.loc 1 1133 8 view .LVU1179
1143:assembly_test.c **** 		TXLED_SET;
 3413              		.loc 1 1143 21 view .LVU1180
1143:assembly_test.c **** 		TXLED_SET;
 3414              		.loc 1 1143 14 view .LVU1181
1144:assembly_test.c **** 		RXLED_SET;
 3415              		.loc 1 1144 3 view .LVU1182
 3416 001e 3E60     		str	r6, [r7]
1145:assembly_test.c **** 		USRLED_SET;
 3417              		.loc 1 1145 3 view .LVU1183
 3418 0020 3D60     		str	r5, [r7]
1146:assembly_test.c **** 		waitms(200);
 3419              		.loc 1 1146 3 view .LVU1184
 3420 0022 3B60     		str	r3, [r7]
1147:assembly_test.c **** 		TXLED_CLR;
 3421              		.loc 1 1147 3 view .LVU1185
 3422              	.LVL259:
1132:assembly_test.c **** 	while (--i);
 3423              		.loc 1 1132 2 view .LVU1186
1133:assembly_test.c **** }
 3424              		.loc 1 1133 2 view .LVU1187
1133:assembly_test.c **** }
 3425              		.loc 1 1133 13 view .LVU1188
1133:assembly_test.c **** }
 3426              		.loc 1 1133 8 view .LVU1189
ARM GAS  /tmp/cciSTofK.s 			page 93


1148:assembly_test.c **** 		RXLED_CLR;
 3427              		.loc 1 1148 3 view .LVU1190
 3428 0024 2660     		str	r6, [r4]
1149:assembly_test.c **** 		USRLED_CLR;
 3429              		.loc 1 1149 3 view .LVU1191
 3430 0026 2560     		str	r5, [r4]
1150:assembly_test.c **** 		waitms(200);
 3431              		.loc 1 1150 3 view .LVU1192
 3432 0028 2360     		str	r3, [r4]
 3433              		.loc 1 1151 3 view .LVU1193
 3434              	.LVL260:
1132:assembly_test.c **** 	while (--i);
 3435              		.loc 1 1132 2 view .LVU1194
1133:assembly_test.c **** }
 3436              		.loc 1 1133 2 view .LVU1195
1133:assembly_test.c **** }
 3437              		.loc 1 1133 13 view .LVU1196
1133:assembly_test.c **** }
 3438              		.loc 1 1133 8 view .LVU1197
1143:assembly_test.c **** 		TXLED_SET;
 3439              		.loc 1 1143 21 view .LVU1198
1143:assembly_test.c **** 		TXLED_SET;
 3440              		.loc 1 1143 14 view .LVU1199
1152:assembly_test.c **** 	}
1153:assembly_test.c **** 
1154:assembly_test.c **** 	/* cc2400_test */
1155:assembly_test.c **** 	cc2400_init();
 3441              		.loc 1 1155 2 view .LVU1200
 3442 002a FFF7FEFF 		bl	cc2400_init
 3443              	.LVL261:
1156:assembly_test.c **** 	TXLED_SET;
 3444              		.loc 1 1156 2 view .LVU1201
 3445 002e 3E60     		str	r6, [r7]
1157:assembly_test.c **** 	waitms(200);
 3446              		.loc 1 1157 2 view .LVU1202
 3447              	.LVL262:
1132:assembly_test.c **** 	while (--i);
 3448              		.loc 1 1132 2 view .LVU1203
1133:assembly_test.c **** }
 3449              		.loc 1 1133 2 view .LVU1204
1133:assembly_test.c **** }
 3450              		.loc 1 1133 13 view .LVU1205
1133:assembly_test.c **** }
 3451              		.loc 1 1133 8 view .LVU1206
1158:assembly_test.c **** 	TXLED_CLR;
 3452              		.loc 1 1158 2 view .LVU1207
 3453 0030 2660     		str	r6, [r4]
1159:assembly_test.c **** 	waitms(200);
 3454              		.loc 1 1159 2 view .LVU1208
 3455              	.LVL263:
1132:assembly_test.c **** 	while (--i);
 3456              		.loc 1 1132 2 view .LVU1209
1133:assembly_test.c **** }
 3457              		.loc 1 1133 2 view .LVU1210
1133:assembly_test.c **** }
 3458              		.loc 1 1133 13 view .LVU1211
1133:assembly_test.c **** }
ARM GAS  /tmp/cciSTofK.s 			page 94


 3459              		.loc 1 1133 8 view .LVU1212
1160:assembly_test.c **** 	cc2400_reset();
 3460              		.loc 1 1160 2 view .LVU1213
 3461 0032 FFF7FEFF 		bl	cc2400_reset
 3462              	.LVL264:
1161:assembly_test.c **** 	TXLED_SET;
 3463              		.loc 1 1161 2 view .LVU1214
 3464 0036 3E60     		str	r6, [r7]
1162:assembly_test.c **** 	waitms(200);
 3465              		.loc 1 1162 2 view .LVU1215
 3466              	.LVL265:
1132:assembly_test.c **** 	while (--i);
 3467              		.loc 1 1132 2 view .LVU1216
1133:assembly_test.c **** }
 3468              		.loc 1 1133 2 view .LVU1217
1133:assembly_test.c **** }
 3469              		.loc 1 1133 13 view .LVU1218
1133:assembly_test.c **** }
 3470              		.loc 1 1133 8 view .LVU1219
1163:assembly_test.c **** 	TXLED_CLR;
 3471              		.loc 1 1163 2 view .LVU1220
1164:assembly_test.c **** 	waitms(200);
1165:assembly_test.c **** 	if (cc2400_get(AGCCTRL) != 0xf700)
 3472              		.loc 1 1165 6 is_stmt 0 view .LVU1221
 3473 0038 0420     		movs	r0, #4
1163:assembly_test.c **** 	TXLED_CLR;
 3474              		.loc 1 1163 2 view .LVU1222
 3475 003a 2660     		str	r6, [r4]
1164:assembly_test.c **** 	waitms(200);
 3476              		.loc 1 1164 2 is_stmt 1 view .LVU1223
 3477              	.LVL266:
1132:assembly_test.c **** 	while (--i);
 3478              		.loc 1 1132 2 view .LVU1224
1133:assembly_test.c **** }
 3479              		.loc 1 1133 2 view .LVU1225
1133:assembly_test.c **** }
 3480              		.loc 1 1133 13 view .LVU1226
1133:assembly_test.c **** }
 3481              		.loc 1 1133 8 view .LVU1227
 3482              		.loc 1 1165 2 view .LVU1228
 3483              		.loc 1 1165 6 is_stmt 0 view .LVU1229
 3484 003c FFF7FEFF 		bl	cc2400_get
 3485              	.LVL267:
 3486              		.loc 1 1165 5 view .LVU1230
 3487 0040 B0F5774F 		cmp	r0, #63232
 3488 0044 00D0     		beq	.L320
 3489              	.L321:
1166:assembly_test.c **** 		while(1);
 3490              		.loc 1 1166 3 is_stmt 1 discriminator 1 view .LVU1231
 3491              		.loc 1 1166 11 discriminator 1 view .LVU1232
 3492              		.loc 1 1166 8 discriminator 1 view .LVU1233
 3493 0046 FEE7     		b	.L321
 3494              	.L320:
1167:assembly_test.c **** 	TXLED_SET;
 3495              		.loc 1 1167 2 view .LVU1234
 3496 0048 3E60     		str	r6, [r7]
1168:assembly_test.c **** 	waitms(200);
ARM GAS  /tmp/cciSTofK.s 			page 95


 3497              		.loc 1 1168 2 view .LVU1235
 3498              	.LVL268:
1132:assembly_test.c **** 	while (--i);
 3499              		.loc 1 1132 2 view .LVU1236
1133:assembly_test.c **** }
 3500              		.loc 1 1133 2 view .LVU1237
1133:assembly_test.c **** }
 3501              		.loc 1 1133 13 view .LVU1238
1133:assembly_test.c **** }
 3502              		.loc 1 1133 8 view .LVU1239
1169:assembly_test.c **** 
1170:assembly_test.c **** 	/* clock_test */
1171:assembly_test.c **** 	clock_start();
 3503              		.loc 1 1171 2 view .LVU1240
 3504 004a FFF7FEFF 		bl	clock_start
 3505              	.LVL269:
1172:assembly_test.c **** 	for (i = 0; i < 4; i++) {
 3506              		.loc 1 1172 2 view .LVU1241
 3507              		.loc 1 1172 14 view .LVU1242
1171:assembly_test.c **** 	for (i = 0; i < 4; i++) {
 3508              		.loc 1 1171 2 is_stmt 0 view .LVU1243
 3509 004e 0426     		movs	r6, #4
 3510              	.LVL270:
 3511              	.L322:
1173:assembly_test.c **** 		RXLED_SET;
 3512              		.loc 1 1173 3 is_stmt 1 discriminator 3 view .LVU1244
1174:assembly_test.c **** 		wait(2);
 3513              		.loc 1 1174 3 is_stmt 0 discriminator 3 view .LVU1245
 3514 0050 0220     		movs	r0, #2
1173:assembly_test.c **** 		RXLED_SET;
 3515              		.loc 1 1173 3 discriminator 3 view .LVU1246
 3516 0052 3D60     		str	r5, [r7]
 3517              		.loc 1 1174 3 is_stmt 1 discriminator 3 view .LVU1247
 3518 0054 FFF7FEFF 		bl	wait
 3519              	.LVL271:
1175:assembly_test.c **** 		RXLED_CLR;
 3520              		.loc 1 1175 3 discriminator 3 view .LVU1248
1176:assembly_test.c **** 		wait(2);
 3521              		.loc 1 1176 3 is_stmt 0 discriminator 3 view .LVU1249
 3522 0058 0220     		movs	r0, #2
1175:assembly_test.c **** 		RXLED_CLR;
 3523              		.loc 1 1175 3 discriminator 3 view .LVU1250
 3524 005a 2560     		str	r5, [r4]
 3525              		.loc 1 1176 3 is_stmt 1 discriminator 3 view .LVU1251
 3526 005c FFF7FEFF 		bl	wait
 3527              	.LVL272:
1172:assembly_test.c **** 		RXLED_SET;
 3528              		.loc 1 1172 21 discriminator 3 view .LVU1252
1172:assembly_test.c **** 		RXLED_SET;
 3529              		.loc 1 1172 14 discriminator 3 view .LVU1253
1172:assembly_test.c **** 		RXLED_SET;
 3530              		.loc 1 1172 2 is_stmt 0 discriminator 3 view .LVU1254
 3531 0060 013E     		subs	r6, r6, #1
 3532              	.LVL273:
1172:assembly_test.c **** 		RXLED_SET;
 3533              		.loc 1 1172 2 discriminator 3 view .LVU1255
 3534 0062 F5D1     		bne	.L322
ARM GAS  /tmp/cciSTofK.s 			page 96


1177:assembly_test.c **** 	}
1178:assembly_test.c **** 	RXLED_SET;
 3535              		.loc 1 1178 2 is_stmt 1 view .LVU1256
 3536              	.LBB18:
 3537              	.LBB19:
 541:assembly_test.c **** 	clkn_high = 0;
 3538              		.loc 1 541 8 is_stmt 0 view .LVU1257
 3539 0064 0224     		movs	r4, #2
 549:assembly_test.c **** 	T0MR0 = 3276799999;
 3540              		.loc 1 549 7 view .LVU1258
 3541 0066 0421     		movs	r1, #4
 541:assembly_test.c **** 	clkn_high = 0;
 3542              		.loc 1 541 8 view .LVU1259
 3543 0068 224A     		ldr	r2, .L342+8
 542:assembly_test.c **** 
 3544              		.loc 1 542 12 view .LVU1260
 3545 006a 234B     		ldr	r3, .L342+12
 3546              	.LBE19:
 3547              	.LBE18:
 3548              		.loc 1 1178 2 view .LVU1261
 3549 006c 3D60     		str	r5, [r7]
1179:assembly_test.c **** 
1180:assembly_test.c **** 	clkn_init();
 3550              		.loc 1 1180 2 is_stmt 1 view .LVU1262
 3551              	.LBB22:
 3552              	.LBI18:
 532:assembly_test.c **** {
 3553              		.loc 1 532 13 view .LVU1263
 3554              	.LBB20:
 541:assembly_test.c **** 	clkn_high = 0;
 3555              		.loc 1 541 2 view .LVU1264
 541:assembly_test.c **** 	clkn_high = 0;
 3556              		.loc 1 541 8 is_stmt 0 view .LVU1265
 3557 006e 1460     		str	r4, [r2]
 542:assembly_test.c **** 
 3558              		.loc 1 542 2 is_stmt 1 view .LVU1266
 542:assembly_test.c **** 
 3559              		.loc 1 542 12 is_stmt 0 view .LVU1267
 3560 0070 1E70     		strb	r6, [r3]
 549:assembly_test.c **** 	T0MR0 = 3276799999;
 3561              		.loc 1 549 2 is_stmt 1 view .LVU1268
 549:assembly_test.c **** 	T0MR0 = 3276799999;
 3562              		.loc 1 549 7 is_stmt 0 view .LVU1269
 3563 0072 224B     		ldr	r3, .L342+16
 3564              	.LBE20:
 3565              	.LBE22:
1181:assembly_test.c **** 	bt_test_rx();
1182:assembly_test.c **** 	USRLED_SET;
1183:assembly_test.c **** 
1184:assembly_test.c **** 	/*
1185:assembly_test.c **** 	 * Now we function like bluetooth_rxtx so that the USB interface can be
1186:assembly_test.c **** 	 * tested.
1187:assembly_test.c **** 	 */
1188:assembly_test.c **** 	ubertooth_usb_init();
1189:assembly_test.c **** 
1190:assembly_test.c **** 	while (1) {
1191:assembly_test.c **** 		USBHwISR();
ARM GAS  /tmp/cciSTofK.s 			page 97


1192:assembly_test.c **** 		if (rx_pkts)
 3566              		.loc 1 1192 7 view .LVU1270
 3567 0074 224D     		ldr	r5, .L342+20
 3568              	.LBB23:
 3569              	.LBB21:
 549:assembly_test.c **** 	T0MR0 = 3276799999;
 3570              		.loc 1 549 7 view .LVU1271
 3571 0076 1960     		str	r1, [r3]
 550:assembly_test.c **** 	T0MCR = TMCR_MR0R | TMCR_MR0I;
 3572              		.loc 1 550 2 is_stmt 1 view .LVU1272
 550:assembly_test.c **** 	T0MCR = TMCR_MR0R | TMCR_MR0I;
 3573              		.loc 1 550 8 is_stmt 0 view .LVU1273
 3574 0078 2249     		ldr	r1, .L342+24
 3575 007a D960     		str	r1, [r3, #12]
 551:assembly_test.c **** 	ISER0 |= ISER0_ISE_TIMER0;
 3576              		.loc 1 551 2 is_stmt 1 view .LVU1274
 551:assembly_test.c **** 	ISER0 |= ISER0_ISE_TIMER0;
 3577              		.loc 1 551 8 is_stmt 0 view .LVU1275
 3578 007c 0321     		movs	r1, #3
 3579 007e 9960     		str	r1, [r3, #8]
 552:assembly_test.c **** 
 3580              		.loc 1 552 2 is_stmt 1 view .LVU1276
 552:assembly_test.c **** 
 3581              		.loc 1 552 8 is_stmt 0 view .LVU1277
 3582 0080 2149     		ldr	r1, .L342+28
 3583 0082 0B68     		ldr	r3, [r1]
 3584 0084 2343     		orrs	r3, r3, r4
 3585 0086 0B60     		str	r3, [r1]
 555:assembly_test.c **** }
 3586              		.loc 1 555 2 is_stmt 1 view .LVU1278
 555:assembly_test.c **** }
 3587              		.loc 1 555 8 is_stmt 0 view .LVU1279
 3588 0088 0123     		movs	r3, #1
 3589 008a 1360     		str	r3, [r2]
 3590              	.LBE21:
 3591              	.LBE23:
1181:assembly_test.c **** 	USRLED_SET;
 3592              		.loc 1 1181 2 is_stmt 1 view .LVU1280
 3593 008c FFF7FEFF 		bl	bt_test_rx
 3594              	.LVL274:
1182:assembly_test.c **** 
 3595              		.loc 1 1182 2 view .LVU1281
 3596 0090 3C60     		str	r4, [r7]
1188:assembly_test.c **** 
 3597              		.loc 1 1188 2 view .LVU1282
 3598 0092 FFF7FEFF 		bl	ubertooth_usb_init
 3599              	.LVL275:
 3600 0096 2C46     		mov	r4, r5
 3601              	.L323:
1190:assembly_test.c **** 		USBHwISR();
 3602              		.loc 1 1190 2 view .LVU1283
1191:assembly_test.c **** 		if (rx_pkts)
 3603              		.loc 1 1191 3 view .LVU1284
 3604 0098 FFF7FEFF 		bl	USBHwISR
 3605              	.LVL276:
 3606              		.loc 1 1192 3 view .LVU1285
 3607              		.loc 1 1192 7 is_stmt 0 view .LVU1286
ARM GAS  /tmp/cciSTofK.s 			page 98


 3608 009c 2B68     		ldr	r3, [r5]
 3609              		.loc 1 1192 6 view .LVU1287
 3610 009e 13B1     		cbz	r3, .L324
1193:assembly_test.c **** 			bt_stream_rx();
 3611              		.loc 1 1193 4 is_stmt 1 view .LVU1288
 3612 00a0 FFF7FEFF 		bl	bt_stream_rx
 3613              	.LVL277:
 3614 00a4 F8E7     		b	.L323
 3615              	.L324:
1194:assembly_test.c **** 		else if (requested_mode == MODE_TX_TEST && mode != MODE_TX_TEST)
 3616              		.loc 1 1194 8 view .LVU1289
 3617              		.loc 1 1194 27 is_stmt 0 view .LVU1290
 3618 00a6 6B68     		ldr	r3, [r5, #4]
 3619              		.loc 1 1194 11 view .LVU1291
 3620 00a8 032B     		cmp	r3, #3
 3621 00aa 05D1     		bne	.L326
 3622              		.loc 1 1194 51 discriminator 1 view .LVU1292
 3623 00ac AB6A     		ldr	r3, [r5, #40]
 3624              		.loc 1 1194 43 discriminator 1 view .LVU1293
 3625 00ae 032B     		cmp	r3, #3
 3626 00b0 02D0     		beq	.L326
1195:assembly_test.c **** 			cc2400_txtest();
 3627              		.loc 1 1195 4 is_stmt 1 view .LVU1294
 3628 00b2 FFF7FEFF 		bl	cc2400_txtest
 3629              	.LVL278:
 3630 00b6 EFE7     		b	.L323
 3631              	.L326:
1196:assembly_test.c **** 		else if (requested_mode == MODE_RANGE_TEST && mode != MODE_RANGE_TEST)
 3632              		.loc 1 1196 8 view .LVU1295
 3633              		.loc 1 1196 27 is_stmt 0 view .LVU1296
 3634 00b8 6368     		ldr	r3, [r4, #4]
 3635              		.loc 1 1196 11 view .LVU1297
 3636 00ba 052B     		cmp	r3, #5
 3637 00bc 05D1     		bne	.L327
 3638              		.loc 1 1196 54 discriminator 1 view .LVU1298
 3639 00be A36A     		ldr	r3, [r4, #40]
 3640              		.loc 1 1196 46 discriminator 1 view .LVU1299
 3641 00c0 052B     		cmp	r3, #5
 3642 00c2 02D0     		beq	.L327
1197:assembly_test.c **** 			cc2400_rangetest();
 3643              		.loc 1 1197 4 is_stmt 1 view .LVU1300
 3644 00c4 FFF7FEFF 		bl	cc2400_rangetest
 3645              	.LVL279:
 3646 00c8 E6E7     		b	.L323
 3647              	.L327:
1198:assembly_test.c **** 		else if (requested_mode == MODE_REPEATER && mode != MODE_REPEATER)
 3648              		.loc 1 1198 8 view .LVU1301
 3649              		.loc 1 1198 27 is_stmt 0 view .LVU1302
 3650 00ca 6368     		ldr	r3, [r4, #4]
 3651              		.loc 1 1198 11 view .LVU1303
 3652 00cc 062B     		cmp	r3, #6
 3653 00ce 04D1     		bne	.L328
 3654              		.loc 1 1198 52 discriminator 1 view .LVU1304
 3655 00d0 A36A     		ldr	r3, [r4, #40]
 3656              		.loc 1 1198 44 discriminator 1 view .LVU1305
 3657 00d2 062B     		cmp	r3, #6
 3658 00d4 01D0     		beq	.L328
ARM GAS  /tmp/cciSTofK.s 			page 99


1199:assembly_test.c **** 			cc2400_repeater();
 3659              		.loc 1 1199 4 is_stmt 1 view .LVU1306
 3660 00d6 FFF7FEFF 		bl	cc2400_repeater
 3661              	.LVL280:
 3662              	.L328:
1200:assembly_test.c **** 		else if (requested_mode == MODE_SPECAN && mode != MODE_SPECAN)
 3663              		.loc 1 1200 8 view .LVU1307
 3664              		.loc 1 1200 27 is_stmt 0 view .LVU1308
 3665 00da 6368     		ldr	r3, [r4, #4]
 3666              		.loc 1 1200 11 view .LVU1309
 3667 00dc 042B     		cmp	r3, #4
 3668 00de DBD1     		bne	.L323
 3669              		.loc 1 1200 50 discriminator 1 view .LVU1310
 3670 00e0 A36A     		ldr	r3, [r4, #40]
 3671              		.loc 1 1200 42 discriminator 1 view .LVU1311
 3672 00e2 042B     		cmp	r3, #4
 3673 00e4 D8D0     		beq	.L323
1201:assembly_test.c **** 			specan();
 3674              		.loc 1 1201 4 is_stmt 1 view .LVU1312
 3675 00e6 FFF7FEFF 		bl	specan
 3676              	.LVL281:
 3677 00ea D5E7     		b	.L323
 3678              	.L343:
 3679              		.align	2
 3680              	.L342:
 3681 00ec 38C00920 		.word	537509944
 3682 00f0 3CC00920 		.word	537509948
 3683 00f4 04400040 		.word	1073758212
 3684 00f8 00000000 		.word	clkn_high
 3685 00fc 0C400040 		.word	1073758220
 3686 0100 00000000 		.word	.LANCHOR0
 3687 0104 FFFF4FC3 		.word	-1018167297
 3688 0108 00E100E0 		.word	-536813312
 3689              		.cfi_endproc
 3690              	.LFE21:
 3692              		.global	tail
 3693              		.global	head
 3694              		.comm	fifo,8192,4
 3695              		.global	status
 3696              		.global	rx_pkts
 3697              		.comm	rx_err,4,4
 3698              		.comm	rx_tc,4,4
 3699              		.comm	rx_dma_lli2,16,4
 3700              		.comm	rx_dma_lli1,16,4
 3701              		.global	high_freq
 3702              		.global	low_freq
 3703              		.global	channel
 3704              		.global	modulation
 3705              		.global	requested_mode
 3706              		.global	mode
 3707              		.comm	rr,5,1
 3708              		.global	idle_rxbuf
 3709              		.global	active_rxbuf
 3710              		.comm	rxbuf2,50,1
 3711              		.comm	rxbuf1,50,1
 3712              		.comm	clkn_high,1,1
 3713              		.section	.rodata
ARM GAS  /tmp/cciSTofK.s 			page 100


 3714              		.set	.LANCHOR2,. + 0
 3717              	abDescriptors:
 3718 0000 12010002 		.ascii	"\022\001\000\002\377\000\000@\377\377\004\000\000\001"
 3718      FF000040 
 3718      FFFF0400 
 3718      0001
 3719 000e 01020301 		.ascii	"\001\002\003\001\011\002 \000\001\001\000\2002\011\004"
 3719      09022000 
 3719      01010080 
 3719      320904
 3720 001d 000002FF 		.ascii	"\000\000\002\377\000\000\000\007\005\202\002@\000\000"
 3720      00000007 
 3720      05820240 
 3720      0000
 3721 002b 07050502 		.ascii	"\007\005\005\002@\000\000\004\003\011\004D\003h\000"
 3721      40000004 
 3721      03090444 
 3721      036800
 3722 003a 74007400 		.ascii	"t\000t\000p\000:\000/\000/\000u\000b\000e\000r\000t"
 3722      70003A00 
 3722      2F002F00 
 3722      75006200 
 3722      65007200 
 3723 004f 006F006F 		.ascii	"\000o\000o\000t\000h\000.\000s\000o\000u\000r\000c\000"
 3723      00740068 
 3723      002E0073 
 3723      006F0075 
 3723      00720063 
 3724 0064 65006600 		.ascii	"e\000f\000o\000r\000g\000e\000.\000n\000e\000t\000/"
 3724      6F007200 
 3724      67006500 
 3724      2E006E00 
 3724      65007400 
 3725 0079 00300375 		.ascii	"\0000\003u\000b\000e\000r\000t\000o\000o\000t\000h\000"
 3725      00620065 
 3725      00720074 
 3725      006F006F 
 3725      00740068 
 3726 008e 20006100 		.ascii	" \000a\000s\000s\000e\000m\000b\000l\000y\000_\000t"
 3726      73007300 
 3726      65006D00 
 3726      62006C00 
 3726      79005F00 
 3727 00a3 00650073 		.ascii	"\000e\000s\000t\000\022\0030\0000\0000\0000\0000\000"
 3727      00740012 
 3727      03300030 
 3727      00300030 
 3727      003000
 3728 00b6 30003000 		.ascii	"0\0000\0001\000\000"
 3728      310000
 3729              	.LC0:
 3730 00bd 475C58CC 		.ascii	"G\\X\314s4^"
 3730      73345E
 3731 00c4 8EB8B198 		.ascii	"\216\270\261\230\346h\274"
 3731      E668BC
 3732 00cb 11D71633 		.ascii	"\021\327\0263\034\315\027"
 3732      1CCD17
ARM GAS  /tmp/cciSTofK.s 			page 101


 3733 00d2 23AE2C66 		.ascii	"#\256,f9\232/"
 3733      399A2F
 3734 00d9 75C58CC7 		.ascii	"u\305\214\3073E\347"
 3734      3345E7
 3735 00e0 EB8B198E 		.ascii	"\353\213\031\216f\213\316"
 3735      668BCE
 3736 00e7 1D716331 		.ascii	"\035qc1\314\321y"
 3736      CCD179
 3737 00ee 3AE2C663 		.ascii	":\342\306c\231\242\363"
 3737      99A2F3
 3738              		.data
 3739              		.align	2
 3740              		.set	.LANCHOR1,. + 0
 3743              	channel:
 3744 0000 8909     		.short	2441
 3747              	low_freq:
 3748 0002 6009     		.short	2400
 3751              	high_freq:
 3752 0004 B309     		.short	2483
 3753 0006 0000     		.space	2
 3756              	active_rxbuf:
 3757 0008 00000000 		.word	rxbuf1
 3760              	idle_rxbuf:
 3761 000c 00000000 		.word	rxbuf2
 3762              		.bss
 3763              		.align	2
 3764              		.set	.LANCHOR0,. + 0
 3767              	rx_pkts:
 3768 0000 00000000 		.space	4
 3771              	requested_mode:
 3772 0004 00000000 		.space	4
 3775              	modulation:
 3776 0008 00000000 		.space	4
 3779              	head:
 3780 000c 00000000 		.space	4
 3783              	tail:
 3784 0010 00000000 		.space	4
 3787              	status:
 3788 0014 00       		.space	1
 3791              	abVendorReqData:
 3792 0015 00000000 		.space	17
 3792      00000000 
 3792      00000000 
 3792      00000000 
 3792      00
 3793 0026 0000     		.space	2
 3796              	mode:
 3797 0028 00000000 		.space	4
 3798              		.text
 3799              	.Letext0:
 3800              		.file 2 "/usr/lib/gcc/arm-none-eabi/9.2.1/include/stddef.h"
 3801              		.file 3 "/usr/include/newlib/sys/_types.h"
 3802              		.file 4 "/usr/include/newlib/sys/reent.h"
 3803              		.file 5 "/usr/include/newlib/sys/lock.h"
 3804              		.file 6 "/usr/lib/gcc/arm-none-eabi/9.2.1/include/stdint.h"
 3805              		.file 7 "../../host/libubertooth/src/ubertooth_interface.h"
 3806              		.file 8 "../common/ubertooth.h"
ARM GAS  /tmp/cciSTofK.s 			page 102


 3807              		.file 9 "../common/lpcusb/target/type.h"
 3808              		.file 10 "../common/lpcusb/target/usbstruct.h"
 3809              		.file 11 "../common/lpcusb/target/usbapi.h"
 3810              		.file 12 "../common/lpcusb/target/usbhw_lpc.h"
 3811              		.file 13 "/usr/include/newlib/string.h"
ARM GAS  /tmp/cciSTofK.s 			page 103


DEFINED SYMBOLS
                            *ABS*:0000000000000000 assembly_test.c
     /tmp/cciSTofK.s:16     .text.dma_init:0000000000000000 $t
     /tmp/cciSTofK.s:23     .text.dma_init:0000000000000000 dma_init
     /tmp/cciSTofK.s:174    .text.dma_init:000000000000008c $d
                            *COM*:0000000000000010 rx_dma_lli1
                            *COM*:0000000000000032 rxbuf1
                            *COM*:0000000000000010 rx_dma_lli2
                            *COM*:0000000000000032 rxbuf2
                            *COM*:0000000000000004 rx_tc
                            *COM*:0000000000000004 rx_err
     /tmp/cciSTofK.s:193    .text.dio_ssp_start:0000000000000000 $t
     /tmp/cciSTofK.s:199    .text.dio_ssp_start:0000000000000000 dio_ssp_start
     /tmp/cciSTofK.s:243    .text.dio_ssp_start:0000000000000038 $d
     /tmp/cciSTofK.s:255    .text.usb_vendor_request_handler:0000000000000000 $t
     /tmp/cciSTofK.s:261    .text.usb_vendor_request_handler:0000000000000000 usb_vendor_request_handler
     /tmp/cciSTofK.s:293    .text.usb_vendor_request_handler:0000000000000014 $d
     /tmp/cciSTofK.s:327    .text.usb_vendor_request_handler:0000000000000058 $t
     /tmp/cciSTofK.s:912    .text.usb_vendor_request_handler:0000000000000298 $d
                            *COM*:0000000000000005 rr
     /tmp/cciSTofK.s:929    .text.queue_init:0000000000000000 $t
     /tmp/cciSTofK.s:936    .text.queue_init:0000000000000000 queue_init
     /tmp/cciSTofK.s:956    .text.queue_init:000000000000000c $d
     /tmp/cciSTofK.s:961    .text.enqueue:0000000000000000 $t
     /tmp/cciSTofK.s:968    .text.enqueue:0000000000000000 enqueue
     /tmp/cciSTofK.s:1079   .text.enqueue:0000000000000064 $d
                            *COM*:0000000000000001 clkn_high
                            *COM*:0000000000002000 fifo
     /tmp/cciSTofK.s:1088   .text.dequeue:0000000000000000 $t
     /tmp/cciSTofK.s:1095   .text.dequeue:0000000000000000 dequeue
     /tmp/cciSTofK.s:1157   .text.dequeue:0000000000000038 $d
     /tmp/cciSTofK.s:1164   .text.ubertooth_usb_init:0000000000000000 $t
     /tmp/cciSTofK.s:1171   .text.ubertooth_usb_init:0000000000000000 ubertooth_usb_init
     /tmp/cciSTofK.s:1205   .text.ubertooth_usb_init:0000000000000020 $d
     /tmp/cciSTofK.s:1212   .text.TIMER0_IRQHandler:0000000000000000 $t
     /tmp/cciSTofK.s:1219   .text.TIMER0_IRQHandler:0000000000000000 TIMER0_IRQHandler
     /tmp/cciSTofK.s:1250   .text.TIMER0_IRQHandler:0000000000000020 $d
     /tmp/cciSTofK.s:1255   .text.DMA_IRQHandler:0000000000000000 $t
     /tmp/cciSTofK.s:1262   .text.DMA_IRQHandler:0000000000000000 DMA_IRQHandler
     /tmp/cciSTofK.s:1319   .text.DMA_IRQHandler:0000000000000040 $d
     /tmp/cciSTofK.s:1330   .text.cc2400_rx:0000000000000000 $t
     /tmp/cciSTofK.s:1337   .text.cc2400_rx:0000000000000000 cc2400_rx
     /tmp/cciSTofK.s:1466   .text.cc2400_rx:00000000000000b0 $d
     /tmp/cciSTofK.s:1473   .text.cc2400_txtest:0000000000000000 $t
     /tmp/cciSTofK.s:1480   .text.cc2400_txtest:0000000000000000 cc2400_txtest
     /tmp/cciSTofK.s:1604   .text.cc2400_txtest:00000000000000a0 $d
     /tmp/cciSTofK.s:1612   .text.cc2400_rangetest:0000000000000000 $t
     /tmp/cciSTofK.s:1619   .text.cc2400_rangetest:0000000000000000 cc2400_rangetest
     /tmp/cciSTofK.s:2181   .text.cc2400_rangetest:0000000000000278 $d
     /tmp/cciSTofK.s:2193   .text.cc2400_repeater:0000000000000000 $t
     /tmp/cciSTofK.s:2200   .text.cc2400_repeater:0000000000000000 cc2400_repeater
     /tmp/cciSTofK.s:2554   .text.cc2400_repeater:0000000000000180 $d
     /tmp/cciSTofK.s:2563   .text.bt_stream_rx:0000000000000000 $t
     /tmp/cciSTofK.s:2570   .text.bt_stream_rx:0000000000000000 bt_stream_rx
     /tmp/cciSTofK.s:2741   .text.bt_stream_rx:00000000000000b0 $d
     /tmp/cciSTofK.s:2751   .text.specan:0000000000000000 $t
     /tmp/cciSTofK.s:2758   .text.specan:0000000000000000 specan
ARM GAS  /tmp/cciSTofK.s 			page 104


     /tmp/cciSTofK.s:3000   .text.specan:0000000000000100 $d
     /tmp/cciSTofK.s:3009   .text.find_giac:0000000000000000 $t
     /tmp/cciSTofK.s:3016   .text.find_giac:0000000000000000 find_giac
     /tmp/cciSTofK.s:3141   .text.find_giac:000000000000007c $d
     /tmp/cciSTofK.s:3146   .text.bt_test_rx:0000000000000000 $t
     /tmp/cciSTofK.s:3153   .text.bt_test_rx:0000000000000000 bt_test_rx
     /tmp/cciSTofK.s:3316   .text.bt_test_rx:000000000000009c $d
     /tmp/cciSTofK.s:3325   .text.waitms:0000000000000000 $t
     /tmp/cciSTofK.s:3332   .text.waitms:0000000000000000 waitms
     /tmp/cciSTofK.s:3352   .text.startup.main:0000000000000000 $t
     /tmp/cciSTofK.s:3359   .text.startup.main:0000000000000000 main
     /tmp/cciSTofK.s:3681   .text.startup.main:00000000000000ec $d
     /tmp/cciSTofK.s:3783   .bss:0000000000000010 tail
     /tmp/cciSTofK.s:3779   .bss:000000000000000c head
     /tmp/cciSTofK.s:3787   .bss:0000000000000014 status
     /tmp/cciSTofK.s:3767   .bss:0000000000000000 rx_pkts
     /tmp/cciSTofK.s:3751   .data:0000000000000004 high_freq
     /tmp/cciSTofK.s:3747   .data:0000000000000002 low_freq
     /tmp/cciSTofK.s:3743   .data:0000000000000000 channel
     /tmp/cciSTofK.s:3775   .bss:0000000000000008 modulation
     /tmp/cciSTofK.s:3771   .bss:0000000000000004 requested_mode
     /tmp/cciSTofK.s:3796   .bss:0000000000000028 mode
     /tmp/cciSTofK.s:3760   .data:000000000000000c idle_rxbuf
     /tmp/cciSTofK.s:3756   .data:0000000000000008 active_rxbuf
     /tmp/cciSTofK.s:3717   .rodata:0000000000000000 abDescriptors
     /tmp/cciSTofK.s:3739   .data:0000000000000000 $d
     /tmp/cciSTofK.s:3763   .bss:0000000000000000 $d
     /tmp/cciSTofK.s:3791   .bss:0000000000000015 abVendorReqData

UNDEFINED SYMBOLS
cc2400_get
cc2400_set
reset
strlen
memcpy
iap_entry
bootloader_ctrl
USBHwEPWrite
USBInit
USBRegisterDescriptors
USBRegisterRequestHandler
USBHwConnect
cc2400_status
cc2400_strobe
cc2400_set8
cc2400_get8
dio_ssp_init
USBHwEPGetStatus
USBHwISR
gpio_init
cc2400_init
cc2400_reset
clock_start
wait
