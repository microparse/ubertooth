ARM GAS  /tmp/ccwF1FQu.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 4
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"bluetooth_rxtx.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.reverse8,"ax",%progbits
  16              		.align	1
  17              		.arch armv7-m
  18              		.syntax unified
  19              		.thumb
  20              		.thumb_func
  21              		.fpu softvfp
  23              	reverse8:
  24              	.LVL0:
  25              	.LFB16:
  26              		.file 1 "bluetooth_rxtx.c"
   1:bluetooth_rxtx.c **** /*
   2:bluetooth_rxtx.c ****  * Copyright 2010-2013 Michael Ossmann
   3:bluetooth_rxtx.c ****  * Copyright 2011-2013 Dominic Spill
   4:bluetooth_rxtx.c ****  *
   5:bluetooth_rxtx.c ****  * This file is part of Project Ubertooth.
   6:bluetooth_rxtx.c ****  *
   7:bluetooth_rxtx.c ****  * This program is free software; you can redistribute it and/or modify
   8:bluetooth_rxtx.c ****  * it under the terms of the GNU General Public License as published by
   9:bluetooth_rxtx.c ****  * the Free Software Foundation; either version 2, or (at your option)
  10:bluetooth_rxtx.c ****  * any later version.
  11:bluetooth_rxtx.c ****  *
  12:bluetooth_rxtx.c ****  * This program is distributed in the hope that it will be useful,
  13:bluetooth_rxtx.c ****  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  14:bluetooth_rxtx.c ****  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  15:bluetooth_rxtx.c ****  * GNU General Public License for more details.
  16:bluetooth_rxtx.c ****  *
  17:bluetooth_rxtx.c ****  * You should have received a copy of the GNU General Public License
  18:bluetooth_rxtx.c ****  * along with this program; see the file COPYING.  If not, write to
  19:bluetooth_rxtx.c ****  * the Free Software Foundation, Inc., 51 Franklin Street,
  20:bluetooth_rxtx.c ****  * Boston, MA 02110-1301, USA.
  21:bluetooth_rxtx.c ****  */
  22:bluetooth_rxtx.c **** 
  23:bluetooth_rxtx.c **** #include <string.h>
  24:bluetooth_rxtx.c **** 
  25:bluetooth_rxtx.c **** #include "ubertooth.h"
  26:bluetooth_rxtx.c **** #include "ubertooth_usb.h"
  27:bluetooth_rxtx.c **** #include "ubertooth_interface.h"
  28:bluetooth_rxtx.c **** #include "ubertooth_rssi.h"
  29:bluetooth_rxtx.c **** #include "ubertooth_cs.h"
  30:bluetooth_rxtx.c **** #include "ubertooth_dma.h"
  31:bluetooth_rxtx.c **** #include "ubertooth_clock.h"
  32:bluetooth_rxtx.c **** #include "bluetooth.h"
ARM GAS  /tmp/ccwF1FQu.s 			page 2


  33:bluetooth_rxtx.c **** #include "bluetooth_le.h"
  34:bluetooth_rxtx.c **** #include "cc2400_rangetest.h"
  35:bluetooth_rxtx.c **** #include "ego.h"
  36:bluetooth_rxtx.c **** #include "debug_uart.h"
  37:bluetooth_rxtx.c **** #include "xmas.h"
  38:bluetooth_rxtx.c **** 
  39:bluetooth_rxtx.c **** #define MIN(x,y)	((x)<(y)?(x):(y))
  40:bluetooth_rxtx.c **** #define MAX(x,y)	((x)>(y)?(x):(y))
  41:bluetooth_rxtx.c **** 
  42:bluetooth_rxtx.c **** /* build info */
  43:bluetooth_rxtx.c **** const char compile_info[] =
  44:bluetooth_rxtx.c **** 	"ubertooth " GIT_REVISION " (" COMPILE_BY "@" COMPILE_HOST ") " TIMESTAMP;
  45:bluetooth_rxtx.c **** 
  46:bluetooth_rxtx.c **** /* hopping stuff */
  47:bluetooth_rxtx.c **** volatile uint8_t  hop_mode = HOP_NONE;
  48:bluetooth_rxtx.c **** volatile uint8_t  do_hop = 0;                  // set by timer interrupt
  49:bluetooth_rxtx.c **** volatile uint16_t channel = 2441;
  50:bluetooth_rxtx.c **** volatile uint16_t hop_direct_channel = 0;      // for hopping directly to a channel
  51:bluetooth_rxtx.c **** volatile uint16_t hop_timeout = 158;
  52:bluetooth_rxtx.c **** volatile uint16_t requested_channel = 0;
  53:bluetooth_rxtx.c **** volatile uint16_t le_adv_channel = 2402;
  54:bluetooth_rxtx.c **** volatile int      cancel_follow = 0;
  55:bluetooth_rxtx.c **** 
  56:bluetooth_rxtx.c **** /* bulk USB stuff */
  57:bluetooth_rxtx.c **** volatile uint8_t  idle_buf_clkn_high = 0;
  58:bluetooth_rxtx.c **** volatile uint32_t idle_buf_clk100ns = 0;
  59:bluetooth_rxtx.c **** volatile uint16_t idle_buf_channel = 0;
  60:bluetooth_rxtx.c **** volatile uint8_t  dma_discard = 0;
  61:bluetooth_rxtx.c **** volatile uint8_t  status = 0;
  62:bluetooth_rxtx.c **** 
  63:bluetooth_rxtx.c **** /* operation mode */
  64:bluetooth_rxtx.c **** volatile uint8_t mode = MODE_IDLE;
  65:bluetooth_rxtx.c **** volatile uint8_t requested_mode = MODE_IDLE;
  66:bluetooth_rxtx.c **** volatile uint8_t jam_mode = JAM_NONE;
  67:bluetooth_rxtx.c **** volatile uint8_t ego_mode = EGO_FOLLOW;
  68:bluetooth_rxtx.c **** 
  69:bluetooth_rxtx.c **** volatile uint8_t modulation = MOD_BT_BASIC_RATE;
  70:bluetooth_rxtx.c **** 
  71:bluetooth_rxtx.c **** /* specan stuff */
  72:bluetooth_rxtx.c **** volatile uint16_t low_freq = 2400;
  73:bluetooth_rxtx.c **** volatile uint16_t high_freq = 2483;
  74:bluetooth_rxtx.c **** volatile int8_t rssi_threshold = -30;  // -54dBm - 30 = -84dBm
  75:bluetooth_rxtx.c **** 
  76:bluetooth_rxtx.c **** /* Generic TX stuff */
  77:bluetooth_rxtx.c **** generic_tx_packet tx_pkt;
  78:bluetooth_rxtx.c **** 
  79:bluetooth_rxtx.c **** /* le slave stuff */
  80:bluetooth_rxtx.c **** uint8_t slave_mac_address[6] = { 0, };
  81:bluetooth_rxtx.c **** uint8_t le_adv_data[LE_ADV_MAX_LEN] = { 0x02, 0x01, 0x05 };
  82:bluetooth_rxtx.c **** unsigned le_adv_len = 3;
  83:bluetooth_rxtx.c **** 
  84:bluetooth_rxtx.c **** le_state_t le = {
  85:bluetooth_rxtx.c **** 	.access_address = 0x8e89bed6,           // advertising channel access address
  86:bluetooth_rxtx.c **** 	.synch = 0x6b7d,                        // bit-reversed adv channel AA
  87:bluetooth_rxtx.c **** 	.syncl = 0x9171,
  88:bluetooth_rxtx.c **** 	.crc_init  = 0x555555,                  // advertising channel CRCInit
  89:bluetooth_rxtx.c **** 	.crc_init_reversed = 0xAAAAAA,
ARM GAS  /tmp/ccwF1FQu.s 			page 3


  90:bluetooth_rxtx.c **** 	.crc_verify = 0,
  91:bluetooth_rxtx.c **** 
  92:bluetooth_rxtx.c **** 	.link_state = LINK_INACTIVE,
  93:bluetooth_rxtx.c **** 	.conn_epoch = 0,
  94:bluetooth_rxtx.c **** 	.do_follow = 1,
  95:bluetooth_rxtx.c **** 	.target_set = 0,
  96:bluetooth_rxtx.c **** 	.last_packet = 0,
  97:bluetooth_rxtx.c **** };
  98:bluetooth_rxtx.c **** 
  99:bluetooth_rxtx.c **** typedef struct _le_promisc_active_aa_t {
 100:bluetooth_rxtx.c **** 	u32 aa;
 101:bluetooth_rxtx.c **** 	int count;
 102:bluetooth_rxtx.c **** } le_promisc_active_aa_t;
 103:bluetooth_rxtx.c **** 
 104:bluetooth_rxtx.c **** typedef struct _le_promisc_state_t {
 105:bluetooth_rxtx.c **** 	// LFU cache of recently seen AA's
 106:bluetooth_rxtx.c **** 	le_promisc_active_aa_t active_aa[32];
 107:bluetooth_rxtx.c **** 
 108:bluetooth_rxtx.c **** 	// recovering hop interval
 109:bluetooth_rxtx.c **** 	u32 smallest_hop_interval;
 110:bluetooth_rxtx.c **** 	int consec_intervals;
 111:bluetooth_rxtx.c **** } le_promisc_state_t;
 112:bluetooth_rxtx.c **** le_promisc_state_t le_promisc;
 113:bluetooth_rxtx.c **** #define AA_LIST_SIZE (int)(sizeof(le_promisc.active_aa) / sizeof(le_promisc_active_aa_t))
 114:bluetooth_rxtx.c **** 
 115:bluetooth_rxtx.c **** /* LE jamming */
 116:bluetooth_rxtx.c **** #define JAM_COUNT_DEFAULT 40
 117:bluetooth_rxtx.c **** int le_jam_count = 0;
 118:bluetooth_rxtx.c **** 
 119:bluetooth_rxtx.c **** /* set LE access address */
 120:bluetooth_rxtx.c **** static void le_set_access_address(u32 aa);
 121:bluetooth_rxtx.c **** 
 122:bluetooth_rxtx.c **** typedef int (*data_cb_t)(char *);
 123:bluetooth_rxtx.c **** data_cb_t data_cb = NULL;
 124:bluetooth_rxtx.c **** 
 125:bluetooth_rxtx.c **** typedef void (*packet_cb_t)(u8 *);
 126:bluetooth_rxtx.c **** packet_cb_t packet_cb = NULL;
 127:bluetooth_rxtx.c **** 
 128:bluetooth_rxtx.c **** /* Unpacked symbol buffers (two rxbufs) */
 129:bluetooth_rxtx.c **** char unpacked[DMA_SIZE*8*2];
 130:bluetooth_rxtx.c **** 
 131:bluetooth_rxtx.c **** static int enqueue(uint8_t type, uint8_t* buf)
 132:bluetooth_rxtx.c **** {
 133:bluetooth_rxtx.c **** 	usb_pkt_rx* f = usb_enqueue();
 134:bluetooth_rxtx.c **** 
 135:bluetooth_rxtx.c **** 	/* fail if queue is full */
 136:bluetooth_rxtx.c **** 	if (f == NULL) {
 137:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 138:bluetooth_rxtx.c **** 		return 0;
 139:bluetooth_rxtx.c **** 	}
 140:bluetooth_rxtx.c **** 
 141:bluetooth_rxtx.c **** 	f->pkt_type = type;
 142:bluetooth_rxtx.c **** 	if(type == SPECAN) {
 143:bluetooth_rxtx.c **** 		f->clkn_high = (clkn >> 20) & 0xff;
 144:bluetooth_rxtx.c **** 		f->clk100ns = CLK100NS;
 145:bluetooth_rxtx.c **** 	} else {
 146:bluetooth_rxtx.c **** 		f->clkn_high = idle_buf_clkn_high;
ARM GAS  /tmp/ccwF1FQu.s 			page 4


 147:bluetooth_rxtx.c **** 		f->clk100ns = idle_buf_clk100ns;
 148:bluetooth_rxtx.c **** 		f->channel = (uint8_t)((idle_buf_channel - 2402) & 0xff);
 149:bluetooth_rxtx.c **** 		f->rssi_min = rssi_min;
 150:bluetooth_rxtx.c **** 		f->rssi_max = rssi_max;
 151:bluetooth_rxtx.c **** 		f->rssi_avg = rssi_get_avg(idle_buf_channel);
 152:bluetooth_rxtx.c **** 		f->rssi_count = rssi_count;
 153:bluetooth_rxtx.c **** 	}
 154:bluetooth_rxtx.c **** 
 155:bluetooth_rxtx.c **** 	memcpy(f->data, buf, DMA_SIZE);
 156:bluetooth_rxtx.c **** 
 157:bluetooth_rxtx.c **** 	f->status = status;
 158:bluetooth_rxtx.c **** 	status = 0;
 159:bluetooth_rxtx.c **** 
 160:bluetooth_rxtx.c **** 	return 1;
 161:bluetooth_rxtx.c **** }
 162:bluetooth_rxtx.c **** 
 163:bluetooth_rxtx.c **** int enqueue_with_ts(uint8_t type, uint8_t* buf, uint32_t ts)
 164:bluetooth_rxtx.c **** {
 165:bluetooth_rxtx.c **** 	usb_pkt_rx* f = usb_enqueue();
 166:bluetooth_rxtx.c **** 
 167:bluetooth_rxtx.c **** 	/* fail if queue is full */
 168:bluetooth_rxtx.c **** 	if (f == NULL) {
 169:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 170:bluetooth_rxtx.c **** 		return 0;
 171:bluetooth_rxtx.c **** 	}
 172:bluetooth_rxtx.c **** 
 173:bluetooth_rxtx.c **** 	f->pkt_type = type;
 174:bluetooth_rxtx.c **** 
 175:bluetooth_rxtx.c **** 	f->clkn_high = 0;
 176:bluetooth_rxtx.c **** 	f->clk100ns = ts;
 177:bluetooth_rxtx.c **** 
 178:bluetooth_rxtx.c **** 	f->channel = (uint8_t)((channel - 2402) & 0xff);
 179:bluetooth_rxtx.c **** 	f->rssi_avg = 0;
 180:bluetooth_rxtx.c **** 	f->rssi_count = 0;
 181:bluetooth_rxtx.c **** 
 182:bluetooth_rxtx.c **** 	memcpy(f->data, buf, DMA_SIZE);
 183:bluetooth_rxtx.c **** 
 184:bluetooth_rxtx.c **** 	f->status = status;
 185:bluetooth_rxtx.c **** 	status = 0;
 186:bluetooth_rxtx.c **** 
 187:bluetooth_rxtx.c **** 	return 1;
 188:bluetooth_rxtx.c **** }
 189:bluetooth_rxtx.c **** 
 190:bluetooth_rxtx.c **** static int vendor_request_handler(uint8_t request, uint16_t* request_params, uint8_t* data, int* da
 191:bluetooth_rxtx.c **** {
 192:bluetooth_rxtx.c **** 	uint32_t clock;
 193:bluetooth_rxtx.c **** 	size_t length; // string length
 194:bluetooth_rxtx.c **** 	usb_pkt_rx* p = NULL;
 195:bluetooth_rxtx.c **** 	uint16_t reg_val;
 196:bluetooth_rxtx.c **** 	uint8_t i;
 197:bluetooth_rxtx.c **** 	unsigned data_in_len = request_params[2];
 198:bluetooth_rxtx.c **** 
 199:bluetooth_rxtx.c **** 	switch (request) {
 200:bluetooth_rxtx.c **** 
 201:bluetooth_rxtx.c **** 	case UBERTOOTH_PING:
 202:bluetooth_rxtx.c **** 		*data_len = 0;
 203:bluetooth_rxtx.c **** 		break;
ARM GAS  /tmp/ccwF1FQu.s 			page 5


 204:bluetooth_rxtx.c **** 
 205:bluetooth_rxtx.c **** 	case UBERTOOTH_RX_SYMBOLS:
 206:bluetooth_rxtx.c **** 		requested_mode = MODE_RX_SYMBOLS;
 207:bluetooth_rxtx.c **** 		*data_len = 0;
 208:bluetooth_rxtx.c **** 		break;
 209:bluetooth_rxtx.c **** 
 210:bluetooth_rxtx.c **** #ifdef TX_ENABLE
 211:bluetooth_rxtx.c **** 	case UBERTOOTH_TX_SYMBOLS:
 212:bluetooth_rxtx.c **** 		hop_mode = HOP_BLUETOOTH;
 213:bluetooth_rxtx.c **** 		requested_mode = MODE_TX_SYMBOLS;
 214:bluetooth_rxtx.c **** 		*data_len = 0;
 215:bluetooth_rxtx.c **** 		break;
 216:bluetooth_rxtx.c **** #endif
 217:bluetooth_rxtx.c **** 
 218:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_USRLED:
 219:bluetooth_rxtx.c **** 		data[0] = (USRLED) ? 1 : 0;
 220:bluetooth_rxtx.c **** 		*data_len = 1;
 221:bluetooth_rxtx.c **** 		break;
 222:bluetooth_rxtx.c **** 
 223:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_USRLED:
 224:bluetooth_rxtx.c **** 		if (request_params[0])
 225:bluetooth_rxtx.c **** 			USRLED_SET;
 226:bluetooth_rxtx.c **** 		else
 227:bluetooth_rxtx.c **** 			USRLED_CLR;
 228:bluetooth_rxtx.c **** 		break;
 229:bluetooth_rxtx.c **** 
 230:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_RXLED:
 231:bluetooth_rxtx.c **** 		data[0] = (RXLED) ? 1 : 0;
 232:bluetooth_rxtx.c **** 		*data_len = 1;
 233:bluetooth_rxtx.c **** 		break;
 234:bluetooth_rxtx.c **** 
 235:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_RXLED:
 236:bluetooth_rxtx.c **** 		if (request_params[0])
 237:bluetooth_rxtx.c **** 			RXLED_SET;
 238:bluetooth_rxtx.c **** 		else
 239:bluetooth_rxtx.c **** 			RXLED_CLR;
 240:bluetooth_rxtx.c **** 		break;
 241:bluetooth_rxtx.c **** 
 242:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_TXLED:
 243:bluetooth_rxtx.c **** 		data[0] = (TXLED) ? 1 : 0;
 244:bluetooth_rxtx.c **** 		*data_len = 1;
 245:bluetooth_rxtx.c **** 		break;
 246:bluetooth_rxtx.c **** 
 247:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_TXLED:
 248:bluetooth_rxtx.c **** 		if (request_params[0])
 249:bluetooth_rxtx.c **** 			TXLED_SET;
 250:bluetooth_rxtx.c **** 		else
 251:bluetooth_rxtx.c **** 			TXLED_CLR;
 252:bluetooth_rxtx.c **** 		break;
 253:bluetooth_rxtx.c **** 
 254:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_1V8:
 255:bluetooth_rxtx.c **** 		data[0] = (CC1V8) ? 1 : 0;
 256:bluetooth_rxtx.c **** 		*data_len = 1;
 257:bluetooth_rxtx.c **** 		break;
 258:bluetooth_rxtx.c **** 
 259:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_1V8:
 260:bluetooth_rxtx.c **** 		if (request_params[0])
ARM GAS  /tmp/ccwF1FQu.s 			page 6


 261:bluetooth_rxtx.c **** 			CC1V8_SET;
 262:bluetooth_rxtx.c **** 		else
 263:bluetooth_rxtx.c **** 			CC1V8_CLR;
 264:bluetooth_rxtx.c **** 		break;
 265:bluetooth_rxtx.c **** 
 266:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PARTNUM:
 267:bluetooth_rxtx.c **** 		get_part_num(data, data_len);
 268:bluetooth_rxtx.c **** 		break;
 269:bluetooth_rxtx.c **** 
 270:bluetooth_rxtx.c **** 	case UBERTOOTH_RESET:
 271:bluetooth_rxtx.c **** 		requested_mode = MODE_RESET;
 272:bluetooth_rxtx.c **** 		break;
 273:bluetooth_rxtx.c **** 
 274:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_SERIAL:
 275:bluetooth_rxtx.c **** 		get_device_serial(data, data_len);
 276:bluetooth_rxtx.c **** 		break;
 277:bluetooth_rxtx.c **** 
 278:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
 279:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PAEN:
 280:bluetooth_rxtx.c **** 		data[0] = (PAEN) ? 1 : 0;
 281:bluetooth_rxtx.c **** 		*data_len = 1;
 282:bluetooth_rxtx.c **** 		break;
 283:bluetooth_rxtx.c **** 
 284:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_PAEN:
 285:bluetooth_rxtx.c **** 		if (request_params[0])
 286:bluetooth_rxtx.c **** 			PAEN_SET;
 287:bluetooth_rxtx.c **** 		else
 288:bluetooth_rxtx.c **** 			PAEN_CLR;
 289:bluetooth_rxtx.c **** 		break;
 290:bluetooth_rxtx.c **** 
 291:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_HGM:
 292:bluetooth_rxtx.c **** 		data[0] = (HGM) ? 1 : 0;
 293:bluetooth_rxtx.c **** 		*data_len = 1;
 294:bluetooth_rxtx.c **** 		break;
 295:bluetooth_rxtx.c **** 
 296:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_HGM:
 297:bluetooth_rxtx.c **** 		if (request_params[0])
 298:bluetooth_rxtx.c **** 			HGM_SET;
 299:bluetooth_rxtx.c **** 		else
 300:bluetooth_rxtx.c **** 			HGM_CLR;
 301:bluetooth_rxtx.c **** 		break;
 302:bluetooth_rxtx.c **** #endif
 303:bluetooth_rxtx.c **** 
 304:bluetooth_rxtx.c **** #ifdef TX_ENABLE
 305:bluetooth_rxtx.c **** 	case UBERTOOTH_TX_TEST:
 306:bluetooth_rxtx.c **** 		requested_mode = MODE_TX_TEST;
 307:bluetooth_rxtx.c **** 		break;
 308:bluetooth_rxtx.c **** 
 309:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PALEVEL:
 310:bluetooth_rxtx.c **** 		data[0] = cc2400_get(FREND) & 0x7;
 311:bluetooth_rxtx.c **** 		*data_len = 1;
 312:bluetooth_rxtx.c **** 		break;
 313:bluetooth_rxtx.c **** 
 314:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_PALEVEL:
 315:bluetooth_rxtx.c **** 		if( request_params[0] < 8 ) {
 316:bluetooth_rxtx.c **** 			cc2400_set(FREND, 8 | request_params[0]);
 317:bluetooth_rxtx.c **** 		} else {
ARM GAS  /tmp/ccwF1FQu.s 			page 7


 318:bluetooth_rxtx.c **** 			return 0;
 319:bluetooth_rxtx.c **** 		}
 320:bluetooth_rxtx.c **** 		break;
 321:bluetooth_rxtx.c **** 
 322:bluetooth_rxtx.c **** 	case UBERTOOTH_RANGE_TEST:
 323:bluetooth_rxtx.c **** 		requested_mode = MODE_RANGE_TEST;
 324:bluetooth_rxtx.c **** 		break;
 325:bluetooth_rxtx.c **** 
 326:bluetooth_rxtx.c **** 	case UBERTOOTH_REPEATER:
 327:bluetooth_rxtx.c **** 		requested_mode = MODE_REPEATER;
 328:bluetooth_rxtx.c **** 		break;
 329:bluetooth_rxtx.c **** #endif
 330:bluetooth_rxtx.c **** 
 331:bluetooth_rxtx.c **** 	case UBERTOOTH_RANGE_CHECK:
 332:bluetooth_rxtx.c **** 		data[0] = rr.valid;
 333:bluetooth_rxtx.c **** 		data[1] = rr.request_pa;
 334:bluetooth_rxtx.c **** 		data[2] = rr.request_num;
 335:bluetooth_rxtx.c **** 		data[3] = rr.reply_pa;
 336:bluetooth_rxtx.c **** 		data[4] = rr.reply_num;
 337:bluetooth_rxtx.c **** 		*data_len = 5;
 338:bluetooth_rxtx.c **** 		break;
 339:bluetooth_rxtx.c **** 
 340:bluetooth_rxtx.c **** 	case UBERTOOTH_STOP:
 341:bluetooth_rxtx.c **** 		requested_mode = MODE_IDLE;
 342:bluetooth_rxtx.c **** 		break;
 343:bluetooth_rxtx.c **** 
 344:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_MOD:
 345:bluetooth_rxtx.c **** 		data[0] = modulation;
 346:bluetooth_rxtx.c **** 		*data_len = 1;
 347:bluetooth_rxtx.c **** 		break;
 348:bluetooth_rxtx.c **** 
 349:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_MOD:
 350:bluetooth_rxtx.c **** 		modulation = request_params[0];
 351:bluetooth_rxtx.c **** 		break;
 352:bluetooth_rxtx.c **** 
 353:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CHANNEL:
 354:bluetooth_rxtx.c **** 		data[0] = channel & 0xFF;
 355:bluetooth_rxtx.c **** 		data[1] = (channel >> 8) & 0xFF;
 356:bluetooth_rxtx.c **** 		*data_len = 2;
 357:bluetooth_rxtx.c **** 		break;
 358:bluetooth_rxtx.c **** 
 359:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CHANNEL:
 360:bluetooth_rxtx.c **** 		requested_channel = request_params[0];
 361:bluetooth_rxtx.c **** 		/* bluetooth band sweep mode, start at channel 2402 */
 362:bluetooth_rxtx.c **** 		if (requested_channel > MAX_FREQ) {
 363:bluetooth_rxtx.c **** 			hop_mode = HOP_SWEEP;
 364:bluetooth_rxtx.c **** 			requested_channel = 2402;
 365:bluetooth_rxtx.c **** 		}
 366:bluetooth_rxtx.c **** 		/* fixed channel mode, can be outside bluetooth band */
 367:bluetooth_rxtx.c **** 		else {
 368:bluetooth_rxtx.c **** 			hop_mode = HOP_NONE;
 369:bluetooth_rxtx.c **** 			requested_channel = MAX(requested_channel, MIN_FREQ);
 370:bluetooth_rxtx.c **** 			requested_channel = MIN(requested_channel, MAX_FREQ);
 371:bluetooth_rxtx.c **** 		}
 372:bluetooth_rxtx.c **** 
 373:bluetooth_rxtx.c **** 		le_adv_channel = requested_channel;
 374:bluetooth_rxtx.c **** 		if (mode != MODE_BT_FOLLOW_LE) {
ARM GAS  /tmp/ccwF1FQu.s 			page 8


 375:bluetooth_rxtx.c **** 			channel = requested_channel;
 376:bluetooth_rxtx.c **** 			requested_channel = 0;
 377:bluetooth_rxtx.c **** 
 378:bluetooth_rxtx.c **** 			/* CS threshold is mode-dependent. Update it after
 379:bluetooth_rxtx.c **** 			 * possible mode change. TODO - kludgy. */
 380:bluetooth_rxtx.c **** 			cs_threshold_calc_and_set(channel);
 381:bluetooth_rxtx.c **** 		}
 382:bluetooth_rxtx.c **** 		break;
 383:bluetooth_rxtx.c **** 
 384:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_ISP:
 385:bluetooth_rxtx.c **** 		set_isp();
 386:bluetooth_rxtx.c **** 		*data_len = 0; /* should never return */
 387:bluetooth_rxtx.c **** 		break;
 388:bluetooth_rxtx.c **** 
 389:bluetooth_rxtx.c **** 	case UBERTOOTH_FLASH:
 390:bluetooth_rxtx.c **** 		bootloader_ctrl = DFU_MODE;
 391:bluetooth_rxtx.c **** 		requested_mode = MODE_RESET;
 392:bluetooth_rxtx.c **** 		break;
 393:bluetooth_rxtx.c **** 
 394:bluetooth_rxtx.c **** 	case UBERTOOTH_SPECAN:
 395:bluetooth_rxtx.c **** 		if (request_params[0] < 2049 || request_params[0] > 3072 ||
 396:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 397:bluetooth_rxtx.c **** 				request_params[1] < request_params[0])
 398:bluetooth_rxtx.c **** 			return 0;
 399:bluetooth_rxtx.c **** 		low_freq = request_params[0];
 400:bluetooth_rxtx.c **** 		high_freq = request_params[1];
 401:bluetooth_rxtx.c **** 		requested_mode = MODE_SPECAN;
 402:bluetooth_rxtx.c **** 		*data_len = 0;
 403:bluetooth_rxtx.c **** 		break;
 404:bluetooth_rxtx.c **** 
 405:bluetooth_rxtx.c **** 	case UBERTOOTH_RX_GENERIC:
 406:bluetooth_rxtx.c **** 		requested_mode = MODE_RX_GENERIC;
 407:bluetooth_rxtx.c **** 		*data_len = 0;
 408:bluetooth_rxtx.c **** 		break;
 409:bluetooth_rxtx.c **** 
 410:bluetooth_rxtx.c **** 	case UBERTOOTH_LED_SPECAN:
 411:bluetooth_rxtx.c **** 		if (request_params[0] > 256)
 412:bluetooth_rxtx.c **** 			return 0;
 413:bluetooth_rxtx.c **** 		rssi_threshold = 54 - request_params[0];
 414:bluetooth_rxtx.c **** 		requested_mode = MODE_LED_SPECAN;
 415:bluetooth_rxtx.c **** 		*data_len = 0;
 416:bluetooth_rxtx.c **** 		break;
 417:bluetooth_rxtx.c **** 
 418:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_REV_NUM:
 419:bluetooth_rxtx.c **** 		data[0] = 0x00;
 420:bluetooth_rxtx.c **** 		data[1] = 0x00;
 421:bluetooth_rxtx.c **** 
 422:bluetooth_rxtx.c **** 		length = (u8)strlen(GIT_REVISION);
 423:bluetooth_rxtx.c **** 		data[2] = length;
 424:bluetooth_rxtx.c **** 
 425:bluetooth_rxtx.c **** 		memcpy(&data[3], GIT_REVISION, length);
 426:bluetooth_rxtx.c **** 
 427:bluetooth_rxtx.c **** 		*data_len = 2 + 1 + length;
 428:bluetooth_rxtx.c **** 		break;
 429:bluetooth_rxtx.c **** 
 430:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_COMPILE_INFO:
 431:bluetooth_rxtx.c **** 		length = (u8)strlen(compile_info);
ARM GAS  /tmp/ccwF1FQu.s 			page 9


 432:bluetooth_rxtx.c **** 		data[0] = length;
 433:bluetooth_rxtx.c **** 		memcpy(&data[1], compile_info, length);
 434:bluetooth_rxtx.c **** 		*data_len = 1 + length;
 435:bluetooth_rxtx.c **** 		break;
 436:bluetooth_rxtx.c **** 
 437:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_BOARD_ID:
 438:bluetooth_rxtx.c **** 		data[0] = BOARD_ID;
 439:bluetooth_rxtx.c **** 		*data_len = 1;
 440:bluetooth_rxtx.c **** 		break;
 441:bluetooth_rxtx.c **** 
 442:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_SQUELCH:
 443:bluetooth_rxtx.c **** 		cs_threshold_req = (int8_t)request_params[0];
 444:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set(channel);
 445:bluetooth_rxtx.c **** 		break;
 446:bluetooth_rxtx.c **** 
 447:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_SQUELCH:
 448:bluetooth_rxtx.c **** 		data[0] = cs_threshold_req;
 449:bluetooth_rxtx.c **** 		*data_len = 1;
 450:bluetooth_rxtx.c **** 		break;
 451:bluetooth_rxtx.c **** 
 452:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_BDADDR:
 453:bluetooth_rxtx.c **** 		target.address = 0;
 454:bluetooth_rxtx.c **** 		target.syncword = 0;
 455:bluetooth_rxtx.c **** 		for(int i=0; i < 8; i++) {
 456:bluetooth_rxtx.c **** 			target.address |= (uint64_t)data[i] << 8*i;
 457:bluetooth_rxtx.c **** 		}
 458:bluetooth_rxtx.c **** 		for(int i=0; i < 8; i++) {
 459:bluetooth_rxtx.c **** 			target.syncword |= (uint64_t)data[i+8] << 8*i;
 460:bluetooth_rxtx.c **** 		}
 461:bluetooth_rxtx.c **** 		precalc();
 462:bluetooth_rxtx.c **** 		break;
 463:bluetooth_rxtx.c **** 
 464:bluetooth_rxtx.c **** 	case UBERTOOTH_START_HOPPING:
 465:bluetooth_rxtx.c **** 		clkn_offset = 0;
 466:bluetooth_rxtx.c **** 		for(int i=0; i < 4; i++) {
 467:bluetooth_rxtx.c **** 			clkn_offset <<= 8;
 468:bluetooth_rxtx.c **** 			clkn_offset |= data[i];
 469:bluetooth_rxtx.c **** 		}
 470:bluetooth_rxtx.c **** 		hop_mode = HOP_BLUETOOTH;
 471:bluetooth_rxtx.c **** 		dma_discard = 1;
 472:bluetooth_rxtx.c **** 		DIO_SSEL_SET;
 473:bluetooth_rxtx.c **** 		clk100ns_offset = (data[4] << 8) | (data[5] << 0);
 474:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW;
 475:bluetooth_rxtx.c **** 		break;
 476:bluetooth_rxtx.c **** 
 477:bluetooth_rxtx.c **** 	case UBERTOOTH_AFH:
 478:bluetooth_rxtx.c **** 		hop_mode = HOP_AFH;
 479:bluetooth_rxtx.c **** 		requested_mode = MODE_AFH;
 480:bluetooth_rxtx.c **** 
 481:bluetooth_rxtx.c **** 		for(int i=0; i < 10; i++) {
 482:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 483:bluetooth_rxtx.c **** 		}
 484:bluetooth_rxtx.c **** 		used_channels = 0;
 485:bluetooth_rxtx.c **** 		afh_enabled = 1;
 486:bluetooth_rxtx.c **** 		break;
 487:bluetooth_rxtx.c **** 
 488:bluetooth_rxtx.c **** 	case UBERTOOTH_HOP:
ARM GAS  /tmp/ccwF1FQu.s 			page 10


 489:bluetooth_rxtx.c **** 		do_hop = 1;
 490:bluetooth_rxtx.c **** 		break;
 491:bluetooth_rxtx.c **** 
 492:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CLOCK:
 493:bluetooth_rxtx.c **** 		clock = data[0] | data[1] << 8 | data[2] << 16 | data[3] << 24;
 494:bluetooth_rxtx.c **** 		clkn = clock;
 495:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set(channel);
 496:bluetooth_rxtx.c **** 		break;
 497:bluetooth_rxtx.c **** 
 498:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_AFHMAP:
 499:bluetooth_rxtx.c **** 		for(int i=0; i < 10; i++) {
 500:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 501:bluetooth_rxtx.c **** 		}
 502:bluetooth_rxtx.c **** 		afh_enabled = 1;
 503:bluetooth_rxtx.c **** 		*data_len = 10;
 504:bluetooth_rxtx.c **** 		break;
 505:bluetooth_rxtx.c **** 
 506:bluetooth_rxtx.c **** 	case UBERTOOTH_CLEAR_AFHMAP:
 507:bluetooth_rxtx.c **** 		for(int i=0; i < 10; i++) {
 508:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 509:bluetooth_rxtx.c **** 		}
 510:bluetooth_rxtx.c **** 		afh_enabled = 0;
 511:bluetooth_rxtx.c **** 		*data_len = 10;
 512:bluetooth_rxtx.c **** 		break;
 513:bluetooth_rxtx.c **** 
 514:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CLOCK:
 515:bluetooth_rxtx.c **** 		clock = clkn;
 516:bluetooth_rxtx.c **** 		for(int i=0; i < 4; i++) {
 517:bluetooth_rxtx.c **** 			data[i] = (clock >> (8*i)) & 0xff;
 518:bluetooth_rxtx.c **** 		}
 519:bluetooth_rxtx.c **** 		*data_len = 4;
 520:bluetooth_rxtx.c **** 		break;
 521:bluetooth_rxtx.c **** 
 522:bluetooth_rxtx.c **** 	case UBERTOOTH_TRIM_CLOCK:
 523:bluetooth_rxtx.c **** 		clk100ns_offset = (data[0] << 8) | (data[1] << 0);
 524:bluetooth_rxtx.c **** 		break;
 525:bluetooth_rxtx.c **** 
 526:bluetooth_rxtx.c **** 	case UBERTOOTH_FIX_CLOCK_DRIFT:
 527:bluetooth_rxtx.c **** 		clk_drift_ppm += (int16_t)(data[0] << 8) | (data[1] << 0);
 528:bluetooth_rxtx.c **** 
 529:bluetooth_rxtx.c **** 		// Too slow
 530:bluetooth_rxtx.c **** 		if (clk_drift_ppm < 0) {
 531:bluetooth_rxtx.c **** 			clk_drift_correction = 320 / (uint16_t)(-clk_drift_ppm);
 532:bluetooth_rxtx.c **** 			clkn_next_drift_fix = clkn_last_drift_fix + clk_drift_correction;
 533:bluetooth_rxtx.c **** 		}
 534:bluetooth_rxtx.c **** 		// Too fast
 535:bluetooth_rxtx.c **** 		else if (clk_drift_ppm > 0) {
 536:bluetooth_rxtx.c **** 			clk_drift_correction = 320 / clk_drift_ppm;
 537:bluetooth_rxtx.c **** 			clkn_next_drift_fix = clkn_last_drift_fix + clk_drift_correction;
 538:bluetooth_rxtx.c **** 		}
 539:bluetooth_rxtx.c **** 		// Don't trim
 540:bluetooth_rxtx.c **** 		else {
 541:bluetooth_rxtx.c **** 			clk_drift_correction = 0;
 542:bluetooth_rxtx.c **** 			clkn_next_drift_fix = 0;
 543:bluetooth_rxtx.c **** 		}
 544:bluetooth_rxtx.c **** 
 545:bluetooth_rxtx.c **** 		break;
ARM GAS  /tmp/ccwF1FQu.s 			page 11


 546:bluetooth_rxtx.c **** 
 547:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SNIFFING:
 548:bluetooth_rxtx.c **** 		le.do_follow = request_params[0];
 549:bluetooth_rxtx.c **** 		*data_len = 0;
 550:bluetooth_rxtx.c **** 
 551:bluetooth_rxtx.c **** 		do_hop = 0;
 552:bluetooth_rxtx.c **** 		hop_mode = HOP_BTLE;
 553:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW_LE;
 554:bluetooth_rxtx.c **** 
 555:bluetooth_rxtx.c **** 		usb_queue_init();
 556:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set(channel);
 557:bluetooth_rxtx.c **** 		break;
 558:bluetooth_rxtx.c **** 
 559:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_ACCESS_ADDRESS:
 560:bluetooth_rxtx.c **** 		for(int i=0; i < 4; i++) {
 561:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 562:bluetooth_rxtx.c **** 		}
 563:bluetooth_rxtx.c **** 		*data_len = 4;
 564:bluetooth_rxtx.c **** 		break;
 565:bluetooth_rxtx.c **** 
 566:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_ACCESS_ADDRESS:
 567:bluetooth_rxtx.c **** 		le_set_access_address(data[0] | data[1] << 8 | data[2] << 16 | data[3] << 24);
 568:bluetooth_rxtx.c **** 		le.target_set = 1;
 569:bluetooth_rxtx.c **** 		break;
 570:bluetooth_rxtx.c **** 
 571:bluetooth_rxtx.c **** 	case UBERTOOTH_DO_SOMETHING:
 572:bluetooth_rxtx.c **** 		// do something! just don't commit anything here
 573:bluetooth_rxtx.c **** 		break;
 574:bluetooth_rxtx.c **** 
 575:bluetooth_rxtx.c **** 	case UBERTOOTH_DO_SOMETHING_REPLY:
 576:bluetooth_rxtx.c **** 		// after you do something, tell me what you did!
 577:bluetooth_rxtx.c **** 		// don't commit here please
 578:bluetooth_rxtx.c **** 		data[0] = 0x13;
 579:bluetooth_rxtx.c **** 		data[1] = 0x37;
 580:bluetooth_rxtx.c **** 		*data_len = 2;
 581:bluetooth_rxtx.c **** 		break;
 582:bluetooth_rxtx.c **** 
 583:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CRC_VERIFY:
 584:bluetooth_rxtx.c **** 		data[0] = le.crc_verify ? 1 : 0;
 585:bluetooth_rxtx.c **** 		*data_len = 1;
 586:bluetooth_rxtx.c **** 		break;
 587:bluetooth_rxtx.c **** 
 588:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CRC_VERIFY:
 589:bluetooth_rxtx.c **** 		le.crc_verify = request_params[0] ? 1 : 0;
 590:bluetooth_rxtx.c **** 		break;
 591:bluetooth_rxtx.c **** 
 592:bluetooth_rxtx.c **** 	case UBERTOOTH_POLL:
 593:bluetooth_rxtx.c **** 		p = dequeue();
 594:bluetooth_rxtx.c **** 		if (p != NULL) {
 595:bluetooth_rxtx.c **** 			memcpy(data, (void *)p, sizeof(usb_pkt_rx));
 596:bluetooth_rxtx.c **** 			*data_len = sizeof(usb_pkt_rx);
 597:bluetooth_rxtx.c **** 		} else {
 598:bluetooth_rxtx.c **** 			data[0] = 0;
 599:bluetooth_rxtx.c **** 			*data_len = 1;
 600:bluetooth_rxtx.c **** 		}
 601:bluetooth_rxtx.c **** 		break;
 602:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccwF1FQu.s 			page 12


 603:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_PROMISC:
 604:bluetooth_rxtx.c **** 		*data_len = 0;
 605:bluetooth_rxtx.c **** 
 606:bluetooth_rxtx.c **** 		hop_mode = HOP_NONE;
 607:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_PROMISC_LE;
 608:bluetooth_rxtx.c **** 
 609:bluetooth_rxtx.c **** 		usb_queue_init();
 610:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set(channel);
 611:bluetooth_rxtx.c **** 		break;
 612:bluetooth_rxtx.c **** 
 613:bluetooth_rxtx.c **** 	case UBERTOOTH_READ_REGISTER:
 614:bluetooth_rxtx.c **** 		reg_val = cc2400_get(request_params[0]);
 615:bluetooth_rxtx.c **** 		data[0] = (reg_val >> 8) & 0xff;
 616:bluetooth_rxtx.c **** 		data[1] = reg_val & 0xff;
 617:bluetooth_rxtx.c **** 		*data_len = 2;
 618:bluetooth_rxtx.c **** 		break;
 619:bluetooth_rxtx.c **** 
 620:bluetooth_rxtx.c **** 	case UBERTOOTH_WRITE_REGISTER:
 621:bluetooth_rxtx.c **** 		cc2400_set(request_params[0] & 0xff, request_params[1]);
 622:bluetooth_rxtx.c **** 		break;
 623:bluetooth_rxtx.c **** 
 624:bluetooth_rxtx.c **** 	case UBERTOOTH_WRITE_REGISTERS:
 625:bluetooth_rxtx.c **** 		for(i=0; i<request_params[0]; i++) {
 626:bluetooth_rxtx.c **** 			reg_val = (data[(i*3)+1] << 8) | data[(i*3)+2];
 627:bluetooth_rxtx.c **** 			cc2400_set(data[i*3], reg_val);
 628:bluetooth_rxtx.c **** 		}
 629:bluetooth_rxtx.c **** 		break;
 630:bluetooth_rxtx.c **** 
 631:bluetooth_rxtx.c **** 	case UBERTOOTH_READ_ALL_REGISTERS:
 632:bluetooth_rxtx.c **** 		#define MAX_READ_REG 0x2d
 633:bluetooth_rxtx.c **** 		for(i=0; i<=MAX_READ_REG; i++) {
 634:bluetooth_rxtx.c **** 			reg_val = cc2400_get(i);
 635:bluetooth_rxtx.c **** 			data[i*3] = i;
 636:bluetooth_rxtx.c **** 			data[(i*3)+1] = (reg_val >> 8) & 0xff;
 637:bluetooth_rxtx.c **** 			data[(i*3)+2] = reg_val & 0xff;
 638:bluetooth_rxtx.c **** 		}
 639:bluetooth_rxtx.c **** 		*data_len = MAX_READ_REG*3;
 640:bluetooth_rxtx.c **** 		break;
 641:bluetooth_rxtx.c **** 
 642:bluetooth_rxtx.c **** #ifdef TX_ENABLE
 643:bluetooth_rxtx.c **** 	case UBERTOOTH_TX_GENERIC_PACKET:
 644:bluetooth_rxtx.c **** 		i = 7 + data[6];
 645:bluetooth_rxtx.c **** 		memcpy(&tx_pkt, data, i);
 646:bluetooth_rxtx.c **** 		//tx_pkt.channel = data[4] << 8 | data[5];
 647:bluetooth_rxtx.c **** 		requested_mode = MODE_TX_GENERIC;
 648:bluetooth_rxtx.c **** 		*data_len = 0;
 649:bluetooth_rxtx.c **** 		break;
 650:bluetooth_rxtx.c **** 
 651:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SLAVE:
 652:bluetooth_rxtx.c **** 		memcpy(slave_mac_address, data, 6);
 653:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_SLAVE_LE;
 654:bluetooth_rxtx.c **** 		break;
 655:bluetooth_rxtx.c **** #endif
 656:bluetooth_rxtx.c **** 
 657:bluetooth_rxtx.c **** 	case UBERTOOTH_LE_SET_ADV_DATA:
 658:bluetooth_rxtx.c **** 		// make sure the data fits in our buffer
 659:bluetooth_rxtx.c **** 		if (data_in_len > LE_ADV_MAX_LEN)
ARM GAS  /tmp/ccwF1FQu.s 			page 13


 660:bluetooth_rxtx.c **** 			return 0;
 661:bluetooth_rxtx.c **** 		le_adv_len = data_in_len;
 662:bluetooth_rxtx.c **** 		memcpy(le_adv_data, data, le_adv_len);
 663:bluetooth_rxtx.c **** 		break;
 664:bluetooth_rxtx.c **** 
 665:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SET_TARGET:
 666:bluetooth_rxtx.c **** 		// Addresses appear in packets in reverse-octet order.
 667:bluetooth_rxtx.c **** 		// Store the target address in reverse order so that we can do a simple memcmp later
 668:bluetooth_rxtx.c **** 		if (data[6] > 48) {
 669:bluetooth_rxtx.c **** 			return 0; // invalid mask
 670:bluetooth_rxtx.c **** 		}
 671:bluetooth_rxtx.c **** 		else if (data[6] == 0) {
 672:bluetooth_rxtx.c **** 			le.target_set = 0;
 673:bluetooth_rxtx.c **** 			memset(le.target, 0, 6);
 674:bluetooth_rxtx.c **** 			memset(le.target_mask, 0, 6);
 675:bluetooth_rxtx.c **** 		} else {
 676:bluetooth_rxtx.c **** 			unsigned last;
 677:bluetooth_rxtx.c **** 
 678:bluetooth_rxtx.c **** 			for (i = 0; i < 6; ++i)
 679:bluetooth_rxtx.c **** 				le.target[i] = data[5-i];
 680:bluetooth_rxtx.c **** 
 681:bluetooth_rxtx.c **** 			// compute mask
 682:bluetooth_rxtx.c **** 			memset(le.target_mask, 0, 6);
 683:bluetooth_rxtx.c **** 			for (i = 5; data[6] > 8; --i, data[6] -= 8) {
 684:bluetooth_rxtx.c **** 				le.target_mask[i] = 0xff;
 685:bluetooth_rxtx.c **** 			}
 686:bluetooth_rxtx.c **** 			last = i;
 687:bluetooth_rxtx.c **** 
 688:bluetooth_rxtx.c **** 			if (data[6] > 0) {
 689:bluetooth_rxtx.c **** 				uint8_t final_byte = 0;
 690:bluetooth_rxtx.c **** 				for (i = 0; i < data[6]; ++i) {
 691:bluetooth_rxtx.c **** 					final_byte >>= 1;
 692:bluetooth_rxtx.c **** 					final_byte |= 0b10000000;
 693:bluetooth_rxtx.c **** 				}
 694:bluetooth_rxtx.c **** 				le.target_mask[last] = final_byte;
 695:bluetooth_rxtx.c **** 			}
 696:bluetooth_rxtx.c **** 
 697:bluetooth_rxtx.c **** 			// in case the user specifies a bad mask
 698:bluetooth_rxtx.c **** 			for (i = 0; i < 5; ++i)
 699:bluetooth_rxtx.c **** 				le.target[i] &= le.target_mask[i];
 700:bluetooth_rxtx.c **** 
 701:bluetooth_rxtx.c **** 			le.target_set = 1;
 702:bluetooth_rxtx.c **** 		}
 703:bluetooth_rxtx.c **** 		break;
 704:bluetooth_rxtx.c **** 
 705:bluetooth_rxtx.c **** 	case UBERTOOTH_CANCEL_FOLLOW:
 706:bluetooth_rxtx.c **** 		// cancel following an active connection
 707:bluetooth_rxtx.c **** 		cancel_follow = 1;
 708:bluetooth_rxtx.c **** 		break;
 709:bluetooth_rxtx.c **** 
 710:bluetooth_rxtx.c **** #ifdef TX_ENABLE
 711:bluetooth_rxtx.c **** 	case UBERTOOTH_JAM_MODE:
 712:bluetooth_rxtx.c **** 		jam_mode = request_params[0];
 713:bluetooth_rxtx.c **** 		break;
 714:bluetooth_rxtx.c **** #endif
 715:bluetooth_rxtx.c **** 
 716:bluetooth_rxtx.c **** 	case UBERTOOTH_EGO:
ARM GAS  /tmp/ccwF1FQu.s 			page 14


 717:bluetooth_rxtx.c **** 		ego_mode = request_params[0];
 718:bluetooth_rxtx.c **** #ifndef TX_ENABLE
 719:bluetooth_rxtx.c **** 		if (ego_mode == EGO_JAM)
 720:bluetooth_rxtx.c **** 			return 0;
 721:bluetooth_rxtx.c **** #endif
 722:bluetooth_rxtx.c **** 		requested_mode = MODE_EGO;
 723:bluetooth_rxtx.c **** 		break;
 724:bluetooth_rxtx.c **** 
 725:bluetooth_rxtx.c **** 	case UBERTOOTH_RFCAT_SUBCMD:
 726:bluetooth_rxtx.c **** 		return rfcat_subcommand(request_params[0], data, *data_len);
 727:bluetooth_rxtx.c **** 		break;
 728:bluetooth_rxtx.c **** 
 729:bluetooth_rxtx.c **** 	case UBERTOOTH_XMAS:
 730:bluetooth_rxtx.c **** 		requested_mode = MODE_XMAS;
 731:bluetooth_rxtx.c **** 		break;
 732:bluetooth_rxtx.c **** 
 733:bluetooth_rxtx.c **** 	default:
 734:bluetooth_rxtx.c **** 		return 0;
 735:bluetooth_rxtx.c **** 	}
 736:bluetooth_rxtx.c **** 	return 1;
 737:bluetooth_rxtx.c **** }
 738:bluetooth_rxtx.c **** 
 739:bluetooth_rxtx.c **** /* Update CLKN. */
 740:bluetooth_rxtx.c **** void TIMER0_IRQHandler()
 741:bluetooth_rxtx.c **** {
 742:bluetooth_rxtx.c **** 	if (T0IR & TIR_MR0_Interrupt) {
 743:bluetooth_rxtx.c **** 
 744:bluetooth_rxtx.c **** 		clkn += clkn_offset + 1;
 745:bluetooth_rxtx.c **** 		clkn_offset = 0;
 746:bluetooth_rxtx.c **** 
 747:bluetooth_rxtx.c **** 		uint32_t le_clk = (clkn - le.conn_epoch) & 0x03;
 748:bluetooth_rxtx.c **** 
 749:bluetooth_rxtx.c **** 		/* Trigger hop based on mode */
 750:bluetooth_rxtx.c **** 
 751:bluetooth_rxtx.c **** 		/* NONE or SWEEP -> 25 Hz */
 752:bluetooth_rxtx.c **** 		if (hop_mode == HOP_NONE || hop_mode == HOP_SWEEP) {
 753:bluetooth_rxtx.c **** 			if ((clkn & 0x7f) == 0)
 754:bluetooth_rxtx.c **** 				do_hop = 1;
 755:bluetooth_rxtx.c **** 		}
 756:bluetooth_rxtx.c **** 		/* BLUETOOTH -> 1600 Hz */
 757:bluetooth_rxtx.c **** 		else if (hop_mode == HOP_BLUETOOTH) {
 758:bluetooth_rxtx.c **** 			if ((clkn & 0x1) == 0)
 759:bluetooth_rxtx.c **** 				do_hop = 1;
 760:bluetooth_rxtx.c **** 		}
 761:bluetooth_rxtx.c **** 		/* BLUETOOTH Low Energy -> 7.5ms - 4.0s in multiples of 1.25 ms */
 762:bluetooth_rxtx.c **** 		else if (hop_mode == HOP_BTLE) {
 763:bluetooth_rxtx.c **** 			// Only hop if connected
 764:bluetooth_rxtx.c **** 			if (le.link_state == LINK_CONNECTED && le_clk == 0) {
 765:bluetooth_rxtx.c **** 				--le.interval_timer;
 766:bluetooth_rxtx.c **** 				if (le.interval_timer == 0) {
 767:bluetooth_rxtx.c **** 					do_hop = 1;
 768:bluetooth_rxtx.c **** 					++le.conn_count;
 769:bluetooth_rxtx.c **** 					le.interval_timer = le.conn_interval;
 770:bluetooth_rxtx.c **** 				} else {
 771:bluetooth_rxtx.c **** 					TXLED_CLR; // hack!
 772:bluetooth_rxtx.c **** 				}
 773:bluetooth_rxtx.c **** 			}
ARM GAS  /tmp/ccwF1FQu.s 			page 15


 774:bluetooth_rxtx.c **** 		}
 775:bluetooth_rxtx.c **** 		else if (hop_mode == HOP_AFH) {
 776:bluetooth_rxtx.c **** 			if( (last_hop + hop_timeout) == clkn ) {
 777:bluetooth_rxtx.c **** 				do_hop = 1;
 778:bluetooth_rxtx.c **** 			}
 779:bluetooth_rxtx.c **** 		}
 780:bluetooth_rxtx.c **** 
 781:bluetooth_rxtx.c **** 		// Fix linear clock drift deviation
 782:bluetooth_rxtx.c **** 		if(clkn_next_drift_fix != 0 && clk100ns_offset == 0) {
 783:bluetooth_rxtx.c **** 			if(clkn >= clkn_next_drift_fix) {
 784:bluetooth_rxtx.c **** 
 785:bluetooth_rxtx.c **** 				// Too fast
 786:bluetooth_rxtx.c **** 				if(clk_drift_ppm >= 0) {
 787:bluetooth_rxtx.c **** 					clk100ns_offset = 1;
 788:bluetooth_rxtx.c **** 				}
 789:bluetooth_rxtx.c **** 
 790:bluetooth_rxtx.c **** 				// Too slow
 791:bluetooth_rxtx.c **** 				else {
 792:bluetooth_rxtx.c **** 					clk100ns_offset = 6249;
 793:bluetooth_rxtx.c **** 				}
 794:bluetooth_rxtx.c **** 				clkn_last_drift_fix = clkn;
 795:bluetooth_rxtx.c **** 				clkn_next_drift_fix = clkn_last_drift_fix + clk_drift_correction;
 796:bluetooth_rxtx.c **** 			}
 797:bluetooth_rxtx.c **** 		}
 798:bluetooth_rxtx.c **** 
 799:bluetooth_rxtx.c **** 		// Negative clock correction
 800:bluetooth_rxtx.c **** 		if(clk100ns_offset > 3124)
 801:bluetooth_rxtx.c **** 			clkn += 2;
 802:bluetooth_rxtx.c **** 
 803:bluetooth_rxtx.c **** 		T0MR0 = 3124 + clk100ns_offset;
 804:bluetooth_rxtx.c **** 		clk100ns_offset = 0;
 805:bluetooth_rxtx.c **** 
 806:bluetooth_rxtx.c **** 		/* Ack interrupt */
 807:bluetooth_rxtx.c **** 		T0IR = TIR_MR0_Interrupt;
 808:bluetooth_rxtx.c **** 	}
 809:bluetooth_rxtx.c **** }
 810:bluetooth_rxtx.c **** 
 811:bluetooth_rxtx.c **** /* EINT3 handler is also defined in ubertooth.c for TC13BADGE. */
 812:bluetooth_rxtx.c **** #ifndef TC13BADGE
 813:bluetooth_rxtx.c **** void EINT3_IRQHandler()
 814:bluetooth_rxtx.c **** {
 815:bluetooth_rxtx.c **** 	/* TODO - check specific source of shared interrupt */
 816:bluetooth_rxtx.c **** 	IO2IntClr   = PIN_GIO6; // clear interrupt
 817:bluetooth_rxtx.c **** 	DIO_SSEL_CLR;           // enable SPI
 818:bluetooth_rxtx.c **** 	cs_trigger  = 1;        // signal trigger
 819:bluetooth_rxtx.c **** 	if (hop_mode == HOP_BLUETOOTH)
 820:bluetooth_rxtx.c **** 		dma_discard = 0;
 821:bluetooth_rxtx.c **** 
 822:bluetooth_rxtx.c **** }
 823:bluetooth_rxtx.c **** #endif // TC13BADGE
 824:bluetooth_rxtx.c **** 
 825:bluetooth_rxtx.c **** /*
 826:bluetooth_rxtx.c ****  * Sleep (busy wait) for 'millis' milliseconds
 827:bluetooth_rxtx.c ****  * Needs clkn. Be sure to call clkn_init() before using it.
 828:bluetooth_rxtx.c ****  */
 829:bluetooth_rxtx.c **** static void msleep(uint32_t millis)
 830:bluetooth_rxtx.c **** {
ARM GAS  /tmp/ccwF1FQu.s 			page 16


 831:bluetooth_rxtx.c **** 	uint32_t now = (clkn & 0xffffff);
 832:bluetooth_rxtx.c **** 	uint32_t stop_at = now + millis * 10000 / 3125; // millis -> clkn ticks
 833:bluetooth_rxtx.c **** 
 834:bluetooth_rxtx.c **** 	// handle clkn overflow
 835:bluetooth_rxtx.c **** 	if (stop_at >= ((uint32_t)1<<28)) {
 836:bluetooth_rxtx.c **** 		stop_at -= ((uint32_t)1<<28);
 837:bluetooth_rxtx.c **** 		while ((clkn & 0xffffff) >= now || (clkn & 0xffffff) < stop_at);
 838:bluetooth_rxtx.c **** 	} else {
 839:bluetooth_rxtx.c **** 		while ((clkn & 0xffffff) < stop_at);
 840:bluetooth_rxtx.c **** 	}
 841:bluetooth_rxtx.c **** }
 842:bluetooth_rxtx.c **** 
 843:bluetooth_rxtx.c **** void legacy_DMA_IRQHandler();
 844:bluetooth_rxtx.c **** void le_DMA_IRQHandler();
 845:bluetooth_rxtx.c **** void DMA_IRQHandler(void) {
 846:bluetooth_rxtx.c **** 	if (mode == MODE_BT_FOLLOW_LE)
 847:bluetooth_rxtx.c **** 		le_DMA_IRQHandler();
 848:bluetooth_rxtx.c **** 	else
 849:bluetooth_rxtx.c **** 		legacy_DMA_IRQHandler();
 850:bluetooth_rxtx.c **** 
 851:bluetooth_rxtx.c **** 	// DMA channel 7: debug UART
 852:bluetooth_rxtx.c **** 	if (DMACIntStat & (1 << 7)) {
 853:bluetooth_rxtx.c **** 		// TC -- DMA completed, unset flag so another printf can occur
 854:bluetooth_rxtx.c **** 		if (DMACIntTCStat & (1 << 7)) {
 855:bluetooth_rxtx.c **** 			DMACIntTCClear = (1 << 7);
 856:bluetooth_rxtx.c **** 			debug_dma_active = 0;
 857:bluetooth_rxtx.c **** 		}
 858:bluetooth_rxtx.c **** 		// error -- blow up
 859:bluetooth_rxtx.c **** 		if (DMACIntErrStat & (1 << 7)) {
 860:bluetooth_rxtx.c **** 			DMACIntErrClr = (1 << 7);
 861:bluetooth_rxtx.c **** 			// FIXME do something better here
 862:bluetooth_rxtx.c **** 			USRLED_SET;
 863:bluetooth_rxtx.c **** 			while (1) { }
 864:bluetooth_rxtx.c **** 		}
 865:bluetooth_rxtx.c **** 	}
 866:bluetooth_rxtx.c **** }
 867:bluetooth_rxtx.c **** 
 868:bluetooth_rxtx.c **** void legacy_DMA_IRQHandler()
 869:bluetooth_rxtx.c **** {
 870:bluetooth_rxtx.c **** 	if ( mode == MODE_RX_SYMBOLS
 871:bluetooth_rxtx.c **** 	   || mode == MODE_BT_FOLLOW
 872:bluetooth_rxtx.c **** 	   || mode == MODE_SPECAN
 873:bluetooth_rxtx.c **** 	   || mode == MODE_BT_FOLLOW_LE
 874:bluetooth_rxtx.c **** 	   || mode == MODE_BT_PROMISC_LE
 875:bluetooth_rxtx.c **** 	   || mode == MODE_BT_SLAVE_LE
 876:bluetooth_rxtx.c **** 	   || mode == MODE_RX_GENERIC)
 877:bluetooth_rxtx.c **** 	{
 878:bluetooth_rxtx.c **** 		/* interrupt on channel 0 */
 879:bluetooth_rxtx.c **** 		if (DMACIntStat & (1 << 0)) {
 880:bluetooth_rxtx.c **** 			if (DMACIntTCStat & (1 << 0)) {
 881:bluetooth_rxtx.c **** 				DMACIntTCClear = (1 << 0);
 882:bluetooth_rxtx.c **** 
 883:bluetooth_rxtx.c **** 				if (hop_mode == HOP_BLUETOOTH)
 884:bluetooth_rxtx.c **** 					DIO_SSEL_SET;
 885:bluetooth_rxtx.c **** 
 886:bluetooth_rxtx.c **** 				idle_buf_clk100ns  = CLK100NS;
 887:bluetooth_rxtx.c **** 				idle_buf_clkn_high = (clkn >> 20) & 0xff;
ARM GAS  /tmp/ccwF1FQu.s 			page 17


 888:bluetooth_rxtx.c **** 				idle_buf_channel   = channel;
 889:bluetooth_rxtx.c **** 
 890:bluetooth_rxtx.c **** 				/* Keep buffer swapping in sync with DMA. */
 891:bluetooth_rxtx.c **** 				volatile uint8_t* tmp = active_rxbuf;
 892:bluetooth_rxtx.c **** 				active_rxbuf = idle_rxbuf;
 893:bluetooth_rxtx.c **** 				idle_rxbuf = tmp;
 894:bluetooth_rxtx.c **** 
 895:bluetooth_rxtx.c **** 				++rx_tc;
 896:bluetooth_rxtx.c **** 			}
 897:bluetooth_rxtx.c **** 			if (DMACIntErrStat & (1 << 0)) {
 898:bluetooth_rxtx.c **** 				DMACIntErrClr = (1 << 0);
 899:bluetooth_rxtx.c **** 				++rx_err;
 900:bluetooth_rxtx.c **** 			}
 901:bluetooth_rxtx.c **** 		}
 902:bluetooth_rxtx.c **** 	}
 903:bluetooth_rxtx.c **** }
 904:bluetooth_rxtx.c **** 
 905:bluetooth_rxtx.c **** static void cc2400_idle()
 906:bluetooth_rxtx.c **** {
 907:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 908:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 909:bluetooth_rxtx.c **** 
 910:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
 911:bluetooth_rxtx.c **** 	PAEN_CLR;
 912:bluetooth_rxtx.c **** 	HGM_CLR;
 913:bluetooth_rxtx.c **** #endif
 914:bluetooth_rxtx.c **** 
 915:bluetooth_rxtx.c **** 	RXLED_CLR;
 916:bluetooth_rxtx.c **** 	TXLED_CLR;
 917:bluetooth_rxtx.c **** 	USRLED_CLR;
 918:bluetooth_rxtx.c **** 
 919:bluetooth_rxtx.c **** 	clkn_stop();
 920:bluetooth_rxtx.c **** 	dio_ssp_stop();
 921:bluetooth_rxtx.c **** 	cs_reset();
 922:bluetooth_rxtx.c **** 	rssi_reset();
 923:bluetooth_rxtx.c **** 
 924:bluetooth_rxtx.c **** 	/* hopping stuff */
 925:bluetooth_rxtx.c **** 	hop_mode = HOP_NONE;
 926:bluetooth_rxtx.c **** 	do_hop = 0;
 927:bluetooth_rxtx.c **** 	channel = 2441;
 928:bluetooth_rxtx.c **** 	hop_direct_channel = 0;
 929:bluetooth_rxtx.c **** 	hop_timeout = 158;
 930:bluetooth_rxtx.c **** 	requested_channel = 0;
 931:bluetooth_rxtx.c **** 	le_adv_channel = 2402;
 932:bluetooth_rxtx.c **** 
 933:bluetooth_rxtx.c **** 
 934:bluetooth_rxtx.c **** 	/* bulk USB stuff */
 935:bluetooth_rxtx.c **** 	idle_buf_clkn_high = 0;
 936:bluetooth_rxtx.c **** 	idle_buf_clk100ns = 0;
 937:bluetooth_rxtx.c **** 	idle_buf_channel = 0;
 938:bluetooth_rxtx.c **** 	dma_discard = 0;
 939:bluetooth_rxtx.c **** 	status = 0;
 940:bluetooth_rxtx.c **** 
 941:bluetooth_rxtx.c **** 	/* operation mode */
 942:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 943:bluetooth_rxtx.c **** 	requested_mode = MODE_IDLE;
 944:bluetooth_rxtx.c **** 	jam_mode = JAM_NONE;
ARM GAS  /tmp/ccwF1FQu.s 			page 18


 945:bluetooth_rxtx.c **** 	ego_mode = EGO_FOLLOW;
 946:bluetooth_rxtx.c **** 
 947:bluetooth_rxtx.c **** 	modulation = MOD_BT_BASIC_RATE;
 948:bluetooth_rxtx.c **** 
 949:bluetooth_rxtx.c **** 	/* specan stuff */
 950:bluetooth_rxtx.c **** 	low_freq = 2400;
 951:bluetooth_rxtx.c **** 	high_freq = 2483;
 952:bluetooth_rxtx.c **** 	rssi_threshold = -30;
 953:bluetooth_rxtx.c **** 
 954:bluetooth_rxtx.c **** 	target.address = 0;
 955:bluetooth_rxtx.c **** 	target.syncword = 0;
 956:bluetooth_rxtx.c **** }
 957:bluetooth_rxtx.c **** 
 958:bluetooth_rxtx.c **** /* start un-buffered rx */
 959:bluetooth_rxtx.c **** static void cc2400_rx()
 960:bluetooth_rxtx.c **** {
 961:bluetooth_rxtx.c **** 	u16 mdmctrl = 0;
 962:bluetooth_rxtx.c **** 
 963:bluetooth_rxtx.c **** 	if((modulation == MOD_BT_BASIC_RATE) || (modulation == MOD_BT_LOW_ENERGY)) {
 964:bluetooth_rxtx.c **** 		if (modulation == MOD_BT_BASIC_RATE) {
 965:bluetooth_rxtx.c **** 			mdmctrl = 0x0029; // 160 kHz frequency deviation
 966:bluetooth_rxtx.c **** 		} else if (modulation == MOD_BT_LOW_ENERGY) {
 967:bluetooth_rxtx.c **** 			mdmctrl = 0x0040; // 250 kHz frequency deviation
 968:bluetooth_rxtx.c **** 		}
 969:bluetooth_rxtx.c **** 		cc2400_set(MANAND,  0x7fff);
 970:bluetooth_rxtx.c **** 		cc2400_set(LMTST,   0x2b22);
 971:bluetooth_rxtx.c **** 		cc2400_set(MDMTST0, 0x134b); // without PRNG
 972:bluetooth_rxtx.c **** 		cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 973:bluetooth_rxtx.c **** 		// 0 00 00 0 010 00 0 00 0 1
 974:bluetooth_rxtx.c **** 		//      |  | |   |  +--------> CRC off
 975:bluetooth_rxtx.c **** 		//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
 976:bluetooth_rxtx.c **** 		//      |  | +---------------> 2 preamble bytes of 01010101
 977:bluetooth_rxtx.c **** 		//      |  +-----------------> not packet mode
 978:bluetooth_rxtx.c **** 			//      +--------------------> un-buffered mode
 979:bluetooth_rxtx.c **** 		cc2400_set(FSDIV,   channel - 1); // 1 MHz IF
 980:bluetooth_rxtx.c **** 		cc2400_set(MDMCTRL, mdmctrl);
 981:bluetooth_rxtx.c **** 	}
 982:bluetooth_rxtx.c **** 
 983:bluetooth_rxtx.c **** 	// Set up CS register
 984:bluetooth_rxtx.c **** 	cs_threshold_calc_and_set(channel);
 985:bluetooth_rxtx.c **** 
 986:bluetooth_rxtx.c **** 	clkn_start();
 987:bluetooth_rxtx.c **** 
 988:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 989:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 990:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 991:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 992:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
 993:bluetooth_rxtx.c **** 	PAEN_SET;
 994:bluetooth_rxtx.c **** 	HGM_SET;
 995:bluetooth_rxtx.c **** #endif
 996:bluetooth_rxtx.c **** }
 997:bluetooth_rxtx.c **** 
 998:bluetooth_rxtx.c **** /* start un-buffered rx */
 999:bluetooth_rxtx.c **** static void cc2400_rx_sync(u32 sync)
1000:bluetooth_rxtx.c **** {
1001:bluetooth_rxtx.c **** 	u16 grmdm, mdmctrl;
ARM GAS  /tmp/ccwF1FQu.s 			page 19


1002:bluetooth_rxtx.c **** 
1003:bluetooth_rxtx.c **** 	if (modulation == MOD_BT_BASIC_RATE) {
1004:bluetooth_rxtx.c **** 		mdmctrl = 0x0029; // 160 kHz frequency deviation
1005:bluetooth_rxtx.c **** 		grmdm = 0x0461; // un-buffered mode, packet w/ sync word detection
1006:bluetooth_rxtx.c **** 		// 0 00 00 1 000 11 0 00 0 1
1007:bluetooth_rxtx.c **** 		//   |  |  | |   |  +--------> CRC off
1008:bluetooth_rxtx.c **** 		//   |  |  | |   +-----------> sync word: 32 MSB bits of SYNC_WORD
1009:bluetooth_rxtx.c **** 		//   |  |  | +---------------> 0 preamble bytes of 01010101
1010:bluetooth_rxtx.c **** 		//   |  |  +-----------------> packet mode
1011:bluetooth_rxtx.c **** 		//   |  +--------------------> un-buffered mode
1012:bluetooth_rxtx.c **** 		//   +-----------------------> sync error bits: 0
1013:bluetooth_rxtx.c **** 
1014:bluetooth_rxtx.c **** 	} else if (modulation == MOD_BT_LOW_ENERGY) {
1015:bluetooth_rxtx.c **** 		mdmctrl = 0x0040; // 250 kHz frequency deviation
1016:bluetooth_rxtx.c **** 		grmdm = 0x0561; // un-buffered mode, packet w/ sync word detection
1017:bluetooth_rxtx.c **** 		// 0 00 00 1 010 11 0 00 0 1
1018:bluetooth_rxtx.c **** 		//   |  |  | |   |  +--------> CRC off
1019:bluetooth_rxtx.c **** 		//   |  |  | |   +-----------> sync word: 32 MSB bits of SYNC_WORD
1020:bluetooth_rxtx.c **** 		//   |  |  | +---------------> 2 preamble bytes of 01010101
1021:bluetooth_rxtx.c **** 		//   |  |  +-----------------> packet mode
1022:bluetooth_rxtx.c **** 		//   |  +--------------------> un-buffered mode
1023:bluetooth_rxtx.c **** 		//   +-----------------------> sync error bits: 0
1024:bluetooth_rxtx.c **** 
1025:bluetooth_rxtx.c **** 	} else {
1026:bluetooth_rxtx.c **** 		/* oops */
1027:bluetooth_rxtx.c **** 		return;
1028:bluetooth_rxtx.c **** 	}
1029:bluetooth_rxtx.c **** 
1030:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
1031:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
1032:bluetooth_rxtx.c **** 
1033:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x124b);
1034:bluetooth_rxtx.c **** 	// 1      2      4b
1035:bluetooth_rxtx.c **** 	// 00 0 1 0 0 10 01001011
1036:bluetooth_rxtx.c **** 	//    | | | | |  +---------> AFC_DELTA = ??
1037:bluetooth_rxtx.c **** 	//    | | | | +------------> AFC settling = 4 pairs (8 bit preamble)
1038:bluetooth_rxtx.c **** 	//    | | | +--------------> no AFC adjust on packet
1039:bluetooth_rxtx.c **** 	//    | | +----------------> do not invert data
1040:bluetooth_rxtx.c **** 	//    | +------------------> TX IF freq 1 0Hz
1041:bluetooth_rxtx.c **** 	//    +--------------------> PRNG off
1042:bluetooth_rxtx.c **** 	//
1043:bluetooth_rxtx.c **** 	// ref: CC2400 datasheet page 67
1044:bluetooth_rxtx.c **** 	// AFC settling explained page 41/42
1045:bluetooth_rxtx.c **** 
1046:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   grmdm);
1047:bluetooth_rxtx.c **** 
1048:bluetooth_rxtx.c **** 	cc2400_set(SYNCL,   sync & 0xffff);
1049:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (sync >> 16) & 0xffff);
1050:bluetooth_rxtx.c **** 
1051:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel - 1); // 1 MHz IF
1052:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, mdmctrl);
1053:bluetooth_rxtx.c **** 
1054:bluetooth_rxtx.c **** 	// Set up CS register
1055:bluetooth_rxtx.c **** 	cs_threshold_calc_and_set(channel);
1056:bluetooth_rxtx.c **** 
1057:bluetooth_rxtx.c **** 	clkn_start();
1058:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccwF1FQu.s 			page 20


1059:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
1060:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
1061:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
1062:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
1063:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1064:bluetooth_rxtx.c **** 	PAEN_SET;
1065:bluetooth_rxtx.c **** 	HGM_SET;
1066:bluetooth_rxtx.c **** #endif
1067:bluetooth_rxtx.c **** }
1068:bluetooth_rxtx.c **** 
1069:bluetooth_rxtx.c **** /* start buffered tx */
1070:bluetooth_rxtx.c **** #ifdef TX_ENABLE
1071:bluetooth_rxtx.c **** static void cc2400_tx_sync(uint32_t sync)
1072:bluetooth_rxtx.c **** {
1073:bluetooth_rxtx.c **** 	// Bluetooth-like modulation
1074:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
1075:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
1076:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b);    // no PRNG
1077:bluetooth_rxtx.c **** 
1078:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0c01);
1079:bluetooth_rxtx.c **** 	// 0 00 01 1 000 00 0 00 0 1
1080:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1081:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1082:bluetooth_rxtx.c **** 	//      |  | +---------------> 0 preamble bytes of 01010101
1083:bluetooth_rxtx.c **** 	//      |  +-----------------> packet mode
1084:bluetooth_rxtx.c **** 	//      +--------------------> buffered mode
1085:bluetooth_rxtx.c **** 
1086:bluetooth_rxtx.c **** 	cc2400_set(SYNCL,   sync & 0xffff);
1087:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (sync >> 16) & 0xffff);
1088:bluetooth_rxtx.c **** 
1089:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel);
1090:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
1091:bluetooth_rxtx.c **** 
1092:bluetooth_rxtx.c **** 	if (modulation == MOD_BT_BASIC_RATE) {
1093:bluetooth_rxtx.c **** 		cc2400_set(MDMCTRL, 0x0029);    // 160 kHz frequency deviation
1094:bluetooth_rxtx.c **** 	} else if (modulation == MOD_BT_LOW_ENERGY) {
1095:bluetooth_rxtx.c **** 		cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
1096:bluetooth_rxtx.c **** 	} else {
1097:bluetooth_rxtx.c **** 		/* oops */
1098:bluetooth_rxtx.c **** 		return;
1099:bluetooth_rxtx.c **** 	}
1100:bluetooth_rxtx.c **** 
1101:bluetooth_rxtx.c **** 	clkn_start();
1102:bluetooth_rxtx.c **** 
1103:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
1104:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
1105:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
1106:bluetooth_rxtx.c **** 
1107:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1108:bluetooth_rxtx.c **** 	PAEN_SET;
1109:bluetooth_rxtx.c **** #endif
1110:bluetooth_rxtx.c **** 
1111:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
1112:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
1113:bluetooth_rxtx.c **** 
1114:bluetooth_rxtx.c **** }
1115:bluetooth_rxtx.c **** #endif
ARM GAS  /tmp/ccwF1FQu.s 			page 21


1116:bluetooth_rxtx.c **** 
1117:bluetooth_rxtx.c **** /*
1118:bluetooth_rxtx.c ****  * Transmit a BTLE packet with the specified access address.
1119:bluetooth_rxtx.c ****  *
1120:bluetooth_rxtx.c ****  * All modulation parameters are set within this function. The data
1121:bluetooth_rxtx.c ****  * should not be pre-whitened, but the CRC should be calculated and
1122:bluetooth_rxtx.c ****  * included in the data length.
1123:bluetooth_rxtx.c ****  *
1124:bluetooth_rxtx.c ****  */
1125:bluetooth_rxtx.c **** #ifdef TX_ENABLE
1126:bluetooth_rxtx.c **** void le_transmit(u32 aa, u8 len, u8 *data)
1127:bluetooth_rxtx.c **** {
1128:bluetooth_rxtx.c **** 	unsigned int fifo_space, i, j;
1129:bluetooth_rxtx.c **** 	int bit;
1130:bluetooth_rxtx.c **** 	u8 txbuf[LE_ADV_MAX_LEN];
1131:bluetooth_rxtx.c **** 	u8 tx_len;
1132:bluetooth_rxtx.c **** 	u8 byte;
1133:bluetooth_rxtx.c **** 	uint32_t sync = rbit(aa);
1134:bluetooth_rxtx.c **** 	u16 gio_save;
1135:bluetooth_rxtx.c **** 
1136:bluetooth_rxtx.c **** 	// whiten the data and copy it into the txbuf
1137:bluetooth_rxtx.c **** 	int idx = whitening_index[btle_channel_index(channel)];
1138:bluetooth_rxtx.c **** 	for (i = 0; i < len; ++i) {
1139:bluetooth_rxtx.c **** 		byte = data[i];
1140:bluetooth_rxtx.c **** 		txbuf[i] = 0;
1141:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
1142:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
1143:bluetooth_rxtx.c **** 			idx = (idx + 1) % sizeof(whitening);
1144:bluetooth_rxtx.c **** 			byte >>= 1;
1145:bluetooth_rxtx.c **** 			txbuf[i] |= bit << (7 - j);
1146:bluetooth_rxtx.c **** 		}
1147:bluetooth_rxtx.c **** 	}
1148:bluetooth_rxtx.c **** 
1149:bluetooth_rxtx.c **** 	// Bluetooth-like modulation
1150:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
1151:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
1152:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b);    // no PRNG
1153:bluetooth_rxtx.c **** 
1154:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0ce1);
1155:bluetooth_rxtx.c **** 	// 0 00 01 1 001 11 0 00 0 1
1156:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1157:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: all 32 bits of SYNC_WORD
1158:bluetooth_rxtx.c **** 	//      |  | +---------------> 1 preamble byte of 01010101
1159:bluetooth_rxtx.c **** 	//      |  +-----------------> packet mode
1160:bluetooth_rxtx.c **** 	//      +--------------------> buffered mode
1161:bluetooth_rxtx.c **** 
1162:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel);
1163:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
1164:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
1165:bluetooth_rxtx.c **** 	cc2400_set(INT,     0x0010);    // FIFO_THRESHOLD: 16 bytes
1166:bluetooth_rxtx.c **** 
1167:bluetooth_rxtx.c **** 	// set sync word to bit-reversed AA
1168:bluetooth_rxtx.c **** 	cc2400_set(SYNCL,   sync & 0xffff);
1169:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (sync >> 16) & 0xffff);
1170:bluetooth_rxtx.c **** 
1171:bluetooth_rxtx.c **** 	// set GIO to FIFO_FULL
1172:bluetooth_rxtx.c **** 	gio_save = cc2400_get(IOCFG);
ARM GAS  /tmp/ccwF1FQu.s 			page 22


1173:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, (GIO_FIFO_EMPTY << 9) | (gio_save & 0x1ff));
1174:bluetooth_rxtx.c **** 
1175:bluetooth_rxtx.c **** 	// turn on the radio
1176:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
1177:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
1178:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
1179:bluetooth_rxtx.c **** 	TXLED_SET;
1180:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1181:bluetooth_rxtx.c **** 	PAEN_SET;
1182:bluetooth_rxtx.c **** #endif
1183:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
1184:bluetooth_rxtx.c **** 	/*
1185:bluetooth_rxtx.c **** 		This is the correct way of talking to the CC2400 FIFO, the algorithm is as follows:
1186:bluetooth_rxtx.c **** 	 	While i need to send more data:
1187:bluetooth_rxtx.c **** 	 		1. Wait for FIFO to drain according to FIFO_THRESHOLD, (or if first iteration immediately)
1188:bluetooth_rxtx.c **** 	 		2. Fill the FIFO with the correct amount of data to send (fifo_space is an indicator for how mu
1189:bluetooth_rxtx.c **** 	 		3. Signal FIFO to send data
1190:bluetooth_rxtx.c **** 	*/
1191:bluetooth_rxtx.c **** 	fifo_space = 32; // We start at 32, because the C2400 FIFO overall size is 32 bytes.
1192:bluetooth_rxtx.c **** 	i = 0;
1193:bluetooth_rxtx.c **** 	while (len != 0)
1194:bluetooth_rxtx.c **** 	{
1195:bluetooth_rxtx.c **** 		// Wait for the FIFO to drain (when FIFO_FULL is false)	
1196:bluetooth_rxtx.c **** 		while (!GIO6);
1197:bluetooth_rxtx.c **** 		// Decide how much we should send in this iteration
1198:bluetooth_rxtx.c **** 		if (len >= fifo_space) {
1199:bluetooth_rxtx.c **** 			len -= fifo_space;
1200:bluetooth_rxtx.c **** 			tx_len = fifo_space;
1201:bluetooth_rxtx.c **** 		} else {
1202:bluetooth_rxtx.c **** 			tx_len = len;
1203:bluetooth_rxtx.c **** 			len = 0;
1204:bluetooth_rxtx.c **** 		}
1205:bluetooth_rxtx.c **** 		// Signal FIFO to send data
1206:bluetooth_rxtx.c **** 		cc2400_fifo_write(tx_len, txbuf + i);
1207:bluetooth_rxtx.c **** 		cc2400_strobe(STX);
1208:bluetooth_rxtx.c **** 		i += tx_len;
1209:bluetooth_rxtx.c **** 		// From now on, we only get interrupt on GIO6, which means that we work according to FIFO_THRESHO
1210:bluetooth_rxtx.c **** 		fifo_space = 16;
1211:bluetooth_rxtx.c **** 	}
1212:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
1213:bluetooth_rxtx.c **** 	TXLED_CLR;
1214:bluetooth_rxtx.c **** 
1215:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
1216:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
1217:bluetooth_rxtx.c **** 
1218:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1219:bluetooth_rxtx.c **** 	PAEN_CLR;
1220:bluetooth_rxtx.c **** #endif
1221:bluetooth_rxtx.c **** 	// Restore GIO
1222:bluetooth_rxtx.c ****  	cc2400_set(IOCFG, gio_save);
1223:bluetooth_rxtx.c **** }
1224:bluetooth_rxtx.c **** #endif
1225:bluetooth_rxtx.c **** 
1226:bluetooth_rxtx.c **** #ifdef TX_ENABLE
1227:bluetooth_rxtx.c **** void le_jam(void) {
1228:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
1229:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
ARM GAS  /tmp/ccwF1FQu.s 			page 23


1230:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x234b);    // PRNG, 1 MHz offset
1231:bluetooth_rxtx.c **** 
1232:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0c01);
1233:bluetooth_rxtx.c **** 	// 0 00 01 1 000 00 0 00 0 1
1234:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1235:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1236:bluetooth_rxtx.c **** 	//      |  | +---------------> 0 preamble bytes of 01010101
1237:bluetooth_rxtx.c **** 	//      |  +-----------------> packet mode
1238:bluetooth_rxtx.c **** 	//      +--------------------> buffered mode
1239:bluetooth_rxtx.c **** 
1240:bluetooth_rxtx.c **** 	// cc2400_set(FSDIV,   channel);
1241:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
1242:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
1243:bluetooth_rxtx.c **** 
1244:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
1245:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
1246:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
1247:bluetooth_rxtx.c **** 	TXLED_SET;
1248:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1249:bluetooth_rxtx.c **** 	PAEN_SET;
1250:bluetooth_rxtx.c **** #endif
1251:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
1252:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
1253:bluetooth_rxtx.c **** }
1254:bluetooth_rxtx.c **** #endif
1255:bluetooth_rxtx.c **** 
1256:bluetooth_rxtx.c **** /* TODO - return whether hop happened, or should caller have to keep
1257:bluetooth_rxtx.c ****  * track of this? */
1258:bluetooth_rxtx.c **** void hop(void)
1259:bluetooth_rxtx.c **** {
1260:bluetooth_rxtx.c **** 	do_hop = 0;
1261:bluetooth_rxtx.c **** 	last_hop = clkn;
1262:bluetooth_rxtx.c **** 
1263:bluetooth_rxtx.c **** 	// No hopping, if channel is set correctly, do nothing
1264:bluetooth_rxtx.c **** 	if (hop_mode == HOP_NONE) {
1265:bluetooth_rxtx.c **** 		if (cc2400_get(FSDIV) == (channel - 1))
1266:bluetooth_rxtx.c **** 			return;
1267:bluetooth_rxtx.c **** 	}
1268:bluetooth_rxtx.c **** 	/* Slow sweep (100 hops/sec)
1269:bluetooth_rxtx.c **** 	 * only hop to currently used channels if AFH is enabled
1270:bluetooth_rxtx.c **** 	 */
1271:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_SWEEP) {
1272:bluetooth_rxtx.c **** 		do {
1273:bluetooth_rxtx.c **** 			channel += 32;
1274:bluetooth_rxtx.c **** 			if (channel > 2480)
1275:bluetooth_rxtx.c **** 				channel -= 79;
1276:bluetooth_rxtx.c **** 		} while ( used_channels != 0 && afh_enabled && !( afh_map[(channel-2402)/8] & 0x1<<((channel-2402
1277:bluetooth_rxtx.c **** 	}
1278:bluetooth_rxtx.c **** 
1279:bluetooth_rxtx.c **** 	/* AFH detection
1280:bluetooth_rxtx.c **** 	 * only hop to currently unused channesl
1281:bluetooth_rxtx.c **** 	 */
1282:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_AFH) {
1283:bluetooth_rxtx.c **** 		do {
1284:bluetooth_rxtx.c **** 			channel += 32;
1285:bluetooth_rxtx.c **** 			if (channel > 2480)
1286:bluetooth_rxtx.c **** 				channel -= 79;
ARM GAS  /tmp/ccwF1FQu.s 			page 24


1287:bluetooth_rxtx.c **** 		} while( used_channels != 79 && (afh_map[(channel-2402)/8] & 0x1<<((channel-2402)%8)) );
1288:bluetooth_rxtx.c **** 	}
1289:bluetooth_rxtx.c **** 
1290:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_BLUETOOTH) {
1291:bluetooth_rxtx.c **** 		channel = next_hop(clkn);
1292:bluetooth_rxtx.c **** 	}
1293:bluetooth_rxtx.c **** 
1294:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_BTLE) {
1295:bluetooth_rxtx.c **** 		channel = btle_next_hop(&le);
1296:bluetooth_rxtx.c **** 	}
1297:bluetooth_rxtx.c **** 
1298:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_DIRECT) {
1299:bluetooth_rxtx.c **** 		channel = hop_direct_channel;
1300:bluetooth_rxtx.c **** 	}
1301:bluetooth_rxtx.c **** 	/* IDLE mode, but leave amp on, so don't call cc2400_idle(). */
1302:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
1303:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
1304:bluetooth_rxtx.c **** 
1305:bluetooth_rxtx.c **** 	/* Retune */
1306:bluetooth_rxtx.c **** 	if(mode == MODE_TX_SYMBOLS)
1307:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channel);
1308:bluetooth_rxtx.c **** 	else
1309:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channel - 1);
1310:bluetooth_rxtx.c **** 
1311:bluetooth_rxtx.c **** 	/* Update CS register if hopping.  */
1312:bluetooth_rxtx.c **** 	if (hop_mode > 0) {
1313:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set(channel);
1314:bluetooth_rxtx.c **** 	}
1315:bluetooth_rxtx.c **** 
1316:bluetooth_rxtx.c **** 	/* Wait for lock */
1317:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
1318:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
1319:bluetooth_rxtx.c **** 
1320:bluetooth_rxtx.c **** 	dma_discard = 1;
1321:bluetooth_rxtx.c **** 
1322:bluetooth_rxtx.c **** 	if(mode == MODE_TX_SYMBOLS) {
1323:bluetooth_rxtx.c **** #ifdef TX_ENABLE
1324:bluetooth_rxtx.c **** 		cc2400_strobe(STX);
1325:bluetooth_rxtx.c **** #endif
1326:bluetooth_rxtx.c **** 	} else {
1327:bluetooth_rxtx.c **** 		cc2400_strobe(SRX);
1328:bluetooth_rxtx.c **** 	}
1329:bluetooth_rxtx.c **** }
1330:bluetooth_rxtx.c **** 
1331:bluetooth_rxtx.c **** /* Bluetooth packet monitoring */
1332:bluetooth_rxtx.c **** void bt_stream_rx()
1333:bluetooth_rxtx.c **** {
1334:bluetooth_rxtx.c **** 	int8_t rssi;
1335:bluetooth_rxtx.c **** 	int8_t rssi_at_trigger;
1336:bluetooth_rxtx.c **** 
1337:bluetooth_rxtx.c **** 	RXLED_CLR;
1338:bluetooth_rxtx.c **** 
1339:bluetooth_rxtx.c **** 	usb_queue_init();
1340:bluetooth_rxtx.c **** 	dio_ssp_init();
1341:bluetooth_rxtx.c **** 	dma_init_rx_symbols();
1342:bluetooth_rxtx.c **** 	dio_ssp_start();
1343:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccwF1FQu.s 			page 25


1344:bluetooth_rxtx.c **** 	cc2400_rx();
1345:bluetooth_rxtx.c **** 
1346:bluetooth_rxtx.c **** 	cs_trigger_enable();
1347:bluetooth_rxtx.c **** 
1348:bluetooth_rxtx.c **** 	while ( requested_mode == MODE_RX_SYMBOLS || requested_mode == MODE_BT_FOLLOW )
1349:bluetooth_rxtx.c **** 	{
1350:bluetooth_rxtx.c **** 
1351:bluetooth_rxtx.c **** 		RXLED_CLR;
1352:bluetooth_rxtx.c **** 
1353:bluetooth_rxtx.c **** 		/* Wait for DMA transfer. TODO - need more work on
1354:bluetooth_rxtx.c **** 		 * RSSI. Should send RSSI indications to host even
1355:bluetooth_rxtx.c **** 		 * when not transferring data. That would also keep
1356:bluetooth_rxtx.c **** 		 * the USB stream going. This loop runs 50-80 times
1357:bluetooth_rxtx.c **** 		 * while waiting for DMA, but RSSI sampling does not
1358:bluetooth_rxtx.c **** 		 * cover all the symbols in a DMA transfer. Can not do
1359:bluetooth_rxtx.c **** 		 * RSSI sampling in CS interrupt, but could log time
1360:bluetooth_rxtx.c **** 		 * at multiple trigger points there. The MAX() below
1361:bluetooth_rxtx.c **** 		 * helps with statistics in the case that cs_trigger
1362:bluetooth_rxtx.c **** 		 * happened before the loop started. */
1363:bluetooth_rxtx.c **** 		rssi_reset();
1364:bluetooth_rxtx.c **** 		rssi_at_trigger = INT8_MIN;
1365:bluetooth_rxtx.c **** 		while (!rx_tc) {
1366:bluetooth_rxtx.c **** 			rssi = (int8_t)(cc2400_get(RSSI) >> 8);
1367:bluetooth_rxtx.c **** 			if (cs_trigger && (rssi_at_trigger == INT8_MIN)) {
1368:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
1369:bluetooth_rxtx.c **** 				rssi_at_trigger = rssi;
1370:bluetooth_rxtx.c **** 			}
1371:bluetooth_rxtx.c **** 			rssi_add(rssi);
1372:bluetooth_rxtx.c **** 
1373:bluetooth_rxtx.c **** 			handle_usb(clkn);
1374:bluetooth_rxtx.c **** 
1375:bluetooth_rxtx.c **** 			/* If timer says time to hop, do it. */
1376:bluetooth_rxtx.c **** 			if (do_hop) {
1377:bluetooth_rxtx.c **** 				hop();
1378:bluetooth_rxtx.c **** 			} else {
1379:bluetooth_rxtx.c **** 				TXLED_CLR;
1380:bluetooth_rxtx.c **** 			}
1381:bluetooth_rxtx.c **** 			/* TODO - set per-channel carrier sense threshold.
1382:bluetooth_rxtx.c **** 			 * Set by firmware or host. */
1383:bluetooth_rxtx.c **** 		}
1384:bluetooth_rxtx.c **** 
1385:bluetooth_rxtx.c **** 		RXLED_SET;
1386:bluetooth_rxtx.c **** 
1387:bluetooth_rxtx.c **** 		if (rx_err) {
1388:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
1389:bluetooth_rxtx.c **** 		}
1390:bluetooth_rxtx.c **** 
1391:bluetooth_rxtx.c **** 		/* Missed a DMA trasfer? */
1392:bluetooth_rxtx.c **** 		if (rx_tc > 1)
1393:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
1394:bluetooth_rxtx.c **** 
1395:bluetooth_rxtx.c **** 		if (dma_discard) {
1396:bluetooth_rxtx.c **** 			status |= DISCARD;
1397:bluetooth_rxtx.c **** 			dma_discard = 0;
1398:bluetooth_rxtx.c **** 		}
1399:bluetooth_rxtx.c **** 
1400:bluetooth_rxtx.c **** 		rssi_iir_update(channel);
ARM GAS  /tmp/ccwF1FQu.s 			page 26


1401:bluetooth_rxtx.c **** 
1402:bluetooth_rxtx.c **** 		/* Set squelch hold if there was either a CS trigger, squelch
1403:bluetooth_rxtx.c **** 		 * is disabled, or if the current rssi_max is above the same
1404:bluetooth_rxtx.c **** 		 * threshold. Currently, this is redundant, but allows for
1405:bluetooth_rxtx.c **** 		 * per-channel or other rssi triggers in the future. */
1406:bluetooth_rxtx.c **** 		if (cs_trigger || cs_no_squelch) {
1407:bluetooth_rxtx.c **** 			status |= CS_TRIGGER;
1408:bluetooth_rxtx.c **** 			cs_trigger = 0;
1409:bluetooth_rxtx.c **** 		}
1410:bluetooth_rxtx.c **** 
1411:bluetooth_rxtx.c **** 		if (rssi_max >= (cs_threshold_cur + 54)) {
1412:bluetooth_rxtx.c **** 			status |= RSSI_TRIGGER;
1413:bluetooth_rxtx.c **** 		}
1414:bluetooth_rxtx.c **** 
1415:bluetooth_rxtx.c **** 		enqueue(BR_PACKET, (uint8_t*)idle_rxbuf);
1416:bluetooth_rxtx.c **** 
1417:bluetooth_rxtx.c **** 		handle_usb(clkn);
1418:bluetooth_rxtx.c **** 		rx_tc = 0;
1419:bluetooth_rxtx.c **** 		rx_err = 0;
1420:bluetooth_rxtx.c **** 	}
1421:bluetooth_rxtx.c **** 
1422:bluetooth_rxtx.c **** 	dio_ssp_stop();
1423:bluetooth_rxtx.c **** 	cs_trigger_disable();
1424:bluetooth_rxtx.c **** }
1425:bluetooth_rxtx.c **** 
1426:bluetooth_rxtx.c **** static uint8_t reverse8(uint8_t data)
1427:bluetooth_rxtx.c **** {
  27              		.loc 1 1427 1 view -0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              		.loc 1 1427 1 is_stmt 0 view .LVU1
  32 0000 10B5     		push	{r4, lr}
  33              		.cfi_def_cfa_offset 8
  34              		.cfi_offset 4, -8
  35              		.cfi_offset 14, -4
1428:bluetooth_rxtx.c **** 	uint8_t reversed = 0;
  36              		.loc 1 1428 2 is_stmt 1 view .LVU2
  37              	.LVL1:
1429:bluetooth_rxtx.c **** 
1430:bluetooth_rxtx.c **** 	for(size_t i=0; i<8; i++)
  38              		.loc 1 1430 2 view .LVU3
  39              	.LBB7:
  40              		.loc 1 1430 6 view .LVU4
  41              		.loc 1 1430 18 view .LVU5
  42              		.loc 1 1430 13 is_stmt 0 view .LVU6
  43 0002 0023     		movs	r3, #0
  44              	.LBE7:
1427:bluetooth_rxtx.c **** 	uint8_t reversed = 0;
  45              		.loc 1 1427 1 view .LVU7
  46 0004 0146     		mov	r1, r0
1428:bluetooth_rxtx.c **** 	uint8_t reversed = 0;
  47              		.loc 1 1428 10 view .LVU8
  48 0006 1846     		mov	r0, r3
  49              	.LVL2:
  50              	.L2:
  51              	.LBB8:
ARM GAS  /tmp/ccwF1FQu.s 			page 27


1431:bluetooth_rxtx.c **** 	{
1432:bluetooth_rxtx.c **** 		reversed |= ((data >> i) & 0x01) << (7-i);
  52              		.loc 1 1432 3 is_stmt 1 discriminator 3 view .LVU9
  53              		.loc 1 1432 22 is_stmt 0 discriminator 3 view .LVU10
  54 0008 41FA03F2 		asr	r2, r1, r3
  55              		.loc 1 1432 36 discriminator 3 view .LVU11
  56 000c C3F10704 		rsb	r4, r3, #7
  57              		.loc 1 1432 28 discriminator 3 view .LVU12
  58 0010 02F00102 		and	r2, r2, #1
  59              		.loc 1 1432 36 discriminator 3 view .LVU13
  60 0014 A240     		lsls	r2, r2, r4
1430:bluetooth_rxtx.c **** 	{
  61              		.loc 1 1430 24 discriminator 3 view .LVU14
  62 0016 0133     		adds	r3, r3, #1
  63              	.LVL3:
  64              		.loc 1 1432 12 discriminator 3 view .LVU15
  65 0018 0243     		orrs	r2, r2, r0
1430:bluetooth_rxtx.c **** 	{
  66              		.loc 1 1430 2 discriminator 3 view .LVU16
  67 001a 082B     		cmp	r3, #8
  68              		.loc 1 1432 12 discriminator 3 view .LVU17
  69 001c D0B2     		uxtb	r0, r2
  70              	.LVL4:
1430:bluetooth_rxtx.c **** 	{
  71              		.loc 1 1430 23 is_stmt 1 discriminator 3 view .LVU18
1430:bluetooth_rxtx.c **** 	{
  72              		.loc 1 1430 18 discriminator 3 view .LVU19
1430:bluetooth_rxtx.c **** 	{
  73              		.loc 1 1430 2 is_stmt 0 discriminator 3 view .LVU20
  74 001e F3D1     		bne	.L2
  75              	.LBE8:
1433:bluetooth_rxtx.c **** 	}
1434:bluetooth_rxtx.c **** 
1435:bluetooth_rxtx.c **** 	return reversed;
1436:bluetooth_rxtx.c **** }
  76              		.loc 1 1436 1 view .LVU21
  77 0020 10BD     		pop	{r4, pc}
  78              		.cfi_endproc
  79              	.LFE16:
  81              		.section	.text.le_set_access_address,"ax",%progbits
  82              		.align	1
  83              		.syntax unified
  84              		.thumb
  85              		.thumb_func
  86              		.fpu softvfp
  88              	le_set_access_address:
  89              	.LVL5:
  90              	.LFB19:
1437:bluetooth_rxtx.c **** 
1438:bluetooth_rxtx.c **** static uint16_t reverse16(uint16_t data)
1439:bluetooth_rxtx.c **** {
1440:bluetooth_rxtx.c **** 	uint16_t reversed = 0;
1441:bluetooth_rxtx.c **** 
1442:bluetooth_rxtx.c **** 	for(size_t i=0; i<16; i++)
1443:bluetooth_rxtx.c **** 	{
1444:bluetooth_rxtx.c **** 		reversed |= ((data >> i) & 0x01) << (15-i);
1445:bluetooth_rxtx.c **** 	}
ARM GAS  /tmp/ccwF1FQu.s 			page 28


1446:bluetooth_rxtx.c **** 
1447:bluetooth_rxtx.c **** 	return reversed;
1448:bluetooth_rxtx.c **** }
1449:bluetooth_rxtx.c **** 
1450:bluetooth_rxtx.c **** /*
1451:bluetooth_rxtx.c ****  * Transmit a BTBR packet with the specified access code.
1452:bluetooth_rxtx.c ****  *
1453:bluetooth_rxtx.c ****  * All modulation parameters are set within this function.
1454:bluetooth_rxtx.c ****  */
1455:bluetooth_rxtx.c **** #ifdef TX_ENABLE
1456:bluetooth_rxtx.c **** void br_transmit()
1457:bluetooth_rxtx.c **** {
1458:bluetooth_rxtx.c **** 	uint16_t gio_save;
1459:bluetooth_rxtx.c **** 
1460:bluetooth_rxtx.c **** 	uint32_t clkn_saved = 0;
1461:bluetooth_rxtx.c **** 
1462:bluetooth_rxtx.c **** 	uint16_t preamble = (target.syncword & 1) == 1 ? 0x5555 : 0xaaaa;
1463:bluetooth_rxtx.c **** 	uint8_t trailer = ((target.syncword >> 63) & 1) == 1 ? 0xaa : 0x55;
1464:bluetooth_rxtx.c **** 
1465:bluetooth_rxtx.c **** 	uint8_t data[16] = {
1466:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
1467:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 8) & 0xFF),
1468:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 16) & 0xFF),
1469:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 24) & 0xFF),
1470:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 32) & 0xFF),
1471:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 40) & 0xFF),
1472:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 48) & 0xFF),
1473:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 56) & 0xFF),
1474:bluetooth_rxtx.c **** 		reverse8(trailer),
1475:bluetooth_rxtx.c **** 		reverse8(0x77),
1476:bluetooth_rxtx.c **** 		reverse8(0x66),
1477:bluetooth_rxtx.c **** 		reverse8(0x55),
1478:bluetooth_rxtx.c **** 		reverse8(0x44),
1479:bluetooth_rxtx.c **** 		reverse8(0x33),
1480:bluetooth_rxtx.c **** 		reverse8(0x22),
1481:bluetooth_rxtx.c **** 		reverse8(0x11)
1482:bluetooth_rxtx.c **** 	};
1483:bluetooth_rxtx.c **** 
1484:bluetooth_rxtx.c **** 	cc2400_tx_sync(reverse16(preamble));
1485:bluetooth_rxtx.c **** 
1486:bluetooth_rxtx.c **** 	cc2400_set(INT,     0x0014);    // FIFO_THRESHOLD: 20 bytes
1487:bluetooth_rxtx.c **** 
1488:bluetooth_rxtx.c **** 	// set GIO to FIFO_FULL
1489:bluetooth_rxtx.c **** 	gio_save = cc2400_get(IOCFG);
1490:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, (GIO_FIFO_FULL << 9) | (gio_save & 0x1ff));
1491:bluetooth_rxtx.c **** 
1492:bluetooth_rxtx.c **** 	while ( requested_mode == MODE_TX_SYMBOLS )
1493:bluetooth_rxtx.c **** 	{
1494:bluetooth_rxtx.c **** 
1495:bluetooth_rxtx.c **** 		while ((clkn >> 1) == (clkn_saved >> 1) || T0TC < 2250) {
1496:bluetooth_rxtx.c **** 
1497:bluetooth_rxtx.c **** 			// If timer says time to hop, do it.
1498:bluetooth_rxtx.c **** 			if (do_hop) {
1499:bluetooth_rxtx.c **** 				hop();
1500:bluetooth_rxtx.c **** 			}
1501:bluetooth_rxtx.c **** 		}
1502:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccwF1FQu.s 			page 29


1503:bluetooth_rxtx.c **** 		clkn_saved = clkn;
1504:bluetooth_rxtx.c **** 
1505:bluetooth_rxtx.c **** 		TXLED_SET;
1506:bluetooth_rxtx.c **** 
1507:bluetooth_rxtx.c **** 		cc2400_fifo_write(16, data);
1508:bluetooth_rxtx.c **** 
1509:bluetooth_rxtx.c **** 		while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
1510:bluetooth_rxtx.c **** 		TXLED_CLR;
1511:bluetooth_rxtx.c **** 
1512:bluetooth_rxtx.c **** 		cc2400_strobe(SRFOFF);
1513:bluetooth_rxtx.c **** 		while ((cc2400_status() & FS_LOCK));
1514:bluetooth_rxtx.c **** 
1515:bluetooth_rxtx.c **** 		while (!(cc2400_status() & XOSC16M_STABLE));
1516:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
1517:bluetooth_rxtx.c **** 		while (!(cc2400_status() & FS_LOCK));
1518:bluetooth_rxtx.c **** 
1519:bluetooth_rxtx.c **** 		while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
1520:bluetooth_rxtx.c **** 		cc2400_strobe(STX);
1521:bluetooth_rxtx.c **** 
1522:bluetooth_rxtx.c **** 		handle_usb(clkn);
1523:bluetooth_rxtx.c **** 	}
1524:bluetooth_rxtx.c **** 
1525:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1526:bluetooth_rxtx.c **** 	PAEN_CLR;
1527:bluetooth_rxtx.c **** #endif
1528:bluetooth_rxtx.c **** 
1529:bluetooth_rxtx.c **** 	// reset GIO
1530:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, gio_save);
1531:bluetooth_rxtx.c **** }
1532:bluetooth_rxtx.c **** #endif
1533:bluetooth_rxtx.c **** 
1534:bluetooth_rxtx.c **** /* set LE access address */
1535:bluetooth_rxtx.c **** static void le_set_access_address(u32 aa) {
  91              		.loc 1 1535 43 is_stmt 1 view -0
  92              		.cfi_startproc
  93              		@ args = 0, pretend = 0, frame = 0
  94              		@ frame_needed = 0, uses_anonymous_args = 0
  95              		.loc 1 1535 43 is_stmt 0 view .LVU23
  96 0000 10B5     		push	{r4, lr}
  97              		.cfi_def_cfa_offset 8
  98              		.cfi_offset 4, -8
  99              		.cfi_offset 14, -4
1536:bluetooth_rxtx.c **** 	u32 aa_rev;
 100              		.loc 1 1536 2 is_stmt 1 view .LVU24
1537:bluetooth_rxtx.c **** 
1538:bluetooth_rxtx.c **** 	le.access_address = aa;
 101              		.loc 1 1538 2 view .LVU25
 102              		.loc 1 1538 20 is_stmt 0 view .LVU26
 103 0002 044C     		ldr	r4, .L5
 104 0004 2060     		str	r0, [r4]
1539:bluetooth_rxtx.c **** 	aa_rev = rbit(aa);
 105              		.loc 1 1539 2 is_stmt 1 view .LVU27
 106              		.loc 1 1539 11 is_stmt 0 view .LVU28
 107 0006 FFF7FEFF 		bl	rbit
 108              	.LVL6:
1540:bluetooth_rxtx.c **** 	le.syncl = aa_rev & 0xffff;
 109              		.loc 1 1540 2 is_stmt 1 view .LVU29
ARM GAS  /tmp/ccwF1FQu.s 			page 30


 110              		.loc 1 1540 11 is_stmt 0 view .LVU30
 111 000a E080     		strh	r0, [r4, #6]	@ movhi
1541:bluetooth_rxtx.c **** 	le.synch = aa_rev >> 16;
 112              		.loc 1 1541 2 is_stmt 1 view .LVU31
 113              		.loc 1 1541 20 is_stmt 0 view .LVU32
 114 000c 000C     		lsrs	r0, r0, #16
 115              	.LVL7:
 116              		.loc 1 1541 11 view .LVU33
 117 000e A080     		strh	r0, [r4, #4]	@ movhi
1542:bluetooth_rxtx.c **** }
 118              		.loc 1 1542 1 view .LVU34
 119 0010 10BD     		pop	{r4, pc}
 120              	.L6:
 121 0012 00BF     		.align	2
 122              	.L5:
 123 0014 00000000 		.word	.LANCHOR0
 124              		.cfi_endproc
 125              	.LFE19:
 127              		.section	.text.cc2400_rx,"ax",%progbits
 128              		.align	1
 129              		.syntax unified
 130              		.thumb
 131              		.thumb_func
 132              		.fpu softvfp
 134              	cc2400_rx:
 135              	.LFB9:
 960:bluetooth_rxtx.c **** 	u16 mdmctrl = 0;
 136              		.loc 1 960 1 is_stmt 1 view -0
 137              		.cfi_startproc
 138              		@ args = 0, pretend = 0, frame = 0
 139              		@ frame_needed = 0, uses_anonymous_args = 0
 140 0000 38B5     		push	{r3, r4, r5, lr}
 141              		.cfi_def_cfa_offset 16
 142              		.cfi_offset 3, -16
 143              		.cfi_offset 4, -12
 144              		.cfi_offset 5, -8
 145              		.cfi_offset 14, -4
 961:bluetooth_rxtx.c **** 
 146              		.loc 1 961 2 view .LVU36
 147              	.LVL8:
 963:bluetooth_rxtx.c **** 		if (modulation == MOD_BT_BASIC_RATE) {
 148              		.loc 1 963 2 view .LVU37
 963:bluetooth_rxtx.c **** 		if (modulation == MOD_BT_BASIC_RATE) {
 149              		.loc 1 963 17 is_stmt 0 view .LVU38
 150 0002 264B     		ldr	r3, .L22
 151 0004 264C     		ldr	r4, .L22+4
 152 0006 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 963:bluetooth_rxtx.c **** 		if (modulation == MOD_BT_BASIC_RATE) {
 153              		.loc 1 963 4 view .LVU39
 154 0008 12B1     		cbz	r2, .L8
 963:bluetooth_rxtx.c **** 		if (modulation == MOD_BT_BASIC_RATE) {
 155              		.loc 1 963 54 discriminator 1 view .LVU40
 156 000a 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 963:bluetooth_rxtx.c **** 		if (modulation == MOD_BT_BASIC_RATE) {
 157              		.loc 1 963 39 discriminator 1 view .LVU41
 158 000c 012A     		cmp	r2, #1
 159 000e 26D1     		bne	.L9
ARM GAS  /tmp/ccwF1FQu.s 			page 31


 160              	.L8:
 964:bluetooth_rxtx.c **** 			mdmctrl = 0x0029; // 160 kHz frequency deviation
 161              		.loc 1 964 3 is_stmt 1 view .LVU42
 964:bluetooth_rxtx.c **** 			mdmctrl = 0x0029; // 160 kHz frequency deviation
 162              		.loc 1 964 18 is_stmt 0 view .LVU43
 163 0010 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 964:bluetooth_rxtx.c **** 			mdmctrl = 0x0029; // 160 kHz frequency deviation
 164              		.loc 1 964 6 view .LVU44
 165 0012 002A     		cmp	r2, #0
 166 0014 3FD0     		beq	.L13
 966:bluetooth_rxtx.c **** 			mdmctrl = 0x0040; // 250 kHz frequency deviation
 167              		.loc 1 966 10 is_stmt 1 view .LVU45
 966:bluetooth_rxtx.c **** 			mdmctrl = 0x0040; // 250 kHz frequency deviation
 168              		.loc 1 966 25 is_stmt 0 view .LVU46
 169 0016 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 967:bluetooth_rxtx.c **** 		}
 170              		.loc 1 967 12 view .LVU47
 171 0018 012B     		cmp	r3, #1
 172 001a 14BF     		ite	ne
 173 001c 0025     		movne	r5, #0
 174 001e 4025     		moveq	r5, #64
 175              	.L10:
 176              	.LVL9:
 969:bluetooth_rxtx.c **** 		cc2400_set(LMTST,   0x2b22);
 177              		.loc 1 969 3 is_stmt 1 view .LVU48
 178 0020 47F6FF71 		movw	r1, #32767
 179 0024 0D20     		movs	r0, #13
 180 0026 FFF7FEFF 		bl	cc2400_set
 181              	.LVL10:
 970:bluetooth_rxtx.c **** 		cc2400_set(MDMTST0, 0x134b); // without PRNG
 182              		.loc 1 970 3 view .LVU49
 183 002a 42F62231 		movw	r1, #11042
 184 002e 1220     		movs	r0, #18
 185 0030 FFF7FEFF 		bl	cc2400_set
 186              	.LVL11:
 971:bluetooth_rxtx.c **** 		cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 187              		.loc 1 971 3 view .LVU50
 188 0034 41F24B31 		movw	r1, #4939
 189 0038 1420     		movs	r0, #20
 190 003a FFF7FEFF 		bl	cc2400_set
 191              	.LVL12:
 972:bluetooth_rxtx.c **** 		// 0 00 00 0 010 00 0 00 0 1
 192              		.loc 1 972 3 view .LVU51
 193 003e 40F20111 		movw	r1, #257
 194 0042 2020     		movs	r0, #32
 195 0044 FFF7FEFF 		bl	cc2400_set
 196              	.LVL13:
 979:bluetooth_rxtx.c **** 		cc2400_set(MDMCTRL, mdmctrl);
 197              		.loc 1 979 3 view .LVU52
 198 0048 B4F84C10 		ldrh	r1, [r4, #76]
 199 004c 0220     		movs	r0, #2
 200 004e 0139     		subs	r1, r1, #1
 201 0050 89B2     		uxth	r1, r1
 202 0052 FFF7FEFF 		bl	cc2400_set
 203              	.LVL14:
 980:bluetooth_rxtx.c **** 	}
 204              		.loc 1 980 3 view .LVU53
ARM GAS  /tmp/ccwF1FQu.s 			page 32


 205 0056 2946     		mov	r1, r5
 206 0058 0320     		movs	r0, #3
 207 005a FFF7FEFF 		bl	cc2400_set
 208              	.LVL15:
 209              	.L9:
 984:bluetooth_rxtx.c **** 
 210              		.loc 1 984 2 view .LVU54
 211 005e B4F84C00 		ldrh	r0, [r4, #76]
 212 0062 80B2     		uxth	r0, r0
 213 0064 FFF7FEFF 		bl	cs_threshold_calc_and_set
 214              	.LVL16:
 986:bluetooth_rxtx.c **** 
 215              		.loc 1 986 2 view .LVU55
 216 0068 FFF7FEFF 		bl	clkn_start
 217              	.LVL17:
 988:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 218              		.loc 1 988 2 view .LVU56
 219              	.L11:
 988:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 220              		.loc 1 988 45 discriminator 1 view .LVU57
 988:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 221              		.loc 1 988 8 discriminator 1 view .LVU58
 988:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 222              		.loc 1 988 11 is_stmt 0 discriminator 1 view .LVU59
 223 006c FFF7FEFF 		bl	cc2400_status
 224              	.LVL18:
 988:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 225              		.loc 1 988 8 discriminator 1 view .LVU60
 226 0070 4206     		lsls	r2, r0, #25
 227 0072 FBD5     		bpl	.L11
 989:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 228              		.loc 1 989 2 is_stmt 1 view .LVU61
 229 0074 6120     		movs	r0, #97
 230 0076 FFF7FEFF 		bl	cc2400_strobe
 231              	.LVL19:
 990:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 232              		.loc 1 990 2 view .LVU62
 233              	.L12:
 990:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 234              		.loc 1 990 38 discriminator 1 view .LVU63
 990:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 235              		.loc 1 990 8 discriminator 1 view .LVU64
 990:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 236              		.loc 1 990 11 is_stmt 0 discriminator 1 view .LVU65
 237 007a FFF7FEFF 		bl	cc2400_status
 238              	.LVL20:
 990:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 239              		.loc 1 990 8 discriminator 1 view .LVU66
 240 007e 4307     		lsls	r3, r0, #29
 241 0080 FBD5     		bpl	.L12
 991:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
 242              		.loc 1 991 2 is_stmt 1 view .LVU67
 243 0082 6220     		movs	r0, #98
 244 0084 FFF7FEFF 		bl	cc2400_strobe
 245              	.LVL21:
 993:bluetooth_rxtx.c **** 	HGM_SET;
 246              		.loc 1 993 2 view .LVU68
ARM GAS  /tmp/ccwF1FQu.s 			page 33


 247 0088 8022     		movs	r2, #128
 248 008a 064B     		ldr	r3, .L22+8
 249 008c 1A60     		str	r2, [r3]
 994:bluetooth_rxtx.c **** #endif
 250              		.loc 1 994 2 view .LVU69
 251 008e 4FF48072 		mov	r2, #256
 252 0092 1A60     		str	r2, [r3]
 996:bluetooth_rxtx.c **** 
 253              		.loc 1 996 1 is_stmt 0 view .LVU70
 254 0094 38BD     		pop	{r3, r4, r5, pc}
 255              	.LVL22:
 256              	.L13:
 965:bluetooth_rxtx.c **** 		} else if (modulation == MOD_BT_LOW_ENERGY) {
 257              		.loc 1 965 12 view .LVU71
 258 0096 2925     		movs	r5, #41
 259 0098 C2E7     		b	.L10
 260              	.L23:
 261 009a 00BF     		.align	2
 262              	.L22:
 263 009c 00000000 		.word	.LANCHOR1
 264 00a0 00000000 		.word	.LANCHOR0
 265 00a4 58C00920 		.word	537509976
 266              		.cfi_endproc
 267              	.LFE9:
 269              		.section	.text.cc2400_rx_sync,"ax",%progbits
 270              		.align	1
 271              		.syntax unified
 272              		.thumb
 273              		.thumb_func
 274              		.fpu softvfp
 276              	cc2400_rx_sync:
 277              	.LVL23:
 278              	.LFB10:
1000:bluetooth_rxtx.c **** 	u16 grmdm, mdmctrl;
 279              		.loc 1 1000 1 is_stmt 1 view -0
 280              		.cfi_startproc
 281              		@ args = 0, pretend = 0, frame = 0
 282              		@ frame_needed = 0, uses_anonymous_args = 0
1000:bluetooth_rxtx.c **** 	u16 grmdm, mdmctrl;
 283              		.loc 1 1000 1 is_stmt 0 view .LVU73
 284 0000 70B5     		push	{r4, r5, r6, lr}
 285              		.cfi_def_cfa_offset 16
 286              		.cfi_offset 4, -16
 287              		.cfi_offset 5, -12
 288              		.cfi_offset 6, -8
 289              		.cfi_offset 14, -4
1001:bluetooth_rxtx.c **** 
 290              		.loc 1 1001 2 is_stmt 1 view .LVU74
1003:bluetooth_rxtx.c **** 		mdmctrl = 0x0029; // 160 kHz frequency deviation
 291              		.loc 1 1003 2 view .LVU75
1003:bluetooth_rxtx.c **** 		mdmctrl = 0x0029; // 160 kHz frequency deviation
 292              		.loc 1 1003 17 is_stmt 0 view .LVU76
 293 0002 294B     		ldr	r3, .L34
1000:bluetooth_rxtx.c **** 	u16 grmdm, mdmctrl;
 294              		.loc 1 1000 1 view .LVU77
 295 0004 0446     		mov	r4, r0
1003:bluetooth_rxtx.c **** 		mdmctrl = 0x0029; // 160 kHz frequency deviation
ARM GAS  /tmp/ccwF1FQu.s 			page 34


 296              		.loc 1 1003 17 view .LVU78
 297 0006 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
1003:bluetooth_rxtx.c **** 		mdmctrl = 0x0029; // 160 kHz frequency deviation
 298              		.loc 1 1003 5 view .LVU79
 299 0008 002A     		cmp	r2, #0
 300 000a 48D0     		beq	.L29
1014:bluetooth_rxtx.c **** 		mdmctrl = 0x0040; // 250 kHz frequency deviation
 301              		.loc 1 1014 9 is_stmt 1 view .LVU80
1014:bluetooth_rxtx.c **** 		mdmctrl = 0x0040; // 250 kHz frequency deviation
 302              		.loc 1 1014 24 is_stmt 0 view .LVU81
 303 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
1014:bluetooth_rxtx.c **** 		mdmctrl = 0x0040; // 250 kHz frequency deviation
 304              		.loc 1 1014 12 view .LVU82
 305 000e 012B     		cmp	r3, #1
 306 0010 44D1     		bne	.L24
1015:bluetooth_rxtx.c **** 		grmdm = 0x0561; // un-buffered mode, packet w/ sync word detection
 307              		.loc 1 1015 11 view .LVU83
 308 0012 4025     		movs	r5, #64
1016:bluetooth_rxtx.c **** 		// 0 00 00 1 010 11 0 00 0 1
 309              		.loc 1 1016 9 view .LVU84
 310 0014 40F26156 		movw	r6, #1377
 311              	.L25:
 312              	.LVL24:
1030:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 313              		.loc 1 1030 2 is_stmt 1 view .LVU85
 314 0018 47F6FF71 		movw	r1, #32767
 315 001c 0D20     		movs	r0, #13
 316              	.LVL25:
1030:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 317              		.loc 1 1030 2 is_stmt 0 view .LVU86
 318 001e FFF7FEFF 		bl	cc2400_set
 319              	.LVL26:
1031:bluetooth_rxtx.c **** 
 320              		.loc 1 1031 2 is_stmt 1 view .LVU87
 321 0022 42F62231 		movw	r1, #11042
 322 0026 1220     		movs	r0, #18
 323 0028 FFF7FEFF 		bl	cc2400_set
 324              	.LVL27:
1033:bluetooth_rxtx.c **** 	// 1      2      4b
 325              		.loc 1 1033 2 view .LVU88
 326 002c 41F24B21 		movw	r1, #4683
 327 0030 1420     		movs	r0, #20
 328 0032 FFF7FEFF 		bl	cc2400_set
 329              	.LVL28:
1046:bluetooth_rxtx.c **** 
 330              		.loc 1 1046 2 view .LVU89
 331 0036 3146     		mov	r1, r6
 332 0038 2020     		movs	r0, #32
 333 003a FFF7FEFF 		bl	cc2400_set
 334              	.LVL29:
1048:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (sync >> 16) & 0xffff);
 335              		.loc 1 1048 2 view .LVU90
 336 003e A1B2     		uxth	r1, r4
 337 0040 2C20     		movs	r0, #44
 338 0042 FFF7FEFF 		bl	cc2400_set
 339              	.LVL30:
1049:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccwF1FQu.s 			page 35


 340              		.loc 1 1049 2 view .LVU91
 341 0046 210C     		lsrs	r1, r4, #16
1051:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, mdmctrl);
 342              		.loc 1 1051 2 is_stmt 0 view .LVU92
 343 0048 184C     		ldr	r4, .L34+4
 344              	.LVL31:
1049:bluetooth_rxtx.c **** 
 345              		.loc 1 1049 2 view .LVU93
 346 004a 2D20     		movs	r0, #45
 347 004c FFF7FEFF 		bl	cc2400_set
 348              	.LVL32:
1051:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, mdmctrl);
 349              		.loc 1 1051 2 is_stmt 1 view .LVU94
 350 0050 B4F84C10 		ldrh	r1, [r4, #76]
 351 0054 0220     		movs	r0, #2
 352 0056 0139     		subs	r1, r1, #1
 353 0058 89B2     		uxth	r1, r1
 354 005a FFF7FEFF 		bl	cc2400_set
 355              	.LVL33:
1052:bluetooth_rxtx.c **** 
 356              		.loc 1 1052 2 view .LVU95
 357 005e 2946     		mov	r1, r5
 358 0060 0320     		movs	r0, #3
 359 0062 FFF7FEFF 		bl	cc2400_set
 360              	.LVL34:
1055:bluetooth_rxtx.c **** 
 361              		.loc 1 1055 2 view .LVU96
 362 0066 B4F84C00 		ldrh	r0, [r4, #76]
 363 006a 80B2     		uxth	r0, r0
 364 006c FFF7FEFF 		bl	cs_threshold_calc_and_set
 365              	.LVL35:
1057:bluetooth_rxtx.c **** 
 366              		.loc 1 1057 2 view .LVU97
 367 0070 FFF7FEFF 		bl	clkn_start
 368              	.LVL36:
1059:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 369              		.loc 1 1059 2 view .LVU98
 370              	.L27:
1059:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 371              		.loc 1 1059 45 discriminator 1 view .LVU99
1059:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 372              		.loc 1 1059 8 discriminator 1 view .LVU100
1059:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 373              		.loc 1 1059 11 is_stmt 0 discriminator 1 view .LVU101
 374 0074 FFF7FEFF 		bl	cc2400_status
 375              	.LVL37:
1059:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 376              		.loc 1 1059 8 discriminator 1 view .LVU102
 377 0078 4206     		lsls	r2, r0, #25
 378 007a FBD5     		bpl	.L27
1060:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 379              		.loc 1 1060 2 is_stmt 1 view .LVU103
 380 007c 6120     		movs	r0, #97
 381 007e FFF7FEFF 		bl	cc2400_strobe
 382              	.LVL38:
1061:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 383              		.loc 1 1061 2 view .LVU104
ARM GAS  /tmp/ccwF1FQu.s 			page 36


 384              	.L28:
1061:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 385              		.loc 1 1061 38 discriminator 1 view .LVU105
1061:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 386              		.loc 1 1061 8 discriminator 1 view .LVU106
1061:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 387              		.loc 1 1061 11 is_stmt 0 discriminator 1 view .LVU107
 388 0082 FFF7FEFF 		bl	cc2400_status
 389              	.LVL39:
1061:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 390              		.loc 1 1061 8 discriminator 1 view .LVU108
 391 0086 4307     		lsls	r3, r0, #29
 392 0088 FBD5     		bpl	.L28
1062:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
 393              		.loc 1 1062 2 is_stmt 1 view .LVU109
 394 008a 6220     		movs	r0, #98
 395 008c FFF7FEFF 		bl	cc2400_strobe
 396              	.LVL40:
1064:bluetooth_rxtx.c **** 	HGM_SET;
 397              		.loc 1 1064 2 view .LVU110
 398 0090 8022     		movs	r2, #128
 399 0092 074B     		ldr	r3, .L34+8
 400 0094 1A60     		str	r2, [r3]
1065:bluetooth_rxtx.c **** #endif
 401              		.loc 1 1065 2 view .LVU111
 402 0096 4FF48072 		mov	r2, #256
 403 009a 1A60     		str	r2, [r3]
 404              	.LVL41:
 405              	.L24:
1067:bluetooth_rxtx.c **** 
 406              		.loc 1 1067 1 is_stmt 0 view .LVU112
 407 009c 70BD     		pop	{r4, r5, r6, pc}
 408              	.LVL42:
 409              	.L29:
1004:bluetooth_rxtx.c **** 		grmdm = 0x0461; // un-buffered mode, packet w/ sync word detection
 410              		.loc 1 1004 11 view .LVU113
 411 009e 2925     		movs	r5, #41
1005:bluetooth_rxtx.c **** 		// 0 00 00 1 000 11 0 00 0 1
 412              		.loc 1 1005 9 view .LVU114
 413 00a0 40F26146 		movw	r6, #1121
 414 00a4 B8E7     		b	.L25
 415              	.L35:
 416 00a6 00BF     		.align	2
 417              	.L34:
 418 00a8 00000000 		.word	.LANCHOR1
 419 00ac 00000000 		.word	.LANCHOR0
 420 00b0 58C00920 		.word	537509976
 421              		.cfi_endproc
 422              	.LFE10:
 424              		.section	.text.enqueue,"ax",%progbits
 425              		.align	1
 426              		.syntax unified
 427              		.thumb
 428              		.thumb_func
 429              		.fpu softvfp
 431              	enqueue:
 432              	.LVL43:
ARM GAS  /tmp/ccwF1FQu.s 			page 37


 433              	.LFB0:
 132:bluetooth_rxtx.c **** 	usb_pkt_rx* f = usb_enqueue();
 434              		.loc 1 132 1 is_stmt 1 view -0
 435              		.cfi_startproc
 436              		@ args = 0, pretend = 0, frame = 0
 437              		@ frame_needed = 0, uses_anonymous_args = 0
 132:bluetooth_rxtx.c **** 	usb_pkt_rx* f = usb_enqueue();
 438              		.loc 1 132 1 is_stmt 0 view .LVU116
 439 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 440              		.cfi_def_cfa_offset 24
 441              		.cfi_offset 3, -24
 442              		.cfi_offset 4, -20
 443              		.cfi_offset 5, -16
 444              		.cfi_offset 6, -12
 445              		.cfi_offset 7, -8
 446              		.cfi_offset 14, -4
 133:bluetooth_rxtx.c **** 
 447              		.loc 1 133 2 is_stmt 1 view .LVU117
 132:bluetooth_rxtx.c **** 	usb_pkt_rx* f = usb_enqueue();
 448              		.loc 1 132 1 is_stmt 0 view .LVU118
 449 0002 0646     		mov	r6, r0
 450 0004 0F46     		mov	r7, r1
 133:bluetooth_rxtx.c **** 
 451              		.loc 1 133 18 view .LVU119
 452 0006 FFF7FEFF 		bl	usb_enqueue
 453              	.LVL44:
 136:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 454              		.loc 1 136 2 is_stmt 1 view .LVU120
 455 000a 1D4D     		ldr	r5, .L41
 136:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 456              		.loc 1 136 5 is_stmt 0 view .LVU121
 457 000c 0446     		mov	r4, r0
 458 000e 20B9     		cbnz	r0, .L37
 137:bluetooth_rxtx.c **** 		return 0;
 459              		.loc 1 137 3 is_stmt 1 view .LVU122
 137:bluetooth_rxtx.c **** 		return 0;
 460              		.loc 1 137 10 is_stmt 0 view .LVU123
 461 0010 6B78     		ldrb	r3, [r5, #1]	@ zero_extendqisi2
 462 0012 43F00403 		orr	r3, r3, #4
 463 0016 6B70     		strb	r3, [r5, #1]
 138:bluetooth_rxtx.c **** 	}
 464              		.loc 1 138 3 is_stmt 1 view .LVU124
 465              	.LVL45:
 466              	.L36:
 161:bluetooth_rxtx.c **** 
 467              		.loc 1 161 1 is_stmt 0 view .LVU125
 468 0018 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 469              	.LVL46:
 470              	.L37:
 141:bluetooth_rxtx.c **** 	if(type == SPECAN) {
 471              		.loc 1 141 2 is_stmt 1 view .LVU126
 142:bluetooth_rxtx.c **** 		f->clkn_high = (clkn >> 20) & 0xff;
 472              		.loc 1 142 4 is_stmt 0 view .LVU127
 473 001a 042E     		cmp	r6, #4
 141:bluetooth_rxtx.c **** 	if(type == SPECAN) {
 474              		.loc 1 141 14 view .LVU128
 475 001c 0670     		strb	r6, [r0]
ARM GAS  /tmp/ccwF1FQu.s 			page 38


 142:bluetooth_rxtx.c **** 		f->clkn_high = (clkn >> 20) & 0xff;
 476              		.loc 1 142 2 is_stmt 1 view .LVU129
 142:bluetooth_rxtx.c **** 		f->clkn_high = (clkn >> 20) & 0xff;
 477              		.loc 1 142 4 is_stmt 0 view .LVU130
 478 001e 19D1     		bne	.L39
 143:bluetooth_rxtx.c **** 		f->clk100ns = CLK100NS;
 479              		.loc 1 143 3 is_stmt 1 view .LVU131
 144:bluetooth_rxtx.c **** 	} else {
 480              		.loc 1 144 17 is_stmt 0 view .LVU132
 481 0020 40F63541 		movw	r1, #3125
 143:bluetooth_rxtx.c **** 		f->clk100ns = CLK100NS;
 482              		.loc 1 143 24 view .LVU133
 483 0024 174A     		ldr	r2, .L41+4
 484 0026 1368     		ldr	r3, [r2]
 485 0028 1B0D     		lsrs	r3, r3, #20
 143:bluetooth_rxtx.c **** 		f->clk100ns = CLK100NS;
 486              		.loc 1 143 16 view .LVU134
 487 002a C370     		strb	r3, [r0, #3]
 144:bluetooth_rxtx.c **** 	} else {
 488              		.loc 1 144 3 is_stmt 1 view .LVU135
 144:bluetooth_rxtx.c **** 	} else {
 489              		.loc 1 144 17 is_stmt 0 view .LVU136
 490 002c 1368     		ldr	r3, [r2]
 491 002e 164A     		ldr	r2, .L41+8
 492 0030 C3F31303 		ubfx	r3, r3, #0, #20
 493 0034 1268     		ldr	r2, [r2]
 494 0036 01FB0323 		mla	r3, r1, r3, r2
 144:bluetooth_rxtx.c **** 	} else {
 495              		.loc 1 144 15 view .LVU137
 496 003a 4360     		str	r3, [r0, #4]
 497              	.LVL47:
 498              	.L40:
 155:bluetooth_rxtx.c **** 
 499              		.loc 1 155 2 is_stmt 1 view .LVU138
 500 003c 3222     		movs	r2, #50
 501 003e 3946     		mov	r1, r7
 502 0040 04F10E00 		add	r0, r4, #14
 503 0044 FFF7FEFF 		bl	memcpy
 504              	.LVL48:
 157:bluetooth_rxtx.c **** 	status = 0;
 505              		.loc 1 157 2 view .LVU139
 157:bluetooth_rxtx.c **** 	status = 0;
 506              		.loc 1 157 12 is_stmt 0 view .LVU140
 507 0048 6B78     		ldrb	r3, [r5, #1]	@ zero_extendqisi2
 160:bluetooth_rxtx.c **** }
 508              		.loc 1 160 9 view .LVU141
 509 004a 0120     		movs	r0, #1
 157:bluetooth_rxtx.c **** 	status = 0;
 510              		.loc 1 157 12 view .LVU142
 511 004c 6370     		strb	r3, [r4, #1]
 158:bluetooth_rxtx.c **** 
 512              		.loc 1 158 2 is_stmt 1 view .LVU143
 158:bluetooth_rxtx.c **** 
 513              		.loc 1 158 9 is_stmt 0 view .LVU144
 514 004e 0023     		movs	r3, #0
 515 0050 6B70     		strb	r3, [r5, #1]
 160:bluetooth_rxtx.c **** }
ARM GAS  /tmp/ccwF1FQu.s 			page 39


 516              		.loc 1 160 2 is_stmt 1 view .LVU145
 160:bluetooth_rxtx.c **** }
 517              		.loc 1 160 9 is_stmt 0 view .LVU146
 518 0052 E1E7     		b	.L36
 519              	.LVL49:
 520              	.L39:
 146:bluetooth_rxtx.c **** 		f->clk100ns = idle_buf_clk100ns;
 521              		.loc 1 146 3 is_stmt 1 view .LVU147
 146:bluetooth_rxtx.c **** 		f->clk100ns = idle_buf_clk100ns;
 522              		.loc 1 146 16 is_stmt 0 view .LVU148
 523 0054 AB78     		ldrb	r3, [r5, #2]	@ zero_extendqisi2
 524 0056 C370     		strb	r3, [r0, #3]
 147:bluetooth_rxtx.c **** 		f->channel = (uint8_t)((idle_buf_channel - 2402) & 0xff);
 525              		.loc 1 147 3 is_stmt 1 view .LVU149
 147:bluetooth_rxtx.c **** 		f->channel = (uint8_t)((idle_buf_channel - 2402) & 0xff);
 526              		.loc 1 147 15 is_stmt 0 view .LVU150
 527 0058 6B68     		ldr	r3, [r5, #4]
 528 005a 4360     		str	r3, [r0, #4]
 148:bluetooth_rxtx.c **** 		f->rssi_min = rssi_min;
 529              		.loc 1 148 3 is_stmt 1 view .LVU151
 148:bluetooth_rxtx.c **** 		f->rssi_min = rssi_min;
 530              		.loc 1 148 16 is_stmt 0 view .LVU152
 531 005c 2B89     		ldrh	r3, [r5, #8]
 148:bluetooth_rxtx.c **** 		f->rssi_min = rssi_min;
 532              		.loc 1 148 44 view .LVU153
 533 005e 623B     		subs	r3, r3, #98
 148:bluetooth_rxtx.c **** 		f->rssi_min = rssi_min;
 534              		.loc 1 148 14 view .LVU154
 535 0060 8370     		strb	r3, [r0, #2]
 149:bluetooth_rxtx.c **** 		f->rssi_max = rssi_max;
 536              		.loc 1 149 3 is_stmt 1 view .LVU155
 149:bluetooth_rxtx.c **** 		f->rssi_max = rssi_max;
 537              		.loc 1 149 15 is_stmt 0 view .LVU156
 538 0062 0A4B     		ldr	r3, .L41+12
 539 0064 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 540 0066 4372     		strb	r3, [r0, #9]
 150:bluetooth_rxtx.c **** 		f->rssi_avg = rssi_get_avg(idle_buf_channel);
 541              		.loc 1 150 3 is_stmt 1 view .LVU157
 150:bluetooth_rxtx.c **** 		f->rssi_avg = rssi_get_avg(idle_buf_channel);
 542              		.loc 1 150 15 is_stmt 0 view .LVU158
 543 0068 094B     		ldr	r3, .L41+16
 544 006a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 545 006c 0372     		strb	r3, [r0, #8]
 151:bluetooth_rxtx.c **** 		f->rssi_count = rssi_count;
 546              		.loc 1 151 3 is_stmt 1 view .LVU159
 151:bluetooth_rxtx.c **** 		f->rssi_count = rssi_count;
 547              		.loc 1 151 17 is_stmt 0 view .LVU160
 548 006e 2889     		ldrh	r0, [r5, #8]
 549              	.LVL50:
 151:bluetooth_rxtx.c **** 		f->rssi_count = rssi_count;
 550              		.loc 1 151 17 view .LVU161
 551 0070 80B2     		uxth	r0, r0
 552 0072 FFF7FEFF 		bl	rssi_get_avg
 553              	.LVL51:
 152:bluetooth_rxtx.c **** 	}
 554              		.loc 1 152 17 view .LVU162
 555 0076 074B     		ldr	r3, .L41+20
ARM GAS  /tmp/ccwF1FQu.s 			page 40


 151:bluetooth_rxtx.c **** 		f->rssi_count = rssi_count;
 556              		.loc 1 151 15 view .LVU163
 557 0078 A072     		strb	r0, [r4, #10]
 152:bluetooth_rxtx.c **** 	}
 558              		.loc 1 152 3 is_stmt 1 view .LVU164
 152:bluetooth_rxtx.c **** 	}
 559              		.loc 1 152 17 is_stmt 0 view .LVU165
 560 007a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 561 007c E372     		strb	r3, [r4, #11]
 562 007e DDE7     		b	.L40
 563              	.L42:
 564              		.align	2
 565              	.L41:
 566 0080 00000000 		.word	.LANCHOR1
 567 0084 00000000 		.word	clkn
 568 0088 08400040 		.word	1073758216
 569 008c 00000000 		.word	rssi_min
 570 0090 00000000 		.word	rssi_max
 571 0094 00000000 		.word	rssi_count
 572              		.cfi_endproc
 573              	.LFE0:
 575              		.section	.text.cc2400_idle,"ax",%progbits
 576              		.align	1
 577              		.syntax unified
 578              		.thumb
 579              		.thumb_func
 580              		.fpu softvfp
 582              	cc2400_idle:
 583              	.LFB8:
 906:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 584              		.loc 1 906 1 is_stmt 1 view -0
 585              		.cfi_startproc
 586              		@ args = 0, pretend = 0, frame = 0
 587              		@ frame_needed = 0, uses_anonymous_args = 0
 588 0000 10B5     		push	{r4, lr}
 589              		.cfi_def_cfa_offset 8
 590              		.cfi_offset 4, -8
 591              		.cfi_offset 14, -4
 907:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 592              		.loc 1 907 2 view .LVU167
 593 0002 6420     		movs	r0, #100
 594 0004 FFF7FEFF 		bl	cc2400_strobe
 595              	.LVL52:
 908:bluetooth_rxtx.c **** 
 596              		.loc 1 908 2 view .LVU168
 597              	.L44:
 908:bluetooth_rxtx.c **** 
 598              		.loc 1 908 37 discriminator 1 view .LVU169
 908:bluetooth_rxtx.c **** 
 599              		.loc 1 908 8 discriminator 1 view .LVU170
 908:bluetooth_rxtx.c **** 
 600              		.loc 1 908 10 is_stmt 0 discriminator 1 view .LVU171
 601 0008 FFF7FEFF 		bl	cc2400_status
 602              	.LVL53:
 908:bluetooth_rxtx.c **** 
 603              		.loc 1 908 8 discriminator 1 view .LVU172
 604 000c 10F00404 		ands	r4, r0, #4
ARM GAS  /tmp/ccwF1FQu.s 			page 41


 605 0010 FAD1     		bne	.L44
 911:bluetooth_rxtx.c **** 	HGM_CLR;
 606              		.loc 1 911 2 is_stmt 1 view .LVU173
 607 0012 8022     		movs	r2, #128
 608 0014 214B     		ldr	r3, .L46
 915:bluetooth_rxtx.c **** 	TXLED_CLR;
 609              		.loc 1 915 2 is_stmt 0 view .LVU174
 610 0016 1021     		movs	r1, #16
 911:bluetooth_rxtx.c **** 	HGM_CLR;
 611              		.loc 1 911 2 view .LVU175
 612 0018 1A60     		str	r2, [r3]
 912:bluetooth_rxtx.c **** #endif
 613              		.loc 1 912 2 is_stmt 1 view .LVU176
 614 001a 4FF48072 		mov	r2, #256
 615 001e 1A60     		str	r2, [r3]
 915:bluetooth_rxtx.c **** 	TXLED_CLR;
 616              		.loc 1 915 2 view .LVU177
 617 0020 43F8201C 		str	r1, [r3, #-32]
 916:bluetooth_rxtx.c **** 	USRLED_CLR;
 618              		.loc 1 916 2 view .LVU178
 619 0024 43F8202C 		str	r2, [r3, #-32]
 917:bluetooth_rxtx.c **** 
 620              		.loc 1 917 2 view .LVU179
 621 0028 0222     		movs	r2, #2
 622 002a 43F8202C 		str	r2, [r3, #-32]
 919:bluetooth_rxtx.c **** 	dio_ssp_stop();
 623              		.loc 1 919 2 view .LVU180
 624 002e FFF7FEFF 		bl	clkn_stop
 625              	.LVL54:
 920:bluetooth_rxtx.c **** 	cs_reset();
 626              		.loc 1 920 2 view .LVU181
 627 0032 FFF7FEFF 		bl	dio_ssp_stop
 628              	.LVL55:
 921:bluetooth_rxtx.c **** 	rssi_reset();
 629              		.loc 1 921 2 view .LVU182
 630 0036 FFF7FEFF 		bl	cs_reset
 631              	.LVL56:
 922:bluetooth_rxtx.c **** 
 632              		.loc 1 922 2 view .LVU183
 633 003a FFF7FEFF 		bl	rssi_reset
 634              	.LVL57:
 925:bluetooth_rxtx.c **** 	do_hop = 0;
 635              		.loc 1 925 2 view .LVU184
 927:bluetooth_rxtx.c **** 	hop_direct_channel = 0;
 636              		.loc 1 927 10 is_stmt 0 view .LVU185
 637 003e 40F68911 		movw	r1, #2441
 925:bluetooth_rxtx.c **** 	do_hop = 0;
 638              		.loc 1 925 11 view .LVU186
 639 0042 174B     		ldr	r3, .L46+4
 927:bluetooth_rxtx.c **** 	hop_direct_channel = 0;
 640              		.loc 1 927 10 view .LVU187
 641 0044 174A     		ldr	r2, .L46+8
 925:bluetooth_rxtx.c **** 	do_hop = 0;
 642              		.loc 1 925 11 view .LVU188
 643 0046 9C72     		strb	r4, [r3, #10]
 926:bluetooth_rxtx.c **** 	channel = 2441;
 644              		.loc 1 926 2 is_stmt 1 view .LVU189
ARM GAS  /tmp/ccwF1FQu.s 			page 42


 926:bluetooth_rxtx.c **** 	channel = 2441;
 645              		.loc 1 926 9 is_stmt 0 view .LVU190
 646 0048 DC72     		strb	r4, [r3, #11]
 927:bluetooth_rxtx.c **** 	hop_direct_channel = 0;
 647              		.loc 1 927 2 is_stmt 1 view .LVU191
 927:bluetooth_rxtx.c **** 	hop_direct_channel = 0;
 648              		.loc 1 927 10 is_stmt 0 view .LVU192
 649 004a A2F84C10 		strh	r1, [r2, #76]	@ movhi
 928:bluetooth_rxtx.c **** 	hop_timeout = 158;
 650              		.loc 1 928 2 is_stmt 1 view .LVU193
 929:bluetooth_rxtx.c **** 	requested_channel = 0;
 651              		.loc 1 929 14 is_stmt 0 view .LVU194
 652 004e 9E21     		movs	r1, #158
 928:bluetooth_rxtx.c **** 	hop_timeout = 158;
 653              		.loc 1 928 21 view .LVU195
 654 0050 9C81     		strh	r4, [r3, #12]	@ movhi
 929:bluetooth_rxtx.c **** 	requested_channel = 0;
 655              		.loc 1 929 2 is_stmt 1 view .LVU196
 929:bluetooth_rxtx.c **** 	requested_channel = 0;
 656              		.loc 1 929 14 is_stmt 0 view .LVU197
 657 0052 A2F84E10 		strh	r1, [r2, #78]	@ movhi
 930:bluetooth_rxtx.c **** 	le_adv_channel = 2402;
 658              		.loc 1 930 2 is_stmt 1 view .LVU198
 931:bluetooth_rxtx.c **** 
 659              		.loc 1 931 17 is_stmt 0 view .LVU199
 660 0056 40F66211 		movw	r1, #2402
 930:bluetooth_rxtx.c **** 	le_adv_channel = 2402;
 661              		.loc 1 930 20 view .LVU200
 662 005a DC81     		strh	r4, [r3, #14]	@ movhi
 931:bluetooth_rxtx.c **** 
 663              		.loc 1 931 2 is_stmt 1 view .LVU201
 931:bluetooth_rxtx.c **** 
 664              		.loc 1 931 17 is_stmt 0 view .LVU202
 665 005c A2F85010 		strh	r1, [r2, #80]	@ movhi
 935:bluetooth_rxtx.c **** 	idle_buf_clk100ns = 0;
 666              		.loc 1 935 2 is_stmt 1 view .LVU203
 935:bluetooth_rxtx.c **** 	idle_buf_clk100ns = 0;
 667              		.loc 1 935 21 is_stmt 0 view .LVU204
 668 0060 9C70     		strb	r4, [r3, #2]
 936:bluetooth_rxtx.c **** 	idle_buf_channel = 0;
 669              		.loc 1 936 2 is_stmt 1 view .LVU205
 936:bluetooth_rxtx.c **** 	idle_buf_channel = 0;
 670              		.loc 1 936 20 is_stmt 0 view .LVU206
 671 0062 5C60     		str	r4, [r3, #4]
 937:bluetooth_rxtx.c **** 	dma_discard = 0;
 672              		.loc 1 937 2 is_stmt 1 view .LVU207
 937:bluetooth_rxtx.c **** 	dma_discard = 0;
 673              		.loc 1 937 19 is_stmt 0 view .LVU208
 674 0064 1C81     		strh	r4, [r3, #8]	@ movhi
 938:bluetooth_rxtx.c **** 	status = 0;
 675              		.loc 1 938 2 is_stmt 1 view .LVU209
 938:bluetooth_rxtx.c **** 	status = 0;
 676              		.loc 1 938 14 is_stmt 0 view .LVU210
 677 0066 1C74     		strb	r4, [r3, #16]
 939:bluetooth_rxtx.c **** 
 678              		.loc 1 939 2 is_stmt 1 view .LVU211
 939:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccwF1FQu.s 			page 43


 679              		.loc 1 939 9 is_stmt 0 view .LVU212
 680 0068 5C70     		strb	r4, [r3, #1]
 942:bluetooth_rxtx.c **** 	requested_mode = MODE_IDLE;
 681              		.loc 1 942 2 is_stmt 1 view .LVU213
 942:bluetooth_rxtx.c **** 	requested_mode = MODE_IDLE;
 682              		.loc 1 942 7 is_stmt 0 view .LVU214
 683 006a 5C74     		strb	r4, [r3, #17]
 943:bluetooth_rxtx.c **** 	jam_mode = JAM_NONE;
 684              		.loc 1 943 2 is_stmt 1 view .LVU215
 943:bluetooth_rxtx.c **** 	jam_mode = JAM_NONE;
 685              		.loc 1 943 17 is_stmt 0 view .LVU216
 686 006c 9C74     		strb	r4, [r3, #18]
 944:bluetooth_rxtx.c **** 	ego_mode = EGO_FOLLOW;
 687              		.loc 1 944 2 is_stmt 1 view .LVU217
 944:bluetooth_rxtx.c **** 	ego_mode = EGO_FOLLOW;
 688              		.loc 1 944 11 is_stmt 0 view .LVU218
 689 006e DC74     		strb	r4, [r3, #19]
 945:bluetooth_rxtx.c **** 
 690              		.loc 1 945 2 is_stmt 1 view .LVU219
 945:bluetooth_rxtx.c **** 
 691              		.loc 1 945 11 is_stmt 0 view .LVU220
 692 0070 1C75     		strb	r4, [r3, #20]
 947:bluetooth_rxtx.c **** 
 693              		.loc 1 947 2 is_stmt 1 view .LVU221
 947:bluetooth_rxtx.c **** 
 694              		.loc 1 947 13 is_stmt 0 view .LVU222
 695 0072 1C70     		strb	r4, [r3]
 950:bluetooth_rxtx.c **** 	high_freq = 2483;
 696              		.loc 1 950 2 is_stmt 1 view .LVU223
 950:bluetooth_rxtx.c **** 	high_freq = 2483;
 697              		.loc 1 950 11 is_stmt 0 view .LVU224
 698 0074 4FF41663 		mov	r3, #2400
 699 0078 A2F85230 		strh	r3, [r2, #82]	@ movhi
 951:bluetooth_rxtx.c **** 	rssi_threshold = -30;
 700              		.loc 1 951 2 is_stmt 1 view .LVU225
 951:bluetooth_rxtx.c **** 	rssi_threshold = -30;
 701              		.loc 1 951 12 is_stmt 0 view .LVU226
 702 007c 40F6B313 		movw	r3, #2483
 703 0080 A2F85430 		strh	r3, [r2, #84]	@ movhi
 952:bluetooth_rxtx.c **** 
 704              		.loc 1 952 2 is_stmt 1 view .LVU227
 952:bluetooth_rxtx.c **** 
 705              		.loc 1 952 17 is_stmt 0 view .LVU228
 706 0084 E223     		movs	r3, #226
 954:bluetooth_rxtx.c **** 	target.syncword = 0;
 707              		.loc 1 954 17 view .LVU229
 708 0086 0020     		movs	r0, #0
 709 0088 0021     		movs	r1, #0
 952:bluetooth_rxtx.c **** 
 710              		.loc 1 952 17 view .LVU230
 711 008a 82F85630 		strb	r3, [r2, #86]
 954:bluetooth_rxtx.c **** 	target.syncword = 0;
 712              		.loc 1 954 2 is_stmt 1 view .LVU231
 954:bluetooth_rxtx.c **** 	target.syncword = 0;
 713              		.loc 1 954 17 is_stmt 0 view .LVU232
 714 008e 064B     		ldr	r3, .L46+12
 715 0090 C3E90001 		strd	r0, [r3]
ARM GAS  /tmp/ccwF1FQu.s 			page 44


 955:bluetooth_rxtx.c **** }
 716              		.loc 1 955 2 is_stmt 1 view .LVU233
 955:bluetooth_rxtx.c **** }
 717              		.loc 1 955 18 is_stmt 0 view .LVU234
 718 0094 C3E90201 		strd	r0, [r3, #8]
 956:bluetooth_rxtx.c **** 
 719              		.loc 1 956 1 view .LVU235
 720 0098 10BD     		pop	{r4, pc}
 721              	.L47:
 722 009a 00BF     		.align	2
 723              	.L46:
 724 009c 5CC00920 		.word	537509980
 725 00a0 00000000 		.word	.LANCHOR1
 726 00a4 00000000 		.word	.LANCHOR0
 727 00a8 00000000 		.word	target
 728              		.cfi_endproc
 729              	.LFE8:
 731              		.section	.text.cb_follow_le,"ax",%progbits
 732              		.align	1
 733              		.global	cb_follow_le
 734              		.syntax unified
 735              		.thumb
 736              		.thumb_func
 737              		.fpu softvfp
 739              	cb_follow_le:
 740              	.LFB24:
1543:bluetooth_rxtx.c **** 
1544:bluetooth_rxtx.c **** /* reset le state, called by bt_generic_le and bt_follow_le() */
1545:bluetooth_rxtx.c **** void reset_le() {
1546:bluetooth_rxtx.c **** 	le_set_access_address(0x8e89bed6);     // advertising channel access address
1547:bluetooth_rxtx.c **** 	le.crc_init  = 0x555555;               // advertising channel CRCInit
1548:bluetooth_rxtx.c **** 	le.crc_init_reversed = 0xAAAAAA;
1549:bluetooth_rxtx.c **** 	le.crc_verify = 0;
1550:bluetooth_rxtx.c **** 	le.last_packet = 0;
1551:bluetooth_rxtx.c **** 
1552:bluetooth_rxtx.c **** 	le.link_state = LINK_INACTIVE;
1553:bluetooth_rxtx.c **** 
1554:bluetooth_rxtx.c **** 	le.channel_idx = 0;
1555:bluetooth_rxtx.c **** 	le.channel_increment = 0;
1556:bluetooth_rxtx.c **** 
1557:bluetooth_rxtx.c **** 	le.conn_epoch = 0;
1558:bluetooth_rxtx.c **** 	le.interval_timer = 0;
1559:bluetooth_rxtx.c **** 	le.conn_interval = 0;
1560:bluetooth_rxtx.c **** 	le.conn_interval = 0;
1561:bluetooth_rxtx.c **** 	le.conn_count = 0;
1562:bluetooth_rxtx.c **** 
1563:bluetooth_rxtx.c **** 	le.win_size = 0;
1564:bluetooth_rxtx.c **** 	le.win_offset = 0;
1565:bluetooth_rxtx.c **** 
1566:bluetooth_rxtx.c **** 	le.update_pending = 0;
1567:bluetooth_rxtx.c **** 	le.update_instant = 0;
1568:bluetooth_rxtx.c **** 	le.interval_update = 0;
1569:bluetooth_rxtx.c **** 	le.win_size_update = 0;
1570:bluetooth_rxtx.c **** 	le.win_offset_update = 0;
1571:bluetooth_rxtx.c **** 
1572:bluetooth_rxtx.c **** 	do_hop = 0;
1573:bluetooth_rxtx.c **** }
ARM GAS  /tmp/ccwF1FQu.s 			page 45


1574:bluetooth_rxtx.c **** 
1575:bluetooth_rxtx.c **** // reset LE Promisc state
1576:bluetooth_rxtx.c **** void reset_le_promisc(void) {
1577:bluetooth_rxtx.c **** 	memset(&le_promisc, 0, sizeof(le_promisc));
1578:bluetooth_rxtx.c **** 	le_promisc.smallest_hop_interval = 0xffffffff;
1579:bluetooth_rxtx.c **** }
1580:bluetooth_rxtx.c **** 
1581:bluetooth_rxtx.c **** /* generic le mode */
1582:bluetooth_rxtx.c **** void bt_generic_le(u8 active_mode)
1583:bluetooth_rxtx.c **** {
1584:bluetooth_rxtx.c **** 	u8 hold;
1585:bluetooth_rxtx.c **** 	int i, j;
1586:bluetooth_rxtx.c **** 	int8_t rssi, rssi_at_trigger;
1587:bluetooth_rxtx.c **** 
1588:bluetooth_rxtx.c **** 	modulation = MOD_BT_LOW_ENERGY;
1589:bluetooth_rxtx.c **** 	mode = active_mode;
1590:bluetooth_rxtx.c **** 
1591:bluetooth_rxtx.c **** 	reset_le();
1592:bluetooth_rxtx.c **** 
1593:bluetooth_rxtx.c **** 	// enable USB interrupts
1594:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_USB;
1595:bluetooth_rxtx.c **** 
1596:bluetooth_rxtx.c **** 	RXLED_CLR;
1597:bluetooth_rxtx.c **** 
1598:bluetooth_rxtx.c **** 	usb_queue_init();
1599:bluetooth_rxtx.c **** 	dio_ssp_init();
1600:bluetooth_rxtx.c **** 	dma_init_rx_symbols();
1601:bluetooth_rxtx.c **** 	dio_ssp_start();
1602:bluetooth_rxtx.c **** 	cc2400_rx();
1603:bluetooth_rxtx.c **** 
1604:bluetooth_rxtx.c **** 	cs_trigger_enable();
1605:bluetooth_rxtx.c **** 
1606:bluetooth_rxtx.c **** 	hold = 0;
1607:bluetooth_rxtx.c **** 
1608:bluetooth_rxtx.c **** 	while (requested_mode == active_mode) {
1609:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
1610:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
1611:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
1612:bluetooth_rxtx.c **** 
1613:bluetooth_rxtx.c **** 			/* Retune */
1614:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, channel - 1);
1615:bluetooth_rxtx.c **** 
1616:bluetooth_rxtx.c **** 			/* Wait for lock */
1617:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
1618:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
1619:bluetooth_rxtx.c **** 
1620:bluetooth_rxtx.c **** 			/* RX mode */
1621:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
1622:bluetooth_rxtx.c **** 
1623:bluetooth_rxtx.c **** 			requested_channel = 0;
1624:bluetooth_rxtx.c **** 		}
1625:bluetooth_rxtx.c **** 
1626:bluetooth_rxtx.c **** 		if (do_hop) {
1627:bluetooth_rxtx.c **** 			hop();
1628:bluetooth_rxtx.c **** 		} else {
1629:bluetooth_rxtx.c **** 			TXLED_CLR;
1630:bluetooth_rxtx.c **** 		}
ARM GAS  /tmp/ccwF1FQu.s 			page 46


1631:bluetooth_rxtx.c **** 
1632:bluetooth_rxtx.c **** 		RXLED_CLR;
1633:bluetooth_rxtx.c **** 
1634:bluetooth_rxtx.c **** 		/* Wait for DMA. Meanwhile keep track of RSSI. */
1635:bluetooth_rxtx.c **** 		rssi_reset();
1636:bluetooth_rxtx.c **** 		rssi_at_trigger = INT8_MIN;
1637:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0))
1638:bluetooth_rxtx.c **** 		{
1639:bluetooth_rxtx.c **** 			rssi = (int8_t)(cc2400_get(RSSI) >> 8);
1640:bluetooth_rxtx.c **** 			if (cs_trigger && (rssi_at_trigger == INT8_MIN)) {
1641:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
1642:bluetooth_rxtx.c **** 				rssi_at_trigger = rssi;
1643:bluetooth_rxtx.c **** 			}
1644:bluetooth_rxtx.c **** 			rssi_add(rssi);
1645:bluetooth_rxtx.c **** 		}
1646:bluetooth_rxtx.c **** 
1647:bluetooth_rxtx.c **** 		if (rx_err) {
1648:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
1649:bluetooth_rxtx.c **** 		}
1650:bluetooth_rxtx.c **** 
1651:bluetooth_rxtx.c **** 		/* No DMA transfer? */
1652:bluetooth_rxtx.c **** 		if (!rx_tc)
1653:bluetooth_rxtx.c **** 			goto rx_continue;
1654:bluetooth_rxtx.c **** 
1655:bluetooth_rxtx.c **** 		/* Missed a DMA trasfer? */
1656:bluetooth_rxtx.c **** 		if (rx_tc > 1)
1657:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
1658:bluetooth_rxtx.c **** 
1659:bluetooth_rxtx.c **** 		rssi_iir_update(channel);
1660:bluetooth_rxtx.c **** 
1661:bluetooth_rxtx.c **** 		/* Set squelch hold if there was either a CS trigger, squelch
1662:bluetooth_rxtx.c **** 		 * is disabled, or if the current rssi_max is above the same
1663:bluetooth_rxtx.c **** 		 * threshold. Currently, this is redundant, but allows for
1664:bluetooth_rxtx.c **** 		 * per-channel or other rssi triggers in the future. */
1665:bluetooth_rxtx.c **** 		if (cs_trigger || cs_no_squelch) {
1666:bluetooth_rxtx.c **** 			status |= CS_TRIGGER;
1667:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
1668:bluetooth_rxtx.c **** 			cs_trigger = 0;
1669:bluetooth_rxtx.c **** 		}
1670:bluetooth_rxtx.c **** 
1671:bluetooth_rxtx.c **** 		if (rssi_max >= (cs_threshold_cur + 54)) {
1672:bluetooth_rxtx.c **** 			status |= RSSI_TRIGGER;
1673:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
1674:bluetooth_rxtx.c **** 		}
1675:bluetooth_rxtx.c **** 
1676:bluetooth_rxtx.c **** 		/* Hold expired? Ignore data. */
1677:bluetooth_rxtx.c **** 		if (hold == 0) {
1678:bluetooth_rxtx.c **** 			goto rx_continue;
1679:bluetooth_rxtx.c **** 		}
1680:bluetooth_rxtx.c **** 		hold--;
1681:bluetooth_rxtx.c **** 
1682:bluetooth_rxtx.c **** 		// copy the previously unpacked symbols to the front of the buffer
1683:bluetooth_rxtx.c **** 		memcpy(unpacked, unpacked + DMA_SIZE*8, DMA_SIZE*8);
1684:bluetooth_rxtx.c **** 
1685:bluetooth_rxtx.c **** 		// unpack the new packet to the end of the buffer
1686:bluetooth_rxtx.c **** 		for (i = 0; i < DMA_SIZE; ++i) {
1687:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
ARM GAS  /tmp/ccwF1FQu.s 			page 47


1688:bluetooth_rxtx.c **** 			for (j = 0; j < 8; ++j) {
1689:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
1690:bluetooth_rxtx.c **** 				idle_rxbuf[i] <<= 1;
1691:bluetooth_rxtx.c **** 			}
1692:bluetooth_rxtx.c **** 		}
1693:bluetooth_rxtx.c **** 
1694:bluetooth_rxtx.c **** 		int ret = data_cb(unpacked);
1695:bluetooth_rxtx.c **** 		if (!ret) break;
1696:bluetooth_rxtx.c **** 
1697:bluetooth_rxtx.c **** 	rx_continue:
1698:bluetooth_rxtx.c **** 		rx_tc = 0;
1699:bluetooth_rxtx.c **** 		rx_err = 0;
1700:bluetooth_rxtx.c **** 	}
1701:bluetooth_rxtx.c **** 
1702:bluetooth_rxtx.c **** 	// disable USB interrupts
1703:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_USB;
1704:bluetooth_rxtx.c **** 
1705:bluetooth_rxtx.c **** 	// reset the radio completely
1706:bluetooth_rxtx.c **** 	cc2400_idle();
1707:bluetooth_rxtx.c **** 	dio_ssp_stop();
1708:bluetooth_rxtx.c **** 	cs_trigger_disable();
1709:bluetooth_rxtx.c **** }
1710:bluetooth_rxtx.c **** 
1711:bluetooth_rxtx.c **** 
1712:bluetooth_rxtx.c **** void bt_le_sync(u8 active_mode)
1713:bluetooth_rxtx.c **** {
1714:bluetooth_rxtx.c **** 	int i;
1715:bluetooth_rxtx.c **** 	int8_t rssi;
1716:bluetooth_rxtx.c **** 	static int restart_jamming = 0;
1717:bluetooth_rxtx.c **** 
1718:bluetooth_rxtx.c **** 	modulation = MOD_BT_LOW_ENERGY;
1719:bluetooth_rxtx.c **** 	mode = active_mode;
1720:bluetooth_rxtx.c **** 
1721:bluetooth_rxtx.c **** 	le.link_state = LINK_LISTENING;
1722:bluetooth_rxtx.c **** 
1723:bluetooth_rxtx.c **** 	// enable USB interrupts
1724:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_USB;
1725:bluetooth_rxtx.c **** 
1726:bluetooth_rxtx.c **** 	RXLED_CLR;
1727:bluetooth_rxtx.c **** 
1728:bluetooth_rxtx.c **** 	usb_queue_init();
1729:bluetooth_rxtx.c **** 	dio_ssp_init();
1730:bluetooth_rxtx.c **** 	dma_init_le();
1731:bluetooth_rxtx.c **** 	dio_ssp_start();
1732:bluetooth_rxtx.c **** 
1733:bluetooth_rxtx.c **** 	cc2400_rx_sync(rbit(le.access_address)); // bit-reversed access address
1734:bluetooth_rxtx.c **** 
1735:bluetooth_rxtx.c **** 	while (requested_mode == active_mode) {
1736:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
1737:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
1738:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
1739:bluetooth_rxtx.c **** 
1740:bluetooth_rxtx.c **** 			/* Retune */
1741:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, channel - 1);
1742:bluetooth_rxtx.c **** 
1743:bluetooth_rxtx.c **** 			/* Wait for lock */
1744:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
ARM GAS  /tmp/ccwF1FQu.s 			page 48


1745:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
1746:bluetooth_rxtx.c **** 
1747:bluetooth_rxtx.c **** 			/* RX mode */
1748:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
1749:bluetooth_rxtx.c **** 
1750:bluetooth_rxtx.c **** 			requested_channel = 0;
1751:bluetooth_rxtx.c **** 		}
1752:bluetooth_rxtx.c **** 
1753:bluetooth_rxtx.c **** 		RXLED_CLR;
1754:bluetooth_rxtx.c **** 
1755:bluetooth_rxtx.c **** 		/* Wait for DMA. Meanwhile keep track of RSSI. */
1756:bluetooth_rxtx.c **** 		rssi_reset();
1757:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0) && (do_hop == 0) && requested_mode == active_mode)
1758:bluetooth_rxtx.c **** 			;
1759:bluetooth_rxtx.c **** 
1760:bluetooth_rxtx.c **** 		rssi = (int8_t)(cc2400_get(RSSI) >> 8);
1761:bluetooth_rxtx.c **** 		rssi_min = rssi_max = rssi;
1762:bluetooth_rxtx.c **** 
1763:bluetooth_rxtx.c **** 		if (requested_mode != active_mode) {
1764:bluetooth_rxtx.c **** 			goto cleanup;
1765:bluetooth_rxtx.c **** 		}
1766:bluetooth_rxtx.c **** 
1767:bluetooth_rxtx.c **** 		if (rx_err) {
1768:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
1769:bluetooth_rxtx.c **** 		}
1770:bluetooth_rxtx.c **** 
1771:bluetooth_rxtx.c **** 		if (do_hop)
1772:bluetooth_rxtx.c **** 			goto rx_flush;
1773:bluetooth_rxtx.c **** 
1774:bluetooth_rxtx.c **** 		/* No DMA transfer? */
1775:bluetooth_rxtx.c **** 		if (!rx_tc)
1776:bluetooth_rxtx.c **** 			continue;
1777:bluetooth_rxtx.c **** 
1778:bluetooth_rxtx.c **** 		/////////////////////
1779:bluetooth_rxtx.c **** 		// process the packet
1780:bluetooth_rxtx.c **** 
1781:bluetooth_rxtx.c **** 		uint32_t packet[48/4+1] = { 0, };
1782:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
1783:bluetooth_rxtx.c **** 		packet[0] = le.access_address;
1784:bluetooth_rxtx.c **** 
1785:bluetooth_rxtx.c **** 		const uint32_t *whit = whitening_word[btle_channel_index(channel)];
1786:bluetooth_rxtx.c **** 		for (i = 0; i < 4; i+= 4) {
1787:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
1788:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
1789:bluetooth_rxtx.c **** 					   | rxbuf1[i+2] << 8
1790:bluetooth_rxtx.c **** 					   | rxbuf1[i+3] << 0;
1791:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
1792:bluetooth_rxtx.c **** 		}
1793:bluetooth_rxtx.c **** 
1794:bluetooth_rxtx.c **** 		unsigned len = (p[5] & 0x3f) + 2;
1795:bluetooth_rxtx.c **** 		if (len > 39)
1796:bluetooth_rxtx.c **** 			goto rx_flush;
1797:bluetooth_rxtx.c **** 
1798:bluetooth_rxtx.c **** 		// transfer the minimum number of bytes from the CC2400
1799:bluetooth_rxtx.c **** 		// this allows us enough time to resume RX for subsequent packets on the same channel
1800:bluetooth_rxtx.c **** 		unsigned total_transfers = ((len + 3) + 4 - 1) / 4;
1801:bluetooth_rxtx.c **** 		if (total_transfers < 11) {
ARM GAS  /tmp/ccwF1FQu.s 			page 49


1802:bluetooth_rxtx.c **** 			while (DMACC0DestAddr < (uint32_t)rxbuf1 + 4 * total_transfers && rx_err == 0)
1803:bluetooth_rxtx.c **** 				;
1804:bluetooth_rxtx.c **** 		} else { // max transfers? just wait till DMA's done
1805:bluetooth_rxtx.c **** 			while (DMACC0Config & DMACCxConfig_E && rx_err == 0)
1806:bluetooth_rxtx.c **** 				;
1807:bluetooth_rxtx.c **** 		}
1808:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
1809:bluetooth_rxtx.c **** 
1810:bluetooth_rxtx.c **** 		// strobe SFSON to allow the resync to occur while we process the packet
1811:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
1812:bluetooth_rxtx.c **** 
1813:bluetooth_rxtx.c **** 		// unwhiten the rest of the packet
1814:bluetooth_rxtx.c **** 		for (i = 4; i < 44; i += 4) {
1815:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
1816:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
1817:bluetooth_rxtx.c **** 					   | rxbuf1[i+2] << 8
1818:bluetooth_rxtx.c **** 					   | rxbuf1[i+3] << 0;
1819:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
1820:bluetooth_rxtx.c **** 		}
1821:bluetooth_rxtx.c **** 
1822:bluetooth_rxtx.c **** 		if (le.crc_verify) {
1823:bluetooth_rxtx.c **** 			u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, p + 4, len);
1824:bluetooth_rxtx.c **** 			u32 wire_crc = (p[4+len+2] << 16)
1825:bluetooth_rxtx.c **** 						 | (p[4+len+1] << 8)
1826:bluetooth_rxtx.c **** 						 | (p[4+len+0] << 0);
1827:bluetooth_rxtx.c **** 			if (calc_crc != wire_crc) // skip packets with a bad CRC
1828:bluetooth_rxtx.c **** 				goto rx_flush;
1829:bluetooth_rxtx.c **** 		}
1830:bluetooth_rxtx.c **** 
1831:bluetooth_rxtx.c **** 
1832:bluetooth_rxtx.c **** 		RXLED_SET;
1833:bluetooth_rxtx.c **** 		packet_cb((uint8_t *)packet);
1834:bluetooth_rxtx.c **** 
1835:bluetooth_rxtx.c **** 		// disable USB interrupts while we touch USB data structures
1836:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_USB;
1837:bluetooth_rxtx.c **** 		enqueue(LE_PACKET, (uint8_t *)packet);
1838:bluetooth_rxtx.c **** 		ISER0 = ISER0_ISE_USB;
1839:bluetooth_rxtx.c **** 
1840:bluetooth_rxtx.c **** 		le.last_packet = CLK100NS;
1841:bluetooth_rxtx.c **** 
1842:bluetooth_rxtx.c **** 	rx_flush:
1843:bluetooth_rxtx.c **** 		// this might happen twice, but it's safe to do so
1844:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
1845:bluetooth_rxtx.c **** 
1846:bluetooth_rxtx.c **** 		// flush any excess bytes from the SSP's buffer
1847:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
1848:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
1849:bluetooth_rxtx.c **** 			u8 tmp = (u8)DIO_SSP_DR;
1850:bluetooth_rxtx.c **** 		}
1851:bluetooth_rxtx.c **** 
1852:bluetooth_rxtx.c **** 		// timeout - FIXME this is an ugly hack
1853:bluetooth_rxtx.c **** 		u32 now = CLK100NS;
1854:bluetooth_rxtx.c **** 		if (now < le.last_packet)
1855:bluetooth_rxtx.c **** 			now += 3276800000; // handle rollover
1856:bluetooth_rxtx.c **** 		if  ( // timeout
1857:bluetooth_rxtx.c **** 			((le.link_state == LINK_CONNECTED || le.link_state == LINK_CONN_PENDING)
1858:bluetooth_rxtx.c **** 			&& (now - le.last_packet > 50000000))
ARM GAS  /tmp/ccwF1FQu.s 			page 50


1859:bluetooth_rxtx.c **** 			// jam finished
1860:bluetooth_rxtx.c **** 			|| (le_jam_count == 1)
1861:bluetooth_rxtx.c **** 			)
1862:bluetooth_rxtx.c **** 		{
1863:bluetooth_rxtx.c **** 			reset_le();
1864:bluetooth_rxtx.c **** 			le_jam_count = 0;
1865:bluetooth_rxtx.c **** 			TXLED_CLR;
1866:bluetooth_rxtx.c **** 
1867:bluetooth_rxtx.c **** 			if (jam_mode == JAM_ONCE) {
1868:bluetooth_rxtx.c **** 				jam_mode = JAM_NONE;
1869:bluetooth_rxtx.c **** 				requested_mode = MODE_IDLE;
1870:bluetooth_rxtx.c **** 				goto cleanup;
1871:bluetooth_rxtx.c **** 			}
1872:bluetooth_rxtx.c **** 
1873:bluetooth_rxtx.c **** 			// go back to promisc if the connection dies
1874:bluetooth_rxtx.c **** 			if (active_mode == MODE_BT_PROMISC_LE)
1875:bluetooth_rxtx.c **** 				goto cleanup;
1876:bluetooth_rxtx.c **** 
1877:bluetooth_rxtx.c **** 			le.link_state = LINK_LISTENING;
1878:bluetooth_rxtx.c **** 
1879:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
1880:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
1881:bluetooth_rxtx.c **** 
1882:bluetooth_rxtx.c **** 			/* Retune */
1883:bluetooth_rxtx.c **** 			channel = le_adv_channel != 0 ? le_adv_channel : 2402;
1884:bluetooth_rxtx.c **** 			restart_jamming = 1;
1885:bluetooth_rxtx.c **** 		}
1886:bluetooth_rxtx.c **** 
1887:bluetooth_rxtx.c **** 		cc2400_set(SYNCL, le.syncl);
1888:bluetooth_rxtx.c **** 		cc2400_set(SYNCH, le.synch);
1889:bluetooth_rxtx.c **** 
1890:bluetooth_rxtx.c **** 		if (do_hop)
1891:bluetooth_rxtx.c **** 			hop();
1892:bluetooth_rxtx.c **** 
1893:bluetooth_rxtx.c **** 		// ♪ you can jam but you keep turning off the light ♪
1894:bluetooth_rxtx.c **** 		if (le_jam_count > 0) {
1895:bluetooth_rxtx.c **** #ifdef TX_ENABLE
1896:bluetooth_rxtx.c **** 			le_jam();
1897:bluetooth_rxtx.c **** #endif
1898:bluetooth_rxtx.c **** 			--le_jam_count;
1899:bluetooth_rxtx.c **** 		} else {
1900:bluetooth_rxtx.c **** 			/* RX mode */
1901:bluetooth_rxtx.c **** 			dma_init_le();
1902:bluetooth_rxtx.c **** 			dio_ssp_start();
1903:bluetooth_rxtx.c **** 
1904:bluetooth_rxtx.c **** 			if (restart_jamming) {
1905:bluetooth_rxtx.c **** 				cc2400_rx_sync(rbit(le.access_address));
1906:bluetooth_rxtx.c **** 				restart_jamming = 0;
1907:bluetooth_rxtx.c **** 			} else {
1908:bluetooth_rxtx.c **** 				// wait till we're in FSLOCK before strobing RX
1909:bluetooth_rxtx.c **** 				while (!(cc2400_status() & FS_LOCK));
1910:bluetooth_rxtx.c **** 				cc2400_strobe(SRX);
1911:bluetooth_rxtx.c **** 			}
1912:bluetooth_rxtx.c **** 		}
1913:bluetooth_rxtx.c **** 
1914:bluetooth_rxtx.c **** 		rx_tc = 0;
1915:bluetooth_rxtx.c **** 		rx_err = 0;
ARM GAS  /tmp/ccwF1FQu.s 			page 51


1916:bluetooth_rxtx.c **** 	}
1917:bluetooth_rxtx.c **** 
1918:bluetooth_rxtx.c **** cleanup:
1919:bluetooth_rxtx.c **** 
1920:bluetooth_rxtx.c **** 	// disable USB interrupts
1921:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_USB;
1922:bluetooth_rxtx.c **** 
1923:bluetooth_rxtx.c **** 	// reset the radio completely
1924:bluetooth_rxtx.c **** 	cc2400_idle();
1925:bluetooth_rxtx.c **** 	dio_ssp_stop();
1926:bluetooth_rxtx.c **** 	cs_trigger_disable();
1927:bluetooth_rxtx.c **** }
1928:bluetooth_rxtx.c **** 
1929:bluetooth_rxtx.c **** 
1930:bluetooth_rxtx.c **** 
1931:bluetooth_rxtx.c **** /* low energy connection following
1932:bluetooth_rxtx.c ****  * follows a known AA around */
1933:bluetooth_rxtx.c **** int cb_follow_le() {
 741              		.loc 1 1933 20 is_stmt 1 view -0
 742              		.cfi_startproc
 743              		@ args = 0, pretend = 0, frame = 0
 744              		@ frame_needed = 0, uses_anonymous_args = 0
 745 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 746              		.cfi_def_cfa_offset 32
 747              		.cfi_offset 4, -32
 748              		.cfi_offset 5, -28
 749              		.cfi_offset 6, -24
 750              		.cfi_offset 7, -20
 751              		.cfi_offset 8, -16
 752              		.cfi_offset 9, -12
 753              		.cfi_offset 10, -8
 754              		.cfi_offset 14, -4
1934:bluetooth_rxtx.c **** 	int i, j, k;
 755              		.loc 1 1934 2 view .LVU237
1935:bluetooth_rxtx.c **** 	int idx = whitening_index[btle_channel_index(channel)];
 756              		.loc 1 1935 2 view .LVU238
 757              		.loc 1 1935 28 is_stmt 0 view .LVU239
 758 0004 3C4F     		ldr	r7, .L64
 759 0006 3D4E     		ldr	r6, .L64+4
 760 0008 B7F84C00 		ldrh	r0, [r7, #76]
 761              		.loc 1 1935 27 view .LVU240
 762 000c 3C4C     		ldr	r4, .L64+8
 763              		.loc 1 1935 28 view .LVU241
 764 000e 80B2     		uxth	r0, r0
 765 0010 FFF7FEFF 		bl	btle_channel_index
 766              	.LVL58:
1936:bluetooth_rxtx.c **** 
1937:bluetooth_rxtx.c **** 	u32 access_address = 0;
 767              		.loc 1 1937 6 view .LVU242
 768 0014 0022     		movs	r2, #0
 769 0016 3146     		mov	r1, r6
1938:bluetooth_rxtx.c **** 	for (i = 0; i < 31; ++i) {
 770              		.loc 1 1938 9 view .LVU243
 771 0018 1346     		mov	r3, r2
1935:bluetooth_rxtx.c **** 	int idx = whitening_index[btle_channel_index(channel)];
 772              		.loc 1 1935 6 view .LVU244
 773 001a 205C     		ldrb	r0, [r4, r0]	@ zero_extendqisi2
ARM GAS  /tmp/ccwF1FQu.s 			page 52


 774              	.LVL59:
1937:bluetooth_rxtx.c **** 	for (i = 0; i < 31; ++i) {
 775              		.loc 1 1937 2 is_stmt 1 view .LVU245
 776              		.loc 1 1938 2 view .LVU246
 777              		.loc 1 1938 14 view .LVU247
 778              	.L49:
1939:bluetooth_rxtx.c **** 		access_address >>= 1;
 779              		.loc 1 1939 3 discriminator 3 view .LVU248
1940:bluetooth_rxtx.c **** 		access_address |= (unpacked[i] << 31);
 780              		.loc 1 1940 3 discriminator 3 view .LVU249
 781              		.loc 1 1940 30 is_stmt 0 discriminator 3 view .LVU250
 782 001c 16F8015B 		ldrb	r5, [r6], #1	@ zero_extendqisi2
1938:bluetooth_rxtx.c **** 		access_address >>= 1;
 783              		.loc 1 1938 22 discriminator 3 view .LVU251
 784 0020 0133     		adds	r3, r3, #1
 785              		.loc 1 1940 34 discriminator 3 view .LVU252
 786 0022 ED07     		lsls	r5, r5, #31
1938:bluetooth_rxtx.c **** 		access_address >>= 1;
 787              		.loc 1 1938 2 discriminator 3 view .LVU253
 788 0024 1F2B     		cmp	r3, #31
 789              		.loc 1 1940 18 discriminator 3 view .LVU254
 790 0026 45EA5202 		orr	r2, r5, r2, lsr #1
 791              	.LVL60:
1938:bluetooth_rxtx.c **** 		access_address >>= 1;
 792              		.loc 1 1938 22 is_stmt 1 discriminator 3 view .LVU255
1938:bluetooth_rxtx.c **** 		access_address >>= 1;
 793              		.loc 1 1938 14 discriminator 3 view .LVU256
1938:bluetooth_rxtx.c **** 		access_address >>= 1;
 794              		.loc 1 1938 2 is_stmt 0 discriminator 3 view .LVU257
 795 002a F7D1     		bne	.L49
1941:bluetooth_rxtx.c **** 	}
1942:bluetooth_rxtx.c **** 
1943:bluetooth_rxtx.c **** 	for (i = 31; i < DMA_SIZE * 8 + 32; i++) {
1944:bluetooth_rxtx.c **** 		access_address >>= 1;
1945:bluetooth_rxtx.c **** 		access_address |= (unpacked[i] << 31);
1946:bluetooth_rxtx.c **** 		if (access_address == le.access_address) {
 796              		.loc 1 1946 27 view .LVU258
 797 002c 3E68     		ldr	r6, [r7]
 798              	.L60:
1944:bluetooth_rxtx.c **** 		access_address |= (unpacked[i] << 31);
 799              		.loc 1 1944 3 is_stmt 1 view .LVU259
 800              	.LVL61:
1945:bluetooth_rxtx.c **** 		if (access_address == le.access_address) {
 801              		.loc 1 1945 3 view .LVU260
1945:bluetooth_rxtx.c **** 		if (access_address == le.access_address) {
 802              		.loc 1 1945 30 is_stmt 0 view .LVU261
 803 002e CD5C     		ldrb	r5, [r1, r3]	@ zero_extendqisi2
1945:bluetooth_rxtx.c **** 		if (access_address == le.access_address) {
 804              		.loc 1 1945 34 view .LVU262
 805 0030 ED07     		lsls	r5, r5, #31
1945:bluetooth_rxtx.c **** 		if (access_address == le.access_address) {
 806              		.loc 1 1945 18 view .LVU263
 807 0032 45EA5202 		orr	r2, r5, r2, lsr #1
 808              	.LVL62:
 809              		.loc 1 1946 3 is_stmt 1 view .LVU264
 810              		.loc 1 1946 6 is_stmt 0 view .LVU265
 811 0036 9642     		cmp	r6, r2
ARM GAS  /tmp/ccwF1FQu.s 			page 53


 812 0038 58D1     		bne	.L50
 813              	.LBB9:
1947:bluetooth_rxtx.c **** 			for (j = 0; j < 46; ++j) {
1948:bluetooth_rxtx.c **** 				u8 byte = 0;
1949:bluetooth_rxtx.c **** 				for (k = 0; k < 8; k++) {
1950:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
1951:bluetooth_rxtx.c **** 					if (offset >= DMA_SIZE*8*2) break;
1952:bluetooth_rxtx.c **** 					int bit = unpacked[offset];
1953:bluetooth_rxtx.c **** 					if (j >= 4) { // unwhiten data bytes
1954:bluetooth_rxtx.c **** 						bit ^= whitening[idx];
1955:bluetooth_rxtx.c **** 						idx = (idx + 1) % sizeof(whitening);
1956:bluetooth_rxtx.c **** 					}
1957:bluetooth_rxtx.c **** 					byte |= bit << k;
1958:bluetooth_rxtx.c **** 				}
1959:bluetooth_rxtx.c **** 				idle_rxbuf[j] = byte;
 814              		.loc 1 1959 15 view .LVU266
 815 003a 324E     		ldr	r6, .L64+12
 816 003c 1F3B     		subs	r3, r3, #31
 817 003e 0B44     		add	r3, r3, r1
 818              	.LBB10:
1955:bluetooth_rxtx.c **** 					}
 819              		.loc 1 1955 23 view .LVU267
 820 0040 4FF07F09 		mov	r9, #127
 821              	.LBE10:
 822              	.LBE9:
1947:bluetooth_rxtx.c **** 			for (j = 0; j < 46; ++j) {
 823              		.loc 1 1947 11 view .LVU268
 824 0044 0021     		movs	r1, #0
 825 0046 3546     		mov	r5, r6
 826              	.LVL63:
 827              	.L51:
 828              	.LBB14:
1949:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 829              		.loc 1 1949 17 is_stmt 1 view .LVU269
1948:bluetooth_rxtx.c **** 				for (k = 0; k < 8; k++) {
 830              		.loc 1 1948 8 is_stmt 0 view .LVU270
 831 0048 4FF0000E 		mov	lr, #0
 832              	.LBE14:
1938:bluetooth_rxtx.c **** 		access_address >>= 1;
 833              		.loc 1 1938 9 view .LVU271
 834 004c 9846     		mov	r8, r3
 835              	.LBB15:
1949:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 836              		.loc 1 1949 12 view .LVU272
 837 004e F446     		mov	ip, lr
 838              	.LVL64:
 839              	.L54:
 840              	.LBB11:
1950:bluetooth_rxtx.c **** 					if (offset >= DMA_SIZE*8*2) break;
 841              		.loc 1 1950 6 is_stmt 1 view .LVU273
1951:bluetooth_rxtx.c **** 					int bit = unpacked[offset];
 842              		.loc 1 1951 6 view .LVU274
1952:bluetooth_rxtx.c **** 					if (j >= 4) { // unwhiten data bytes
 843              		.loc 1 1952 6 view .LVU275
1953:bluetooth_rxtx.c **** 						bit ^= whitening[idx];
 844              		.loc 1 1953 9 is_stmt 0 view .LVU276
 845 0050 0329     		cmp	r1, #3
ARM GAS  /tmp/ccwF1FQu.s 			page 54


1952:bluetooth_rxtx.c **** 					if (j >= 4) { // unwhiten data bytes
 846              		.loc 1 1952 24 view .LVU277
 847 0052 18F8012B 		ldrb	r2, [r8], #1	@ zero_extendqisi2
 848              	.LVL65:
1953:bluetooth_rxtx.c **** 						bit ^= whitening[idx];
 849              		.loc 1 1953 6 is_stmt 1 view .LVU278
1953:bluetooth_rxtx.c **** 						bit ^= whitening[idx];
 850              		.loc 1 1953 9 is_stmt 0 view .LVU279
 851 0056 0CDD     		ble	.L53
1954:bluetooth_rxtx.c **** 						idx = (idx + 1) % sizeof(whitening);
 852              		.loc 1 1954 7 is_stmt 1 view .LVU280
1954:bluetooth_rxtx.c **** 						idx = (idx + 1) % sizeof(whitening);
 853              		.loc 1 1954 23 is_stmt 0 view .LVU281
 854 0058 04EB000A 		add	r10, r4, r0
1954:bluetooth_rxtx.c **** 						idx = (idx + 1) % sizeof(whitening);
 855              		.loc 1 1954 11 view .LVU282
 856 005c 9AF828A0 		ldrb	r10, [r10, #40]	@ zero_extendqisi2
1955:bluetooth_rxtx.c **** 					}
 857              		.loc 1 1955 18 view .LVU283
 858 0060 0130     		adds	r0, r0, #1
 859              	.LVL66:
1954:bluetooth_rxtx.c **** 						idx = (idx + 1) % sizeof(whitening);
 860              		.loc 1 1954 11 view .LVU284
 861 0062 82EA0A02 		eor	r2, r2, r10
 862              	.LVL67:
1955:bluetooth_rxtx.c **** 					}
 863              		.loc 1 1955 7 is_stmt 1 view .LVU285
1955:bluetooth_rxtx.c **** 					}
 864              		.loc 1 1955 23 is_stmt 0 view .LVU286
 865 0066 B0FBF9FA 		udiv	r10, r0, r9
 866 006a CAEBCA1A 		rsb	r10, r10, r10, lsl #7
 867 006e A0EB0A00 		sub	r0, r0, r10
 868              	.LVL68:
 869              	.L53:
1957:bluetooth_rxtx.c **** 				}
 870              		.loc 1 1957 6 is_stmt 1 discriminator 2 view .LVU287
1957:bluetooth_rxtx.c **** 				}
 871              		.loc 1 1957 18 is_stmt 0 discriminator 2 view .LVU288
 872 0072 02FA0CF2 		lsl	r2, r2, ip
 873              	.LVL69:
1957:bluetooth_rxtx.c **** 				}
 874              		.loc 1 1957 18 discriminator 2 view .LVU289
 875              	.LBE11:
1949:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 876              		.loc 1 1949 25 discriminator 2 view .LVU290
 877 0076 0CF1010C 		add	ip, ip, #1
 878              	.LVL70:
 879              	.LBB12:
1957:bluetooth_rxtx.c **** 				}
 880              		.loc 1 1957 11 discriminator 2 view .LVU291
 881 007a 42EA0E02 		orr	r2, r2, lr
 882              	.LBE12:
1949:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 883              		.loc 1 1949 5 discriminator 2 view .LVU292
 884 007e BCF1080F 		cmp	ip, #8
 885              	.LBB13:
1957:bluetooth_rxtx.c **** 				}
ARM GAS  /tmp/ccwF1FQu.s 			page 55


 886              		.loc 1 1957 11 discriminator 2 view .LVU293
 887 0082 5FFA82FE 		uxtb	lr, r2
 888              	.LVL71:
1957:bluetooth_rxtx.c **** 				}
 889              		.loc 1 1957 11 discriminator 2 view .LVU294
 890              	.LBE13:
1949:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 891              		.loc 1 1949 24 is_stmt 1 discriminator 2 view .LVU295
1949:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 892              		.loc 1 1949 17 discriminator 2 view .LVU296
1949:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 893              		.loc 1 1949 5 is_stmt 0 discriminator 2 view .LVU297
 894 0086 E3D1     		bne	.L54
 895              		.loc 1 1959 5 is_stmt 1 discriminator 2 view .LVU298
 896              		.loc 1 1959 15 is_stmt 0 discriminator 2 view .LVU299
 897 0088 3268     		ldr	r2, [r6]
 898 008a 0833     		adds	r3, r3, #8
 899              		.loc 1 1959 19 discriminator 2 view .LVU300
 900 008c 02F801E0 		strb	lr, [r2, r1]
 901              	.LBE15:
1947:bluetooth_rxtx.c **** 				u8 byte = 0;
 902              		.loc 1 1947 24 is_stmt 1 discriminator 2 view .LVU301
 903 0090 0131     		adds	r1, r1, #1
 904              	.LVL72:
1947:bluetooth_rxtx.c **** 				u8 byte = 0;
 905              		.loc 1 1947 16 discriminator 2 view .LVU302
1947:bluetooth_rxtx.c **** 				u8 byte = 0;
 906              		.loc 1 1947 4 is_stmt 0 discriminator 2 view .LVU303
 907 0092 2E29     		cmp	r1, #46
 908 0094 D8D1     		bne	.L51
1960:bluetooth_rxtx.c **** 			}
1961:bluetooth_rxtx.c **** 
1962:bluetooth_rxtx.c **** 			// verify CRC
1963:bluetooth_rxtx.c **** 			if (le.crc_verify) {
 909              		.loc 1 1963 4 is_stmt 1 view .LVU304
 910              		.loc 1 1963 7 is_stmt 0 view .LVU305
 911 0096 3B69     		ldr	r3, [r7, #16]
 912 0098 6BB9     		cbnz	r3, .L56
 913              	.LVL73:
 914              	.L59:
1964:bluetooth_rxtx.c **** 				int len		 = (idle_rxbuf[5] & 0x3f) + 2;
1965:bluetooth_rxtx.c **** 				u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, (uint8_t*)idle_rxbuf + 4, len);
1966:bluetooth_rxtx.c **** 				u32 wire_crc = (idle_rxbuf[4+len+2] << 16)
1967:bluetooth_rxtx.c **** 							 | (idle_rxbuf[4+len+1] << 8)
1968:bluetooth_rxtx.c **** 							 |  idle_rxbuf[4+len+0];
1969:bluetooth_rxtx.c **** 				if (calc_crc != wire_crc) // skip packets with a bad CRC
1970:bluetooth_rxtx.c **** 					break;
1971:bluetooth_rxtx.c **** 			}
1972:bluetooth_rxtx.c **** 
1973:bluetooth_rxtx.c **** 			// send to PC
1974:bluetooth_rxtx.c **** 			enqueue(LE_PACKET, (uint8_t*)idle_rxbuf);
 915              		.loc 1 1974 4 is_stmt 1 view .LVU306
 916 009a 0120     		movs	r0, #1
 917 009c 2968     		ldr	r1, [r5]
 918 009e FFF7FEFF 		bl	enqueue
 919              	.LVL74:
1975:bluetooth_rxtx.c **** 			RXLED_SET;
ARM GAS  /tmp/ccwF1FQu.s 			page 56


 920              		.loc 1 1975 4 view .LVU307
 921 00a2 1022     		movs	r2, #16
 922 00a4 184B     		ldr	r3, .L64+16
 923 00a6 1A60     		str	r2, [r3]
1976:bluetooth_rxtx.c **** 
1977:bluetooth_rxtx.c **** 			packet_cb((uint8_t*)idle_rxbuf);
 924              		.loc 1 1977 4 view .LVU308
 925 00a8 184B     		ldr	r3, .L64+20
 926 00aa 2868     		ldr	r0, [r5]
 927 00ac 9B69     		ldr	r3, [r3, #24]
 928 00ae 9847     		blx	r3
 929              	.LVL75:
1978:bluetooth_rxtx.c **** 
1979:bluetooth_rxtx.c **** 			break;
 930              		.loc 1 1979 4 view .LVU309
 931              	.L57:
1980:bluetooth_rxtx.c **** 		}
1981:bluetooth_rxtx.c **** 	}
1982:bluetooth_rxtx.c **** 
1983:bluetooth_rxtx.c **** 	return 1;
 932              		.loc 1 1983 2 view .LVU310
1984:bluetooth_rxtx.c **** }
 933              		.loc 1 1984 1 is_stmt 0 view .LVU311
 934 00b0 0120     		movs	r0, #1
 935 00b2 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 936              	.LVL76:
 937              	.L56:
 938              	.LBB16:
1964:bluetooth_rxtx.c **** 				u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, (uint8_t*)idle_rxbuf + 4, len);
 939              		.loc 1 1964 5 is_stmt 1 view .LVU312
1964:bluetooth_rxtx.c **** 				u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, (uint8_t*)idle_rxbuf + 4, len);
 940              		.loc 1 1964 28 is_stmt 0 view .LVU313
 941 00b6 3368     		ldr	r3, [r6]
1965:bluetooth_rxtx.c **** 				u32 wire_crc = (idle_rxbuf[4+len+2] << 16)
 942              		.loc 1 1965 20 view .LVU314
 943 00b8 F868     		ldr	r0, [r7, #12]
 944              	.LVL77:
1964:bluetooth_rxtx.c **** 				u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, (uint8_t*)idle_rxbuf + 4, len);
 945              		.loc 1 1964 28 view .LVU315
 946 00ba 5C79     		ldrb	r4, [r3, #5]	@ zero_extendqisi2
1965:bluetooth_rxtx.c **** 				u32 wire_crc = (idle_rxbuf[4+len+2] << 16)
 947              		.loc 1 1965 58 view .LVU316
 948 00bc 3168     		ldr	r1, [r6]
 949              	.LVL78:
1965:bluetooth_rxtx.c **** 				u32 wire_crc = (idle_rxbuf[4+len+2] << 16)
 950              		.loc 1 1965 58 view .LVU317
 951 00be 04F03F04 		and	r4, r4, #63
 952              	.LVL79:
1965:bluetooth_rxtx.c **** 				u32 wire_crc = (idle_rxbuf[4+len+2] << 16)
 953              		.loc 1 1965 5 is_stmt 1 view .LVU318
1965:bluetooth_rxtx.c **** 				u32 wire_crc = (idle_rxbuf[4+len+2] << 16)
 954              		.loc 1 1965 20 is_stmt 0 view .LVU319
 955 00c2 A21C     		adds	r2, r4, #2
 956              	.LVL80:
1965:bluetooth_rxtx.c **** 				u32 wire_crc = (idle_rxbuf[4+len+2] << 16)
 957              		.loc 1 1965 20 view .LVU320
 958 00c4 0431     		adds	r1, r1, #4
ARM GAS  /tmp/ccwF1FQu.s 			page 57


 959 00c6 FFF7FEFF 		bl	btle_crcgen_lut
 960              	.LVL81:
1966:bluetooth_rxtx.c **** 							 | (idle_rxbuf[4+len+1] << 8)
 961              		.loc 1 1966 5 is_stmt 1 view .LVU321
1966:bluetooth_rxtx.c **** 							 | (idle_rxbuf[4+len+1] << 8)
 962              		.loc 1 1966 31 is_stmt 0 view .LVU322
 963 00ca 3268     		ldr	r2, [r6]
 964 00cc 04F10803 		add	r3, r4, #8
 965 00d0 D15C     		ldrb	r1, [r2, r3]	@ zero_extendqisi2
1967:bluetooth_rxtx.c **** 							 |  idle_rxbuf[4+len+0];
 966              		.loc 1 1967 22 view .LVU323
 967 00d2 3268     		ldr	r2, [r6]
 968 00d4 E31D     		adds	r3, r4, #7
 969 00d6 D35C     		ldrb	r3, [r2, r3]	@ zero_extendqisi2
1968:bluetooth_rxtx.c **** 				if (calc_crc != wire_crc) // skip packets with a bad CRC
 970              		.loc 1 1968 22 view .LVU324
 971 00d8 3268     		ldr	r2, [r6]
1968:bluetooth_rxtx.c **** 				if (calc_crc != wire_crc) // skip packets with a bad CRC
 972              		.loc 1 1968 24 view .LVU325
 973 00da 0634     		adds	r4, r4, #6
 974              	.LVL82:
1968:bluetooth_rxtx.c **** 				if (calc_crc != wire_crc) // skip packets with a bad CRC
 975              		.loc 1 1968 22 view .LVU326
 976 00dc 125D     		ldrb	r2, [r2, r4]	@ zero_extendqisi2
 977              	.LVL83:
1969:bluetooth_rxtx.c **** 					break;
 978              		.loc 1 1969 5 is_stmt 1 view .LVU327
1967:bluetooth_rxtx.c **** 							 |  idle_rxbuf[4+len+0];
 979              		.loc 1 1967 32 is_stmt 0 view .LVU328
 980 00de 1B02     		lsls	r3, r3, #8
 981              	.LVL84:
1967:bluetooth_rxtx.c **** 							 |  idle_rxbuf[4+len+0];
 982              		.loc 1 1967 9 view .LVU329
 983 00e0 43EA0143 		orr	r3, r3, r1, lsl #16
1968:bluetooth_rxtx.c **** 				if (calc_crc != wire_crc) // skip packets with a bad CRC
 984              		.loc 1 1968 9 view .LVU330
 985 00e4 1343     		orrs	r3, r3, r2
1969:bluetooth_rxtx.c **** 					break;
 986              		.loc 1 1969 8 view .LVU331
 987 00e6 9842     		cmp	r0, r3
 988 00e8 E2D1     		bne	.L57
 989 00ea D6E7     		b	.L59
 990              	.LVL85:
 991              	.L50:
1969:bluetooth_rxtx.c **** 					break;
 992              		.loc 1 1969 8 view .LVU332
 993              	.LBE16:
1943:bluetooth_rxtx.c **** 		access_address >>= 1;
 994              		.loc 1 1943 38 is_stmt 1 discriminator 2 view .LVU333
1943:bluetooth_rxtx.c **** 		access_address >>= 1;
 995              		.loc 1 1943 39 is_stmt 0 discriminator 2 view .LVU334
 996 00ec 0133     		adds	r3, r3, #1
 997              	.LVL86:
1943:bluetooth_rxtx.c **** 		access_address >>= 1;
 998              		.loc 1 1943 15 is_stmt 1 discriminator 2 view .LVU335
1943:bluetooth_rxtx.c **** 		access_address >>= 1;
 999              		.loc 1 1943 2 is_stmt 0 discriminator 2 view .LVU336
ARM GAS  /tmp/ccwF1FQu.s 			page 58


 1000 00ee B3F5D87F 		cmp	r3, #432
 1001 00f2 9CD1     		bne	.L60
 1002 00f4 DCE7     		b	.L57
 1003              	.L65:
 1004 00f6 00BF     		.align	2
 1005              	.L64:
 1006 00f8 00000000 		.word	.LANCHOR0
 1007 00fc 00000000 		.word	unpacked
 1008 0100 00000000 		.word	.LANCHOR2
 1009 0104 00000000 		.word	idle_rxbuf
 1010 0108 38C00920 		.word	537509944
 1011 010c 00000000 		.word	.LANCHOR1
 1012              		.cfi_endproc
 1013              	.LFE24:
 1015              		.section	.text.connection_follow_cb,"ax",%progbits
 1016              		.align	1
 1017              		.global	connection_follow_cb
 1018              		.syntax unified
 1019              		.thumb
 1020              		.thumb_func
 1021              		.fpu softvfp
 1023              	connection_follow_cb:
 1024              	.LVL87:
 1025              	.LFB25:
1985:bluetooth_rxtx.c **** 
1986:bluetooth_rxtx.c **** /**
1987:bluetooth_rxtx.c ****  * Called when we receive a packet in connection following mode.
1988:bluetooth_rxtx.c ****  */
1989:bluetooth_rxtx.c **** void connection_follow_cb(u8 *packet) {
 1026              		.loc 1 1989 39 is_stmt 1 view -0
 1027              		.cfi_startproc
 1028              		@ args = 0, pretend = 0, frame = 0
 1029              		@ frame_needed = 0, uses_anonymous_args = 0
 1030              		.loc 1 1989 39 is_stmt 0 view .LVU338
 1031 0000 38B5     		push	{r3, r4, r5, lr}
 1032              		.cfi_def_cfa_offset 16
 1033              		.cfi_offset 3, -16
 1034              		.cfi_offset 4, -12
 1035              		.cfi_offset 5, -8
 1036              		.cfi_offset 14, -4
1990:bluetooth_rxtx.c **** 	int i;
 1037              		.loc 1 1990 2 is_stmt 1 view .LVU339
1991:bluetooth_rxtx.c **** 	u32 aa = 0;
 1038              		.loc 1 1991 2 view .LVU340
 1039              	.LVL88:
1992:bluetooth_rxtx.c **** 
1993:bluetooth_rxtx.c **** #define ADV_ADDRESS_IDX 0
1994:bluetooth_rxtx.c **** #define HEADER_IDX 4
1995:bluetooth_rxtx.c **** #define DATA_LEN_IDX 5
1996:bluetooth_rxtx.c **** #define DATA_START_IDX 6
1997:bluetooth_rxtx.c **** 
1998:bluetooth_rxtx.c **** 	// u8 *adv_addr = &packet[ADV_ADDRESS_IDX];
1999:bluetooth_rxtx.c **** 	u8 header = packet[HEADER_IDX];
 1040              		.loc 1 1999 2 view .LVU341
2000:bluetooth_rxtx.c **** 	u8 *data_len = &packet[DATA_LEN_IDX];
 1041              		.loc 1 2000 2 view .LVU342
2001:bluetooth_rxtx.c **** 	u8 *data = &packet[DATA_START_IDX];
ARM GAS  /tmp/ccwF1FQu.s 			page 59


 1042              		.loc 1 2001 2 view .LVU343
2002:bluetooth_rxtx.c **** 	// u8 *crc = &packet[DATA_START_IDX + *data_len];
2003:bluetooth_rxtx.c **** 
2004:bluetooth_rxtx.c **** 	if (le.link_state == LINK_CONN_PENDING) {
 1043              		.loc 1 2004 2 view .LVU344
 1044              		.loc 1 2004 8 is_stmt 0 view .LVU345
 1045 0002 564B     		ldr	r3, .L81
1989:bluetooth_rxtx.c **** 	int i;
 1046              		.loc 1 1989 39 view .LVU346
 1047 0004 0546     		mov	r5, r0
 1048              		.loc 1 2004 8 view .LVU347
 1049 0006 1A7D     		ldrb	r2, [r3, #20]	@ zero_extendqisi2
 1050 0008 1C46     		mov	r4, r3
 1051              		.loc 1 2004 5 view .LVU348
 1052 000a 022A     		cmp	r2, #2
 1053 000c 11D1     		bne	.L67
2005:bluetooth_rxtx.c **** 		// We received a packet in the connection pending state, so now the device *should* be connected
2006:bluetooth_rxtx.c **** 		le.link_state = LINK_CONNECTED;
 1054              		.loc 1 2006 3 is_stmt 1 view .LVU349
 1055              		.loc 1 2006 17 is_stmt 0 view .LVU350
 1056 000e 0322     		movs	r2, #3
 1057 0010 1A75     		strb	r2, [r3, #20]
 1058              	.LVL89:
2007:bluetooth_rxtx.c **** 		le.conn_epoch = clkn;
 1059              		.loc 1 2007 3 is_stmt 1 view .LVU351
 1060              		.loc 1 2007 17 is_stmt 0 view .LVU352
 1061 0012 534A     		ldr	r2, .L81+4
 1062 0014 1268     		ldr	r2, [r2]
 1063 0016 9A61     		str	r2, [r3, #24]
2008:bluetooth_rxtx.c **** 		le.interval_timer = le.conn_interval - 1;
 1064              		.loc 1 2008 3 is_stmt 1 view .LVU353
 1065              		.loc 1 2008 40 is_stmt 0 view .LVU354
 1066 0018 DA8B     		ldrh	r2, [r3, #30]
 1067 001a 013A     		subs	r2, r2, #1
 1068 001c 92B2     		uxth	r2, r2
 1069              		.loc 1 2008 21 view .LVU355
 1070 001e 9A83     		strh	r2, [r3, #28]	@ movhi
2009:bluetooth_rxtx.c **** 		le.conn_count = 0;
 1071              		.loc 1 2009 3 is_stmt 1 view .LVU356
 1072              		.loc 1 2009 17 is_stmt 0 view .LVU357
 1073 0020 0022     		movs	r2, #0
 1074 0022 1A84     		strh	r2, [r3, #32]	@ movhi
2010:bluetooth_rxtx.c **** 		le.update_pending = 0;
 1075              		.loc 1 2010 3 is_stmt 1 view .LVU358
 1076              		.loc 1 2010 21 is_stmt 0 view .LVU359
 1077 0024 9A62     		str	r2, [r3, #40]
2011:bluetooth_rxtx.c **** 
2012:bluetooth_rxtx.c **** 		// hue hue hue
2013:bluetooth_rxtx.c **** 		if (jam_mode != JAM_NONE)
 1078              		.loc 1 2013 3 is_stmt 1 view .LVU360
 1079              		.loc 1 2013 16 is_stmt 0 view .LVU361
 1080 0026 4F4B     		ldr	r3, .L81+8
 1081 0028 DA7C     		ldrb	r2, [r3, #19]	@ zero_extendqisi2
 1082              		.loc 1 2013 6 view .LVU362
 1083 002a 0AB1     		cbz	r2, .L66
2014:bluetooth_rxtx.c **** 			le_jam_count = JAM_COUNT_DEFAULT;
 1084              		.loc 1 2014 4 is_stmt 1 view .LVU363
ARM GAS  /tmp/ccwF1FQu.s 			page 60


 1085              		.loc 1 2014 17 is_stmt 0 view .LVU364
 1086 002c 2822     		movs	r2, #40
 1087 002e DA61     		str	r2, [r3, #28]
 1088              	.LVL90:
 1089              	.L66:
2015:bluetooth_rxtx.c **** 
2016:bluetooth_rxtx.c **** 	} else if (le.link_state == LINK_CONNECTED) {
2017:bluetooth_rxtx.c **** 		u8 llid =  header & 0x03;
2018:bluetooth_rxtx.c **** 
2019:bluetooth_rxtx.c **** 		// Apply any connection parameter update if necessary
2020:bluetooth_rxtx.c **** 		if (le.update_pending && le.conn_count == le.update_instant) {
2021:bluetooth_rxtx.c **** 			// This is the first packet received in the connection interval for which the new parameters app
2022:bluetooth_rxtx.c **** 			le.conn_epoch = clkn;
2023:bluetooth_rxtx.c **** 			le.conn_interval = le.interval_update;
2024:bluetooth_rxtx.c **** 			le.interval_timer = le.interval_update - 1;
2025:bluetooth_rxtx.c **** 			le.win_size = le.win_size_update;
2026:bluetooth_rxtx.c **** 			le.win_offset = le.win_offset_update;
2027:bluetooth_rxtx.c **** 			le.update_pending = 0;
2028:bluetooth_rxtx.c **** 		}
2029:bluetooth_rxtx.c **** 
2030:bluetooth_rxtx.c **** 		if (llid == 0x03 && data[0] == 0x00) {
2031:bluetooth_rxtx.c **** 			// This is a CONNECTION_UPDATE_REQ.
2032:bluetooth_rxtx.c **** 			// The host is changing the connection parameters.
2033:bluetooth_rxtx.c **** 			le.win_size_update = packet[7];
2034:bluetooth_rxtx.c **** 			le.win_offset_update = packet[8] + ((u16)packet[9] << 8);
2035:bluetooth_rxtx.c **** 			le.interval_update = packet[10] + ((u16)packet[11] << 8);
2036:bluetooth_rxtx.c **** 			le.update_instant = packet[16] + ((u16)packet[17] << 8);
2037:bluetooth_rxtx.c **** 			if (le.update_instant - le.conn_count < 32767)
2038:bluetooth_rxtx.c **** 				le.update_pending = 1;
2039:bluetooth_rxtx.c **** 		}
2040:bluetooth_rxtx.c **** 
2041:bluetooth_rxtx.c **** 	} else if (le.link_state == LINK_LISTENING) {
2042:bluetooth_rxtx.c **** 		u8 pkt_type = packet[4] & 0x0F;
2043:bluetooth_rxtx.c **** 		if (pkt_type == 0x05) {
2044:bluetooth_rxtx.c **** 			uint16_t conn_interval;
2045:bluetooth_rxtx.c **** 
2046:bluetooth_rxtx.c **** 			// ignore packets with incorrect length
2047:bluetooth_rxtx.c **** 			if (*data_len != 34)
2048:bluetooth_rxtx.c **** 				return;
2049:bluetooth_rxtx.c **** 
2050:bluetooth_rxtx.c **** 			// conn interval must be [7.5 ms, 4.0s] in units of 1.25 ms
2051:bluetooth_rxtx.c **** 			conn_interval = (packet[29] << 8) | packet[28];
2052:bluetooth_rxtx.c **** 			if (conn_interval < 6 || conn_interval > 3200)
2053:bluetooth_rxtx.c **** 				return;
2054:bluetooth_rxtx.c **** 
2055:bluetooth_rxtx.c **** 			// This is a connect packet
2056:bluetooth_rxtx.c **** 			// if we have a target, see if InitA or AdvA matches
2057:bluetooth_rxtx.c **** 			if (le.target_set &&
2058:bluetooth_rxtx.c **** 				memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
2059:bluetooth_rxtx.c **** 				memcmp(le.target, &packet[12], 6)) {  // Target address doesn't match Advertiser.
2060:bluetooth_rxtx.c **** 				return;
2061:bluetooth_rxtx.c **** 			}
2062:bluetooth_rxtx.c **** 
2063:bluetooth_rxtx.c **** 			le.link_state = LINK_CONN_PENDING;
2064:bluetooth_rxtx.c **** 			le.crc_verify = 0; // we will drop many packets if we attempt to filter by CRC
2065:bluetooth_rxtx.c **** 
2066:bluetooth_rxtx.c **** 			for (i = 0; i < 4; ++i)
ARM GAS  /tmp/ccwF1FQu.s 			page 61


2067:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
2068:bluetooth_rxtx.c **** 			le_set_access_address(aa);
2069:bluetooth_rxtx.c **** 
2070:bluetooth_rxtx.c **** #define CRC_INIT (2+4+6+6+4)
2071:bluetooth_rxtx.c **** 			le.crc_init = (packet[CRC_INIT+2] << 16)
2072:bluetooth_rxtx.c **** 						| (packet[CRC_INIT+1] << 8)
2073:bluetooth_rxtx.c **** 						|  packet[CRC_INIT+0];
2074:bluetooth_rxtx.c **** 			le.crc_init_reversed = rbit(le.crc_init);
2075:bluetooth_rxtx.c **** 
2076:bluetooth_rxtx.c **** #define WIN_SIZE (2+4+6+6+4+3)
2077:bluetooth_rxtx.c **** 			le.win_size = packet[WIN_SIZE];
2078:bluetooth_rxtx.c **** 
2079:bluetooth_rxtx.c **** #define WIN_OFFSET (2+4+6+6+4+3+1)
2080:bluetooth_rxtx.c **** 			le.win_offset = packet[WIN_OFFSET];
2081:bluetooth_rxtx.c **** 
2082:bluetooth_rxtx.c **** #define CONN_INTERVAL (2+4+6+6+4+3+1+2)
2083:bluetooth_rxtx.c **** 			le.conn_interval = (packet[CONN_INTERVAL+1] << 8)
2084:bluetooth_rxtx.c **** 							 |  packet[CONN_INTERVAL+0];
2085:bluetooth_rxtx.c **** 
2086:bluetooth_rxtx.c **** #define CHANNEL_INC (2+4+6+6+4+3+1+2+2+2+2+5)
2087:bluetooth_rxtx.c **** 			le.channel_increment = packet[CHANNEL_INC] & 0x1f;
2088:bluetooth_rxtx.c **** 			le.channel_idx = le.channel_increment;
2089:bluetooth_rxtx.c **** 
2090:bluetooth_rxtx.c **** 			// Hop to the initial channel immediately
2091:bluetooth_rxtx.c **** 			do_hop = 1;
2092:bluetooth_rxtx.c **** 		}
2093:bluetooth_rxtx.c **** 	}
2094:bluetooth_rxtx.c **** }
 1090              		.loc 1 2094 1 view .LVU365
 1091 0030 38BD     		pop	{r3, r4, r5, pc}
 1092              	.LVL91:
 1093              	.L67:
2016:bluetooth_rxtx.c **** 		u8 llid =  header & 0x03;
 1094              		.loc 1 2016 12 view .LVU366
 1095 0032 032A     		cmp	r2, #3
1999:bluetooth_rxtx.c **** 	u8 *data_len = &packet[DATA_LEN_IDX];
 1096              		.loc 1 1999 5 view .LVU367
 1097 0034 0379     		ldrb	r3, [r0, #4]	@ zero_extendqisi2
2016:bluetooth_rxtx.c **** 		u8 llid =  header & 0x03;
 1098              		.loc 1 2016 9 is_stmt 1 view .LVU368
2016:bluetooth_rxtx.c **** 		u8 llid =  header & 0x03;
 1099              		.loc 1 2016 12 is_stmt 0 view .LVU369
 1100 0036 3AD1     		bne	.L70
 1101              	.LBB17:
2017:bluetooth_rxtx.c **** 
 1102              		.loc 1 2017 3 is_stmt 1 view .LVU370
2020:bluetooth_rxtx.c **** 			// This is the first packet received in the connection interval for which the new parameters app
 1103              		.loc 1 2020 6 is_stmt 0 view .LVU371
 1104 0038 A26A     		ldr	r2, [r4, #40]
2017:bluetooth_rxtx.c **** 
 1105              		.loc 1 2017 6 view .LVU372
 1106 003a 03F00303 		and	r3, r3, #3
 1107              	.LVL92:
2020:bluetooth_rxtx.c **** 			// This is the first packet received in the connection interval for which the new parameters app
 1108              		.loc 1 2020 3 is_stmt 1 view .LVU373
2020:bluetooth_rxtx.c **** 			// This is the first packet received in the connection interval for which the new parameters app
 1109              		.loc 1 2020 6 is_stmt 0 view .LVU374
ARM GAS  /tmp/ccwF1FQu.s 			page 62


 1110 003e A2B1     		cbz	r2, .L71
2020:bluetooth_rxtx.c **** 			// This is the first packet received in the connection interval for which the new parameters app
 1111              		.loc 1 2020 30 discriminator 1 view .LVU375
 1112 0040 228C     		ldrh	r2, [r4, #32]
2020:bluetooth_rxtx.c **** 			// This is the first packet received in the connection interval for which the new parameters app
 1113              		.loc 1 2020 25 discriminator 1 view .LVU376
 1114 0042 A18D     		ldrh	r1, [r4, #44]
2020:bluetooth_rxtx.c **** 			// This is the first packet received in the connection interval for which the new parameters app
 1115              		.loc 1 2020 30 discriminator 1 view .LVU377
 1116 0044 92B2     		uxth	r2, r2
2020:bluetooth_rxtx.c **** 			// This is the first packet received in the connection interval for which the new parameters app
 1117              		.loc 1 2020 25 discriminator 1 view .LVU378
 1118 0046 9142     		cmp	r1, r2
 1119 0048 0FD1     		bne	.L71
2022:bluetooth_rxtx.c **** 			le.conn_interval = le.interval_update;
 1120              		.loc 1 2022 4 is_stmt 1 view .LVU379
2022:bluetooth_rxtx.c **** 			le.conn_interval = le.interval_update;
 1121              		.loc 1 2022 18 is_stmt 0 view .LVU380
 1122 004a 454A     		ldr	r2, .L81+4
 1123 004c 1268     		ldr	r2, [r2]
 1124 004e A261     		str	r2, [r4, #24]
 1125              	.LVL93:
2023:bluetooth_rxtx.c **** 			le.interval_timer = le.interval_update - 1;
 1126              		.loc 1 2023 4 is_stmt 1 view .LVU381
2023:bluetooth_rxtx.c **** 			le.interval_timer = le.interval_update - 1;
 1127              		.loc 1 2023 25 is_stmt 0 view .LVU382
 1128 0050 E28D     		ldrh	r2, [r4, #46]
2023:bluetooth_rxtx.c **** 			le.interval_timer = le.interval_update - 1;
 1129              		.loc 1 2023 21 view .LVU383
 1130 0052 E283     		strh	r2, [r4, #30]	@ movhi
2024:bluetooth_rxtx.c **** 			le.win_size = le.win_size_update;
 1131              		.loc 1 2024 4 is_stmt 1 view .LVU384
2024:bluetooth_rxtx.c **** 			le.win_size = le.win_size_update;
 1132              		.loc 1 2024 43 is_stmt 0 view .LVU385
 1133 0054 013A     		subs	r2, r2, #1
 1134 0056 92B2     		uxth	r2, r2
2024:bluetooth_rxtx.c **** 			le.win_size = le.win_size_update;
 1135              		.loc 1 2024 22 view .LVU386
 1136 0058 A283     		strh	r2, [r4, #28]	@ movhi
2025:bluetooth_rxtx.c **** 			le.win_offset = le.win_offset_update;
 1137              		.loc 1 2025 4 is_stmt 1 view .LVU387
2025:bluetooth_rxtx.c **** 			le.win_offset = le.win_offset_update;
 1138              		.loc 1 2025 16 is_stmt 0 view .LVU388
 1139 005a 94F83020 		ldrb	r2, [r4, #48]	@ zero_extendqisi2
 1140 005e 84F82220 		strb	r2, [r4, #34]
2026:bluetooth_rxtx.c **** 			le.update_pending = 0;
 1141              		.loc 1 2026 4 is_stmt 1 view .LVU389
2026:bluetooth_rxtx.c **** 			le.update_pending = 0;
 1142              		.loc 1 2026 18 is_stmt 0 view .LVU390
 1143 0062 628E     		ldrh	r2, [r4, #50]
 1144 0064 A284     		strh	r2, [r4, #36]	@ movhi
2027:bluetooth_rxtx.c **** 		}
 1145              		.loc 1 2027 4 is_stmt 1 view .LVU391
2027:bluetooth_rxtx.c **** 		}
 1146              		.loc 1 2027 22 is_stmt 0 view .LVU392
 1147 0066 0022     		movs	r2, #0
 1148 0068 A262     		str	r2, [r4, #40]
ARM GAS  /tmp/ccwF1FQu.s 			page 63


 1149              	.L71:
2030:bluetooth_rxtx.c **** 			// This is a CONNECTION_UPDATE_REQ.
 1150              		.loc 1 2030 3 is_stmt 1 view .LVU393
2030:bluetooth_rxtx.c **** 			// This is a CONNECTION_UPDATE_REQ.
 1151              		.loc 1 2030 6 is_stmt 0 view .LVU394
 1152 006a 032B     		cmp	r3, #3
 1153 006c E0D1     		bne	.L66
2030:bluetooth_rxtx.c **** 			// This is a CONNECTION_UPDATE_REQ.
 1154              		.loc 1 2030 20 discriminator 1 view .LVU395
 1155 006e AB79     		ldrb	r3, [r5, #6]	@ zero_extendqisi2
 1156              	.LVL94:
2030:bluetooth_rxtx.c **** 			// This is a CONNECTION_UPDATE_REQ.
 1157              		.loc 1 2030 20 discriminator 1 view .LVU396
 1158 0070 002B     		cmp	r3, #0
 1159 0072 DDD1     		bne	.L66
2033:bluetooth_rxtx.c **** 			le.win_offset_update = packet[8] + ((u16)packet[9] << 8);
 1160              		.loc 1 2033 4 is_stmt 1 view .LVU397
2033:bluetooth_rxtx.c **** 			le.win_offset_update = packet[8] + ((u16)packet[9] << 8);
 1161              		.loc 1 2033 23 is_stmt 0 view .LVU398
 1162 0074 EB79     		ldrb	r3, [r5, #7]	@ zero_extendqisi2
 1163 0076 84F83030 		strb	r3, [r4, #48]
2034:bluetooth_rxtx.c **** 			le.interval_update = packet[10] + ((u16)packet[11] << 8);
 1164              		.loc 1 2034 4 is_stmt 1 view .LVU399
2034:bluetooth_rxtx.c **** 			le.interval_update = packet[10] + ((u16)packet[11] << 8);
 1165              		.loc 1 2034 51 is_stmt 0 view .LVU400
 1166 007a 6A7A     		ldrb	r2, [r5, #9]	@ zero_extendqisi2
2034:bluetooth_rxtx.c **** 			le.interval_update = packet[10] + ((u16)packet[11] << 8);
 1167              		.loc 1 2034 33 view .LVU401
 1168 007c 2B7A     		ldrb	r3, [r5, #8]	@ zero_extendqisi2
2034:bluetooth_rxtx.c **** 			le.interval_update = packet[10] + ((u16)packet[11] << 8);
 1169              		.loc 1 2034 37 view .LVU402
 1170 007e 03EB0223 		add	r3, r3, r2, lsl #8
2034:bluetooth_rxtx.c **** 			le.interval_update = packet[10] + ((u16)packet[11] << 8);
 1171              		.loc 1 2034 25 view .LVU403
 1172 0082 6386     		strh	r3, [r4, #50]	@ movhi
2035:bluetooth_rxtx.c **** 			le.update_instant = packet[16] + ((u16)packet[17] << 8);
 1173              		.loc 1 2035 4 is_stmt 1 view .LVU404
2035:bluetooth_rxtx.c **** 			le.update_instant = packet[16] + ((u16)packet[17] << 8);
 1174              		.loc 1 2035 50 is_stmt 0 view .LVU405
 1175 0084 EA7A     		ldrb	r2, [r5, #11]	@ zero_extendqisi2
2035:bluetooth_rxtx.c **** 			le.update_instant = packet[16] + ((u16)packet[17] << 8);
 1176              		.loc 1 2035 31 view .LVU406
 1177 0086 AB7A     		ldrb	r3, [r5, #10]	@ zero_extendqisi2
2035:bluetooth_rxtx.c **** 			le.update_instant = packet[16] + ((u16)packet[17] << 8);
 1178              		.loc 1 2035 36 view .LVU407
 1179 0088 03EB0223 		add	r3, r3, r2, lsl #8
2035:bluetooth_rxtx.c **** 			le.update_instant = packet[16] + ((u16)packet[17] << 8);
 1180              		.loc 1 2035 23 view .LVU408
 1181 008c E385     		strh	r3, [r4, #46]	@ movhi
2036:bluetooth_rxtx.c **** 			if (le.update_instant - le.conn_count < 32767)
 1182              		.loc 1 2036 4 is_stmt 1 view .LVU409
2036:bluetooth_rxtx.c **** 			if (le.update_instant - le.conn_count < 32767)
 1183              		.loc 1 2036 49 is_stmt 0 view .LVU410
 1184 008e 6A7C     		ldrb	r2, [r5, #17]	@ zero_extendqisi2
2036:bluetooth_rxtx.c **** 			if (le.update_instant - le.conn_count < 32767)
 1185              		.loc 1 2036 30 view .LVU411
 1186 0090 2B7C     		ldrb	r3, [r5, #16]	@ zero_extendqisi2
ARM GAS  /tmp/ccwF1FQu.s 			page 64


2036:bluetooth_rxtx.c **** 			if (le.update_instant - le.conn_count < 32767)
 1187              		.loc 1 2036 35 view .LVU412
 1188 0092 03EB0223 		add	r3, r3, r2, lsl #8
2037:bluetooth_rxtx.c **** 				le.update_pending = 1;
 1189              		.loc 1 2037 30 view .LVU413
 1190 0096 228C     		ldrh	r2, [r4, #32]
2036:bluetooth_rxtx.c **** 			if (le.update_instant - le.conn_count < 32767)
 1191              		.loc 1 2036 35 view .LVU414
 1192 0098 9BB2     		uxth	r3, r3
2037:bluetooth_rxtx.c **** 				le.update_pending = 1;
 1193              		.loc 1 2037 30 view .LVU415
 1194 009a 92B2     		uxth	r2, r2
2036:bluetooth_rxtx.c **** 			if (le.update_instant - le.conn_count < 32767)
 1195              		.loc 1 2036 22 view .LVU416
 1196 009c A385     		strh	r3, [r4, #44]	@ movhi
2037:bluetooth_rxtx.c **** 				le.update_pending = 1;
 1197              		.loc 1 2037 4 is_stmt 1 view .LVU417
2037:bluetooth_rxtx.c **** 				le.update_pending = 1;
 1198              		.loc 1 2037 26 is_stmt 0 view .LVU418
 1199 009e 9B1A     		subs	r3, r3, r2
2037:bluetooth_rxtx.c **** 				le.update_pending = 1;
 1200              		.loc 1 2037 7 view .LVU419
 1201 00a0 47F6FE72 		movw	r2, #32766
 1202 00a4 9342     		cmp	r3, r2
 1203 00a6 C3DC     		bgt	.L66
2038:bluetooth_rxtx.c **** 		}
 1204              		.loc 1 2038 5 is_stmt 1 view .LVU420
2038:bluetooth_rxtx.c **** 		}
 1205              		.loc 1 2038 23 is_stmt 0 view .LVU421
 1206 00a8 0123     		movs	r3, #1
 1207 00aa A362     		str	r3, [r4, #40]
 1208 00ac C0E7     		b	.L66
 1209              	.LVL95:
 1210              	.L70:
2038:bluetooth_rxtx.c **** 		}
 1211              		.loc 1 2038 23 view .LVU422
 1212              	.LBE17:
2041:bluetooth_rxtx.c **** 		u8 pkt_type = packet[4] & 0x0F;
 1213              		.loc 1 2041 9 is_stmt 1 view .LVU423
2041:bluetooth_rxtx.c **** 		u8 pkt_type = packet[4] & 0x0F;
 1214              		.loc 1 2041 12 is_stmt 0 view .LVU424
 1215 00ae 012A     		cmp	r2, #1
 1216 00b0 BED1     		bne	.L66
 1217              	.LBB18:
2042:bluetooth_rxtx.c **** 		if (pkt_type == 0x05) {
 1218              		.loc 1 2042 3 is_stmt 1 view .LVU425
 1219              	.LVL96:
2043:bluetooth_rxtx.c **** 			uint16_t conn_interval;
 1220              		.loc 1 2043 3 view .LVU426
2043:bluetooth_rxtx.c **** 			uint16_t conn_interval;
 1221              		.loc 1 2043 6 is_stmt 0 view .LVU427
 1222 00b2 03F00F03 		and	r3, r3, #15
 1223              	.LVL97:
2043:bluetooth_rxtx.c **** 			uint16_t conn_interval;
 1224              		.loc 1 2043 6 view .LVU428
 1225 00b6 052B     		cmp	r3, #5
 1226 00b8 BAD1     		bne	.L66
ARM GAS  /tmp/ccwF1FQu.s 			page 65


 1227              	.LBB19:
2044:bluetooth_rxtx.c **** 
 1228              		.loc 1 2044 4 is_stmt 1 view .LVU429
2047:bluetooth_rxtx.c **** 				return;
 1229              		.loc 1 2047 4 view .LVU430
2047:bluetooth_rxtx.c **** 				return;
 1230              		.loc 1 2047 7 is_stmt 0 view .LVU431
 1231 00ba 4379     		ldrb	r3, [r0, #5]	@ zero_extendqisi2
 1232 00bc 222B     		cmp	r3, #34
 1233 00be B7D1     		bne	.L66
2051:bluetooth_rxtx.c **** 			if (conn_interval < 6 || conn_interval > 3200)
 1234              		.loc 1 2051 4 is_stmt 1 view .LVU432
 1235              	.LVL98:
2052:bluetooth_rxtx.c **** 				return;
 1236              		.loc 1 2052 4 view .LVU433
2051:bluetooth_rxtx.c **** 			if (conn_interval < 6 || conn_interval > 3200)
 1237              		.loc 1 2051 27 is_stmt 0 view .LVU434
 1238 00c0 427F     		ldrb	r2, [r0, #29]	@ zero_extendqisi2
2051:bluetooth_rxtx.c **** 			if (conn_interval < 6 || conn_interval > 3200)
 1239              		.loc 1 2051 46 view .LVU435
 1240 00c2 037F     		ldrb	r3, [r0, #28]	@ zero_extendqisi2
2051:bluetooth_rxtx.c **** 			if (conn_interval < 6 || conn_interval > 3200)
 1241              		.loc 1 2051 38 view .LVU436
 1242 00c4 43EA0223 		orr	r3, r3, r2, lsl #8
2052:bluetooth_rxtx.c **** 				return;
 1243              		.loc 1 2052 7 view .LVU437
 1244 00c8 40F67A42 		movw	r2, #3194
2052:bluetooth_rxtx.c **** 				return;
 1245              		.loc 1 2052 26 view .LVU438
 1246 00cc 063B     		subs	r3, r3, #6
2052:bluetooth_rxtx.c **** 				return;
 1247              		.loc 1 2052 7 view .LVU439
 1248 00ce 9BB2     		uxth	r3, r3
 1249 00d0 9342     		cmp	r3, r2
 1250 00d2 ADD8     		bhi	.L66
2057:bluetooth_rxtx.c **** 				memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
 1251              		.loc 1 2057 4 is_stmt 1 view .LVU440
2057:bluetooth_rxtx.c **** 				memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
 1252              		.loc 1 2057 7 is_stmt 0 view .LVU441
 1253 00d4 636C     		ldr	r3, [r4, #68]
 1254 00d6 73BB     		cbnz	r3, .L73
 1255              	.LVL99:
 1256              	.L74:
2063:bluetooth_rxtx.c **** 			le.crc_verify = 0; // we will drop many packets if we attempt to filter by CRC
 1257              		.loc 1 2063 4 is_stmt 1 view .LVU442
2063:bluetooth_rxtx.c **** 			le.crc_verify = 0; // we will drop many packets if we attempt to filter by CRC
 1258              		.loc 1 2063 18 is_stmt 0 view .LVU443
 1259 00d8 0223     		movs	r3, #2
 1260 00da 2375     		strb	r3, [r4, #20]
2064:bluetooth_rxtx.c **** 
 1261              		.loc 1 2064 4 is_stmt 1 view .LVU444
2064:bluetooth_rxtx.c **** 
 1262              		.loc 1 2064 18 is_stmt 0 view .LVU445
 1263 00dc 0023     		movs	r3, #0
 1264 00de 2361     		str	r3, [r4, #16]
2066:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 1265              		.loc 1 2066 4 is_stmt 1 view .LVU446
ARM GAS  /tmp/ccwF1FQu.s 			page 66


 1266              	.LVL100:
2066:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 1267              		.loc 1 2066 16 view .LVU447
2067:bluetooth_rxtx.c **** 			le_set_access_address(aa);
 1268              		.loc 1 2067 5 view .LVU448
2066:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 1269              		.loc 1 2066 23 view .LVU449
2066:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 1270              		.loc 1 2066 16 view .LVU450
2067:bluetooth_rxtx.c **** 			le_set_access_address(aa);
 1271              		.loc 1 2067 5 view .LVU451
2066:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 1272              		.loc 1 2066 23 view .LVU452
2066:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 1273              		.loc 1 2066 16 view .LVU453
2067:bluetooth_rxtx.c **** 			le_set_access_address(aa);
 1274              		.loc 1 2067 5 view .LVU454
2067:bluetooth_rxtx.c **** 			le_set_access_address(aa);
 1275              		.loc 1 2067 17 is_stmt 0 view .LVU455
 1276 00e0 287D     		ldrb	r0, [r5, #20]	@ zero_extendqisi2
2067:bluetooth_rxtx.c **** 			le_set_access_address(aa);
 1277              		.loc 1 2067 24 view .LVU456
 1278 00e2 AB7C     		ldrb	r3, [r5, #18]	@ zero_extendqisi2
2067:bluetooth_rxtx.c **** 			le_set_access_address(aa);
 1279              		.loc 1 2067 8 view .LVU457
 1280 00e4 43EA0043 		orr	r3, r3, r0, lsl #16
2067:bluetooth_rxtx.c **** 			le_set_access_address(aa);
 1281              		.loc 1 2067 17 view .LVU458
 1282 00e8 E87C     		ldrb	r0, [r5, #19]	@ zero_extendqisi2
2067:bluetooth_rxtx.c **** 			le_set_access_address(aa);
 1283              		.loc 1 2067 8 view .LVU459
 1284 00ea 43EA0023 		orr	r3, r3, r0, lsl #8
 1285              	.LVL101:
2066:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 1286              		.loc 1 2066 23 is_stmt 1 view .LVU460
2066:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 1287              		.loc 1 2066 16 view .LVU461
2067:bluetooth_rxtx.c **** 			le_set_access_address(aa);
 1288              		.loc 1 2067 5 view .LVU462
2066:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 1289              		.loc 1 2066 23 view .LVU463
2066:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 1290              		.loc 1 2066 16 view .LVU464
2068:bluetooth_rxtx.c **** 
 1291              		.loc 1 2068 4 view .LVU465
2067:bluetooth_rxtx.c **** 			le_set_access_address(aa);
 1292              		.loc 1 2067 17 is_stmt 0 view .LVU466
 1293 00ee 687D     		ldrb	r0, [r5, #21]	@ zero_extendqisi2
2068:bluetooth_rxtx.c **** 
 1294              		.loc 1 2068 4 view .LVU467
 1295 00f0 43EA0060 		orr	r0, r3, r0, lsl #24
 1296 00f4 FFF7FEFF 		bl	le_set_access_address
 1297              	.LVL102:
2071:bluetooth_rxtx.c **** 						| (packet[CRC_INIT+1] << 8)
 1298              		.loc 1 2071 4 is_stmt 1 view .LVU468
2072:bluetooth_rxtx.c **** 						|  packet[CRC_INIT+0];
 1299              		.loc 1 2072 16 is_stmt 0 view .LVU469
ARM GAS  /tmp/ccwF1FQu.s 			page 67


 1300 00f8 E87D     		ldrb	r0, [r5, #23]	@ zero_extendqisi2
2071:bluetooth_rxtx.c **** 						| (packet[CRC_INIT+1] << 8)
 1301              		.loc 1 2071 25 view .LVU470
 1302 00fa 2B7E     		ldrb	r3, [r5, #24]	@ zero_extendqisi2
2072:bluetooth_rxtx.c **** 						|  packet[CRC_INIT+0];
 1303              		.loc 1 2072 29 view .LVU471
 1304 00fc 0002     		lsls	r0, r0, #8
2072:bluetooth_rxtx.c **** 						|  packet[CRC_INIT+0];
 1305              		.loc 1 2072 7 view .LVU472
 1306 00fe 40EA0340 		orr	r0, r0, r3, lsl #16
2073:bluetooth_rxtx.c **** 			le.crc_init_reversed = rbit(le.crc_init);
 1307              		.loc 1 2073 16 view .LVU473
 1308 0102 AB7D     		ldrb	r3, [r5, #22]	@ zero_extendqisi2
2073:bluetooth_rxtx.c **** 			le.crc_init_reversed = rbit(le.crc_init);
 1309              		.loc 1 2073 7 view .LVU474
 1310 0104 1843     		orrs	r0, r0, r3
2071:bluetooth_rxtx.c **** 						| (packet[CRC_INIT+1] << 8)
 1311              		.loc 1 2071 16 view .LVU475
 1312 0106 A060     		str	r0, [r4, #8]
2074:bluetooth_rxtx.c **** 
 1313              		.loc 1 2074 4 is_stmt 1 view .LVU476
2074:bluetooth_rxtx.c **** 
 1314              		.loc 1 2074 27 is_stmt 0 view .LVU477
 1315 0108 FFF7FEFF 		bl	rbit
 1316              	.LVL103:
2077:bluetooth_rxtx.c **** 
 1317              		.loc 1 2077 16 view .LVU478
 1318 010c 6B7E     		ldrb	r3, [r5, #25]	@ zero_extendqisi2
2074:bluetooth_rxtx.c **** 
 1319              		.loc 1 2074 25 view .LVU479
 1320 010e E060     		str	r0, [r4, #12]
2077:bluetooth_rxtx.c **** 
 1321              		.loc 1 2077 4 is_stmt 1 view .LVU480
2077:bluetooth_rxtx.c **** 
 1322              		.loc 1 2077 16 is_stmt 0 view .LVU481
 1323 0110 84F82230 		strb	r3, [r4, #34]
2080:bluetooth_rxtx.c **** 
 1324              		.loc 1 2080 4 is_stmt 1 view .LVU482
2080:bluetooth_rxtx.c **** 
 1325              		.loc 1 2080 26 is_stmt 0 view .LVU483
 1326 0114 AB7E     		ldrb	r3, [r5, #26]	@ zero_extendqisi2
 1327 0116 A384     		strh	r3, [r4, #36]	@ movhi
2083:bluetooth_rxtx.c **** 							 |  packet[CONN_INTERVAL+0];
 1328              		.loc 1 2083 4 is_stmt 1 view .LVU484
2083:bluetooth_rxtx.c **** 							 |  packet[CONN_INTERVAL+0];
 1329              		.loc 1 2083 30 is_stmt 0 view .LVU485
 1330 0118 6A7F     		ldrb	r2, [r5, #29]	@ zero_extendqisi2
2084:bluetooth_rxtx.c **** 
 1331              		.loc 1 2084 18 view .LVU486
 1332 011a 2B7F     		ldrb	r3, [r5, #28]	@ zero_extendqisi2
2084:bluetooth_rxtx.c **** 
 1333              		.loc 1 2084 9 view .LVU487
 1334 011c 43EA0223 		orr	r3, r3, r2, lsl #8
2091:bluetooth_rxtx.c **** 		}
 1335              		.loc 1 2091 11 view .LVU488
 1336 0120 0122     		movs	r2, #1
2083:bluetooth_rxtx.c **** 							 |  packet[CONN_INTERVAL+0];
ARM GAS  /tmp/ccwF1FQu.s 			page 68


 1337              		.loc 1 2083 21 view .LVU489
 1338 0122 E383     		strh	r3, [r4, #30]	@ movhi
2087:bluetooth_rxtx.c **** 			le.channel_idx = le.channel_increment;
 1339              		.loc 1 2087 4 is_stmt 1 view .LVU490
2087:bluetooth_rxtx.c **** 			le.channel_idx = le.channel_increment;
 1340              		.loc 1 2087 47 is_stmt 0 view .LVU491
 1341 0124 95F82730 		ldrb	r3, [r5, #39]	@ zero_extendqisi2
 1342 0128 03F01F03 		and	r3, r3, #31
2087:bluetooth_rxtx.c **** 			le.channel_idx = le.channel_increment;
 1343              		.loc 1 2087 25 view .LVU492
 1344 012c A375     		strb	r3, [r4, #22]
2088:bluetooth_rxtx.c **** 
 1345              		.loc 1 2088 4 is_stmt 1 view .LVU493
2088:bluetooth_rxtx.c **** 
 1346              		.loc 1 2088 19 is_stmt 0 view .LVU494
 1347 012e 6375     		strb	r3, [r4, #21]
2091:bluetooth_rxtx.c **** 		}
 1348              		.loc 1 2091 4 is_stmt 1 view .LVU495
2091:bluetooth_rxtx.c **** 		}
 1349              		.loc 1 2091 11 is_stmt 0 view .LVU496
 1350 0130 0C4B     		ldr	r3, .L81+8
 1351 0132 DA72     		strb	r2, [r3, #11]
 1352 0134 7CE7     		b	.L66
 1353              	.LVL104:
 1354              	.L73:
2058:bluetooth_rxtx.c **** 				memcmp(le.target, &packet[12], 6)) {  // Target address doesn't match Advertiser.
 1355              		.loc 1 2058 5 discriminator 1 view .LVU497
 1356 0136 0622     		movs	r2, #6
 1357 0138 8118     		adds	r1, r0, r2
 1358 013a 04F13800 		add	r0, r4, #56
 1359              	.LVL105:
2058:bluetooth_rxtx.c **** 				memcmp(le.target, &packet[12], 6)) {  // Target address doesn't match Advertiser.
 1360              		.loc 1 2058 5 discriminator 1 view .LVU498
 1361 013e FFF7FEFF 		bl	memcmp
 1362              	.LVL106:
2057:bluetooth_rxtx.c **** 				memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
 1363              		.loc 1 2057 22 discriminator 1 view .LVU499
 1364 0142 0028     		cmp	r0, #0
 1365 0144 C8D0     		beq	.L74
2059:bluetooth_rxtx.c **** 				return;
 1366              		.loc 1 2059 5 view .LVU500
 1367 0146 0622     		movs	r2, #6
 1368 0148 05F10C01 		add	r1, r5, #12
 1369 014c 04F13800 		add	r0, r4, #56
 1370 0150 FFF7FEFF 		bl	memcmp
 1371              	.LVL107:
2058:bluetooth_rxtx.c **** 				memcmp(le.target, &packet[12], 6)) {  // Target address doesn't match Advertiser.
 1372              		.loc 1 2058 38 view .LVU501
 1373 0154 0028     		cmp	r0, #0
 1374 0156 BFD0     		beq	.L74
 1375 0158 6AE7     		b	.L66
 1376              	.L82:
 1377 015a 00BF     		.align	2
 1378              	.L81:
 1379 015c 00000000 		.word	.LANCHOR0
 1380 0160 00000000 		.word	clkn
 1381 0164 00000000 		.word	.LANCHOR1
ARM GAS  /tmp/ccwF1FQu.s 			page 69


 1382              	.LBE19:
 1383              	.LBE18:
 1384              		.cfi_endproc
 1385              	.LFE25:
 1387              		.section	.rodata.str1.1,"aMS",%progbits,1
 1388              	.LC3:
 1389 0000 32303230 		.ascii	"2020-12-R1\000"
 1389      2D31322D 
 1389      523100
 1390              		.section	.text.vendor_request_handler,"ax",%progbits
 1391              		.align	1
 1392              		.syntax unified
 1393              		.thumb
 1394              		.thumb_func
 1395              		.fpu softvfp
 1397              	vendor_request_handler:
 1398              	.LVL108:
 1399              	.LFB2:
 191:bluetooth_rxtx.c **** 	uint32_t clock;
 1400              		.loc 1 191 1 is_stmt 1 view -0
 1401              		.cfi_startproc
 1402              		@ args = 0, pretend = 0, frame = 0
 1403              		@ frame_needed = 0, uses_anonymous_args = 0
 191:bluetooth_rxtx.c **** 	uint32_t clock;
 1404              		.loc 1 191 1 is_stmt 0 view .LVU503
 1405 0000 2DE9F048 		push	{r4, r5, r6, r7, fp, lr}
 1406              		.cfi_def_cfa_offset 24
 1407              		.cfi_offset 4, -24
 1408              		.cfi_offset 5, -20
 1409              		.cfi_offset 6, -16
 1410              		.cfi_offset 7, -12
 1411              		.cfi_offset 11, -8
 1412              		.cfi_offset 14, -4
 191:bluetooth_rxtx.c **** 	uint32_t clock;
 1413              		.loc 1 191 1 view .LVU504
 1414 0004 0E46     		mov	r6, r1
 192:bluetooth_rxtx.c **** 	size_t length; // string length
 1415              		.loc 1 192 2 is_stmt 1 view .LVU505
 193:bluetooth_rxtx.c **** 	usb_pkt_rx* p = NULL;
 1416              		.loc 1 193 2 view .LVU506
 194:bluetooth_rxtx.c **** 	uint16_t reg_val;
 1417              		.loc 1 194 2 view .LVU507
 1418              	.LVL109:
 195:bluetooth_rxtx.c **** 	uint8_t i;
 1419              		.loc 1 195 2 view .LVU508
 196:bluetooth_rxtx.c **** 	unsigned data_in_len = request_params[2];
 1420              		.loc 1 196 2 view .LVU509
 197:bluetooth_rxtx.c **** 
 1421              		.loc 1 197 2 view .LVU510
 199:bluetooth_rxtx.c **** 
 1422              		.loc 1 199 2 view .LVU511
 191:bluetooth_rxtx.c **** 	uint32_t clock;
 1423              		.loc 1 191 1 is_stmt 0 view .LVU512
 1424 0006 1546     		mov	r5, r2
 1425 0008 1C46     		mov	r4, r3
 1426 000a 4928     		cmp	r0, #73
 1427 000c 00F27B83 		bhi	.L199
ARM GAS  /tmp/ccwF1FQu.s 			page 70


 1428 0010 DFE810F0 		tbh	[pc, r0, lsl #1]
 1429              	.LVL110:
 1430              	.L86:
 1431 0014 1301     		.2byte	(.L222-.L86)/2
 1432 0016 4A00     		.2byte	(.L155-.L86)/2
 1433 0018 5000     		.2byte	(.L154-.L86)/2
 1434 001a 5500     		.2byte	(.L153-.L86)/2
 1435 001c 5B00     		.2byte	(.L152-.L86)/2
 1436 001e 6100     		.2byte	(.L151-.L86)/2
 1437 0020 6600     		.2byte	(.L150-.L86)/2
 1438 0022 6900     		.2byte	(.L149-.L86)/2
 1439 0024 6E00     		.2byte	(.L148-.L86)/2
 1440 0026 7200     		.2byte	(.L147-.L86)/2
 1441 0028 7700     		.2byte	(.L146-.L86)/2
 1442 002a CE00     		.2byte	(.L145-.L86)/2
 1443 002c D900     		.2byte	(.L144-.L86)/2
 1444 002e 1801     		.2byte	(.L221-.L86)/2
 1445 0030 8300     		.2byte	(.L142-.L86)/2
 1446 0032 7D00     		.2byte	(.L141-.L86)/2
 1447 0034 8800     		.2byte	(.L140-.L86)/2
 1448 0036 8D00     		.2byte	(.L139-.L86)/2
 1449 0038 9200     		.2byte	(.L138-.L86)/2
 1450 003a 9400     		.2byte	(.L137-.L86)/2
 1451 003c 9A00     		.2byte	(.L136-.L86)/2
 1452 003e C400     		.2byte	(.L135-.L86)/2
 1453 0040 C700     		.2byte	(.L134-.L86)/2
 1454 0042 CA00     		.2byte	(.L133-.L86)/2
 1455 0044 1101     		.2byte	(.L132-.L86)/2
 1456 0046 1501     		.2byte	(.L131-.L86)/2
 1457 0048 7903     		.2byte	(.L199-.L86)/2
 1458 004a 1B01     		.2byte	(.L130-.L86)/2
 1459 004c 9E00     		.2byte	(.L129-.L86)/2
 1460 004e A600     		.2byte	(.L128-.L86)/2
 1461 0050 B300     		.2byte	(.L127-.L86)/2
 1462 0052 B000     		.2byte	(.L126-.L86)/2
 1463 0054 B600     		.2byte	(.L125-.L86)/2
 1464 0056 4701     		.2byte	(.L124-.L86)/2
 1465 0058 3901     		.2byte	(.L123-.L86)/2
 1466 005a 6501     		.2byte	(.L122-.L86)/2
 1467 005c 6901     		.2byte	(.L121-.L86)/2
 1468 005e 7001     		.2byte	(.L120-.L86)/2
 1469 0060 7201     		.2byte	(.L119-.L86)/2
 1470 0062 CE01     		.2byte	(.L118-.L86)/2
 1471 0064 0802     		.2byte	(.L117-.L86)/2
 1472 0066 2502     		.2byte	(.L116-.L86)/2
 1473 0068 6502     		.2byte	(.L115-.L86)/2
 1474 006a 7502     		.2byte	(.L114-.L86)/2
 1475 006c 8002     		.2byte	(.L113-.L86)/2
 1476 006e 8100     		.2byte	(.L214-.L86)/2
 1477 0070 8702     		.2byte	(.L111-.L86)/2
 1478 0072 8B02     		.2byte	(.L110-.L86)/2
 1479 0074 9102     		.2byte	(.L109-.L86)/2
 1480 0076 9802     		.2byte	(.L108-.L86)/2
 1481 0078 A402     		.2byte	(.L107-.L86)/2
 1482 007a 0C02     		.2byte	(.L106-.L86)/2
 1483 007c 1A02     		.2byte	(.L105-.L86)/2
 1484 007e AD02     		.2byte	(.L104-.L86)/2
ARM GAS  /tmp/ccwF1FQu.s 			page 71


 1485 0080 E502     		.2byte	(.L103-.L86)/2
 1486 0082 5701     		.2byte	(.L102-.L86)/2
 1487 0084 FA02     		.2byte	(.L101-.L86)/2
 1488 0086 7903     		.2byte	(.L199-.L86)/2
 1489 0088 B402     		.2byte	(.L100-.L86)/2
 1490 008a 6603     		.2byte	(.L99-.L86)/2
 1491 008c 6A03     		.2byte	(.L98-.L86)/2
 1492 008e F101     		.2byte	(.L97-.L86)/2
 1493 0090 0402     		.2byte	(.L96-.L86)/2
 1494 0092 3002     		.2byte	(.L95-.L86)/2
 1495 0094 7903     		.2byte	(.L199-.L86)/2
 1496 0096 C902     		.2byte	(.L190-.L86)/2
 1497 0098 CB02     		.2byte	(.L93-.L86)/2
 1498 009a 3601     		.2byte	(.L92-.L86)/2
 1499 009c DB02     		.2byte	(.L91-.L86)/2
 1500 009e 3702     		.2byte	(.L90-.L86)/2
 1501 00a0 6203     		.2byte	(.L89-.L86)/2
 1502 00a2 EF02     		.2byte	(.L88-.L86)/2
 1503 00a4 6F03     		.2byte	(.L87-.L86)/2
 1504 00a6 7603     		.2byte	(.L85-.L86)/2
 1505              		.p2align 1
 1506              	.L155:
 206:bluetooth_rxtx.c **** 		*data_len = 0;
 1507              		.loc 1 206 3 is_stmt 1 view .LVU513
 206:bluetooth_rxtx.c **** 		*data_len = 0;
 1508              		.loc 1 206 18 is_stmt 0 view .LVU514
 1509 00a8 0120     		movs	r0, #1
 1510              	.LVL111:
 206:bluetooth_rxtx.c **** 		*data_len = 0;
 1511              		.loc 1 206 18 view .LVU515
 1512 00aa B24B     		ldr	r3, .L244
 1513 00ac 9874     		strb	r0, [r3, #18]
 207:bluetooth_rxtx.c **** 		break;
 1514              		.loc 1 207 3 is_stmt 1 view .LVU516
 207:bluetooth_rxtx.c **** 		break;
 1515              		.loc 1 207 13 is_stmt 0 view .LVU517
 1516 00ae 0023     		movs	r3, #0
 1517              	.LVL112:
 1518              	.L216:
 503:bluetooth_rxtx.c **** 		break;
 1519              		.loc 1 503 13 view .LVU518
 1520 00b0 2360     		str	r3, [r4]
 504:bluetooth_rxtx.c **** 
 1521              		.loc 1 504 3 is_stmt 1 view .LVU519
 1522 00b2 9EE1     		b	.L83
 1523              	.LVL113:
 1524              	.L154:
 212:bluetooth_rxtx.c **** 		requested_mode = MODE_TX_SYMBOLS;
 1525              		.loc 1 212 3 view .LVU520
 212:bluetooth_rxtx.c **** 		requested_mode = MODE_TX_SYMBOLS;
 1526              		.loc 1 212 12 is_stmt 0 view .LVU521
 1527 00b4 0222     		movs	r2, #2
 1528              	.LVL114:
 212:bluetooth_rxtx.c **** 		requested_mode = MODE_TX_SYMBOLS;
 1529              		.loc 1 212 12 view .LVU522
 1530 00b6 AF4B     		ldr	r3, .L244
 1531 00b8 9A72     		strb	r2, [r3, #10]
ARM GAS  /tmp/ccwF1FQu.s 			page 72


 213:bluetooth_rxtx.c **** 		*data_len = 0;
 1532              		.loc 1 213 3 is_stmt 1 view .LVU523
 1533              	.LVL115:
 1534              	.L225:
 647:bluetooth_rxtx.c **** 		*data_len = 0;
 1535              		.loc 1 647 18 is_stmt 0 view .LVU524
 1536 00ba 9A74     		strb	r2, [r3, #18]
 1537 00bc BDE0     		b	.L222
 1538              	.LVL116:
 1539              	.L153:
 219:bluetooth_rxtx.c **** 		*data_len = 1;
 1540              		.loc 1 219 3 is_stmt 1 view .LVU525
 219:bluetooth_rxtx.c **** 		*data_len = 1;
 1541              		.loc 1 219 14 is_stmt 0 view .LVU526
 1542 00be AE4B     		ldr	r3, .L244+4
 1543 00c0 1B68     		ldr	r3, [r3]
 219:bluetooth_rxtx.c **** 		*data_len = 1;
 1544              		.loc 1 219 26 view .LVU527
 1545 00c2 C3F34003 		ubfx	r3, r3, #1, #1
 1546              	.L220:
 584:bluetooth_rxtx.c **** 		*data_len = 1;
 1547              		.loc 1 584 31 view .LVU528
 1548 00c6 2B70     		strb	r3, [r5]
 1549              	.LVL117:
 585:bluetooth_rxtx.c **** 		break;
 1550              		.loc 1 585 3 is_stmt 1 view .LVU529
 1551 00c8 48E0     		b	.L217
 1552              	.LVL118:
 1553              	.L152:
 224:bluetooth_rxtx.c **** 			USRLED_SET;
 1554              		.loc 1 224 3 view .LVU530
 1555 00ca 0223     		movs	r3, #2
 224:bluetooth_rxtx.c **** 			USRLED_SET;
 1556              		.loc 1 224 6 is_stmt 0 view .LVU531
 1557 00cc 0A88     		ldrh	r2, [r1]
 1558              	.LVL119:
 1559              	.L238:
 260:bluetooth_rxtx.c **** 			CC1V8_SET;
 1560              		.loc 1 260 6 view .LVU532
 1561 00ce E2B1     		cbz	r2, .L160
 261:bluetooth_rxtx.c **** 		else
 1562              		.loc 1 261 4 is_stmt 1 view .LVU533
 1563 00d0 AA4A     		ldr	r2, .L244+8
 1564              	.L224:
 300:bluetooth_rxtx.c **** 		break;
 1565              		.loc 1 300 4 is_stmt 0 view .LVU534
 1566 00d2 1360     		str	r3, [r2]
 1567 00d4 1FE0     		b	.L214
 1568              	.LVL120:
 1569              	.L151:
 231:bluetooth_rxtx.c **** 		*data_len = 1;
 1570              		.loc 1 231 3 is_stmt 1 view .LVU535
 231:bluetooth_rxtx.c **** 		*data_len = 1;
 1571              		.loc 1 231 14 is_stmt 0 view .LVU536
 1572 00d6 A84B     		ldr	r3, .L244+4
 1573 00d8 1B68     		ldr	r3, [r3]
 231:bluetooth_rxtx.c **** 		*data_len = 1;
ARM GAS  /tmp/ccwF1FQu.s 			page 73


 1574              		.loc 1 231 25 view .LVU537
 1575 00da C3F30013 		ubfx	r3, r3, #4, #1
 1576 00de F2E7     		b	.L220
 1577              	.L150:
 236:bluetooth_rxtx.c **** 			RXLED_SET;
 1578              		.loc 1 236 3 is_stmt 1 view .LVU538
 1579 00e0 1023     		movs	r3, #16
 236:bluetooth_rxtx.c **** 			RXLED_SET;
 1580              		.loc 1 236 6 is_stmt 0 view .LVU539
 1581 00e2 0A88     		ldrh	r2, [r1]
 1582              	.LVL121:
 236:bluetooth_rxtx.c **** 			RXLED_SET;
 1583              		.loc 1 236 6 view .LVU540
 1584 00e4 F3E7     		b	.L238
 1585              	.LVL122:
 1586              	.L149:
 243:bluetooth_rxtx.c **** 		*data_len = 1;
 1587              		.loc 1 243 3 is_stmt 1 view .LVU541
 243:bluetooth_rxtx.c **** 		*data_len = 1;
 1588              		.loc 1 243 14 is_stmt 0 view .LVU542
 1589 00e6 A44B     		ldr	r3, .L244+4
 1590              	.L234:
 292:bluetooth_rxtx.c **** 		*data_len = 1;
 1591              		.loc 1 292 14 view .LVU543
 1592 00e8 1B68     		ldr	r3, [r3]
 292:bluetooth_rxtx.c **** 		*data_len = 1;
 1593              		.loc 1 292 23 view .LVU544
 1594 00ea C3F30023 		ubfx	r3, r3, #8, #1
 1595 00ee EAE7     		b	.L220
 1596              	.L148:
 248:bluetooth_rxtx.c **** 			TXLED_SET;
 1597              		.loc 1 248 3 is_stmt 1 view .LVU545
 1598 00f0 4FF48073 		mov	r3, #256
 248:bluetooth_rxtx.c **** 			TXLED_SET;
 1599              		.loc 1 248 6 is_stmt 0 view .LVU546
 1600 00f4 0A88     		ldrh	r2, [r1]
 1601              	.LVL123:
 248:bluetooth_rxtx.c **** 			TXLED_SET;
 1602              		.loc 1 248 6 view .LVU547
 1603 00f6 EAE7     		b	.L238
 1604              	.LVL124:
 1605              	.L147:
 255:bluetooth_rxtx.c **** 		*data_len = 1;
 1606              		.loc 1 255 3 is_stmt 1 view .LVU548
 255:bluetooth_rxtx.c **** 		*data_len = 1;
 1607              		.loc 1 255 14 is_stmt 0 view .LVU549
 1608 00f8 9F4B     		ldr	r3, .L244+4
 1609 00fa 1B68     		ldr	r3, [r3]
 255:bluetooth_rxtx.c **** 		*data_len = 1;
 1610              		.loc 1 255 25 view .LVU550
 1611 00fc C3F34023 		ubfx	r3, r3, #9, #1
 1612 0100 E1E7     		b	.L220
 1613              	.L146:
 260:bluetooth_rxtx.c **** 			CC1V8_SET;
 1614              		.loc 1 260 3 is_stmt 1 view .LVU551
 1615 0102 4FF40073 		mov	r3, #512
 260:bluetooth_rxtx.c **** 			CC1V8_SET;
ARM GAS  /tmp/ccwF1FQu.s 			page 74


 1616              		.loc 1 260 6 is_stmt 0 view .LVU552
 1617 0106 0A88     		ldrh	r2, [r1]
 1618              	.LVL125:
 260:bluetooth_rxtx.c **** 			CC1V8_SET;
 1619              		.loc 1 260 6 view .LVU553
 1620 0108 E1E7     		b	.L238
 1621              	.L160:
 263:bluetooth_rxtx.c **** 		break;
 1622              		.loc 1 263 4 is_stmt 1 view .LVU554
 1623 010a 9D4A     		ldr	r2, .L244+12
 1624 010c E1E7     		b	.L224
 1625              	.LVL126:
 1626              	.L141:
 267:bluetooth_rxtx.c **** 		break;
 1627              		.loc 1 267 3 view .LVU555
 1628 010e 2146     		mov	r1, r4
 1629              	.LVL127:
 267:bluetooth_rxtx.c **** 		break;
 1630              		.loc 1 267 3 is_stmt 0 view .LVU556
 1631 0110 1046     		mov	r0, r2
 1632              	.LVL128:
 267:bluetooth_rxtx.c **** 		break;
 1633              		.loc 1 267 3 view .LVU557
 1634 0112 FFF7FEFF 		bl	get_part_num
 1635              	.LVL129:
 268:bluetooth_rxtx.c **** 
 1636              		.loc 1 268 3 is_stmt 1 view .LVU558
 1637              	.L214:
 731:bluetooth_rxtx.c **** 
 1638              		.loc 1 731 3 view .LVU559
 736:bluetooth_rxtx.c **** }
 1639              		.loc 1 736 9 is_stmt 0 view .LVU560
 1640 0116 0120     		movs	r0, #1
 731:bluetooth_rxtx.c **** 
 1641              		.loc 1 731 3 view .LVU561
 1642 0118 6BE1     		b	.L83
 1643              	.LVL130:
 1644              	.L142:
 275:bluetooth_rxtx.c **** 		break;
 1645              		.loc 1 275 3 is_stmt 1 view .LVU562
 1646 011a 2146     		mov	r1, r4
 1647              	.LVL131:
 275:bluetooth_rxtx.c **** 		break;
 1648              		.loc 1 275 3 is_stmt 0 view .LVU563
 1649 011c 1046     		mov	r0, r2
 1650              	.LVL132:
 275:bluetooth_rxtx.c **** 		break;
 1651              		.loc 1 275 3 view .LVU564
 1652 011e FFF7FEFF 		bl	get_device_serial
 1653              	.LVL133:
 276:bluetooth_rxtx.c **** 
 1654              		.loc 1 276 3 is_stmt 1 view .LVU565
 1655 0122 F8E7     		b	.L214
 1656              	.LVL134:
 1657              	.L140:
 280:bluetooth_rxtx.c **** 		*data_len = 1;
 1658              		.loc 1 280 3 view .LVU566
ARM GAS  /tmp/ccwF1FQu.s 			page 75


 280:bluetooth_rxtx.c **** 		*data_len = 1;
 1659              		.loc 1 280 14 is_stmt 0 view .LVU567
 1660 0124 974B     		ldr	r3, .L244+16
 1661 0126 1B68     		ldr	r3, [r3]
 280:bluetooth_rxtx.c **** 		*data_len = 1;
 1662              		.loc 1 280 24 view .LVU568
 1663 0128 C3F3C013 		ubfx	r3, r3, #7, #1
 1664 012c CBE7     		b	.L220
 1665              	.L139:
 285:bluetooth_rxtx.c **** 			PAEN_SET;
 1666              		.loc 1 285 3 is_stmt 1 view .LVU569
 1667 012e 8023     		movs	r3, #128
 285:bluetooth_rxtx.c **** 			PAEN_SET;
 1668              		.loc 1 285 6 is_stmt 0 view .LVU570
 1669 0130 0A88     		ldrh	r2, [r1]
 1670              	.LVL135:
 1671              	.L242:
 297:bluetooth_rxtx.c **** 			HGM_SET;
 1672              		.loc 1 297 6 view .LVU571
 1673 0132 3AB1     		cbz	r2, .L162
 298:bluetooth_rxtx.c **** 		else
 1674              		.loc 1 298 4 is_stmt 1 view .LVU572
 1675 0134 944A     		ldr	r2, .L244+20
 1676 0136 CCE7     		b	.L224
 1677              	.LVL136:
 1678              	.L138:
 292:bluetooth_rxtx.c **** 		*data_len = 1;
 1679              		.loc 1 292 3 view .LVU573
 292:bluetooth_rxtx.c **** 		*data_len = 1;
 1680              		.loc 1 292 14 is_stmt 0 view .LVU574
 1681 0138 924B     		ldr	r3, .L244+16
 1682 013a D5E7     		b	.L234
 1683              	.L137:
 297:bluetooth_rxtx.c **** 			HGM_SET;
 1684              		.loc 1 297 3 is_stmt 1 view .LVU575
 1685 013c 4FF48073 		mov	r3, #256
 297:bluetooth_rxtx.c **** 			HGM_SET;
 1686              		.loc 1 297 6 is_stmt 0 view .LVU576
 1687 0140 0A88     		ldrh	r2, [r1]
 1688              	.LVL137:
 297:bluetooth_rxtx.c **** 			HGM_SET;
 1689              		.loc 1 297 6 view .LVU577
 1690 0142 F6E7     		b	.L242
 1691              	.L162:
 300:bluetooth_rxtx.c **** 		break;
 1692              		.loc 1 300 4 is_stmt 1 view .LVU578
 1693 0144 914A     		ldr	r2, .L244+24
 1694 0146 C4E7     		b	.L224
 1695              	.LVL138:
 1696              	.L136:
 306:bluetooth_rxtx.c **** 		break;
 1697              		.loc 1 306 3 view .LVU579
 306:bluetooth_rxtx.c **** 		break;
 1698              		.loc 1 306 18 is_stmt 0 view .LVU580
 1699 0148 0322     		movs	r2, #3
 1700              	.LVL139:
 306:bluetooth_rxtx.c **** 		break;
ARM GAS  /tmp/ccwF1FQu.s 			page 76


 1701              		.loc 1 306 18 view .LVU581
 1702 014a 8A4B     		ldr	r3, .L244
 1703              	.L215:
 730:bluetooth_rxtx.c **** 		break;
 1704              		.loc 1 730 18 view .LVU582
 1705 014c 9A74     		strb	r2, [r3, #18]
 1706 014e E2E7     		b	.L214
 1707              	.LVL140:
 1708              	.L129:
 310:bluetooth_rxtx.c **** 		*data_len = 1;
 1709              		.loc 1 310 3 is_stmt 1 view .LVU583
 310:bluetooth_rxtx.c **** 		*data_len = 1;
 1710              		.loc 1 310 13 is_stmt 0 view .LVU584
 1711 0150 0520     		movs	r0, #5
 1712              	.LVL141:
 310:bluetooth_rxtx.c **** 		*data_len = 1;
 1713              		.loc 1 310 13 view .LVU585
 1714 0152 FFF7FEFF 		bl	cc2400_get
 1715              	.LVL142:
 310:bluetooth_rxtx.c **** 		*data_len = 1;
 1716              		.loc 1 310 31 view .LVU586
 1717 0156 00F00700 		and	r0, r0, #7
 310:bluetooth_rxtx.c **** 		*data_len = 1;
 1718              		.loc 1 310 11 view .LVU587
 1719 015a 2870     		strb	r0, [r5]
 311:bluetooth_rxtx.c **** 		break;
 1720              		.loc 1 311 3 is_stmt 1 view .LVU588
 1721              	.LVL143:
 1722              	.L217:
 599:bluetooth_rxtx.c **** 		}
 1723              		.loc 1 599 4 view .LVU589
 599:bluetooth_rxtx.c **** 		}
 1724              		.loc 1 599 14 is_stmt 0 view .LVU590
 1725 015c 0120     		movs	r0, #1
 1726 015e C0E0     		b	.L219
 1727              	.LVL144:
 1728              	.L128:
 315:bluetooth_rxtx.c **** 			cc2400_set(FREND, 8 | request_params[0]);
 1729              		.loc 1 315 3 is_stmt 1 view .LVU591
 315:bluetooth_rxtx.c **** 			cc2400_set(FREND, 8 | request_params[0]);
 1730              		.loc 1 315 21 is_stmt 0 view .LVU592
 1731 0160 0988     		ldrh	r1, [r1]
 1732              	.LVL145:
 315:bluetooth_rxtx.c **** 			cc2400_set(FREND, 8 | request_params[0]);
 1733              		.loc 1 315 5 view .LVU593
 1734 0162 0729     		cmp	r1, #7
 1735 0164 00F2CF82 		bhi	.L199
 316:bluetooth_rxtx.c **** 		} else {
 1736              		.loc 1 316 4 is_stmt 1 view .LVU594
 1737 0168 0520     		movs	r0, #5
 1738              	.LVL146:
 316:bluetooth_rxtx.c **** 		} else {
 1739              		.loc 1 316 4 is_stmt 0 view .LVU595
 1740 016a 41F00801 		orr	r1, r1, #8
 1741              	.L226:
 621:bluetooth_rxtx.c **** 		break;
 1742              		.loc 1 621 3 view .LVU596
ARM GAS  /tmp/ccwF1FQu.s 			page 77


 1743 016e FFF7FEFF 		bl	cc2400_set
 1744              	.LVL147:
 622:bluetooth_rxtx.c **** 
 1745              		.loc 1 622 3 is_stmt 1 view .LVU597
 1746 0172 D0E7     		b	.L214
 1747              	.LVL148:
 1748              	.L126:
 323:bluetooth_rxtx.c **** 		break;
 1749              		.loc 1 323 3 view .LVU598
 323:bluetooth_rxtx.c **** 		break;
 1750              		.loc 1 323 18 is_stmt 0 view .LVU599
 1751 0174 0522     		movs	r2, #5
 1752              	.LVL149:
 323:bluetooth_rxtx.c **** 		break;
 1753              		.loc 1 323 18 view .LVU600
 1754 0176 7F4B     		ldr	r3, .L244
 1755 0178 E8E7     		b	.L215
 1756              	.LVL150:
 1757              	.L127:
 327:bluetooth_rxtx.c **** 		break;
 1758              		.loc 1 327 3 is_stmt 1 view .LVU601
 327:bluetooth_rxtx.c **** 		break;
 1759              		.loc 1 327 18 is_stmt 0 view .LVU602
 1760 017a 0622     		movs	r2, #6
 1761              	.LVL151:
 327:bluetooth_rxtx.c **** 		break;
 1762              		.loc 1 327 18 view .LVU603
 1763 017c 7D4B     		ldr	r3, .L244
 1764 017e E5E7     		b	.L215
 1765              	.LVL152:
 1766              	.L125:
 332:bluetooth_rxtx.c **** 		data[1] = rr.request_pa;
 1767              		.loc 1 332 3 is_stmt 1 view .LVU604
 332:bluetooth_rxtx.c **** 		data[1] = rr.request_pa;
 1768              		.loc 1 332 15 is_stmt 0 view .LVU605
 1769 0180 834B     		ldr	r3, .L244+28
 1770 0182 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1771              	.LVL153:
 332:bluetooth_rxtx.c **** 		data[1] = rr.request_pa;
 1772              		.loc 1 332 11 view .LVU606
 1773 0184 2A70     		strb	r2, [r5]
 1774              	.LVL154:
 333:bluetooth_rxtx.c **** 		data[2] = rr.request_num;
 1775              		.loc 1 333 3 is_stmt 1 view .LVU607
 333:bluetooth_rxtx.c **** 		data[2] = rr.request_num;
 1776              		.loc 1 333 15 is_stmt 0 view .LVU608
 1777 0186 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 333:bluetooth_rxtx.c **** 		data[2] = rr.request_num;
 1778              		.loc 1 333 11 view .LVU609
 1779 0188 6A70     		strb	r2, [r5, #1]
 334:bluetooth_rxtx.c **** 		data[3] = rr.reply_pa;
 1780              		.loc 1 334 3 is_stmt 1 view .LVU610
 334:bluetooth_rxtx.c **** 		data[3] = rr.reply_pa;
 1781              		.loc 1 334 15 is_stmt 0 view .LVU611
 1782 018a 9A78     		ldrb	r2, [r3, #2]	@ zero_extendqisi2
 334:bluetooth_rxtx.c **** 		data[3] = rr.reply_pa;
 1783              		.loc 1 334 11 view .LVU612
ARM GAS  /tmp/ccwF1FQu.s 			page 78


 1784 018c AA70     		strb	r2, [r5, #2]
 335:bluetooth_rxtx.c **** 		data[4] = rr.reply_num;
 1785              		.loc 1 335 3 is_stmt 1 view .LVU613
 335:bluetooth_rxtx.c **** 		data[4] = rr.reply_num;
 1786              		.loc 1 335 15 is_stmt 0 view .LVU614
 1787 018e DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 335:bluetooth_rxtx.c **** 		data[4] = rr.reply_num;
 1788              		.loc 1 335 11 view .LVU615
 1789 0190 EA70     		strb	r2, [r5, #3]
 336:bluetooth_rxtx.c **** 		*data_len = 5;
 1790              		.loc 1 336 3 is_stmt 1 view .LVU616
 336:bluetooth_rxtx.c **** 		*data_len = 5;
 1791              		.loc 1 336 15 is_stmt 0 view .LVU617
 1792 0192 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
 336:bluetooth_rxtx.c **** 		*data_len = 5;
 1793              		.loc 1 336 11 view .LVU618
 1794 0194 2B71     		strb	r3, [r5, #4]
 337:bluetooth_rxtx.c **** 		break;
 1795              		.loc 1 337 3 is_stmt 1 view .LVU619
 337:bluetooth_rxtx.c **** 		break;
 1796              		.loc 1 337 13 is_stmt 0 view .LVU620
 1797 0196 0523     		movs	r3, #5
 1798              	.LVL155:
 1799              	.L223:
 648:bluetooth_rxtx.c **** 		break;
 1800              		.loc 1 648 13 view .LVU621
 1801 0198 2360     		str	r3, [r4]
 649:bluetooth_rxtx.c **** 
 1802              		.loc 1 649 3 is_stmt 1 view .LVU622
 1803 019a BCE7     		b	.L214
 1804              	.LVL156:
 1805              	.L135:
 341:bluetooth_rxtx.c **** 		break;
 1806              		.loc 1 341 3 view .LVU623
 341:bluetooth_rxtx.c **** 		break;
 1807              		.loc 1 341 18 is_stmt 0 view .LVU624
 1808 019c 0022     		movs	r2, #0
 1809              	.LVL157:
 341:bluetooth_rxtx.c **** 		break;
 1810              		.loc 1 341 18 view .LVU625
 1811 019e 754B     		ldr	r3, .L244
 1812 01a0 D4E7     		b	.L215
 1813              	.LVL158:
 1814              	.L134:
 345:bluetooth_rxtx.c **** 		*data_len = 1;
 1815              		.loc 1 345 3 is_stmt 1 view .LVU626
 345:bluetooth_rxtx.c **** 		*data_len = 1;
 1816              		.loc 1 345 11 is_stmt 0 view .LVU627
 1817 01a2 744B     		ldr	r3, .L244
 1818              	.L235:
 448:bluetooth_rxtx.c **** 		*data_len = 1;
 1819              		.loc 1 448 11 view .LVU628
 1820 01a4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1821 01a6 8EE7     		b	.L220
 1822              	.L133:
 350:bluetooth_rxtx.c **** 		break;
 1823              		.loc 1 350 3 is_stmt 1 view .LVU629
ARM GAS  /tmp/ccwF1FQu.s 			page 79


 350:bluetooth_rxtx.c **** 		break;
 1824              		.loc 1 350 14 is_stmt 0 view .LVU630
 1825 01a8 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 1826              	.LVL159:
 350:bluetooth_rxtx.c **** 		break;
 1827              		.loc 1 350 14 view .LVU631
 1828 01aa 724B     		ldr	r3, .L244
 1829 01ac 1A70     		strb	r2, [r3]
 351:bluetooth_rxtx.c **** 
 1830              		.loc 1 351 3 is_stmt 1 view .LVU632
 1831 01ae B2E7     		b	.L214
 1832              	.LVL160:
 1833              	.L145:
 354:bluetooth_rxtx.c **** 		data[1] = (channel >> 8) & 0xFF;
 1834              		.loc 1 354 3 view .LVU633
 354:bluetooth_rxtx.c **** 		data[1] = (channel >> 8) & 0xFF;
 1835              		.loc 1 354 11 is_stmt 0 view .LVU634
 1836 01b0 784B     		ldr	r3, .L244+32
 1837 01b2 B3F84C20 		ldrh	r2, [r3, #76]
 1838              	.LVL161:
 354:bluetooth_rxtx.c **** 		data[1] = (channel >> 8) & 0xFF;
 1839              		.loc 1 354 11 view .LVU635
 1840 01b6 2A70     		strb	r2, [r5]
 1841              	.LVL162:
 355:bluetooth_rxtx.c **** 		*data_len = 2;
 1842              		.loc 1 355 3 is_stmt 1 view .LVU636
 355:bluetooth_rxtx.c **** 		*data_len = 2;
 1843              		.loc 1 355 11 is_stmt 0 view .LVU637
 1844 01b8 B3F84C30 		ldrh	r3, [r3, #76]
 1845 01bc C3F30723 		ubfx	r3, r3, #8, #8
 1846              	.L243:
 579:bluetooth_rxtx.c **** 		*data_len = 2;
 1847              		.loc 1 579 11 view .LVU638
 1848 01c0 6B70     		strb	r3, [r5, #1]
 580:bluetooth_rxtx.c **** 		break;
 1849              		.loc 1 580 3 is_stmt 1 view .LVU639
 1850              	.LVL163:
 1851              	.L236:
 617:bluetooth_rxtx.c **** 		break;
 1852              		.loc 1 617 3 view .LVU640
 617:bluetooth_rxtx.c **** 		break;
 1853              		.loc 1 617 13 is_stmt 0 view .LVU641
 1854 01c2 0223     		movs	r3, #2
 1855 01c4 E8E7     		b	.L223
 1856              	.LVL164:
 1857              	.L144:
 360:bluetooth_rxtx.c **** 		/* bluetooth band sweep mode, start at channel 2402 */
 1858              		.loc 1 360 3 is_stmt 1 view .LVU642
 360:bluetooth_rxtx.c **** 		/* bluetooth band sweep mode, start at channel 2402 */
 1859              		.loc 1 360 37 is_stmt 0 view .LVU643
 1860 01c6 0A88     		ldrh	r2, [r1]
 1861              	.LVL165:
 362:bluetooth_rxtx.c **** 			hop_mode = HOP_SWEEP;
 1862              		.loc 1 362 6 view .LVU644
 1863 01c8 40F6EA21 		movw	r1, #2794
 1864              	.LVL166:
 360:bluetooth_rxtx.c **** 		/* bluetooth band sweep mode, start at channel 2402 */
ARM GAS  /tmp/ccwF1FQu.s 			page 80


 1865              		.loc 1 360 21 view .LVU645
 1866 01cc 694B     		ldr	r3, .L244
 1867 01ce DA81     		strh	r2, [r3, #14]	@ movhi
 362:bluetooth_rxtx.c **** 			hop_mode = HOP_SWEEP;
 1868              		.loc 1 362 3 is_stmt 1 view .LVU646
 362:bluetooth_rxtx.c **** 			hop_mode = HOP_SWEEP;
 1869              		.loc 1 362 25 is_stmt 0 view .LVU647
 1870 01d0 DA89     		ldrh	r2, [r3, #14]
 1871 01d2 92B2     		uxth	r2, r2
 362:bluetooth_rxtx.c **** 			hop_mode = HOP_SWEEP;
 1872              		.loc 1 362 6 view .LVU648
 1873 01d4 8A42     		cmp	r2, r1
 1874 01d6 18D9     		bls	.L163
 363:bluetooth_rxtx.c **** 			requested_channel = 2402;
 1875              		.loc 1 363 4 is_stmt 1 view .LVU649
 363:bluetooth_rxtx.c **** 			requested_channel = 2402;
 1876              		.loc 1 363 13 is_stmt 0 view .LVU650
 1877 01d8 0122     		movs	r2, #1
 1878 01da 9A72     		strb	r2, [r3, #10]
 364:bluetooth_rxtx.c **** 		}
 1879              		.loc 1 364 4 is_stmt 1 view .LVU651
 364:bluetooth_rxtx.c **** 		}
 1880              		.loc 1 364 22 is_stmt 0 view .LVU652
 1881 01dc 40F66212 		movw	r2, #2402
 1882              	.L166:
 370:bluetooth_rxtx.c **** 		}
 1883              		.loc 1 370 22 discriminator 4 view .LVU653
 1884 01e0 DA81     		strh	r2, [r3, #14]	@ movhi
 373:bluetooth_rxtx.c **** 		if (mode != MODE_BT_FOLLOW_LE) {
 1885              		.loc 1 373 3 is_stmt 1 discriminator 4 view .LVU654
 373:bluetooth_rxtx.c **** 		if (mode != MODE_BT_FOLLOW_LE) {
 1886              		.loc 1 373 18 is_stmt 0 discriminator 4 view .LVU655
 1887 01e2 D989     		ldrh	r1, [r3, #14]
 1888 01e4 6B4A     		ldr	r2, .L244+32
 1889 01e6 89B2     		uxth	r1, r1
 1890 01e8 A2F85010 		strh	r1, [r2, #80]	@ movhi
 374:bluetooth_rxtx.c **** 			channel = requested_channel;
 1891              		.loc 1 374 3 is_stmt 1 discriminator 4 view .LVU656
 374:bluetooth_rxtx.c **** 			channel = requested_channel;
 1892              		.loc 1 374 12 is_stmt 0 discriminator 4 view .LVU657
 1893 01ec 597C     		ldrb	r1, [r3, #17]	@ zero_extendqisi2
 374:bluetooth_rxtx.c **** 			channel = requested_channel;
 1894              		.loc 1 374 6 discriminator 4 view .LVU658
 1895 01ee 0929     		cmp	r1, #9
 1896 01f0 91D0     		beq	.L214
 375:bluetooth_rxtx.c **** 			requested_channel = 0;
 1897              		.loc 1 375 4 is_stmt 1 view .LVU659
 375:bluetooth_rxtx.c **** 			requested_channel = 0;
 1898              		.loc 1 375 12 is_stmt 0 view .LVU660
 1899 01f2 D989     		ldrh	r1, [r3, #14]
 1900 01f4 89B2     		uxth	r1, r1
 1901 01f6 A2F84C10 		strh	r1, [r2, #76]	@ movhi
 376:bluetooth_rxtx.c **** 
 1902              		.loc 1 376 4 is_stmt 1 view .LVU661
 376:bluetooth_rxtx.c **** 
 1903              		.loc 1 376 22 is_stmt 0 view .LVU662
 1904 01fa 0021     		movs	r1, #0
ARM GAS  /tmp/ccwF1FQu.s 			page 81


 1905 01fc D981     		strh	r1, [r3, #14]	@ movhi
 380:bluetooth_rxtx.c **** 		}
 1906              		.loc 1 380 4 is_stmt 1 view .LVU663
 1907 01fe B2F84C00 		ldrh	r0, [r2, #76]
 1908              	.LVL167:
 1909              	.L227:
 610:bluetooth_rxtx.c **** 		break;
 1910              		.loc 1 610 3 is_stmt 0 view .LVU664
 1911 0202 80B2     		uxth	r0, r0
 1912 0204 FFF7FEFF 		bl	cs_threshold_calc_and_set
 1913              	.LVL168:
 611:bluetooth_rxtx.c **** 
 1914              		.loc 1 611 3 is_stmt 1 view .LVU665
 1915 0208 85E7     		b	.L214
 1916              	.LVL169:
 1917              	.L163:
 368:bluetooth_rxtx.c **** 			requested_channel = MAX(requested_channel, MIN_FREQ);
 1918              		.loc 1 368 4 view .LVU666
 368:bluetooth_rxtx.c **** 			requested_channel = MAX(requested_channel, MIN_FREQ);
 1919              		.loc 1 368 13 is_stmt 0 view .LVU667
 1920 020a 0022     		movs	r2, #0
 1921 020c 9A72     		strb	r2, [r3, #10]
 369:bluetooth_rxtx.c **** 			requested_channel = MIN(requested_channel, MAX_FREQ);
 1922              		.loc 1 369 4 is_stmt 1 view .LVU668
 369:bluetooth_rxtx.c **** 			requested_channel = MIN(requested_channel, MAX_FREQ);
 1923              		.loc 1 369 22 is_stmt 0 view .LVU669
 1924 020e 40F6DC02 		movw	r2, #2268
 369:bluetooth_rxtx.c **** 			requested_channel = MIN(requested_channel, MAX_FREQ);
 1925              		.loc 1 369 24 view .LVU670
 1926 0212 D989     		ldrh	r1, [r3, #14]
 1927 0214 89B2     		uxth	r1, r1
 369:bluetooth_rxtx.c **** 			requested_channel = MIN(requested_channel, MAX_FREQ);
 1928              		.loc 1 369 22 view .LVU671
 1929 0216 9142     		cmp	r1, r2
 370:bluetooth_rxtx.c **** 		}
 1930              		.loc 1 370 22 view .LVU672
 1931 0218 40F6E921 		movw	r1, #2793
 369:bluetooth_rxtx.c **** 			requested_channel = MIN(requested_channel, MAX_FREQ);
 1932              		.loc 1 369 22 view .LVU673
 1933 021c 84BF     		itt	hi
 1934 021e DA89     		ldrhhi	r2, [r3, #14]
 1935 0220 92B2     		uxthhi	r2, r2
 1936 0222 DA81     		strh	r2, [r3, #14]	@ movhi
 370:bluetooth_rxtx.c **** 		}
 1937              		.loc 1 370 4 is_stmt 1 view .LVU674
 370:bluetooth_rxtx.c **** 		}
 1938              		.loc 1 370 24 is_stmt 0 view .LVU675
 1939 0224 DA89     		ldrh	r2, [r3, #14]
 1940 0226 92B2     		uxth	r2, r2
 370:bluetooth_rxtx.c **** 		}
 1941              		.loc 1 370 22 view .LVU676
 1942 0228 8A42     		cmp	r2, r1
 1943 022a 96BF     		itet	ls
 1944 022c DA89     		ldrhls	r2, [r3, #14]
 1945 022e 40F6EA22 		movwhi	r2, #2794
 1946 0232 92B2     		uxthls	r2, r2
 1947 0234 D4E7     		b	.L166
ARM GAS  /tmp/ccwF1FQu.s 			page 82


 1948              	.LVL170:
 1949              	.L132:
 385:bluetooth_rxtx.c **** 		*data_len = 0; /* should never return */
 1950              		.loc 1 385 3 is_stmt 1 view .LVU677
 1951 0236 FFF7FEFF 		bl	set_isp
 1952              	.LVL171:
 386:bluetooth_rxtx.c **** 		break;
 1953              		.loc 1 386 3 view .LVU678
 1954              	.L222:
 648:bluetooth_rxtx.c **** 		break;
 1955              		.loc 1 648 3 view .LVU679
 648:bluetooth_rxtx.c **** 		break;
 1956              		.loc 1 648 13 is_stmt 0 view .LVU680
 1957 023a 0023     		movs	r3, #0
 1958 023c ACE7     		b	.L223
 1959              	.LVL172:
 1960              	.L131:
 390:bluetooth_rxtx.c **** 		requested_mode = MODE_RESET;
 1961              		.loc 1 390 3 is_stmt 1 view .LVU681
 390:bluetooth_rxtx.c **** 		requested_mode = MODE_RESET;
 1962              		.loc 1 390 19 is_stmt 0 view .LVU682
 1963 023e 564B     		ldr	r3, .L244+36
 1964 0240 564A     		ldr	r2, .L244+40
 1965              	.LVL173:
 390:bluetooth_rxtx.c **** 		requested_mode = MODE_RESET;
 1966              		.loc 1 390 19 view .LVU683
 1967 0242 1A60     		str	r2, [r3]
 1968              	.L221:
 391:bluetooth_rxtx.c **** 		break;
 1969              		.loc 1 391 3 is_stmt 1 view .LVU684
 391:bluetooth_rxtx.c **** 		break;
 1970              		.loc 1 391 18 is_stmt 0 view .LVU685
 1971 0244 0B22     		movs	r2, #11
 1972 0246 4B4B     		ldr	r3, .L244
 1973 0248 80E7     		b	.L215
 1974              	.LVL174:
 1975              	.L130:
 395:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 1976              		.loc 1 395 3 is_stmt 1 view .LVU686
 395:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 1977              		.loc 1 395 6 is_stmt 0 view .LVU687
 1978 024a 6FF40060 		mvn	r0, #2048
 1979              	.LVL175:
 395:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 1980              		.loc 1 395 21 view .LVU688
 1981 024e 0A88     		ldrh	r2, [r1]
 1982              	.LVL176:
 395:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 1983              		.loc 1 395 6 view .LVU689
 1984 0250 1318     		adds	r3, r2, r0
 1985 0252 B3F5806F 		cmp	r3, #1024
 1986 0256 80F05682 		bcs	.L199
 396:bluetooth_rxtx.c **** 				request_params[1] < request_params[0])
 1987              		.loc 1 396 19 discriminator 1 view .LVU690
 1988 025a 4B88     		ldrh	r3, [r1, #2]
 395:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 1989              		.loc 1 395 60 discriminator 1 view .LVU691
ARM GAS  /tmp/ccwF1FQu.s 			page 83


 1990 025c 6FF40061 		mvn	r1, #2048
 1991              	.LVL177:
 395:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 1992              		.loc 1 395 60 discriminator 1 view .LVU692
 1993 0260 5918     		adds	r1, r3, r1
 1994 0262 B1F5806F 		cmp	r1, #1024
 1995 0266 80F04E82 		bcs	.L199
 396:bluetooth_rxtx.c **** 				request_params[1] < request_params[0])
 1996              		.loc 1 396 58 discriminator 1 view .LVU693
 1997 026a 9A42     		cmp	r2, r3
 1998 026c 00F24B82 		bhi	.L199
 399:bluetooth_rxtx.c **** 		high_freq = request_params[1];
 1999              		.loc 1 399 3 is_stmt 1 view .LVU694
 399:bluetooth_rxtx.c **** 		high_freq = request_params[1];
 2000              		.loc 1 399 12 is_stmt 0 view .LVU695
 2001 0270 4849     		ldr	r1, .L244+32
 2002 0272 A1F85220 		strh	r2, [r1, #82]	@ movhi
 400:bluetooth_rxtx.c **** 		requested_mode = MODE_SPECAN;
 2003              		.loc 1 400 3 is_stmt 1 view .LVU696
 400:bluetooth_rxtx.c **** 		requested_mode = MODE_SPECAN;
 2004              		.loc 1 400 13 is_stmt 0 view .LVU697
 2005 0276 A1F85430 		strh	r3, [r1, #84]	@ movhi
 401:bluetooth_rxtx.c **** 		*data_len = 0;
 2006              		.loc 1 401 3 is_stmt 1 view .LVU698
 401:bluetooth_rxtx.c **** 		*data_len = 0;
 2007              		.loc 1 401 18 is_stmt 0 view .LVU699
 2008 027a 0422     		movs	r2, #4
 2009 027c 3D4B     		ldr	r3, .L244
 2010 027e 1CE7     		b	.L225
 2011              	.LVL178:
 2012              	.L92:
 406:bluetooth_rxtx.c **** 		*data_len = 0;
 2013              		.loc 1 406 3 is_stmt 1 view .LVU700
 406:bluetooth_rxtx.c **** 		*data_len = 0;
 2014              		.loc 1 406 18 is_stmt 0 view .LVU701
 2015 0280 0F22     		movs	r2, #15
 2016              	.LVL179:
 406:bluetooth_rxtx.c **** 		*data_len = 0;
 2017              		.loc 1 406 18 view .LVU702
 2018 0282 3C4B     		ldr	r3, .L244
 2019 0284 19E7     		b	.L225
 2020              	.LVL180:
 2021              	.L123:
 411:bluetooth_rxtx.c **** 			return 0;
 2022              		.loc 1 411 3 is_stmt 1 view .LVU703
 411:bluetooth_rxtx.c **** 			return 0;
 2023              		.loc 1 411 21 is_stmt 0 view .LVU704
 2024 0286 0B88     		ldrh	r3, [r1]
 411:bluetooth_rxtx.c **** 			return 0;
 2025              		.loc 1 411 6 view .LVU705
 2026 0288 B3F5807F 		cmp	r3, #256
 2027 028c 00F23B82 		bhi	.L199
 413:bluetooth_rxtx.c **** 		requested_mode = MODE_LED_SPECAN;
 2028              		.loc 1 413 3 is_stmt 1 view .LVU706
 413:bluetooth_rxtx.c **** 		requested_mode = MODE_LED_SPECAN;
 2029              		.loc 1 413 18 is_stmt 0 view .LVU707
 2030 0290 404A     		ldr	r2, .L244+32
ARM GAS  /tmp/ccwF1FQu.s 			page 84


 2031              	.LVL181:
 413:bluetooth_rxtx.c **** 		requested_mode = MODE_LED_SPECAN;
 2032              		.loc 1 413 23 view .LVU708
 2033 0292 C3F13603 		rsb	r3, r3, #54
 2034 0296 5BB2     		sxtb	r3, r3
 413:bluetooth_rxtx.c **** 		requested_mode = MODE_LED_SPECAN;
 2035              		.loc 1 413 18 view .LVU709
 2036 0298 82F85630 		strb	r3, [r2, #86]
 414:bluetooth_rxtx.c **** 		*data_len = 0;
 2037              		.loc 1 414 3 is_stmt 1 view .LVU710
 414:bluetooth_rxtx.c **** 		*data_len = 0;
 2038              		.loc 1 414 18 is_stmt 0 view .LVU711
 2039 029c 0722     		movs	r2, #7
 2040 029e 354B     		ldr	r3, .L244
 2041 02a0 0BE7     		b	.L225
 2042              	.LVL182:
 2043              	.L124:
 419:bluetooth_rxtx.c **** 		data[1] = 0x00;
 2044              		.loc 1 419 3 is_stmt 1 view .LVU712
 419:bluetooth_rxtx.c **** 		data[1] = 0x00;
 2045              		.loc 1 419 11 is_stmt 0 view .LVU713
 2046 02a2 0023     		movs	r3, #0
 422:bluetooth_rxtx.c **** 		data[2] = length;
 2047              		.loc 1 422 16 view .LVU714
 2048 02a4 3E48     		ldr	r0, .L244+44
 2049              	.LVL183:
 419:bluetooth_rxtx.c **** 		data[1] = 0x00;
 2050              		.loc 1 419 11 view .LVU715
 2051 02a6 1370     		strb	r3, [r2]
 2052              	.LVL184:
 420:bluetooth_rxtx.c **** 
 2053              		.loc 1 420 3 is_stmt 1 view .LVU716
 420:bluetooth_rxtx.c **** 
 2054              		.loc 1 420 11 is_stmt 0 view .LVU717
 2055 02a8 5370     		strb	r3, [r2, #1]
 422:bluetooth_rxtx.c **** 		data[2] = length;
 2056              		.loc 1 422 3 is_stmt 1 view .LVU718
 422:bluetooth_rxtx.c **** 		data[2] = length;
 2057              		.loc 1 422 16 is_stmt 0 view .LVU719
 2058 02aa FFF7FEFF 		bl	strlen
 2059              	.LVL185:
 422:bluetooth_rxtx.c **** 		data[2] = length;
 2060              		.loc 1 422 16 view .LVU720
 2061 02ae C6B2     		uxtb	r6, r0
 2062              	.LVL186:
 423:bluetooth_rxtx.c **** 
 2063              		.loc 1 423 3 is_stmt 1 view .LVU721
 425:bluetooth_rxtx.c **** 
 2064              		.loc 1 425 3 is_stmt 0 view .LVU722
 2065 02b0 3246     		mov	r2, r6
 422:bluetooth_rxtx.c **** 		data[2] = length;
 2066              		.loc 1 422 12 view .LVU723
 2067 02b2 A870     		strb	r0, [r5, #2]
 425:bluetooth_rxtx.c **** 
 2068              		.loc 1 425 3 is_stmt 1 view .LVU724
 2069 02b4 3A49     		ldr	r1, .L244+44
 2070 02b6 E81C     		adds	r0, r5, #3
ARM GAS  /tmp/ccwF1FQu.s 			page 85


 2071 02b8 FFF7FEFF 		bl	memcpy
 2072              	.LVL187:
 427:bluetooth_rxtx.c **** 		break;
 2073              		.loc 1 427 3 view .LVU725
 427:bluetooth_rxtx.c **** 		break;
 2074              		.loc 1 427 21 is_stmt 0 view .LVU726
 2075 02bc 0336     		adds	r6, r6, #3
 2076              	.LVL188:
 2077              	.L228:
 434:bluetooth_rxtx.c **** 		break;
 2078              		.loc 1 434 13 view .LVU727
 2079 02be 2660     		str	r6, [r4]
 435:bluetooth_rxtx.c **** 
 2080              		.loc 1 435 3 is_stmt 1 view .LVU728
 2081 02c0 29E7     		b	.L214
 2082              	.LVL189:
 2083              	.L102:
 431:bluetooth_rxtx.c **** 		data[0] = length;
 2084              		.loc 1 431 3 view .LVU729
 431:bluetooth_rxtx.c **** 		data[0] = length;
 2085              		.loc 1 431 16 is_stmt 0 view .LVU730
 2086 02c2 3848     		ldr	r0, .L244+48
 2087              	.LVL190:
 431:bluetooth_rxtx.c **** 		data[0] = length;
 2088              		.loc 1 431 16 view .LVU731
 2089 02c4 FFF7FEFF 		bl	strlen
 2090              	.LVL191:
 431:bluetooth_rxtx.c **** 		data[0] = length;
 2091              		.loc 1 431 16 view .LVU732
 2092 02c8 0346     		mov	r3, r0
 2093 02ca C6B2     		uxtb	r6, r0
 2094              	.LVL192:
 432:bluetooth_rxtx.c **** 		memcpy(&data[1], compile_info, length);
 2095              		.loc 1 432 3 is_stmt 1 view .LVU733
 431:bluetooth_rxtx.c **** 		data[0] = length;
 2096              		.loc 1 431 12 is_stmt 0 view .LVU734
 2097 02cc 2846     		mov	r0, r5
 433:bluetooth_rxtx.c **** 		*data_len = 1 + length;
 2098              		.loc 1 433 3 view .LVU735
 2099 02ce 3246     		mov	r2, r6
 2100 02d0 3449     		ldr	r1, .L244+48
 431:bluetooth_rxtx.c **** 		data[0] = length;
 2101              		.loc 1 431 12 view .LVU736
 2102 02d2 00F8013B 		strb	r3, [r0], #1
 433:bluetooth_rxtx.c **** 		*data_len = 1 + length;
 2103              		.loc 1 433 3 is_stmt 1 view .LVU737
 2104 02d6 FFF7FEFF 		bl	memcpy
 2105              	.LVL193:
 434:bluetooth_rxtx.c **** 		break;
 2106              		.loc 1 434 3 view .LVU738
 434:bluetooth_rxtx.c **** 		break;
 2107              		.loc 1 434 17 is_stmt 0 view .LVU739
 2108 02da 0136     		adds	r6, r6, #1
 2109              	.LVL194:
 434:bluetooth_rxtx.c **** 		break;
 2110              		.loc 1 434 17 view .LVU740
 2111 02dc EFE7     		b	.L228
ARM GAS  /tmp/ccwF1FQu.s 			page 86


 2112              	.LVL195:
 2113              	.L122:
 438:bluetooth_rxtx.c **** 		*data_len = 1;
 2114              		.loc 1 438 3 is_stmt 1 view .LVU741
 438:bluetooth_rxtx.c **** 		*data_len = 1;
 2115              		.loc 1 438 11 is_stmt 0 view .LVU742
 2116 02de 0120     		movs	r0, #1
 2117              	.LVL196:
 438:bluetooth_rxtx.c **** 		*data_len = 1;
 2118              		.loc 1 438 11 view .LVU743
 2119 02e0 1070     		strb	r0, [r2]
 2120              	.LVL197:
 439:bluetooth_rxtx.c **** 		break;
 2121              		.loc 1 439 3 is_stmt 1 view .LVU744
 2122              	.L219:
 599:bluetooth_rxtx.c **** 		}
 2123              		.loc 1 599 14 is_stmt 0 view .LVU745
 2124 02e2 2060     		str	r0, [r4]
 2125 02e4 85E0     		b	.L83
 2126              	.LVL198:
 2127              	.L121:
 443:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set(channel);
 2128              		.loc 1 443 3 is_stmt 1 view .LVU746
 443:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set(channel);
 2129              		.loc 1 443 22 is_stmt 0 view .LVU747
 2130 02e6 0A88     		ldrh	r2, [r1]
 2131              	.LVL199:
 443:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set(channel);
 2132              		.loc 1 443 22 view .LVU748
 2133 02e8 2F4B     		ldr	r3, .L244+52
 2134 02ea 1A70     		strb	r2, [r3]
 444:bluetooth_rxtx.c **** 		break;
 2135              		.loc 1 444 3 is_stmt 1 view .LVU749
 2136              	.LVL200:
 2137              	.L230:
 610:bluetooth_rxtx.c **** 		break;
 2138              		.loc 1 610 3 view .LVU750
 2139 02ec 294B     		ldr	r3, .L244+32
 2140 02ee B3F84C00 		ldrh	r0, [r3, #76]
 2141 02f2 86E7     		b	.L227
 2142              	.LVL201:
 2143              	.L120:
 448:bluetooth_rxtx.c **** 		*data_len = 1;
 2144              		.loc 1 448 3 view .LVU751
 448:bluetooth_rxtx.c **** 		*data_len = 1;
 2145              		.loc 1 448 11 is_stmt 0 view .LVU752
 2146 02f4 2C4B     		ldr	r3, .L244+52
 2147 02f6 55E7     		b	.L235
 2148              	.L119:
 453:bluetooth_rxtx.c **** 		target.syncword = 0;
 2149              		.loc 1 453 3 is_stmt 1 view .LVU753
 453:bluetooth_rxtx.c **** 		target.syncword = 0;
 2150              		.loc 1 453 18 is_stmt 0 view .LVU754
 2151 02f8 0020     		movs	r0, #0
 2152              	.LVL202:
 453:bluetooth_rxtx.c **** 		target.syncword = 0;
 2153              		.loc 1 453 18 view .LVU755
ARM GAS  /tmp/ccwF1FQu.s 			page 87


 2154 02fa 0021     		movs	r1, #0
 2155              	.LVL203:
 453:bluetooth_rxtx.c **** 		target.syncword = 0;
 2156              		.loc 1 453 18 view .LVU756
 2157 02fc 571E     		subs	r7, r2, #1
 454:bluetooth_rxtx.c **** 		for(int i=0; i < 8; i++) {
 2158              		.loc 1 454 19 view .LVU757
 2159 02fe 0022     		movs	r2, #0
 2160              	.LVL204:
 453:bluetooth_rxtx.c **** 		target.syncword = 0;
 2161              		.loc 1 453 18 view .LVU758
 2162 0300 2A4B     		ldr	r3, .L244+56
 2163 0302 C3E90001 		strd	r0, [r3]
 454:bluetooth_rxtx.c **** 		for(int i=0; i < 8; i++) {
 2164              		.loc 1 454 3 is_stmt 1 view .LVU759
 454:bluetooth_rxtx.c **** 		for(int i=0; i < 8; i++) {
 2165              		.loc 1 454 19 is_stmt 0 view .LVU760
 2166 0306 C3E90201 		strd	r0, [r3, #8]
 455:bluetooth_rxtx.c **** 			target.address |= (uint64_t)data[i] << 8*i;
 2167              		.loc 1 455 3 is_stmt 1 view .LVU761
 2168              	.LBB20:
 455:bluetooth_rxtx.c **** 			target.address |= (uint64_t)data[i] << 8*i;
 2169              		.loc 1 455 7 view .LVU762
 2170              	.LVL205:
 455:bluetooth_rxtx.c **** 			target.address |= (uint64_t)data[i] << 8*i;
 2171              		.loc 1 455 16 view .LVU763
 2172              	.L168:
 456:bluetooth_rxtx.c **** 		}
 2173              		.loc 1 456 4 discriminator 3 view .LVU764
 456:bluetooth_rxtx.c **** 		}
 2174              		.loc 1 456 22 is_stmt 0 discriminator 3 view .LVU765
 2175 030a 17F801BF 		ldrb	fp, [r7, #1]!	@ zero_extendqisi2
 2176              	.LVL206:
 456:bluetooth_rxtx.c **** 		}
 2177              		.loc 1 456 40 discriminator 3 view .LVU766
 2178 030e A2F12001 		sub	r1, r2, #32
 2179 0312 C2F12004 		rsb	r4, r2, #32
 2180 0316 2BFA04F4 		lsr	r4, fp, r4
 2181 031a 0BFA01F1 		lsl	r1, fp, r1
 2182 031e 2143     		orrs	r1, r1, r4
 2183 0320 0BFA02F0 		lsl	r0, fp, r2
 2184 0324 0832     		adds	r2, r2, #8
 456:bluetooth_rxtx.c **** 		}
 2185              		.loc 1 456 19 discriminator 3 view .LVU767
 2186 0326 D3E90064 		ldrd	r6, r4, [r3]
 455:bluetooth_rxtx.c **** 			target.address |= (uint64_t)data[i] << 8*i;
 2187              		.loc 1 455 3 discriminator 3 view .LVU768
 2188 032a 402A     		cmp	r2, #64
 456:bluetooth_rxtx.c **** 		}
 2189              		.loc 1 456 19 discriminator 3 view .LVU769
 2190 032c 40EA0600 		orr	r0, r0, r6
 2191 0330 41EA0401 		orr	r1, r1, r4
 2192 0334 C3E90001 		strd	r0, r1, [r3]
 455:bluetooth_rxtx.c **** 			target.address |= (uint64_t)data[i] << 8*i;
 2193              		.loc 1 455 23 is_stmt 1 discriminator 3 view .LVU770
 2194              	.LVL207:
 455:bluetooth_rxtx.c **** 			target.address |= (uint64_t)data[i] << 8*i;
ARM GAS  /tmp/ccwF1FQu.s 			page 88


 2195              		.loc 1 455 16 discriminator 3 view .LVU771
 455:bluetooth_rxtx.c **** 			target.address |= (uint64_t)data[i] << 8*i;
 2196              		.loc 1 455 3 is_stmt 0 discriminator 3 view .LVU772
 2197 0338 E7D1     		bne	.L168
 455:bluetooth_rxtx.c **** 			target.address |= (uint64_t)data[i] << 8*i;
 2198              		.loc 1 455 3 view .LVU773
 2199 033a 0021     		movs	r1, #0
 2200 033c 0735     		adds	r5, r5, #7
 2201              	.LVL208:
 2202              	.L169:
 455:bluetooth_rxtx.c **** 			target.address |= (uint64_t)data[i] << 8*i;
 2203              		.loc 1 455 3 view .LVU774
 2204              	.LBE20:
 2205              	.LBB21:
 459:bluetooth_rxtx.c **** 		}
 2206              		.loc 1 459 4 is_stmt 1 discriminator 3 view .LVU775
 459:bluetooth_rxtx.c **** 		}
 2207              		.loc 1 459 23 is_stmt 0 discriminator 3 view .LVU776
 2208 033e 15F801BF 		ldrb	fp, [r5, #1]!	@ zero_extendqisi2
 2209              	.LVL209:
 459:bluetooth_rxtx.c **** 		}
 2210              		.loc 1 459 43 discriminator 3 view .LVU777
 2211 0342 A1F12004 		sub	r4, r1, #32
 2212 0346 C1F12007 		rsb	r7, r1, #32
 2213 034a 2BFA07F7 		lsr	r7, fp, r7
 2214 034e 0BFA04F4 		lsl	r4, fp, r4
 2215 0352 3C43     		orrs	r4, r4, r7
 2216 0354 0BFA01F6 		lsl	r6, fp, r1
 2217 0358 0831     		adds	r1, r1, #8
 459:bluetooth_rxtx.c **** 		}
 2218              		.loc 1 459 20 discriminator 3 view .LVU778
 2219 035a D3E90227 		ldrd	r2, r7, [r3, #8]
 458:bluetooth_rxtx.c **** 			target.syncword |= (uint64_t)data[i+8] << 8*i;
 2220              		.loc 1 458 3 discriminator 3 view .LVU779
 2221 035e 4029     		cmp	r1, #64
 459:bluetooth_rxtx.c **** 		}
 2222              		.loc 1 459 20 discriminator 3 view .LVU780
 2223 0360 46EA0206 		orr	r6, r6, r2
 2224 0364 44EA0704 		orr	r4, r4, r7
 2225 0368 C3E90264 		strd	r6, r4, [r3, #8]
 458:bluetooth_rxtx.c **** 			target.syncword |= (uint64_t)data[i+8] << 8*i;
 2226              		.loc 1 458 23 is_stmt 1 discriminator 3 view .LVU781
 2227              	.LVL210:
 458:bluetooth_rxtx.c **** 			target.syncword |= (uint64_t)data[i+8] << 8*i;
 2228              		.loc 1 458 16 discriminator 3 view .LVU782
 458:bluetooth_rxtx.c **** 			target.syncword |= (uint64_t)data[i+8] << 8*i;
 2229              		.loc 1 458 3 is_stmt 0 discriminator 3 view .LVU783
 2230 036c E7D1     		bne	.L169
 2231              	.LBE21:
 461:bluetooth_rxtx.c **** 		break;
 2232              		.loc 1 461 3 is_stmt 1 view .LVU784
 2233 036e FFF7FEFF 		bl	precalc
 2234              	.LVL211:
 462:bluetooth_rxtx.c **** 
 2235              		.loc 1 462 3 view .LVU785
 2236 0372 D0E6     		b	.L214
 2237              	.L245:
ARM GAS  /tmp/ccwF1FQu.s 			page 89


 2238              		.align	2
 2239              	.L244:
 2240 0374 00000000 		.word	.LANCHOR1
 2241 0378 34C00920 		.word	537509940
 2242 037c 38C00920 		.word	537509944
 2243 0380 3CC00920 		.word	537509948
 2244 0384 54C00920 		.word	537509972
 2245 0388 58C00920 		.word	537509976
 2246 038c 5CC00920 		.word	537509980
 2247 0390 00000000 		.word	rr
 2248 0394 00000000 		.word	.LANCHOR0
 2249 0398 00000000 		.word	bootloader_ctrl
 2250 039c 21BB0543 		.word	1124449057
 2251 03a0 00000000 		.word	.LC3
 2252 03a4 A7000000 		.word	.LANCHOR2+167
 2253 03a8 00000000 		.word	cs_threshold_req
 2254 03ac 00000000 		.word	target
 2255              	.LVL212:
 2256              	.L118:
 465:bluetooth_rxtx.c **** 		for(int i=0; i < 4; i++) {
 2257              		.loc 1 465 3 view .LVU786
 465:bluetooth_rxtx.c **** 		for(int i=0; i < 4; i++) {
 2258              		.loc 1 465 15 is_stmt 0 view .LVU787
 2259 03b0 0022     		movs	r2, #0
 2260              	.LVL213:
 465:bluetooth_rxtx.c **** 		for(int i=0; i < 4; i++) {
 2261              		.loc 1 465 15 view .LVU788
 2262 03b2 9F4B     		ldr	r3, .L246
 2263 03b4 E81C     		adds	r0, r5, #3
 2264              	.LVL214:
 465:bluetooth_rxtx.c **** 		for(int i=0; i < 4; i++) {
 2265              		.loc 1 465 15 view .LVU789
 2266 03b6 1A60     		str	r2, [r3]
 466:bluetooth_rxtx.c **** 			clkn_offset <<= 8;
 2267              		.loc 1 466 3 is_stmt 1 view .LVU790
 2268              	.LBB22:
 466:bluetooth_rxtx.c **** 			clkn_offset <<= 8;
 2269              		.loc 1 466 7 view .LVU791
 2270              	.LVL215:
 466:bluetooth_rxtx.c **** 			clkn_offset <<= 8;
 2271              		.loc 1 466 16 view .LVU792
 2272 03b8 6A1E     		subs	r2, r5, #1
 2273              	.LVL216:
 2274              	.L170:
 467:bluetooth_rxtx.c **** 			clkn_offset |= data[i];
 2275              		.loc 1 467 4 discriminator 3 view .LVU793
 467:bluetooth_rxtx.c **** 			clkn_offset |= data[i];
 2276              		.loc 1 467 16 is_stmt 0 discriminator 3 view .LVU794
 2277 03ba 1968     		ldr	r1, [r3]
 2278 03bc 0902     		lsls	r1, r1, #8
 2279 03be 1960     		str	r1, [r3]
 468:bluetooth_rxtx.c **** 		}
 2280              		.loc 1 468 4 is_stmt 1 discriminator 3 view .LVU795
 468:bluetooth_rxtx.c **** 		}
 2281              		.loc 1 468 23 is_stmt 0 discriminator 3 view .LVU796
 2282 03c0 12F8011F 		ldrb	r1, [r2, #1]!	@ zero_extendqisi2
 2283              	.LVL217:
ARM GAS  /tmp/ccwF1FQu.s 			page 90


 468:bluetooth_rxtx.c **** 		}
 2284              		.loc 1 468 16 discriminator 3 view .LVU797
 2285 03c4 1C68     		ldr	r4, [r3]
 466:bluetooth_rxtx.c **** 			clkn_offset <<= 8;
 2286              		.loc 1 466 3 discriminator 3 view .LVU798
 2287 03c6 9042     		cmp	r0, r2
 468:bluetooth_rxtx.c **** 		}
 2288              		.loc 1 468 16 discriminator 3 view .LVU799
 2289 03c8 41EA0401 		orr	r1, r1, r4
 2290 03cc 1960     		str	r1, [r3]
 466:bluetooth_rxtx.c **** 			clkn_offset <<= 8;
 2291              		.loc 1 466 23 is_stmt 1 discriminator 3 view .LVU800
 2292              	.LVL218:
 466:bluetooth_rxtx.c **** 			clkn_offset <<= 8;
 2293              		.loc 1 466 16 discriminator 3 view .LVU801
 466:bluetooth_rxtx.c **** 			clkn_offset <<= 8;
 2294              		.loc 1 466 3 is_stmt 0 discriminator 3 view .LVU802
 2295 03ce F4D1     		bne	.L170
 2296              	.LBE22:
 470:bluetooth_rxtx.c **** 		dma_discard = 1;
 2297              		.loc 1 470 3 is_stmt 1 view .LVU803
 470:bluetooth_rxtx.c **** 		dma_discard = 1;
 2298              		.loc 1 470 12 is_stmt 0 view .LVU804
 2299 03d0 0222     		movs	r2, #2
 2300              	.LVL219:
 472:bluetooth_rxtx.c **** 		clk100ns_offset = (data[4] << 8) | (data[5] << 0);
 2301              		.loc 1 472 3 view .LVU805
 2302 03d2 4FF08051 		mov	r1, #268435456
 471:bluetooth_rxtx.c **** 		DIO_SSEL_SET;
 2303              		.loc 1 471 15 view .LVU806
 2304 03d6 0120     		movs	r0, #1
 470:bluetooth_rxtx.c **** 		dma_discard = 1;
 2305              		.loc 1 470 12 view .LVU807
 2306 03d8 964B     		ldr	r3, .L246+4
 2307 03da 9A72     		strb	r2, [r3, #10]
 471:bluetooth_rxtx.c **** 		DIO_SSEL_SET;
 2308              		.loc 1 471 3 is_stmt 1 view .LVU808
 472:bluetooth_rxtx.c **** 		clk100ns_offset = (data[4] << 8) | (data[5] << 0);
 2309              		.loc 1 472 3 is_stmt 0 view .LVU809
 2310 03dc 964A     		ldr	r2, .L246+8
 471:bluetooth_rxtx.c **** 		DIO_SSEL_SET;
 2311              		.loc 1 471 15 view .LVU810
 2312 03de 1874     		strb	r0, [r3, #16]
 472:bluetooth_rxtx.c **** 		clk100ns_offset = (data[4] << 8) | (data[5] << 0);
 2313              		.loc 1 472 3 is_stmt 1 view .LVU811
 2314 03e0 1160     		str	r1, [r2]
 473:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW;
 2315              		.loc 1 473 3 view .LVU812
 473:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW;
 2316              		.loc 1 473 26 is_stmt 0 view .LVU813
 2317 03e2 2979     		ldrb	r1, [r5, #4]	@ zero_extendqisi2
 473:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW;
 2318              		.loc 1 473 43 view .LVU814
 2319 03e4 6A79     		ldrb	r2, [r5, #5]	@ zero_extendqisi2
 473:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW;
 2320              		.loc 1 473 36 view .LVU815
 2321 03e6 42EA0122 		orr	r2, r2, r1, lsl #8
ARM GAS  /tmp/ccwF1FQu.s 			page 91


 473:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW;
 2322              		.loc 1 473 19 view .LVU816
 2323 03ea 9449     		ldr	r1, .L246+12
 2324 03ec 0A80     		strh	r2, [r1]	@ movhi
 474:bluetooth_rxtx.c **** 		break;
 2325              		.loc 1 474 3 is_stmt 1 view .LVU817
 474:bluetooth_rxtx.c **** 		break;
 2326              		.loc 1 474 18 is_stmt 0 view .LVU818
 2327 03ee 0822     		movs	r2, #8
 2328 03f0 9A74     		strb	r2, [r3, #18]
 475:bluetooth_rxtx.c **** 
 2329              		.loc 1 475 3 is_stmt 1 view .LVU819
 2330              	.LVL220:
 2331              	.L83:
 737:bluetooth_rxtx.c **** 
 2332              		.loc 1 737 1 is_stmt 0 view .LVU820
 2333 03f2 BDE8F088 		pop	{r4, r5, r6, r7, fp, pc}
 2334              	.LVL221:
 2335              	.L97:
 478:bluetooth_rxtx.c **** 		requested_mode = MODE_AFH;
 2336              		.loc 1 478 3 is_stmt 1 view .LVU821
 478:bluetooth_rxtx.c **** 		requested_mode = MODE_AFH;
 2337              		.loc 1 478 12 is_stmt 0 view .LVU822
 2338 03f6 0522     		movs	r2, #5
 2339              	.LVL222:
 478:bluetooth_rxtx.c **** 		requested_mode = MODE_AFH;
 2340              		.loc 1 478 12 view .LVU823
 2341 03f8 8E4B     		ldr	r3, .L246+4
 2342 03fa 9149     		ldr	r1, .L246+16
 2343              	.LVL223:
 478:bluetooth_rxtx.c **** 		requested_mode = MODE_AFH;
 2344              		.loc 1 478 12 view .LVU824
 2345 03fc 9A72     		strb	r2, [r3, #10]
 479:bluetooth_rxtx.c **** 
 2346              		.loc 1 479 3 is_stmt 1 view .LVU825
 479:bluetooth_rxtx.c **** 
 2347              		.loc 1 479 18 is_stmt 0 view .LVU826
 2348 03fe 0E22     		movs	r2, #14
 2349 0400 9A74     		strb	r2, [r3, #18]
 481:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 2350              		.loc 1 481 3 is_stmt 1 view .LVU827
 2351              	.LBB23:
 481:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 2352              		.loc 1 481 7 view .LVU828
 2353              	.LVL224:
 481:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 2354              		.loc 1 481 16 view .LVU829
 481:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 2355              		.loc 1 481 11 is_stmt 0 view .LVU830
 2356 0402 0023     		movs	r3, #0
 482:bluetooth_rxtx.c **** 		}
 2357              		.loc 1 482 15 view .LVU831
 2358 0404 1A46     		mov	r2, r3
 2359              	.LVL225:
 2360              	.L171:
 482:bluetooth_rxtx.c **** 		}
 2361              		.loc 1 482 4 is_stmt 1 discriminator 3 view .LVU832
ARM GAS  /tmp/ccwF1FQu.s 			page 92


 481:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 2362              		.loc 1 481 25 is_stmt 0 discriminator 3 view .LVU833
 2363 0406 0133     		adds	r3, r3, #1
 2364              	.LVL226:
 481:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 2365              		.loc 1 481 3 discriminator 3 view .LVU834
 2366 0408 0A2B     		cmp	r3, #10
 482:bluetooth_rxtx.c **** 		}
 2367              		.loc 1 482 15 discriminator 3 view .LVU835
 2368 040a 01F8012B 		strb	r2, [r1], #1
 481:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 2369              		.loc 1 481 24 is_stmt 1 discriminator 3 view .LVU836
 2370              	.LVL227:
 481:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 2371              		.loc 1 481 16 discriminator 3 view .LVU837
 481:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 2372              		.loc 1 481 3 is_stmt 0 discriminator 3 view .LVU838
 2373 040e FAD1     		bne	.L171
 2374              	.LBE23:
 484:bluetooth_rxtx.c **** 		afh_enabled = 1;
 2375              		.loc 1 484 3 is_stmt 1 view .LVU839
 485:bluetooth_rxtx.c **** 		break;
 2376              		.loc 1 485 15 is_stmt 0 view .LVU840
 2377 0410 0120     		movs	r0, #1
 2378              	.LVL228:
 484:bluetooth_rxtx.c **** 		afh_enabled = 1;
 2379              		.loc 1 484 17 view .LVU841
 2380 0412 8C4B     		ldr	r3, .L246+20
 2381              	.LVL229:
 484:bluetooth_rxtx.c **** 		afh_enabled = 1;
 2382              		.loc 1 484 17 view .LVU842
 2383 0414 1A70     		strb	r2, [r3]
 485:bluetooth_rxtx.c **** 		break;
 2384              		.loc 1 485 3 is_stmt 1 view .LVU843
 485:bluetooth_rxtx.c **** 		break;
 2385              		.loc 1 485 15 is_stmt 0 view .LVU844
 2386 0416 8C4B     		ldr	r3, .L246+24
 2387 0418 1870     		strb	r0, [r3]
 486:bluetooth_rxtx.c **** 
 2388              		.loc 1 486 3 is_stmt 1 view .LVU845
 2389 041a EAE7     		b	.L83
 2390              	.LVL230:
 2391              	.L96:
 489:bluetooth_rxtx.c **** 		break;
 2392              		.loc 1 489 3 view .LVU846
 489:bluetooth_rxtx.c **** 		break;
 2393              		.loc 1 489 10 is_stmt 0 view .LVU847
 2394 041c 0120     		movs	r0, #1
 2395              	.LVL231:
 489:bluetooth_rxtx.c **** 		break;
 2396              		.loc 1 489 10 view .LVU848
 2397 041e 854B     		ldr	r3, .L246+4
 2398 0420 D872     		strb	r0, [r3, #11]
 490:bluetooth_rxtx.c **** 
 2399              		.loc 1 490 3 is_stmt 1 view .LVU849
 2400 0422 E6E7     		b	.L83
 2401              	.LVL232:
ARM GAS  /tmp/ccwF1FQu.s 			page 93


 2402              	.L117:
 493:bluetooth_rxtx.c **** 		clkn = clock;
 2403              		.loc 1 493 3 view .LVU850
 2404 0424 1268     		ldr	r2, [r2]	@ unaligned
 2405              	.LVL233:
 494:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set(channel);
 2406              		.loc 1 494 3 view .LVU851
 494:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set(channel);
 2407              		.loc 1 494 8 is_stmt 0 view .LVU852
 2408 0426 894B     		ldr	r3, .L246+28
 2409 0428 1A60     		str	r2, [r3]
 495:bluetooth_rxtx.c **** 		break;
 2410              		.loc 1 495 3 is_stmt 1 view .LVU853
 2411 042a 5FE7     		b	.L230
 2412              	.LVL234:
 2413              	.L106:
 495:bluetooth_rxtx.c **** 		break;
 2414              		.loc 1 495 3 is_stmt 0 view .LVU854
 2415 042c 8449     		ldr	r1, .L246+16
 2416              	.LVL235:
 495:bluetooth_rxtx.c **** 		break;
 2417              		.loc 1 495 3 view .LVU855
 2418 042e 531E     		subs	r3, r2, #1
 2419 0430 0935     		adds	r5, r5, #9
 2420              	.LVL236:
 2421              	.L172:
 2422              	.LBB24:
 500:bluetooth_rxtx.c **** 		}
 2423              		.loc 1 500 4 is_stmt 1 discriminator 3 view .LVU856
 500:bluetooth_rxtx.c **** 		}
 2424              		.loc 1 500 21 is_stmt 0 discriminator 3 view .LVU857
 2425 0432 13F8012F 		ldrb	r2, [r3, #1]!	@ zero_extendqisi2
 2426              	.LVL237:
 499:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 2427              		.loc 1 499 3 discriminator 3 view .LVU858
 2428 0436 AB42     		cmp	r3, r5
 500:bluetooth_rxtx.c **** 		}
 2429              		.loc 1 500 15 discriminator 3 view .LVU859
 2430 0438 01F8012B 		strb	r2, [r1], #1
 499:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 2431              		.loc 1 499 24 is_stmt 1 discriminator 3 view .LVU860
 2432              	.LVL238:
 499:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 2433              		.loc 1 499 16 discriminator 3 view .LVU861
 499:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 2434              		.loc 1 499 3 is_stmt 0 discriminator 3 view .LVU862
 2435 043c F9D1     		bne	.L172
 2436              	.LBE24:
 502:bluetooth_rxtx.c **** 		*data_len = 10;
 2437              		.loc 1 502 3 is_stmt 1 view .LVU863
 502:bluetooth_rxtx.c **** 		*data_len = 10;
 2438              		.loc 1 502 15 is_stmt 0 view .LVU864
 2439 043e 0120     		movs	r0, #1
 2440              	.LVL239:
 502:bluetooth_rxtx.c **** 		*data_len = 10;
 2441              		.loc 1 502 15 view .LVU865
 2442 0440 814B     		ldr	r3, .L246+24
ARM GAS  /tmp/ccwF1FQu.s 			page 94


 2443              	.LVL240:
 502:bluetooth_rxtx.c **** 		*data_len = 10;
 2444              		.loc 1 502 15 view .LVU866
 2445 0442 1870     		strb	r0, [r3]
 503:bluetooth_rxtx.c **** 		break;
 2446              		.loc 1 503 3 is_stmt 1 view .LVU867
 503:bluetooth_rxtx.c **** 		break;
 2447              		.loc 1 503 13 is_stmt 0 view .LVU868
 2448 0444 0A23     		movs	r3, #10
 2449 0446 33E6     		b	.L216
 2450              	.LVL241:
 2451              	.L105:
 2452              	.LBB25:
 507:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 2453              		.loc 1 507 11 view .LVU869
 2454 0448 0023     		movs	r3, #0
 508:bluetooth_rxtx.c **** 		}
 2455              		.loc 1 508 15 view .LVU870
 2456 044a 1A46     		mov	r2, r3
 2457              	.LVL242:
 508:bluetooth_rxtx.c **** 		}
 2458              		.loc 1 508 15 view .LVU871
 2459 044c 7C49     		ldr	r1, .L246+16
 2460              	.LVL243:
 2461              	.L173:
 508:bluetooth_rxtx.c **** 		}
 2462              		.loc 1 508 4 is_stmt 1 discriminator 3 view .LVU872
 507:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 2463              		.loc 1 507 25 is_stmt 0 discriminator 3 view .LVU873
 2464 044e 0133     		adds	r3, r3, #1
 2465              	.LVL244:
 507:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 2466              		.loc 1 507 3 discriminator 3 view .LVU874
 2467 0450 0A2B     		cmp	r3, #10
 508:bluetooth_rxtx.c **** 		}
 2468              		.loc 1 508 15 discriminator 3 view .LVU875
 2469 0452 01F8012B 		strb	r2, [r1], #1
 507:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 2470              		.loc 1 507 24 is_stmt 1 discriminator 3 view .LVU876
 2471              	.LVL245:
 507:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 2472              		.loc 1 507 16 discriminator 3 view .LVU877
 507:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 2473              		.loc 1 507 3 is_stmt 0 discriminator 3 view .LVU878
 2474 0456 FAD1     		bne	.L173
 2475              	.LBE25:
 510:bluetooth_rxtx.c **** 		*data_len = 10;
 2476              		.loc 1 510 3 is_stmt 1 view .LVU879
 510:bluetooth_rxtx.c **** 		*data_len = 10;
 2477              		.loc 1 510 15 is_stmt 0 view .LVU880
 2478 0458 7B49     		ldr	r1, .L246+24
 2479 045a 0A70     		strb	r2, [r1]
 511:bluetooth_rxtx.c **** 		break;
 2480              		.loc 1 511 3 is_stmt 1 view .LVU881
 2481 045c 9CE6     		b	.L223
 2482              	.LVL246:
 2483              	.L116:
ARM GAS  /tmp/ccwF1FQu.s 			page 95


 515:bluetooth_rxtx.c **** 		for(int i=0; i < 4; i++) {
 2484              		.loc 1 515 3 view .LVU882
 515:bluetooth_rxtx.c **** 		for(int i=0; i < 4; i++) {
 2485              		.loc 1 515 9 is_stmt 0 view .LVU883
 2486 045e 7B4B     		ldr	r3, .L246+28
 2487 0460 1B68     		ldr	r3, [r3]
 2488              	.LVL247:
 516:bluetooth_rxtx.c **** 			data[i] = (clock >> (8*i)) & 0xff;
 2489              		.loc 1 516 3 is_stmt 1 view .LVU884
 2490              	.LBB26:
 516:bluetooth_rxtx.c **** 			data[i] = (clock >> (8*i)) & 0xff;
 2491              		.loc 1 516 7 view .LVU885
 516:bluetooth_rxtx.c **** 			data[i] = (clock >> (8*i)) & 0xff;
 2492              		.loc 1 516 16 view .LVU886
 517:bluetooth_rxtx.c **** 		}
 2493              		.loc 1 517 4 view .LVU887
 517:bluetooth_rxtx.c **** 		}
 2494              		.loc 1 517 12 is_stmt 0 view .LVU888
 2495 0462 1370     		strb	r3, [r2]
 2496              	.LVL248:
 516:bluetooth_rxtx.c **** 			data[i] = (clock >> (8*i)) & 0xff;
 2497              		.loc 1 516 23 is_stmt 1 view .LVU889
 516:bluetooth_rxtx.c **** 			data[i] = (clock >> (8*i)) & 0xff;
 2498              		.loc 1 516 16 view .LVU890
 517:bluetooth_rxtx.c **** 		}
 2499              		.loc 1 517 4 view .LVU891
 517:bluetooth_rxtx.c **** 		}
 2500              		.loc 1 517 21 is_stmt 0 view .LVU892
 2501 0464 1A0A     		lsrs	r2, r3, #8
 2502              	.LVL249:
 517:bluetooth_rxtx.c **** 		}
 2503              		.loc 1 517 12 view .LVU893
 2504 0466 6A70     		strb	r2, [r5, #1]
 516:bluetooth_rxtx.c **** 			data[i] = (clock >> (8*i)) & 0xff;
 2505              		.loc 1 516 23 is_stmt 1 view .LVU894
 2506              	.LVL250:
 516:bluetooth_rxtx.c **** 			data[i] = (clock >> (8*i)) & 0xff;
 2507              		.loc 1 516 16 view .LVU895
 517:bluetooth_rxtx.c **** 		}
 2508              		.loc 1 517 4 view .LVU896
 517:bluetooth_rxtx.c **** 		}
 2509              		.loc 1 517 21 is_stmt 0 view .LVU897
 2510 0468 1A0C     		lsrs	r2, r3, #16
 2511 046a 1B0E     		lsrs	r3, r3, #24
 2512              	.LVL251:
 517:bluetooth_rxtx.c **** 		}
 2513              		.loc 1 517 12 view .LVU898
 2514 046c AA70     		strb	r2, [r5, #2]
 516:bluetooth_rxtx.c **** 			data[i] = (clock >> (8*i)) & 0xff;
 2515              		.loc 1 516 23 is_stmt 1 view .LVU899
 2516              	.LVL252:
 516:bluetooth_rxtx.c **** 			data[i] = (clock >> (8*i)) & 0xff;
 2517              		.loc 1 516 16 view .LVU900
 517:bluetooth_rxtx.c **** 		}
 2518              		.loc 1 517 4 view .LVU901
 517:bluetooth_rxtx.c **** 		}
 2519              		.loc 1 517 12 is_stmt 0 view .LVU902
ARM GAS  /tmp/ccwF1FQu.s 			page 96


 2520 046e EB70     		strb	r3, [r5, #3]
 516:bluetooth_rxtx.c **** 			data[i] = (clock >> (8*i)) & 0xff;
 2521              		.loc 1 516 23 is_stmt 1 view .LVU903
 2522              	.LVL253:
 516:bluetooth_rxtx.c **** 			data[i] = (clock >> (8*i)) & 0xff;
 2523              		.loc 1 516 16 view .LVU904
 2524              	.L177:
 516:bluetooth_rxtx.c **** 			data[i] = (clock >> (8*i)) & 0xff;
 2525              		.loc 1 516 16 is_stmt 0 view .LVU905
 2526              	.LBE26:
 519:bluetooth_rxtx.c **** 		break;
 2527              		.loc 1 519 3 is_stmt 1 view .LVU906
 519:bluetooth_rxtx.c **** 		break;
 2528              		.loc 1 519 13 is_stmt 0 view .LVU907
 2529 0470 0423     		movs	r3, #4
 2530 0472 91E6     		b	.L223
 2531              	.LVL254:
 2532              	.L95:
 523:bluetooth_rxtx.c **** 		break;
 2533              		.loc 1 523 3 is_stmt 1 view .LVU908
 523:bluetooth_rxtx.c **** 		break;
 2534              		.loc 1 523 26 is_stmt 0 view .LVU909
 2535 0474 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 2536              	.LVL255:
 523:bluetooth_rxtx.c **** 		break;
 2537              		.loc 1 523 43 view .LVU910
 2538 0476 6B78     		ldrb	r3, [r5, #1]	@ zero_extendqisi2
 523:bluetooth_rxtx.c **** 		break;
 2539              		.loc 1 523 36 view .LVU911
 2540 0478 43EA0223 		orr	r3, r3, r2, lsl #8
 523:bluetooth_rxtx.c **** 		break;
 2541              		.loc 1 523 19 view .LVU912
 2542 047c 6F4A     		ldr	r2, .L246+12
 2543 047e 1380     		strh	r3, [r2]	@ movhi
 524:bluetooth_rxtx.c **** 
 2544              		.loc 1 524 3 is_stmt 1 view .LVU913
 2545 0480 49E6     		b	.L214
 2546              	.LVL256:
 2547              	.L90:
 527:bluetooth_rxtx.c **** 
 2548              		.loc 1 527 3 view .LVU914
 527:bluetooth_rxtx.c **** 
 2549              		.loc 1 527 17 is_stmt 0 view .LVU915
 2550 0482 734A     		ldr	r2, .L246+32
 2551              	.LVL257:
 527:bluetooth_rxtx.c **** 
 2552              		.loc 1 527 34 view .LVU916
 2553 0484 2878     		ldrb	r0, [r5]	@ zero_extendqisi2
 2554              	.LVL258:
 527:bluetooth_rxtx.c **** 
 2555              		.loc 1 527 51 view .LVU917
 2556 0486 6B78     		ldrb	r3, [r5, #1]	@ zero_extendqisi2
 527:bluetooth_rxtx.c **** 
 2557              		.loc 1 527 17 view .LVU918
 2558 0488 1188     		ldrh	r1, [r2]
 2559              	.LVL259:
 527:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccwF1FQu.s 			page 97


 2560              		.loc 1 527 44 view .LVU919
 2561 048a 43EA0023 		orr	r3, r3, r0, lsl #8
 527:bluetooth_rxtx.c **** 
 2562              		.loc 1 527 17 view .LVU920
 2563 048e 0B44     		add	r3, r3, r1
 2564 0490 1BB2     		sxth	r3, r3
 2565 0492 1380     		strh	r3, [r2]	@ movhi
 530:bluetooth_rxtx.c **** 			clk_drift_correction = 320 / (uint16_t)(-clk_drift_ppm);
 2566              		.loc 1 530 3 is_stmt 1 view .LVU921
 530:bluetooth_rxtx.c **** 			clk_drift_correction = 320 / (uint16_t)(-clk_drift_ppm);
 2567              		.loc 1 530 21 is_stmt 0 view .LVU922
 2568 0494 1388     		ldrh	r3, [r2]
 2569 0496 6F49     		ldr	r1, .L246+36
 530:bluetooth_rxtx.c **** 			clk_drift_correction = 320 / (uint16_t)(-clk_drift_ppm);
 2570              		.loc 1 530 6 view .LVU923
 2571 0498 13F4004F 		tst	r3, #32768
 2572 049c 6E4B     		ldr	r3, .L246+40
 2573 049e 0ED0     		beq	.L174
 531:bluetooth_rxtx.c **** 			clkn_next_drift_fix = clkn_last_drift_fix + clk_drift_correction;
 2574              		.loc 1 531 4 is_stmt 1 view .LVU924
 531:bluetooth_rxtx.c **** 			clkn_next_drift_fix = clkn_last_drift_fix + clk_drift_correction;
 2575              		.loc 1 531 25 is_stmt 0 view .LVU925
 2576 04a0 4FF4A070 		mov	r0, #320
 531:bluetooth_rxtx.c **** 			clkn_next_drift_fix = clkn_last_drift_fix + clk_drift_correction;
 2577              		.loc 1 531 33 view .LVU926
 2578 04a4 1288     		ldrh	r2, [r2]
 2579 04a6 5242     		rsbs	r2, r2, #0
 2580 04a8 92B2     		uxth	r2, r2
 531:bluetooth_rxtx.c **** 			clkn_next_drift_fix = clkn_last_drift_fix + clk_drift_correction;
 2581              		.loc 1 531 25 view .LVU927
 2582 04aa B0FBF2F2 		udiv	r2, r0, r2
 2583              	.L229:
 536:bluetooth_rxtx.c **** 			clkn_next_drift_fix = clkn_last_drift_fix + clk_drift_correction;
 2584              		.loc 1 536 25 view .LVU928
 2585 04ae 1A80     		strh	r2, [r3]	@ movhi
 537:bluetooth_rxtx.c **** 		}
 2586              		.loc 1 537 4 is_stmt 1 view .LVU929
 537:bluetooth_rxtx.c **** 		}
 2587              		.loc 1 537 46 is_stmt 0 view .LVU930
 2588 04b0 6A4A     		ldr	r2, .L246+44
 2589 04b2 1B88     		ldrh	r3, [r3]
 2590 04b4 1268     		ldr	r2, [r2]
 2591 04b6 9BB2     		uxth	r3, r3
 2592 04b8 1344     		add	r3, r3, r2
 537:bluetooth_rxtx.c **** 		}
 2593              		.loc 1 537 24 view .LVU931
 2594 04ba 0B60     		str	r3, [r1]
 2595 04bc 2BE6     		b	.L214
 2596              	.L174:
 535:bluetooth_rxtx.c **** 			clk_drift_correction = 320 / clk_drift_ppm;
 2597              		.loc 1 535 8 is_stmt 1 view .LVU932
 535:bluetooth_rxtx.c **** 			clk_drift_correction = 320 / clk_drift_ppm;
 2598              		.loc 1 535 26 is_stmt 0 view .LVU933
 2599 04be 1088     		ldrh	r0, [r2]
 2600 04c0 00B2     		sxth	r0, r0
 535:bluetooth_rxtx.c **** 			clk_drift_correction = 320 / clk_drift_ppm;
 2601              		.loc 1 535 11 view .LVU934
ARM GAS  /tmp/ccwF1FQu.s 			page 98


 2602 04c2 0028     		cmp	r0, #0
 2603 04c4 07DD     		ble	.L175
 536:bluetooth_rxtx.c **** 			clkn_next_drift_fix = clkn_last_drift_fix + clk_drift_correction;
 2604              		.loc 1 536 4 is_stmt 1 view .LVU935
 536:bluetooth_rxtx.c **** 			clkn_next_drift_fix = clkn_last_drift_fix + clk_drift_correction;
 2605              		.loc 1 536 31 is_stmt 0 view .LVU936
 2606 04c6 1288     		ldrh	r2, [r2]
 2607 04c8 10B2     		sxth	r0, r2
 2608 04ca 4FF4A072 		mov	r2, #320
 2609 04ce 92FBF0F2 		sdiv	r2, r2, r0
 536:bluetooth_rxtx.c **** 			clkn_next_drift_fix = clkn_last_drift_fix + clk_drift_correction;
 2610              		.loc 1 536 25 view .LVU937
 2611 04d2 92B2     		uxth	r2, r2
 2612 04d4 EBE7     		b	.L229
 2613              	.L175:
 541:bluetooth_rxtx.c **** 			clkn_next_drift_fix = 0;
 2614              		.loc 1 541 4 is_stmt 1 view .LVU938
 541:bluetooth_rxtx.c **** 			clkn_next_drift_fix = 0;
 2615              		.loc 1 541 25 is_stmt 0 view .LVU939
 2616 04d6 0022     		movs	r2, #0
 2617 04d8 1A80     		strh	r2, [r3]	@ movhi
 542:bluetooth_rxtx.c **** 		}
 2618              		.loc 1 542 4 is_stmt 1 view .LVU940
 542:bluetooth_rxtx.c **** 		}
 2619              		.loc 1 542 24 is_stmt 0 view .LVU941
 2620 04da 0A60     		str	r2, [r1]
 2621 04dc 1BE6     		b	.L214
 2622              	.LVL260:
 2623              	.L115:
 548:bluetooth_rxtx.c **** 		*data_len = 0;
 2624              		.loc 1 548 3 is_stmt 1 view .LVU942
 549:bluetooth_rxtx.c **** 
 2625              		.loc 1 549 13 is_stmt 0 view .LVU943
 2626 04de 0022     		movs	r2, #0
 2627              	.LVL261:
 548:bluetooth_rxtx.c **** 		*data_len = 0;
 2628              		.loc 1 548 32 view .LVU944
 2629 04e0 0B88     		ldrh	r3, [r1]
 548:bluetooth_rxtx.c **** 		*data_len = 0;
 2630              		.loc 1 548 16 view .LVU945
 2631 04e2 5F4D     		ldr	r5, .L246+48
 2632              	.LVL262:
 548:bluetooth_rxtx.c **** 		*data_len = 0;
 2633              		.loc 1 548 32 view .LVU946
 2634 04e4 6B63     		str	r3, [r5, #52]
 549:bluetooth_rxtx.c **** 
 2635              		.loc 1 549 3 is_stmt 1 view .LVU947
 551:bluetooth_rxtx.c **** 		hop_mode = HOP_BTLE;
 2636              		.loc 1 551 10 is_stmt 0 view .LVU948
 2637 04e6 534B     		ldr	r3, .L246+4
 549:bluetooth_rxtx.c **** 
 2638              		.loc 1 549 13 view .LVU949
 2639 04e8 2260     		str	r2, [r4]
 551:bluetooth_rxtx.c **** 		hop_mode = HOP_BTLE;
 2640              		.loc 1 551 3 is_stmt 1 view .LVU950
 551:bluetooth_rxtx.c **** 		hop_mode = HOP_BTLE;
 2641              		.loc 1 551 10 is_stmt 0 view .LVU951
ARM GAS  /tmp/ccwF1FQu.s 			page 99


 2642 04ea DA72     		strb	r2, [r3, #11]
 552:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW_LE;
 2643              		.loc 1 552 3 is_stmt 1 view .LVU952
 552:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW_LE;
 2644              		.loc 1 552 12 is_stmt 0 view .LVU953
 2645 04ec 0322     		movs	r2, #3
 2646 04ee 9A72     		strb	r2, [r3, #10]
 553:bluetooth_rxtx.c **** 
 2647              		.loc 1 553 3 is_stmt 1 view .LVU954
 553:bluetooth_rxtx.c **** 
 2648              		.loc 1 553 18 is_stmt 0 view .LVU955
 2649 04f0 0922     		movs	r2, #9
 2650 04f2 9A74     		strb	r2, [r3, #18]
 555:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set(channel);
 2651              		.loc 1 555 3 is_stmt 1 view .LVU956
 2652 04f4 FFF7FEFF 		bl	usb_queue_init
 2653              	.LVL263:
 556:bluetooth_rxtx.c **** 		break;
 2654              		.loc 1 556 3 view .LVU957
 2655 04f8 B5F84C00 		ldrh	r0, [r5, #76]
 2656 04fc 81E6     		b	.L227
 2657              	.LVL264:
 2658              	.L114:
 2659              	.LBB27:
 507:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 2660              		.loc 1 507 11 is_stmt 0 view .LVU958
 2661 04fe 0023     		movs	r3, #0
 2662 0500 551E     		subs	r5, r2, #1
 2663              	.LBE27:
 2664              	.LBB28:
 561:bluetooth_rxtx.c **** 		}
 2665              		.loc 1 561 17 view .LVU959
 2666 0502 574A     		ldr	r2, .L246+48
 2667              	.LVL265:
 2668              	.L176:
 561:bluetooth_rxtx.c **** 		}
 2669              		.loc 1 561 4 is_stmt 1 discriminator 3 view .LVU960
 561:bluetooth_rxtx.c **** 		}
 2670              		.loc 1 561 33 is_stmt 0 discriminator 3 view .LVU961
 2671 0504 1168     		ldr	r1, [r2]
 2672 0506 D940     		lsrs	r1, r1, r3
 2673 0508 0833     		adds	r3, r3, #8
 560:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 2674              		.loc 1 560 3 discriminator 3 view .LVU962
 2675 050a 202B     		cmp	r3, #32
 561:bluetooth_rxtx.c **** 		}
 2676              		.loc 1 561 12 discriminator 3 view .LVU963
 2677 050c 05F8011F 		strb	r1, [r5, #1]!
 2678              	.LVL266:
 560:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 2679              		.loc 1 560 23 is_stmt 1 discriminator 3 view .LVU964
 560:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 2680              		.loc 1 560 16 discriminator 3 view .LVU965
 560:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 2681              		.loc 1 560 3 is_stmt 0 discriminator 3 view .LVU966
 2682 0510 F8D1     		bne	.L176
 2683 0512 ADE7     		b	.L177
ARM GAS  /tmp/ccwF1FQu.s 			page 100


 2684              	.LVL267:
 2685              	.L113:
 560:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 2686              		.loc 1 560 3 discriminator 3 view .LVU967
 2687              	.LBE28:
 567:bluetooth_rxtx.c **** 		le.target_set = 1;
 2688              		.loc 1 567 3 is_stmt 1 view .LVU968
 2689 0514 1068     		ldr	r0, [r2]	@ unaligned
 2690              	.LVL268:
 567:bluetooth_rxtx.c **** 		le.target_set = 1;
 2691              		.loc 1 567 3 is_stmt 0 view .LVU969
 2692 0516 FFF7FEFF 		bl	le_set_access_address
 2693              	.LVL269:
 568:bluetooth_rxtx.c **** 		break;
 2694              		.loc 1 568 3 is_stmt 1 view .LVU970
 2695              	.L218:
 2696              	.LBB29:
 701:bluetooth_rxtx.c **** 		}
 2697              		.loc 1 701 4 view .LVU971
 701:bluetooth_rxtx.c **** 		}
 2698              		.loc 1 701 18 is_stmt 0 view .LVU972
 2699 051a 0120     		movs	r0, #1
 2700 051c 504B     		ldr	r3, .L246+48
 2701 051e 5864     		str	r0, [r3, #68]
 2702 0520 67E7     		b	.L83
 2703              	.LVL270:
 2704              	.L111:
 701:bluetooth_rxtx.c **** 		}
 2705              		.loc 1 701 18 view .LVU973
 2706              	.LBE29:
 578:bluetooth_rxtx.c **** 		data[1] = 0x37;
 2707              		.loc 1 578 3 is_stmt 1 view .LVU974
 578:bluetooth_rxtx.c **** 		data[1] = 0x37;
 2708              		.loc 1 578 11 is_stmt 0 view .LVU975
 2709 0522 1323     		movs	r3, #19
 2710 0524 1370     		strb	r3, [r2]
 2711              	.LVL271:
 579:bluetooth_rxtx.c **** 		*data_len = 2;
 2712              		.loc 1 579 3 is_stmt 1 view .LVU976
 579:bluetooth_rxtx.c **** 		*data_len = 2;
 2713              		.loc 1 579 11 is_stmt 0 view .LVU977
 2714 0526 3723     		movs	r3, #55
 2715 0528 4AE6     		b	.L243
 2716              	.LVL272:
 2717              	.L110:
 584:bluetooth_rxtx.c **** 		*data_len = 1;
 2718              		.loc 1 584 3 is_stmt 1 view .LVU978
 584:bluetooth_rxtx.c **** 		*data_len = 1;
 2719              		.loc 1 584 15 is_stmt 0 view .LVU979
 2720 052a 4D4B     		ldr	r3, .L246+48
 584:bluetooth_rxtx.c **** 		*data_len = 1;
 2721              		.loc 1 584 31 view .LVU980
 2722 052c 1B69     		ldr	r3, [r3, #16]
 2723 052e 003B     		subs	r3, r3, #0
 2724 0530 18BF     		it	ne
 2725 0532 0123     		movne	r3, #1
 2726 0534 C7E5     		b	.L220
ARM GAS  /tmp/ccwF1FQu.s 			page 101


 2727              	.L109:
 589:bluetooth_rxtx.c **** 		break;
 2728              		.loc 1 589 3 is_stmt 1 view .LVU981
 589:bluetooth_rxtx.c **** 		break;
 2729              		.loc 1 589 41 is_stmt 0 view .LVU982
 2730 0536 0B88     		ldrh	r3, [r1]
 589:bluetooth_rxtx.c **** 		break;
 2731              		.loc 1 589 17 view .LVU983
 2732 0538 494A     		ldr	r2, .L246+48
 2733              	.LVL273:
 589:bluetooth_rxtx.c **** 		break;
 2734              		.loc 1 589 41 view .LVU984
 2735 053a 003B     		subs	r3, r3, #0
 2736 053c 18BF     		it	ne
 2737 053e 0123     		movne	r3, #1
 589:bluetooth_rxtx.c **** 		break;
 2738              		.loc 1 589 17 view .LVU985
 2739 0540 1361     		str	r3, [r2, #16]
 590:bluetooth_rxtx.c **** 
 2740              		.loc 1 590 3 is_stmt 1 view .LVU986
 2741 0542 E8E5     		b	.L214
 2742              	.LVL274:
 2743              	.L108:
 593:bluetooth_rxtx.c **** 		if (p != NULL) {
 2744              		.loc 1 593 3 view .LVU987
 593:bluetooth_rxtx.c **** 		if (p != NULL) {
 2745              		.loc 1 593 7 is_stmt 0 view .LVU988
 2746 0544 FFF7FEFF 		bl	dequeue
 2747              	.LVL275:
 594:bluetooth_rxtx.c **** 			memcpy(data, (void *)p, sizeof(usb_pkt_rx));
 2748              		.loc 1 594 3 is_stmt 1 view .LVU989
 594:bluetooth_rxtx.c **** 			memcpy(data, (void *)p, sizeof(usb_pkt_rx));
 2749              		.loc 1 594 6 is_stmt 0 view .LVU990
 2750 0548 0146     		mov	r1, r0
 2751 054a 28B1     		cbz	r0, .L178
 595:bluetooth_rxtx.c **** 			*data_len = sizeof(usb_pkt_rx);
 2752              		.loc 1 595 4 is_stmt 1 view .LVU991
 2753 054c 4022     		movs	r2, #64
 2754 054e 2846     		mov	r0, r5
 2755              	.LVL276:
 595:bluetooth_rxtx.c **** 			*data_len = sizeof(usb_pkt_rx);
 2756              		.loc 1 595 4 is_stmt 0 view .LVU992
 2757 0550 FFF7FEFF 		bl	memcpy
 2758              	.LVL277:
 596:bluetooth_rxtx.c **** 		} else {
 2759              		.loc 1 596 4 is_stmt 1 view .LVU993
 596:bluetooth_rxtx.c **** 		} else {
 2760              		.loc 1 596 14 is_stmt 0 view .LVU994
 2761 0554 4023     		movs	r3, #64
 2762 0556 1FE6     		b	.L223
 2763              	.LVL278:
 2764              	.L178:
 598:bluetooth_rxtx.c **** 			*data_len = 1;
 2765              		.loc 1 598 4 is_stmt 1 view .LVU995
 598:bluetooth_rxtx.c **** 			*data_len = 1;
 2766              		.loc 1 598 12 is_stmt 0 view .LVU996
 2767 0558 2870     		strb	r0, [r5]
ARM GAS  /tmp/ccwF1FQu.s 			page 102


 2768 055a FFE5     		b	.L217
 2769              	.LVL279:
 2770              	.L107:
 604:bluetooth_rxtx.c **** 
 2771              		.loc 1 604 3 is_stmt 1 view .LVU997
 604:bluetooth_rxtx.c **** 
 2772              		.loc 1 604 13 is_stmt 0 view .LVU998
 2773 055c 0022     		movs	r2, #0
 2774              	.LVL280:
 606:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_PROMISC_LE;
 2775              		.loc 1 606 12 view .LVU999
 2776 055e 354B     		ldr	r3, .L246+4
 604:bluetooth_rxtx.c **** 
 2777              		.loc 1 604 13 view .LVU1000
 2778 0560 2260     		str	r2, [r4]
 606:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_PROMISC_LE;
 2779              		.loc 1 606 3 is_stmt 1 view .LVU1001
 606:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_PROMISC_LE;
 2780              		.loc 1 606 12 is_stmt 0 view .LVU1002
 2781 0562 9A72     		strb	r2, [r3, #10]
 607:bluetooth_rxtx.c **** 
 2782              		.loc 1 607 3 is_stmt 1 view .LVU1003
 607:bluetooth_rxtx.c **** 
 2783              		.loc 1 607 18 is_stmt 0 view .LVU1004
 2784 0564 0A22     		movs	r2, #10
 2785 0566 9A74     		strb	r2, [r3, #18]
 609:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set(channel);
 2786              		.loc 1 609 3 is_stmt 1 view .LVU1005
 2787 0568 FFF7FEFF 		bl	usb_queue_init
 2788              	.LVL281:
 609:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set(channel);
 2789              		.loc 1 609 3 is_stmt 0 view .LVU1006
 2790 056c BEE6     		b	.L230
 2791              	.LVL282:
 2792              	.L104:
 614:bluetooth_rxtx.c **** 		data[0] = (reg_val >> 8) & 0xff;
 2793              		.loc 1 614 3 is_stmt 1 view .LVU1007
 614:bluetooth_rxtx.c **** 		data[0] = (reg_val >> 8) & 0xff;
 2794              		.loc 1 614 13 is_stmt 0 view .LVU1008
 2795 056e 0878     		ldrb	r0, [r1]	@ zero_extendqisi2
 2796              	.LVL283:
 614:bluetooth_rxtx.c **** 		data[0] = (reg_val >> 8) & 0xff;
 2797              		.loc 1 614 13 view .LVU1009
 2798 0570 FFF7FEFF 		bl	cc2400_get
 2799              	.LVL284:
 615:bluetooth_rxtx.c **** 		data[1] = reg_val & 0xff;
 2800              		.loc 1 615 3 is_stmt 1 view .LVU1010
 615:bluetooth_rxtx.c **** 		data[1] = reg_val & 0xff;
 2801              		.loc 1 615 11 is_stmt 0 view .LVU1011
 2802 0574 030A     		lsrs	r3, r0, #8
 2803 0576 2B70     		strb	r3, [r5]
 616:bluetooth_rxtx.c **** 		*data_len = 2;
 2804              		.loc 1 616 3 is_stmt 1 view .LVU1012
 616:bluetooth_rxtx.c **** 		*data_len = 2;
 2805              		.loc 1 616 11 is_stmt 0 view .LVU1013
 2806 0578 6870     		strb	r0, [r5, #1]
 2807 057a 22E6     		b	.L236
ARM GAS  /tmp/ccwF1FQu.s 			page 103


 2808              	.LVL285:
 2809              	.L100:
 621:bluetooth_rxtx.c **** 		break;
 2810              		.loc 1 621 3 is_stmt 1 view .LVU1014
 2811 057c 4988     		ldrh	r1, [r1, #2]
 2812              	.LVL286:
 621:bluetooth_rxtx.c **** 		break;
 2813              		.loc 1 621 3 is_stmt 0 view .LVU1015
 2814 057e 3078     		ldrb	r0, [r6]	@ zero_extendqisi2
 2815              	.LVL287:
 621:bluetooth_rxtx.c **** 		break;
 2816              		.loc 1 621 3 view .LVU1016
 2817 0580 F5E5     		b	.L226
 2818              	.LVL288:
 2819              	.L179:
 626:bluetooth_rxtx.c **** 			cc2400_set(data[i*3], reg_val);
 2820              		.loc 1 626 4 is_stmt 1 discriminator 3 view .LVU1017
 626:bluetooth_rxtx.c **** 			cc2400_set(data[i*3], reg_val);
 2821              		.loc 1 626 22 is_stmt 0 discriminator 3 view .LVU1018
 2822 0582 02EB4203 		add	r3, r2, r2, lsl #1
 2823              	.LVL289:
 627:bluetooth_rxtx.c **** 		}
 2824              		.loc 1 627 4 is_stmt 1 discriminator 3 view .LVU1019
 626:bluetooth_rxtx.c **** 			cc2400_set(data[i*3], reg_val);
 2825              		.loc 1 626 19 is_stmt 0 discriminator 3 view .LVU1020
 2826 0586 EA18     		adds	r2, r5, r3
 2827              	.LVL290:
 626:bluetooth_rxtx.c **** 			cc2400_set(data[i*3], reg_val);
 2828              		.loc 1 626 19 discriminator 3 view .LVU1021
 2829 0588 5178     		ldrb	r1, [r2, #1]	@ zero_extendqisi2
 626:bluetooth_rxtx.c **** 			cc2400_set(data[i*3], reg_val);
 2830              		.loc 1 626 41 discriminator 3 view .LVU1022
 2831 058a 9278     		ldrb	r2, [r2, #2]	@ zero_extendqisi2
 627:bluetooth_rxtx.c **** 		}
 2832              		.loc 1 627 4 discriminator 3 view .LVU1023
 2833 058c E85C     		ldrb	r0, [r5, r3]	@ zero_extendqisi2
 2834 058e 42EA0121 		orr	r1, r2, r1, lsl #8
 2835 0592 FFF7FEFF 		bl	cc2400_set
 2836              	.LVL291:
 625:bluetooth_rxtx.c **** 			reg_val = (data[(i*3)+1] << 8) | data[(i*3)+2];
 2837              		.loc 1 625 33 is_stmt 1 discriminator 3 view .LVU1024
 627:bluetooth_rxtx.c **** 		}
 2838              		.loc 1 627 4 is_stmt 0 discriminator 3 view .LVU1025
 2839 0596 2346     		mov	r3, r4
 2840              	.LVL292:
 2841              	.L94:
 625:bluetooth_rxtx.c **** 			reg_val = (data[(i*3)+1] << 8) | data[(i*3)+2];
 2842              		.loc 1 625 12 is_stmt 1 discriminator 1 view .LVU1026
 625:bluetooth_rxtx.c **** 			reg_val = (data[(i*3)+1] << 8) | data[(i*3)+2];
 2843              		.loc 1 625 3 is_stmt 0 discriminator 1 view .LVU1027
 2844 0598 3188     		ldrh	r1, [r6]
 625:bluetooth_rxtx.c **** 			reg_val = (data[(i*3)+1] << 8) | data[(i*3)+2];
 2845              		.loc 1 625 13 discriminator 1 view .LVU1028
 2846 059a DAB2     		uxtb	r2, r3
 625:bluetooth_rxtx.c **** 			reg_val = (data[(i*3)+1] << 8) | data[(i*3)+2];
 2847              		.loc 1 625 3 discriminator 1 view .LVU1029
 2848 059c 8A42     		cmp	r2, r1
ARM GAS  /tmp/ccwF1FQu.s 			page 104


 2849 059e 03F10104 		add	r4, r3, #1
 2850 05a2 EED3     		bcc	.L179
 2851 05a4 B7E5     		b	.L214
 2852              	.LVL293:
 2853              	.L190:
 627:bluetooth_rxtx.c **** 		}
 2854              		.loc 1 627 4 view .LVU1030
 2855 05a6 0023     		movs	r3, #0
 2856 05a8 F6E7     		b	.L94
 2857              	.L93:
 2858 05aa 0026     		movs	r6, #0
 2859              	.LVL294:
 2860              	.L181:
 627:bluetooth_rxtx.c **** 		}
 2861              		.loc 1 627 4 view .LVU1031
 2862 05ac F7B2     		uxtb	r7, r6
 2863              	.LVL295:
 634:bluetooth_rxtx.c **** 			data[i*3] = i;
 2864              		.loc 1 634 4 is_stmt 1 discriminator 3 view .LVU1032
 634:bluetooth_rxtx.c **** 			data[i*3] = i;
 2865              		.loc 1 634 14 is_stmt 0 discriminator 3 view .LVU1033
 2866 05ae 3846     		mov	r0, r7
 2867 05b0 FFF7FEFF 		bl	cc2400_get
 2868              	.LVL296:
 635:bluetooth_rxtx.c **** 			data[(i*3)+1] = (reg_val >> 8) & 0xff;
 2869              		.loc 1 635 4 is_stmt 1 discriminator 3 view .LVU1034
 2870 05b4 0136     		adds	r6, r6, #1
 636:bluetooth_rxtx.c **** 			data[(i*3)+2] = reg_val & 0xff;
 2871              		.loc 1 636 18 is_stmt 0 discriminator 3 view .LVU1035
 2872 05b6 030A     		lsrs	r3, r0, #8
 633:bluetooth_rxtx.c **** 			reg_val = cc2400_get(i);
 2873              		.loc 1 633 3 discriminator 3 view .LVU1036
 2874 05b8 2E2E     		cmp	r6, #46
 635:bluetooth_rxtx.c **** 			data[(i*3)+1] = (reg_val >> 8) & 0xff;
 2875              		.loc 1 635 14 discriminator 3 view .LVU1037
 2876 05ba 2F70     		strb	r7, [r5]
 636:bluetooth_rxtx.c **** 			data[(i*3)+2] = reg_val & 0xff;
 2877              		.loc 1 636 4 is_stmt 1 discriminator 3 view .LVU1038
 636:bluetooth_rxtx.c **** 			data[(i*3)+2] = reg_val & 0xff;
 2878              		.loc 1 636 18 is_stmt 0 discriminator 3 view .LVU1039
 2879 05bc 6B70     		strb	r3, [r5, #1]
 637:bluetooth_rxtx.c **** 		}
 2880              		.loc 1 637 4 is_stmt 1 discriminator 3 view .LVU1040
 637:bluetooth_rxtx.c **** 		}
 2881              		.loc 1 637 18 is_stmt 0 discriminator 3 view .LVU1041
 2882 05be A870     		strb	r0, [r5, #2]
 633:bluetooth_rxtx.c **** 			reg_val = cc2400_get(i);
 2883              		.loc 1 633 29 is_stmt 1 discriminator 3 view .LVU1042
 2884              	.LVL297:
 633:bluetooth_rxtx.c **** 			reg_val = cc2400_get(i);
 2885              		.loc 1 633 12 discriminator 3 view .LVU1043
 2886 05c0 05F10305 		add	r5, r5, #3
 633:bluetooth_rxtx.c **** 			reg_val = cc2400_get(i);
 2887              		.loc 1 633 3 is_stmt 0 discriminator 3 view .LVU1044
 2888 05c4 F2D1     		bne	.L181
 639:bluetooth_rxtx.c **** 		break;
 2889              		.loc 1 639 3 is_stmt 1 view .LVU1045
ARM GAS  /tmp/ccwF1FQu.s 			page 105


 639:bluetooth_rxtx.c **** 		break;
 2890              		.loc 1 639 13 is_stmt 0 view .LVU1046
 2891 05c6 8723     		movs	r3, #135
 2892 05c8 E6E5     		b	.L223
 2893              	.LVL298:
 2894              	.L91:
 644:bluetooth_rxtx.c **** 		memcpy(&tx_pkt, data, i);
 2895              		.loc 1 644 3 is_stmt 1 view .LVU1047
 645:bluetooth_rxtx.c **** 		//tx_pkt.channel = data[4] << 8 | data[5];
 2896              		.loc 1 645 3 view .LVU1048
 644:bluetooth_rxtx.c **** 		memcpy(&tx_pkt, data, i);
 2897              		.loc 1 644 5 is_stmt 0 view .LVU1049
 2898 05ca 9279     		ldrb	r2, [r2, #6]	@ zero_extendqisi2
 2899              	.LVL299:
 645:bluetooth_rxtx.c **** 		//tx_pkt.channel = data[4] << 8 | data[5];
 2900              		.loc 1 645 3 view .LVU1050
 2901 05cc 2946     		mov	r1, r5
 2902              	.LVL300:
 644:bluetooth_rxtx.c **** 		memcpy(&tx_pkt, data, i);
 2903              		.loc 1 644 5 view .LVU1051
 2904 05ce 0732     		adds	r2, r2, #7
 645:bluetooth_rxtx.c **** 		//tx_pkt.channel = data[4] << 8 | data[5];
 2905              		.loc 1 645 3 view .LVU1052
 2906 05d0 D2B2     		uxtb	r2, r2
 2907 05d2 2448     		ldr	r0, .L246+52
 2908              	.LVL301:
 645:bluetooth_rxtx.c **** 		//tx_pkt.channel = data[4] << 8 | data[5];
 2909              		.loc 1 645 3 view .LVU1053
 2910 05d4 FFF7FEFF 		bl	memcpy
 2911              	.LVL302:
 647:bluetooth_rxtx.c **** 		*data_len = 0;
 2912              		.loc 1 647 3 is_stmt 1 view .LVU1054
 647:bluetooth_rxtx.c **** 		*data_len = 0;
 2913              		.loc 1 647 18 is_stmt 0 view .LVU1055
 2914 05d8 1022     		movs	r2, #16
 2915 05da 164B     		ldr	r3, .L246+4
 2916 05dc 6DE5     		b	.L225
 2917              	.LVL303:
 2918              	.L103:
 652:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_SLAVE_LE;
 2919              		.loc 1 652 3 is_stmt 1 view .LVU1056
 2920 05de 154C     		ldr	r4, .L246+4
 2921              	.LVL304:
 652:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_SLAVE_LE;
 2922              		.loc 1 652 3 is_stmt 0 view .LVU1057
 2923 05e0 0622     		movs	r2, #6
 2924              	.LVL305:
 652:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_SLAVE_LE;
 2925              		.loc 1 652 3 view .LVU1058
 2926 05e2 2946     		mov	r1, r5
 2927              	.LVL306:
 652:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_SLAVE_LE;
 2928              		.loc 1 652 3 view .LVU1059
 2929 05e4 04F12000 		add	r0, r4, #32
 2930              	.LVL307:
 652:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_SLAVE_LE;
 2931              		.loc 1 652 3 view .LVU1060
ARM GAS  /tmp/ccwF1FQu.s 			page 106


 2932 05e8 FFF7FEFF 		bl	memcpy
 2933              	.LVL308:
 653:bluetooth_rxtx.c **** 		break;
 2934              		.loc 1 653 3 is_stmt 1 view .LVU1061
 653:bluetooth_rxtx.c **** 		break;
 2935              		.loc 1 653 18 is_stmt 0 view .LVU1062
 2936 05ec 0C23     		movs	r3, #12
 2937 05ee A374     		strb	r3, [r4, #18]
 654:bluetooth_rxtx.c **** #endif
 2938              		.loc 1 654 3 is_stmt 1 view .LVU1063
 2939 05f0 91E5     		b	.L214
 2940              	.LVL309:
 2941              	.L88:
 197:bluetooth_rxtx.c **** 
 2942              		.loc 1 197 11 is_stmt 0 view .LVU1064
 2943 05f2 8A88     		ldrh	r2, [r1, #4]
 2944              	.LVL310:
 659:bluetooth_rxtx.c **** 			return 0;
 2945              		.loc 1 659 3 is_stmt 1 view .LVU1065
 659:bluetooth_rxtx.c **** 			return 0;
 2946              		.loc 1 659 6 is_stmt 0 view .LVU1066
 2947 05f4 FF2A     		cmp	r2, #255
 2948 05f6 00F28680 		bhi	.L199
 661:bluetooth_rxtx.c **** 		memcpy(le_adv_data, data, le_adv_len);
 2949              		.loc 1 661 3 is_stmt 1 view .LVU1067
 661:bluetooth_rxtx.c **** 		memcpy(le_adv_data, data, le_adv_len);
 2950              		.loc 1 661 14 is_stmt 0 view .LVU1068
 2951 05fa 1948     		ldr	r0, .L246+48
 2952              	.LVL311:
 662:bluetooth_rxtx.c **** 		break;
 2953              		.loc 1 662 3 view .LVU1069
 2954 05fc 2946     		mov	r1, r5
 2955              	.LVL312:
 661:bluetooth_rxtx.c **** 		memcpy(le_adv_data, data, le_adv_len);
 2956              		.loc 1 661 14 view .LVU1070
 2957 05fe 8265     		str	r2, [r0, #88]
 662:bluetooth_rxtx.c **** 		break;
 2958              		.loc 1 662 3 is_stmt 1 view .LVU1071
 2959 0600 5C30     		adds	r0, r0, #92
 2960 0602 FFF7FEFF 		bl	memcpy
 2961              	.LVL313:
 663:bluetooth_rxtx.c **** 
 2962              		.loc 1 663 3 view .LVU1072
 2963 0606 86E5     		b	.L214
 2964              	.LVL314:
 2965              	.L101:
 668:bluetooth_rxtx.c **** 			return 0; // invalid mask
 2966              		.loc 1 668 3 view .LVU1073
 668:bluetooth_rxtx.c **** 			return 0; // invalid mask
 2967              		.loc 1 668 11 is_stmt 0 view .LVU1074
 2968 0608 9479     		ldrb	r4, [r2, #6]	@ zero_extendqisi2
 2969              	.LVL315:
 668:bluetooth_rxtx.c **** 			return 0; // invalid mask
 2970              		.loc 1 668 6 view .LVU1075
 2971 060a 302C     		cmp	r4, #48
 2972 060c 7BD8     		bhi	.L199
 671:bluetooth_rxtx.c **** 			le.target_set = 0;
ARM GAS  /tmp/ccwF1FQu.s 			page 107


 2973              		.loc 1 671 8 is_stmt 1 view .LVU1076
 671:bluetooth_rxtx.c **** 			le.target_set = 0;
 2974              		.loc 1 671 11 is_stmt 0 view .LVU1077
 2975 060e 5CBB     		cbnz	r4, .L182
 672:bluetooth_rxtx.c **** 			memset(le.target, 0, 6);
 2976              		.loc 1 672 4 is_stmt 1 view .LVU1078
 672:bluetooth_rxtx.c **** 			memset(le.target, 0, 6);
 2977              		.loc 1 672 18 is_stmt 0 view .LVU1079
 2978 0610 134D     		ldr	r5, .L246+48
 673:bluetooth_rxtx.c **** 			memset(le.target_mask, 0, 6);
 2979              		.loc 1 673 4 view .LVU1080
 2980 0612 2146     		mov	r1, r4
 2981              	.LVL316:
 673:bluetooth_rxtx.c **** 			memset(le.target_mask, 0, 6);
 2982              		.loc 1 673 4 view .LVU1081
 2983 0614 0622     		movs	r2, #6
 2984              	.LVL317:
 673:bluetooth_rxtx.c **** 			memset(le.target_mask, 0, 6);
 2985              		.loc 1 673 4 view .LVU1082
 2986 0616 05F13800 		add	r0, r5, #56
 2987              	.LVL318:
 672:bluetooth_rxtx.c **** 			memset(le.target, 0, 6);
 2988              		.loc 1 672 18 view .LVU1083
 2989 061a 6C64     		str	r4, [r5, #68]
 673:bluetooth_rxtx.c **** 			memset(le.target_mask, 0, 6);
 2990              		.loc 1 673 4 is_stmt 1 view .LVU1084
 2991 061c FFF7FEFF 		bl	memset
 2992              	.LVL319:
 674:bluetooth_rxtx.c **** 		} else {
 2993              		.loc 1 674 4 view .LVU1085
 2994 0620 0622     		movs	r2, #6
 2995 0622 2146     		mov	r1, r4
 2996 0624 05F13E00 		add	r0, r5, #62
 2997 0628 FFF7FEFF 		bl	memset
 2998              	.LVL320:
 2999 062c 73E5     		b	.L214
 3000              	.L247:
 3001 062e 00BF     		.align	2
 3002              	.L246:
 3003 0630 00000000 		.word	clkn_offset
 3004 0634 00000000 		.word	.LANCHOR1
 3005 0638 98C00920 		.word	537510040
 3006 063c 00000000 		.word	clk100ns_offset
 3007 0640 00000000 		.word	afh_map
 3008 0644 00000000 		.word	used_channels
 3009 0648 00000000 		.word	afh_enabled
 3010 064c 00000000 		.word	clkn
 3011 0650 00000000 		.word	clk_drift_ppm
 3012 0654 00000000 		.word	clkn_next_drift_fix
 3013 0658 00000000 		.word	clk_drift_correction
 3014 065c 00000000 		.word	clkn_last_drift_fix
 3015 0660 00000000 		.word	.LANCHOR0
 3016 0664 00000000 		.word	tx_pkt
 3017              	.LVL321:
 3018              	.L182:
 674:bluetooth_rxtx.c **** 		} else {
 3019              		.loc 1 674 4 is_stmt 0 view .LVU1086
ARM GAS  /tmp/ccwF1FQu.s 			page 108


 3020 0668 284C     		ldr	r4, .L248
 3021 066a 931D     		adds	r3, r2, #6
 671:bluetooth_rxtx.c **** 			le.target_set = 0;
 3022              		.loc 1 671 11 view .LVU1087
 3023 066c 2246     		mov	r2, r4
 3024              	.LVL322:
 3025              	.L183:
 3026              	.LBB31:
 679:bluetooth_rxtx.c **** 
 3027              		.loc 1 679 5 is_stmt 1 discriminator 3 view .LVU1088
 679:bluetooth_rxtx.c **** 
 3028              		.loc 1 679 24 is_stmt 0 discriminator 3 view .LVU1089
 3029 066e 13F8011D 		ldrb	r1, [r3, #-1]!	@ zero_extendqisi2
 678:bluetooth_rxtx.c **** 				le.target[i] = data[5-i];
 3030              		.loc 1 678 4 discriminator 3 view .LVU1090
 3031 0672 9D42     		cmp	r5, r3
 679:bluetooth_rxtx.c **** 
 3032              		.loc 1 679 18 discriminator 3 view .LVU1091
 3033 0674 02F8011B 		strb	r1, [r2], #1
 3034              	.LVL323:
 678:bluetooth_rxtx.c **** 				le.target[i] = data[5-i];
 3035              		.loc 1 678 23 is_stmt 1 discriminator 3 view .LVU1092
 678:bluetooth_rxtx.c **** 				le.target[i] = data[5-i];
 3036              		.loc 1 678 16 discriminator 3 view .LVU1093
 678:bluetooth_rxtx.c **** 				le.target[i] = data[5-i];
 3037              		.loc 1 678 4 is_stmt 0 discriminator 3 view .LVU1094
 3038 0678 F9D1     		bne	.L183
 682:bluetooth_rxtx.c **** 			for (i = 5; data[6] > 8; --i, data[6] -= 8) {
 3039              		.loc 1 682 4 is_stmt 1 view .LVU1095
 3040 067a 0021     		movs	r1, #0
 3041 067c 0622     		movs	r2, #6
 3042              	.LVL324:
 682:bluetooth_rxtx.c **** 			for (i = 5; data[6] > 8; --i, data[6] -= 8) {
 3043              		.loc 1 682 4 is_stmt 0 view .LVU1096
 3044 067e 2448     		ldr	r0, .L248+4
 3045              	.LVL325:
 682:bluetooth_rxtx.c **** 			for (i = 5; data[6] > 8; --i, data[6] -= 8) {
 3046              		.loc 1 682 4 view .LVU1097
 3047 0680 FFF7FEFF 		bl	memset
 3048              	.LVL326:
 683:bluetooth_rxtx.c **** 				le.target_mask[i] = 0xff;
 3049              		.loc 1 683 4 is_stmt 1 view .LVU1098
 684:bluetooth_rxtx.c **** 			}
 3050              		.loc 1 684 23 is_stmt 0 view .LVU1099
 3051 0684 FF26     		movs	r6, #255
 3052              	.LVL327:
 683:bluetooth_rxtx.c **** 				le.target_mask[i] = 0xff;
 3053              		.loc 1 683 11 view .LVU1100
 3054 0686 0523     		movs	r3, #5
 684:bluetooth_rxtx.c **** 			}
 3055              		.loc 1 684 23 view .LVU1101
 3056 0688 2249     		ldr	r1, .L248+8
 3057              	.LVL328:
 3058              	.L184:
 683:bluetooth_rxtx.c **** 				le.target_mask[i] = 0xff;
 3059              		.loc 1 683 16 is_stmt 1 discriminator 1 view .LVU1102
 683:bluetooth_rxtx.c **** 				le.target_mask[i] = 0xff;
ARM GAS  /tmp/ccwF1FQu.s 			page 109


 3060              		.loc 1 683 20 is_stmt 0 discriminator 1 view .LVU1103
 3061 068a A879     		ldrb	r0, [r5, #6]	@ zero_extendqisi2
 683:bluetooth_rxtx.c **** 				le.target_mask[i] = 0xff;
 3062              		.loc 1 683 4 discriminator 1 view .LVU1104
 3063 068c 0828     		cmp	r0, #8
 3064 068e 1AD8     		bhi	.L185
 686:bluetooth_rxtx.c **** 
 3065              		.loc 1 686 4 is_stmt 1 view .LVU1105
 3066              	.LVL329:
 688:bluetooth_rxtx.c **** 				uint8_t final_byte = 0;
 3067              		.loc 1 688 4 view .LVU1106
 688:bluetooth_rxtx.c **** 				uint8_t final_byte = 0;
 3068              		.loc 1 688 7 is_stmt 0 view .LVU1107
 3069 0690 60B1     		cbz	r0, .L186
 3070 0692 0021     		movs	r1, #0
 3071              	.LBB30:
 689:bluetooth_rxtx.c **** 				for (i = 0; i < data[6]; ++i) {
 3072              		.loc 1 689 13 view .LVU1108
 3073 0694 0A46     		mov	r2, r1
 3074              	.LVL330:
 3075              	.L187:
 691:bluetooth_rxtx.c **** 					final_byte |= 0b10000000;
 3076              		.loc 1 691 6 is_stmt 1 discriminator 3 view .LVU1109
 3077 0696 0131     		adds	r1, r1, #1
 3078              	.LVL331:
 690:bluetooth_rxtx.c **** 					final_byte >>= 1;
 3079              		.loc 1 690 5 is_stmt 0 discriminator 3 view .LVU1110
 3080 0698 CDB2     		uxtb	r5, r1
 691:bluetooth_rxtx.c **** 					final_byte |= 0b10000000;
 3081              		.loc 1 691 17 discriminator 3 view .LVU1111
 3082 069a 5208     		lsrs	r2, r2, #1
 3083              	.LVL332:
 692:bluetooth_rxtx.c **** 				}
 3084              		.loc 1 692 6 is_stmt 1 discriminator 3 view .LVU1112
 690:bluetooth_rxtx.c **** 					final_byte >>= 1;
 3085              		.loc 1 690 5 is_stmt 0 discriminator 3 view .LVU1113
 3086 069c A842     		cmp	r0, r5
 692:bluetooth_rxtx.c **** 				}
 3087              		.loc 1 692 17 discriminator 3 view .LVU1114
 3088 069e 42F08002 		orr	r2, r2, #128
 3089              	.LVL333:
 690:bluetooth_rxtx.c **** 					final_byte >>= 1;
 3090              		.loc 1 690 30 is_stmt 1 discriminator 3 view .LVU1115
 690:bluetooth_rxtx.c **** 					final_byte >>= 1;
 3091              		.loc 1 690 17 discriminator 3 view .LVU1116
 690:bluetooth_rxtx.c **** 					final_byte >>= 1;
 3092              		.loc 1 690 5 is_stmt 0 discriminator 3 view .LVU1117
 3093 06a2 F8D8     		bhi	.L187
 694:bluetooth_rxtx.c **** 			}
 3094              		.loc 1 694 5 is_stmt 1 view .LVU1118
 694:bluetooth_rxtx.c **** 			}
 3095              		.loc 1 694 26 is_stmt 0 view .LVU1119
 3096 06a4 1B49     		ldr	r1, .L248+8
 3097 06a6 0B44     		add	r3, r3, r1
 3098              	.LVL334:
 694:bluetooth_rxtx.c **** 			}
 3099              		.loc 1 694 26 view .LVU1120
ARM GAS  /tmp/ccwF1FQu.s 			page 110


 3100 06a8 83F83E20 		strb	r2, [r3, #62]
 3101              	.LVL335:
 3102              	.L186:
 689:bluetooth_rxtx.c **** 				for (i = 0; i < data[6]; ++i) {
 3103              		.loc 1 689 13 discriminator 3 view .LVU1121
 3104 06ac 0523     		movs	r3, #5
 3105              	.L188:
 3106              	.LVL336:
 689:bluetooth_rxtx.c **** 				for (i = 0; i < data[6]; ++i) {
 3107              		.loc 1 689 13 discriminator 3 view .LVU1122
 3108              	.LBE30:
 699:bluetooth_rxtx.c **** 
 3109              		.loc 1 699 5 is_stmt 1 discriminator 3 view .LVU1123
 699:bluetooth_rxtx.c **** 
 3110              		.loc 1 699 18 is_stmt 0 discriminator 3 view .LVU1124
 3111 06ae 14F8012B 		ldrb	r2, [r4], #1	@ zero_extendqisi2
 3112              	.LVL337:
 699:bluetooth_rxtx.c **** 
 3113              		.loc 1 699 18 discriminator 3 view .LVU1125
 3114 06b2 013B     		subs	r3, r3, #1
 3115 06b4 6179     		ldrb	r1, [r4, #5]	@ zero_extendqisi2
 698:bluetooth_rxtx.c **** 				le.target[i] &= le.target_mask[i];
 3116              		.loc 1 698 4 discriminator 3 view .LVU1126
 3117 06b6 13F0FF03 		ands	r3, r3, #255
 699:bluetooth_rxtx.c **** 
 3118              		.loc 1 699 18 discriminator 3 view .LVU1127
 3119 06ba 02EA0102 		and	r2, r2, r1
 3120 06be 04F8012C 		strb	r2, [r4, #-1]
 698:bluetooth_rxtx.c **** 				le.target[i] &= le.target_mask[i];
 3121              		.loc 1 698 23 is_stmt 1 discriminator 3 view .LVU1128
 3122              	.LVL338:
 698:bluetooth_rxtx.c **** 				le.target[i] &= le.target_mask[i];
 3123              		.loc 1 698 16 discriminator 3 view .LVU1129
 698:bluetooth_rxtx.c **** 				le.target[i] &= le.target_mask[i];
 3124              		.loc 1 698 4 is_stmt 0 discriminator 3 view .LVU1130
 3125 06c2 F4D1     		bne	.L188
 3126 06c4 29E7     		b	.L218
 3127              	.LVL339:
 3128              	.L185:
 684:bluetooth_rxtx.c **** 			}
 3129              		.loc 1 684 5 is_stmt 1 discriminator 3 view .LVU1131
 684:bluetooth_rxtx.c **** 			}
 3130              		.loc 1 684 23 is_stmt 0 discriminator 3 view .LVU1132
 3131 06c6 CA18     		adds	r2, r1, r3
 3132 06c8 82F83E60 		strb	r6, [r2, #62]
 683:bluetooth_rxtx.c **** 				le.target_mask[i] = 0xff;
 3133              		.loc 1 683 29 is_stmt 1 discriminator 3 view .LVU1133
 683:bluetooth_rxtx.c **** 				le.target_mask[i] = 0xff;
 3134              		.loc 1 683 42 is_stmt 0 discriminator 3 view .LVU1134
 3135 06cc AA79     		ldrb	r2, [r5, #6]	@ zero_extendqisi2
 683:bluetooth_rxtx.c **** 				le.target_mask[i] = 0xff;
 3136              		.loc 1 683 29 discriminator 3 view .LVU1135
 3137 06ce 013B     		subs	r3, r3, #1
 3138              	.LVL340:
 683:bluetooth_rxtx.c **** 				le.target_mask[i] = 0xff;
 3139              		.loc 1 683 42 discriminator 3 view .LVU1136
 3140 06d0 083A     		subs	r2, r2, #8
ARM GAS  /tmp/ccwF1FQu.s 			page 111


 683:bluetooth_rxtx.c **** 				le.target_mask[i] = 0xff;
 3141              		.loc 1 683 29 discriminator 3 view .LVU1137
 3142 06d2 DBB2     		uxtb	r3, r3
 3143              	.LVL341:
 683:bluetooth_rxtx.c **** 				le.target_mask[i] = 0xff;
 3144              		.loc 1 683 42 discriminator 3 view .LVU1138
 3145 06d4 AA71     		strb	r2, [r5, #6]
 3146 06d6 D8E7     		b	.L184
 3147              	.LVL342:
 3148              	.L89:
 683:bluetooth_rxtx.c **** 				le.target_mask[i] = 0xff;
 3149              		.loc 1 683 42 discriminator 3 view .LVU1139
 3150              	.LBE31:
 707:bluetooth_rxtx.c **** 		break;
 3151              		.loc 1 707 3 is_stmt 1 view .LVU1140
 707:bluetooth_rxtx.c **** 		break;
 3152              		.loc 1 707 17 is_stmt 0 view .LVU1141
 3153 06d8 0120     		movs	r0, #1
 3154              	.LVL343:
 707:bluetooth_rxtx.c **** 		break;
 3155              		.loc 1 707 17 view .LVU1142
 3156 06da 0F4B     		ldr	r3, .L248+12
 3157 06dc 9862     		str	r0, [r3, #40]
 708:bluetooth_rxtx.c **** 
 3158              		.loc 1 708 3 is_stmt 1 view .LVU1143
 3159 06de 88E6     		b	.L83
 3160              	.LVL344:
 3161              	.L99:
 712:bluetooth_rxtx.c **** 		break;
 3162              		.loc 1 712 3 view .LVU1144
 712:bluetooth_rxtx.c **** 		break;
 3163              		.loc 1 712 12 is_stmt 0 view .LVU1145
 3164 06e0 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 3165              	.LVL345:
 712:bluetooth_rxtx.c **** 		break;
 3166              		.loc 1 712 12 view .LVU1146
 3167 06e2 0D4B     		ldr	r3, .L248+12
 3168 06e4 DA74     		strb	r2, [r3, #19]
 713:bluetooth_rxtx.c **** #endif
 3169              		.loc 1 713 3 is_stmt 1 view .LVU1147
 3170 06e6 16E5     		b	.L214
 3171              	.LVL346:
 3172              	.L98:
 717:bluetooth_rxtx.c **** #ifndef TX_ENABLE
 3173              		.loc 1 717 3 view .LVU1148
 717:bluetooth_rxtx.c **** #ifndef TX_ENABLE
 3174              		.loc 1 717 12 is_stmt 0 view .LVU1149
 3175 06e8 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 3176              	.LVL347:
 717:bluetooth_rxtx.c **** #ifndef TX_ENABLE
 3177              		.loc 1 717 12 view .LVU1150
 3178 06ea 0B4B     		ldr	r3, .L248+12
 3179 06ec 1A75     		strb	r2, [r3, #20]
 722:bluetooth_rxtx.c **** 		break;
 3180              		.loc 1 722 3 is_stmt 1 view .LVU1151
 722:bluetooth_rxtx.c **** 		break;
 3181              		.loc 1 722 18 is_stmt 0 view .LVU1152
ARM GAS  /tmp/ccwF1FQu.s 			page 112


 3182 06ee 0D22     		movs	r2, #13
 3183 06f0 2CE5     		b	.L215
 3184              	.LVL348:
 3185              	.L87:
 726:bluetooth_rxtx.c **** 		break;
 3186              		.loc 1 726 3 is_stmt 1 view .LVU1153
 726:bluetooth_rxtx.c **** 		break;
 3187              		.loc 1 726 10 is_stmt 0 view .LVU1154
 3188 06f2 2946     		mov	r1, r5
 3189              	.LVL349:
 726:bluetooth_rxtx.c **** 		break;
 3190              		.loc 1 726 10 view .LVU1155
 3191 06f4 2268     		ldr	r2, [r4]
 3192              	.LVL350:
 726:bluetooth_rxtx.c **** 		break;
 3193              		.loc 1 726 10 view .LVU1156
 3194 06f6 3088     		ldrh	r0, [r6]
 3195              	.LVL351:
 737:bluetooth_rxtx.c **** 
 3196              		.loc 1 737 1 view .LVU1157
 3197 06f8 BDE8F048 		pop	{r4, r5, r6, r7, fp, lr}
 3198              		.cfi_remember_state
 3199              		.cfi_restore 14
 3200              		.cfi_restore 11
 3201              		.cfi_restore 7
 3202              		.cfi_restore 6
 3203              		.cfi_restore 5
 3204              		.cfi_restore 4
 3205              		.cfi_def_cfa_offset 0
 3206              	.LVL352:
 726:bluetooth_rxtx.c **** 		break;
 3207              		.loc 1 726 10 view .LVU1158
 3208 06fc FFF7FEBF 		b	rfcat_subcommand
 3209              	.LVL353:
 3210              	.L85:
 3211              		.cfi_restore_state
 727:bluetooth_rxtx.c **** 
 3212              		.loc 1 727 3 is_stmt 1 view .LVU1159
 730:bluetooth_rxtx.c **** 		break;
 3213              		.loc 1 730 3 view .LVU1160
 730:bluetooth_rxtx.c **** 		break;
 3214              		.loc 1 730 18 is_stmt 0 view .LVU1161
 3215 0700 1122     		movs	r2, #17
 3216              	.LVL354:
 730:bluetooth_rxtx.c **** 		break;
 3217              		.loc 1 730 18 view .LVU1162
 3218 0702 054B     		ldr	r3, .L248+12
 3219 0704 22E5     		b	.L215
 3220              	.LVL355:
 3221              	.L199:
 318:bluetooth_rxtx.c **** 		}
 3222              		.loc 1 318 11 view .LVU1163
 3223 0706 0020     		movs	r0, #0
 3224 0708 73E6     		b	.L83
 3225              	.L249:
 3226 070a 00BF     		.align	2
 3227              	.L248:
ARM GAS  /tmp/ccwF1FQu.s 			page 113


 3228 070c 38000000 		.word	.LANCHOR0+56
 3229 0710 3E000000 		.word	.LANCHOR0+62
 3230 0714 00000000 		.word	.LANCHOR0
 3231 0718 00000000 		.word	.LANCHOR1
 3232              		.cfi_endproc
 3233              	.LFE2:
 3235              		.section	.text.enqueue_with_ts,"ax",%progbits
 3236              		.align	1
 3237              		.global	enqueue_with_ts
 3238              		.syntax unified
 3239              		.thumb
 3240              		.thumb_func
 3241              		.fpu softvfp
 3243              	enqueue_with_ts:
 3244              	.LVL356:
 3245              	.LFB1:
 164:bluetooth_rxtx.c **** 	usb_pkt_rx* f = usb_enqueue();
 3246              		.loc 1 164 1 is_stmt 1 view -0
 3247              		.cfi_startproc
 3248              		@ args = 0, pretend = 0, frame = 0
 3249              		@ frame_needed = 0, uses_anonymous_args = 0
 164:bluetooth_rxtx.c **** 	usb_pkt_rx* f = usb_enqueue();
 3250              		.loc 1 164 1 is_stmt 0 view .LVU1165
 3251 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 3252              		.cfi_def_cfa_offset 24
 3253              		.cfi_offset 4, -24
 3254              		.cfi_offset 5, -20
 3255              		.cfi_offset 6, -16
 3256              		.cfi_offset 7, -12
 3257              		.cfi_offset 8, -8
 3258              		.cfi_offset 14, -4
 165:bluetooth_rxtx.c **** 
 3259              		.loc 1 165 2 is_stmt 1 view .LVU1166
 164:bluetooth_rxtx.c **** 	usb_pkt_rx* f = usb_enqueue();
 3260              		.loc 1 164 1 is_stmt 0 view .LVU1167
 3261 0004 0646     		mov	r6, r0
 3262 0006 0F46     		mov	r7, r1
 3263 0008 9046     		mov	r8, r2
 165:bluetooth_rxtx.c **** 
 3264              		.loc 1 165 18 view .LVU1168
 3265 000a FFF7FEFF 		bl	usb_enqueue
 3266              	.LVL357:
 168:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 3267              		.loc 1 168 2 is_stmt 1 view .LVU1169
 3268 000e 0F4D     		ldr	r5, .L253
 168:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 3269              		.loc 1 168 5 is_stmt 0 view .LVU1170
 3270 0010 0446     		mov	r4, r0
 3271 0012 28B9     		cbnz	r0, .L251
 169:bluetooth_rxtx.c **** 		return 0;
 3272              		.loc 1 169 3 is_stmt 1 view .LVU1171
 169:bluetooth_rxtx.c **** 		return 0;
 3273              		.loc 1 169 10 is_stmt 0 view .LVU1172
 3274 0014 6B78     		ldrb	r3, [r5, #1]	@ zero_extendqisi2
 3275 0016 43F00403 		orr	r3, r3, #4
 3276 001a 6B70     		strb	r3, [r5, #1]
 170:bluetooth_rxtx.c **** 	}
ARM GAS  /tmp/ccwF1FQu.s 			page 114


 3277              		.loc 1 170 3 is_stmt 1 view .LVU1173
 3278              	.LVL358:
 3279              	.L250:
 188:bluetooth_rxtx.c **** 
 3280              		.loc 1 188 1 is_stmt 0 view .LVU1174
 3281 001c BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 3282              	.LVL359:
 3283              	.L251:
 173:bluetooth_rxtx.c **** 
 3284              		.loc 1 173 2 is_stmt 1 view .LVU1175
 173:bluetooth_rxtx.c **** 
 3285              		.loc 1 173 14 is_stmt 0 view .LVU1176
 3286 0020 0670     		strb	r6, [r0]
 175:bluetooth_rxtx.c **** 	f->clk100ns = ts;
 3287              		.loc 1 175 2 is_stmt 1 view .LVU1177
 175:bluetooth_rxtx.c **** 	f->clk100ns = ts;
 3288              		.loc 1 175 15 is_stmt 0 view .LVU1178
 3289 0022 0026     		movs	r6, #0
 178:bluetooth_rxtx.c **** 	f->rssi_avg = 0;
 3290              		.loc 1 178 15 view .LVU1179
 3291 0024 0A4B     		ldr	r3, .L253+4
 175:bluetooth_rxtx.c **** 	f->clk100ns = ts;
 3292              		.loc 1 175 15 view .LVU1180
 3293 0026 C670     		strb	r6, [r0, #3]
 176:bluetooth_rxtx.c **** 
 3294              		.loc 1 176 2 is_stmt 1 view .LVU1181
 178:bluetooth_rxtx.c **** 	f->rssi_avg = 0;
 3295              		.loc 1 178 15 is_stmt 0 view .LVU1182
 3296 0028 B3F84C30 		ldrh	r3, [r3, #76]
 176:bluetooth_rxtx.c **** 
 3297              		.loc 1 176 14 view .LVU1183
 3298 002c C0F80480 		str	r8, [r0, #4]
 178:bluetooth_rxtx.c **** 	f->rssi_avg = 0;
 3299              		.loc 1 178 2 is_stmt 1 view .LVU1184
 178:bluetooth_rxtx.c **** 	f->rssi_avg = 0;
 3300              		.loc 1 178 34 is_stmt 0 view .LVU1185
 3301 0030 623B     		subs	r3, r3, #98
 178:bluetooth_rxtx.c **** 	f->rssi_avg = 0;
 3302              		.loc 1 178 13 view .LVU1186
 3303 0032 8370     		strb	r3, [r0, #2]
 179:bluetooth_rxtx.c **** 	f->rssi_count = 0;
 3304              		.loc 1 179 2 is_stmt 1 view .LVU1187
 180:bluetooth_rxtx.c **** 
 3305              		.loc 1 180 2 view .LVU1188
 179:bluetooth_rxtx.c **** 	f->rssi_count = 0;
 3306              		.loc 1 179 14 is_stmt 0 view .LVU1189
 3307 0034 4681     		strh	r6, [r0, #10]	@ movhi
 182:bluetooth_rxtx.c **** 
 3308              		.loc 1 182 2 is_stmt 1 view .LVU1190
 3309 0036 3222     		movs	r2, #50
 3310 0038 3946     		mov	r1, r7
 3311 003a 0E30     		adds	r0, r0, #14
 3312              	.LVL360:
 182:bluetooth_rxtx.c **** 
 3313              		.loc 1 182 2 is_stmt 0 view .LVU1191
 3314 003c FFF7FEFF 		bl	memcpy
 3315              	.LVL361:
ARM GAS  /tmp/ccwF1FQu.s 			page 115


 184:bluetooth_rxtx.c **** 	status = 0;
 3316              		.loc 1 184 2 is_stmt 1 view .LVU1192
 184:bluetooth_rxtx.c **** 	status = 0;
 3317              		.loc 1 184 12 is_stmt 0 view .LVU1193
 3318 0040 6B78     		ldrb	r3, [r5, #1]	@ zero_extendqisi2
 187:bluetooth_rxtx.c **** }
 3319              		.loc 1 187 9 view .LVU1194
 3320 0042 0120     		movs	r0, #1
 184:bluetooth_rxtx.c **** 	status = 0;
 3321              		.loc 1 184 12 view .LVU1195
 3322 0044 6370     		strb	r3, [r4, #1]
 185:bluetooth_rxtx.c **** 
 3323              		.loc 1 185 2 is_stmt 1 view .LVU1196
 185:bluetooth_rxtx.c **** 
 3324              		.loc 1 185 9 is_stmt 0 view .LVU1197
 3325 0046 6E70     		strb	r6, [r5, #1]
 187:bluetooth_rxtx.c **** }
 3326              		.loc 1 187 2 is_stmt 1 view .LVU1198
 187:bluetooth_rxtx.c **** }
 3327              		.loc 1 187 9 is_stmt 0 view .LVU1199
 3328 0048 E8E7     		b	.L250
 3329              	.L254:
 3330 004a 00BF     		.align	2
 3331              	.L253:
 3332 004c 00000000 		.word	.LANCHOR1
 3333 0050 00000000 		.word	.LANCHOR0
 3334              		.cfi_endproc
 3335              	.LFE1:
 3337              		.section	.text.TIMER0_IRQHandler,"ax",%progbits
 3338              		.align	1
 3339              		.global	TIMER0_IRQHandler
 3340              		.syntax unified
 3341              		.thumb
 3342              		.thumb_func
 3343              		.fpu softvfp
 3345              	TIMER0_IRQHandler:
 3346              	.LFB3:
 741:bluetooth_rxtx.c **** 	if (T0IR & TIR_MR0_Interrupt) {
 3347              		.loc 1 741 1 is_stmt 1 view -0
 3348              		.cfi_startproc
 3349              		@ args = 0, pretend = 0, frame = 0
 3350              		@ frame_needed = 0, uses_anonymous_args = 0
 3351 0000 10B5     		push	{r4, lr}
 3352              		.cfi_def_cfa_offset 8
 3353              		.cfi_offset 4, -8
 3354              		.cfi_offset 14, -4
 742:bluetooth_rxtx.c **** 
 3355              		.loc 1 742 2 view .LVU1201
 742:bluetooth_rxtx.c **** 
 3356              		.loc 1 742 6 is_stmt 0 view .LVU1202
 3357 0002 4FF04023 		mov	r3, #1073758208
 3358 0006 1B68     		ldr	r3, [r3]
 742:bluetooth_rxtx.c **** 
 3359              		.loc 1 742 5 view .LVU1203
 3360 0008 DC07     		lsls	r4, r3, #31
 3361 000a 46D5     		bpl	.L255
 3362              	.LBB32:
ARM GAS  /tmp/ccwF1FQu.s 			page 116


 744:bluetooth_rxtx.c **** 		clkn_offset = 0;
 3363              		.loc 1 744 3 is_stmt 1 view .LVU1204
 744:bluetooth_rxtx.c **** 		clkn_offset = 0;
 3364              		.loc 1 744 23 is_stmt 0 view .LVU1205
 3365 000c 3F49     		ldr	r1, .L278
 744:bluetooth_rxtx.c **** 		clkn_offset = 0;
 3366              		.loc 1 744 8 view .LVU1206
 3367 000e 404B     		ldr	r3, .L278+4
 744:bluetooth_rxtx.c **** 		clkn_offset = 0;
 3368              		.loc 1 744 23 view .LVU1207
 3369 0010 0A68     		ldr	r2, [r1]
 744:bluetooth_rxtx.c **** 		clkn_offset = 0;
 3370              		.loc 1 744 8 view .LVU1208
 3371 0012 1868     		ldr	r0, [r3]
 3372 0014 0244     		add	r2, r2, r0
 3373 0016 0132     		adds	r2, r2, #1
 3374 0018 1A60     		str	r2, [r3]
 745:bluetooth_rxtx.c **** 
 3375              		.loc 1 745 3 is_stmt 1 view .LVU1209
 745:bluetooth_rxtx.c **** 
 3376              		.loc 1 745 15 is_stmt 0 view .LVU1210
 3377 001a 0022     		movs	r2, #0
 3378 001c 0A60     		str	r2, [r1]
 747:bluetooth_rxtx.c **** 
 3379              		.loc 1 747 3 is_stmt 1 view .LVU1211
 752:bluetooth_rxtx.c **** 			if ((clkn & 0x7f) == 0)
 3380              		.loc 1 752 16 is_stmt 0 view .LVU1212
 3381 001e 3D4A     		ldr	r2, .L278+8
 747:bluetooth_rxtx.c **** 
 3382              		.loc 1 747 27 view .LVU1213
 3383 0020 1868     		ldr	r0, [r3]
 3384              	.LVL362:
 752:bluetooth_rxtx.c **** 			if ((clkn & 0x7f) == 0)
 3385              		.loc 1 752 3 is_stmt 1 view .LVU1214
 752:bluetooth_rxtx.c **** 			if ((clkn & 0x7f) == 0)
 3386              		.loc 1 752 16 is_stmt 0 view .LVU1215
 3387 0022 947A     		ldrb	r4, [r2, #10]	@ zero_extendqisi2
 3388 0024 1146     		mov	r1, r2
 752:bluetooth_rxtx.c **** 			if ((clkn & 0x7f) == 0)
 3389              		.loc 1 752 6 view .LVU1216
 3390 0026 14B1     		cbz	r4, .L257
 752:bluetooth_rxtx.c **** 			if ((clkn & 0x7f) == 0)
 3391              		.loc 1 752 40 discriminator 1 view .LVU1217
 3392 0028 947A     		ldrb	r4, [r2, #10]	@ zero_extendqisi2
 752:bluetooth_rxtx.c **** 			if ((clkn & 0x7f) == 0)
 3393              		.loc 1 752 28 discriminator 1 view .LVU1218
 3394 002a 012C     		cmp	r4, #1
 3395 002c 36D1     		bne	.L258
 3396              	.L257:
 753:bluetooth_rxtx.c **** 				do_hop = 1;
 3397              		.loc 1 753 4 is_stmt 1 view .LVU1219
 753:bluetooth_rxtx.c **** 				do_hop = 1;
 3398              		.loc 1 753 14 is_stmt 0 view .LVU1220
 3399 002e 1A68     		ldr	r2, [r3]
 753:bluetooth_rxtx.c **** 				do_hop = 1;
 3400              		.loc 1 753 7 view .LVU1221
 3401 0030 5006     		lsls	r0, r2, #25
ARM GAS  /tmp/ccwF1FQu.s 			page 117


 3402              	.LVL363:
 753:bluetooth_rxtx.c **** 				do_hop = 1;
 3403              		.loc 1 753 7 view .LVU1222
 3404 0032 01D1     		bne	.L259
 754:bluetooth_rxtx.c **** 		}
 3405              		.loc 1 754 5 is_stmt 1 view .LVU1223
 754:bluetooth_rxtx.c **** 		}
 3406              		.loc 1 754 12 is_stmt 0 view .LVU1224
 3407 0034 0122     		movs	r2, #1
 3408 0036 CA72     		strb	r2, [r1, #11]
 3409              	.L259:
 782:bluetooth_rxtx.c **** 			if(clkn >= clkn_next_drift_fix) {
 3410              		.loc 1 782 3 is_stmt 1 view .LVU1225
 782:bluetooth_rxtx.c **** 			if(clkn >= clkn_next_drift_fix) {
 3411              		.loc 1 782 26 is_stmt 0 view .LVU1226
 3412 0038 3749     		ldr	r1, .L278+12
 3413 003a 384A     		ldr	r2, .L278+16
 3414 003c 0868     		ldr	r0, [r1]
 782:bluetooth_rxtx.c **** 			if(clkn >= clkn_next_drift_fix) {
 3415              		.loc 1 782 5 view .LVU1227
 3416 003e B8B1     		cbz	r0, .L263
 782:bluetooth_rxtx.c **** 			if(clkn >= clkn_next_drift_fix) {
 3417              		.loc 1 782 50 discriminator 1 view .LVU1228
 3418 0040 1088     		ldrh	r0, [r2]
 3419 0042 80B2     		uxth	r0, r0
 782:bluetooth_rxtx.c **** 			if(clkn >= clkn_next_drift_fix) {
 3420              		.loc 1 782 31 discriminator 1 view .LVU1229
 3421 0044 A0B9     		cbnz	r0, .L263
 783:bluetooth_rxtx.c **** 
 3422              		.loc 1 783 4 is_stmt 1 view .LVU1230
 783:bluetooth_rxtx.c **** 
 3423              		.loc 1 783 12 is_stmt 0 view .LVU1231
 3424 0046 1C68     		ldr	r4, [r3]
 3425 0048 0868     		ldr	r0, [r1]
 783:bluetooth_rxtx.c **** 
 3426              		.loc 1 783 6 view .LVU1232
 3427 004a 8442     		cmp	r4, r0
 3428 004c 10D3     		bcc	.L263
 786:bluetooth_rxtx.c **** 					clk100ns_offset = 1;
 3429              		.loc 1 786 5 is_stmt 1 view .LVU1233
 786:bluetooth_rxtx.c **** 					clk100ns_offset = 1;
 3430              		.loc 1 786 22 is_stmt 0 view .LVU1234
 3431 004e 3448     		ldr	r0, .L278+20
 794:bluetooth_rxtx.c **** 				clkn_next_drift_fix = clkn_last_drift_fix + clk_drift_correction;
 3432              		.loc 1 794 25 view .LVU1235
 3433 0050 344C     		ldr	r4, .L278+24
 786:bluetooth_rxtx.c **** 					clk100ns_offset = 1;
 3434              		.loc 1 786 22 view .LVU1236
 3435 0052 0088     		ldrh	r0, [r0]
 786:bluetooth_rxtx.c **** 					clk100ns_offset = 1;
 3436              		.loc 1 786 7 view .LVU1237
 3437 0054 0004     		lsls	r0, r0, #16
 787:bluetooth_rxtx.c **** 				}
 3438              		.loc 1 787 6 is_stmt 1 view .LVU1238
 787:bluetooth_rxtx.c **** 				}
 3439              		.loc 1 787 22 is_stmt 0 view .LVU1239
 3440 0056 54BF     		ite	pl
ARM GAS  /tmp/ccwF1FQu.s 			page 118


 3441 0058 0120     		movpl	r0, #1
 792:bluetooth_rxtx.c **** 				}
 3442              		.loc 1 792 6 is_stmt 1 view .LVU1240
 792:bluetooth_rxtx.c **** 				}
 3443              		.loc 1 792 22 is_stmt 0 view .LVU1241
 3444 005a 41F66900 		movwmi	r0, #6249
 3445 005e 1080     		strh	r0, [r2]	@ movhi
 794:bluetooth_rxtx.c **** 				clkn_next_drift_fix = clkn_last_drift_fix + clk_drift_correction;
 3446              		.loc 1 794 5 is_stmt 1 view .LVU1242
 794:bluetooth_rxtx.c **** 				clkn_next_drift_fix = clkn_last_drift_fix + clk_drift_correction;
 3447              		.loc 1 794 25 is_stmt 0 view .LVU1243
 3448 0060 1868     		ldr	r0, [r3]
 3449 0062 2060     		str	r0, [r4]
 795:bluetooth_rxtx.c **** 			}
 3450              		.loc 1 795 5 is_stmt 1 view .LVU1244
 795:bluetooth_rxtx.c **** 			}
 3451              		.loc 1 795 47 is_stmt 0 view .LVU1245
 3452 0064 3048     		ldr	r0, .L278+28
 3453 0066 0088     		ldrh	r0, [r0]
 3454 0068 2468     		ldr	r4, [r4]
 3455 006a 80B2     		uxth	r0, r0
 3456 006c 2044     		add	r0, r0, r4
 795:bluetooth_rxtx.c **** 			}
 3457              		.loc 1 795 25 view .LVU1246
 3458 006e 0860     		str	r0, [r1]
 3459              	.L263:
 800:bluetooth_rxtx.c **** 			clkn += 2;
 3460              		.loc 1 800 3 is_stmt 1 view .LVU1247
 800:bluetooth_rxtx.c **** 			clkn += 2;
 3461              		.loc 1 800 5 is_stmt 0 view .LVU1248
 3462 0070 40F63440 		movw	r0, #3124
 800:bluetooth_rxtx.c **** 			clkn += 2;
 3463              		.loc 1 800 22 view .LVU1249
 3464 0074 1188     		ldrh	r1, [r2]
 3465 0076 89B2     		uxth	r1, r1
 800:bluetooth_rxtx.c **** 			clkn += 2;
 3466              		.loc 1 800 5 view .LVU1250
 3467 0078 8142     		cmp	r1, r0
 801:bluetooth_rxtx.c **** 
 3468              		.loc 1 801 4 is_stmt 1 view .LVU1251
 801:bluetooth_rxtx.c **** 
 3469              		.loc 1 801 9 is_stmt 0 view .LVU1252
 3470 007a 82BF     		ittt	hi
 3471 007c 1968     		ldrhi	r1, [r3]
 3472 007e 0231     		addhi	r1, r1, #2
 3473 0080 1960     		strhi	r1, [r3]
 803:bluetooth_rxtx.c **** 		clk100ns_offset = 0;
 3474              		.loc 1 803 3 is_stmt 1 view .LVU1253
 803:bluetooth_rxtx.c **** 		clk100ns_offset = 0;
 3475              		.loc 1 803 16 is_stmt 0 view .LVU1254
 3476 0082 1388     		ldrh	r3, [r2]
 803:bluetooth_rxtx.c **** 		clk100ns_offset = 0;
 3477              		.loc 1 803 9 view .LVU1255
 3478 0084 2949     		ldr	r1, .L278+32
 803:bluetooth_rxtx.c **** 		clk100ns_offset = 0;
 3479              		.loc 1 803 16 view .LVU1256
 3480 0086 9BB2     		uxth	r3, r3
ARM GAS  /tmp/ccwF1FQu.s 			page 119


 3481 0088 03F63443 		addw	r3, r3, #3124
 803:bluetooth_rxtx.c **** 		clk100ns_offset = 0;
 3482              		.loc 1 803 9 view .LVU1257
 3483 008c 0B60     		str	r3, [r1]
 804:bluetooth_rxtx.c **** 
 3484              		.loc 1 804 3 is_stmt 1 view .LVU1258
 804:bluetooth_rxtx.c **** 
 3485              		.loc 1 804 19 is_stmt 0 view .LVU1259
 3486 008e 0023     		movs	r3, #0
 3487 0090 1380     		strh	r3, [r2]	@ movhi
 807:bluetooth_rxtx.c **** 	}
 3488              		.loc 1 807 3 is_stmt 1 view .LVU1260
 807:bluetooth_rxtx.c **** 	}
 3489              		.loc 1 807 8 is_stmt 0 view .LVU1261
 3490 0092 4FF04023 		mov	r3, #1073758208
 3491 0096 0122     		movs	r2, #1
 3492 0098 1A60     		str	r2, [r3]
 3493              	.L255:
 807:bluetooth_rxtx.c **** 	}
 3494              		.loc 1 807 8 view .LVU1262
 3495              	.LBE32:
 809:bluetooth_rxtx.c **** 
 3496              		.loc 1 809 1 view .LVU1263
 3497 009a 10BD     		pop	{r4, pc}
 3498              	.LVL364:
 3499              	.L258:
 3500              	.LBB33:
 757:bluetooth_rxtx.c **** 			if ((clkn & 0x1) == 0)
 3501              		.loc 1 757 8 is_stmt 1 view .LVU1264
 757:bluetooth_rxtx.c **** 			if ((clkn & 0x1) == 0)
 3502              		.loc 1 757 21 is_stmt 0 view .LVU1265
 3503 009c 917A     		ldrb	r1, [r2, #10]	@ zero_extendqisi2
 757:bluetooth_rxtx.c **** 			if ((clkn & 0x1) == 0)
 3504              		.loc 1 757 11 view .LVU1266
 3505 009e 0229     		cmp	r1, #2
 3506 00a0 05D1     		bne	.L260
 758:bluetooth_rxtx.c **** 				do_hop = 1;
 3507              		.loc 1 758 4 is_stmt 1 view .LVU1267
 758:bluetooth_rxtx.c **** 				do_hop = 1;
 3508              		.loc 1 758 14 is_stmt 0 view .LVU1268
 3509 00a2 1968     		ldr	r1, [r3]
 758:bluetooth_rxtx.c **** 				do_hop = 1;
 3510              		.loc 1 758 7 view .LVU1269
 3511 00a4 C907     		lsls	r1, r1, #31
 3512 00a6 C7D4     		bmi	.L259
 3513              	.LVL365:
 3514              	.L276:
 777:bluetooth_rxtx.c **** 			}
 3515              		.loc 1 777 5 is_stmt 1 view .LVU1270
 777:bluetooth_rxtx.c **** 			}
 3516              		.loc 1 777 12 is_stmt 0 view .LVU1271
 3517 00a8 0121     		movs	r1, #1
 3518 00aa D172     		strb	r1, [r2, #11]
 3519 00ac C4E7     		b	.L259
 3520              	.LVL366:
 3521              	.L260:
 762:bluetooth_rxtx.c **** 			// Only hop if connected
ARM GAS  /tmp/ccwF1FQu.s 			page 120


 3522              		.loc 1 762 8 is_stmt 1 view .LVU1272
 762:bluetooth_rxtx.c **** 			// Only hop if connected
 3523              		.loc 1 762 21 is_stmt 0 view .LVU1273
 3524 00ae 917A     		ldrb	r1, [r2, #10]	@ zero_extendqisi2
 762:bluetooth_rxtx.c **** 			// Only hop if connected
 3525              		.loc 1 762 11 view .LVU1274
 3526 00b0 0329     		cmp	r1, #3
 3527 00b2 1CD1     		bne	.L261
 764:bluetooth_rxtx.c **** 				--le.interval_timer;
 3528              		.loc 1 764 4 is_stmt 1 view .LVU1275
 764:bluetooth_rxtx.c **** 				--le.interval_timer;
 3529              		.loc 1 764 10 is_stmt 0 view .LVU1276
 3530 00b4 1E49     		ldr	r1, .L278+36
 764:bluetooth_rxtx.c **** 				--le.interval_timer;
 3531              		.loc 1 764 7 view .LVU1277
 3532 00b6 0C7D     		ldrb	r4, [r1, #20]	@ zero_extendqisi2
 3533 00b8 032C     		cmp	r4, #3
 3534 00ba BDD1     		bne	.L259
 747:bluetooth_rxtx.c **** 
 3535              		.loc 1 747 27 discriminator 1 view .LVU1278
 3536 00bc 8C69     		ldr	r4, [r1, #24]
 3537 00be 001B     		subs	r0, r0, r4
 3538              	.LVL367:
 764:bluetooth_rxtx.c **** 				--le.interval_timer;
 3539              		.loc 1 764 40 discriminator 1 view .LVU1279
 3540 00c0 8407     		lsls	r4, r0, #30
 3541 00c2 B9D1     		bne	.L259
 765:bluetooth_rxtx.c **** 				if (le.interval_timer == 0) {
 3542              		.loc 1 765 5 is_stmt 1 view .LVU1280
 765:bluetooth_rxtx.c **** 				if (le.interval_timer == 0) {
 3543              		.loc 1 765 9 is_stmt 0 view .LVU1281
 3544 00c4 888B     		ldrh	r0, [r1, #28]
 765:bluetooth_rxtx.c **** 				if (le.interval_timer == 0) {
 3545              		.loc 1 765 5 view .LVU1282
 3546 00c6 0138     		subs	r0, r0, #1
 3547 00c8 80B2     		uxth	r0, r0
 3548 00ca 8883     		strh	r0, [r1, #28]	@ movhi
 766:bluetooth_rxtx.c **** 					do_hop = 1;
 3549              		.loc 1 766 5 is_stmt 1 view .LVU1283
 766:bluetooth_rxtx.c **** 					do_hop = 1;
 3550              		.loc 1 766 11 is_stmt 0 view .LVU1284
 3551 00cc 888B     		ldrh	r0, [r1, #28]
 3552 00ce 80B2     		uxth	r0, r0
 766:bluetooth_rxtx.c **** 					do_hop = 1;
 3553              		.loc 1 766 8 view .LVU1285
 3554 00d0 40B9     		cbnz	r0, .L262
 767:bluetooth_rxtx.c **** 					++le.conn_count;
 3555              		.loc 1 767 6 is_stmt 1 view .LVU1286
 767:bluetooth_rxtx.c **** 					++le.conn_count;
 3556              		.loc 1 767 13 is_stmt 0 view .LVU1287
 3557 00d2 0120     		movs	r0, #1
 3558 00d4 D072     		strb	r0, [r2, #11]
 768:bluetooth_rxtx.c **** 					le.interval_timer = le.conn_interval;
 3559              		.loc 1 768 6 is_stmt 1 view .LVU1288
 768:bluetooth_rxtx.c **** 					le.interval_timer = le.conn_interval;
 3560              		.loc 1 768 10 is_stmt 0 view .LVU1289
 3561 00d6 0A8C     		ldrh	r2, [r1, #32]
ARM GAS  /tmp/ccwF1FQu.s 			page 121


 768:bluetooth_rxtx.c **** 					le.interval_timer = le.conn_interval;
 3562              		.loc 1 768 6 view .LVU1290
 3563 00d8 0244     		add	r2, r2, r0
 3564 00da 92B2     		uxth	r2, r2
 3565 00dc 0A84     		strh	r2, [r1, #32]	@ movhi
 769:bluetooth_rxtx.c **** 				} else {
 3566              		.loc 1 769 6 is_stmt 1 view .LVU1291
 769:bluetooth_rxtx.c **** 				} else {
 3567              		.loc 1 769 28 is_stmt 0 view .LVU1292
 3568 00de CA8B     		ldrh	r2, [r1, #30]
 769:bluetooth_rxtx.c **** 				} else {
 3569              		.loc 1 769 24 view .LVU1293
 3570 00e0 8A83     		strh	r2, [r1, #28]	@ movhi
 3571 00e2 A9E7     		b	.L259
 3572              	.L262:
 771:bluetooth_rxtx.c **** 				}
 3573              		.loc 1 771 6 is_stmt 1 view .LVU1294
 3574 00e4 4FF48071 		mov	r1, #256
 3575 00e8 124A     		ldr	r2, .L278+40
 3576 00ea 1160     		str	r1, [r2]
 3577 00ec A4E7     		b	.L259
 3578              	.LVL368:
 3579              	.L261:
 775:bluetooth_rxtx.c **** 			if( (last_hop + hop_timeout) == clkn ) {
 3580              		.loc 1 775 8 view .LVU1295
 775:bluetooth_rxtx.c **** 			if( (last_hop + hop_timeout) == clkn ) {
 3581              		.loc 1 775 21 is_stmt 0 view .LVU1296
 3582 00ee 917A     		ldrb	r1, [r2, #10]	@ zero_extendqisi2
 775:bluetooth_rxtx.c **** 			if( (last_hop + hop_timeout) == clkn ) {
 3583              		.loc 1 775 11 view .LVU1297
 3584 00f0 0529     		cmp	r1, #5
 3585 00f2 A1D1     		bne	.L259
 776:bluetooth_rxtx.c **** 				do_hop = 1;
 3586              		.loc 1 776 4 is_stmt 1 view .LVU1298
 776:bluetooth_rxtx.c **** 				do_hop = 1;
 3587              		.loc 1 776 18 is_stmt 0 view .LVU1299
 3588 00f4 0E49     		ldr	r1, .L278+36
 3589 00f6 1048     		ldr	r0, .L278+44
 3590              	.LVL369:
 776:bluetooth_rxtx.c **** 				do_hop = 1;
 3591              		.loc 1 776 18 view .LVU1300
 3592 00f8 B1F84E10 		ldrh	r1, [r1, #78]
 3593 00fc 0468     		ldr	r4, [r0]
 3594 00fe 89B2     		uxth	r1, r1
 776:bluetooth_rxtx.c **** 				do_hop = 1;
 3595              		.loc 1 776 33 view .LVU1301
 3596 0100 1868     		ldr	r0, [r3]
 776:bluetooth_rxtx.c **** 				do_hop = 1;
 3597              		.loc 1 776 18 view .LVU1302
 3598 0102 2144     		add	r1, r1, r4
 776:bluetooth_rxtx.c **** 				do_hop = 1;
 3599              		.loc 1 776 6 view .LVU1303
 3600 0104 8142     		cmp	r1, r0
 3601 0106 97D1     		bne	.L259
 3602 0108 CEE7     		b	.L276
 3603              	.L279:
 3604 010a 00BF     		.align	2
ARM GAS  /tmp/ccwF1FQu.s 			page 122


 3605              	.L278:
 3606 010c 00000000 		.word	clkn_offset
 3607 0110 00000000 		.word	clkn
 3608 0114 00000000 		.word	.LANCHOR1
 3609 0118 00000000 		.word	clkn_next_drift_fix
 3610 011c 00000000 		.word	clk100ns_offset
 3611 0120 00000000 		.word	clk_drift_ppm
 3612 0124 00000000 		.word	clkn_last_drift_fix
 3613 0128 00000000 		.word	clk_drift_correction
 3614 012c 18400040 		.word	1073758232
 3615 0130 00000000 		.word	.LANCHOR0
 3616 0134 3CC00920 		.word	537509948
 3617 0138 00000000 		.word	last_hop
 3618              	.LBE33:
 3619              		.cfi_endproc
 3620              	.LFE3:
 3622              		.section	.text.EINT3_IRQHandler,"ax",%progbits
 3623              		.align	1
 3624              		.global	EINT3_IRQHandler
 3625              		.syntax unified
 3626              		.thumb
 3627              		.thumb_func
 3628              		.fpu softvfp
 3630              	EINT3_IRQHandler:
 3631              	.LFB4:
 814:bluetooth_rxtx.c **** 	/* TODO - check specific source of shared interrupt */
 3632              		.loc 1 814 1 is_stmt 1 view -0
 3633              		.cfi_startproc
 3634              		@ args = 0, pretend = 0, frame = 0
 3635              		@ frame_needed = 0, uses_anonymous_args = 0
 3636              		@ link register save eliminated.
 816:bluetooth_rxtx.c **** 	DIO_SSEL_CLR;           // enable SPI
 3637              		.loc 1 816 2 view .LVU1305
 816:bluetooth_rxtx.c **** 	DIO_SSEL_CLR;           // enable SPI
 3638              		.loc 1 816 14 is_stmt 0 view .LVU1306
 3639 0000 0422     		movs	r2, #4
 3640 0002 084B     		ldr	r3, .L282
 3641 0004 1A60     		str	r2, [r3]
 817:bluetooth_rxtx.c **** 	cs_trigger  = 1;        // signal trigger
 3642              		.loc 1 817 2 is_stmt 1 view .LVU1307
 3643 0006 4FF08052 		mov	r2, #268435456
 3644 000a 074B     		ldr	r3, .L282+4
 3645 000c 1A60     		str	r2, [r3]
 818:bluetooth_rxtx.c **** 	if (hop_mode == HOP_BLUETOOTH)
 3646              		.loc 1 818 2 view .LVU1308
 818:bluetooth_rxtx.c **** 	if (hop_mode == HOP_BLUETOOTH)
 3647              		.loc 1 818 14 is_stmt 0 view .LVU1309
 3648 000e 0122     		movs	r2, #1
 3649 0010 064B     		ldr	r3, .L282+8
 3650 0012 1A70     		strb	r2, [r3]
 819:bluetooth_rxtx.c **** 		dma_discard = 0;
 3651              		.loc 1 819 2 is_stmt 1 view .LVU1310
 819:bluetooth_rxtx.c **** 		dma_discard = 0;
 3652              		.loc 1 819 15 is_stmt 0 view .LVU1311
 3653 0014 064B     		ldr	r3, .L282+12
 3654 0016 9A7A     		ldrb	r2, [r3, #10]	@ zero_extendqisi2
 819:bluetooth_rxtx.c **** 		dma_discard = 0;
ARM GAS  /tmp/ccwF1FQu.s 			page 123


 3655              		.loc 1 819 5 view .LVU1312
 3656 0018 022A     		cmp	r2, #2
 820:bluetooth_rxtx.c **** 
 3657              		.loc 1 820 3 is_stmt 1 view .LVU1313
 820:bluetooth_rxtx.c **** 
 3658              		.loc 1 820 15 is_stmt 0 view .LVU1314
 3659 001a 04BF     		itt	eq
 3660 001c 0022     		moveq	r2, #0
 3661 001e 1A74     		strbeq	r2, [r3, #16]
 822:bluetooth_rxtx.c **** #endif // TC13BADGE
 3662              		.loc 1 822 1 view .LVU1315
 3663 0020 7047     		bx	lr
 3664              	.L283:
 3665 0022 00BF     		.align	2
 3666              	.L282:
 3667 0024 AC800240 		.word	1073905836
 3668 0028 9CC00920 		.word	537510044
 3669 002c 00000000 		.word	cs_trigger
 3670 0030 00000000 		.word	.LANCHOR1
 3671              		.cfi_endproc
 3672              	.LFE4:
 3674              		.section	.text.legacy_DMA_IRQHandler,"ax",%progbits
 3675              		.align	1
 3676              		.global	legacy_DMA_IRQHandler
 3677              		.syntax unified
 3678              		.thumb
 3679              		.thumb_func
 3680              		.fpu softvfp
 3682              	legacy_DMA_IRQHandler:
 3683              	.LFB7:
 869:bluetooth_rxtx.c **** 	if ( mode == MODE_RX_SYMBOLS
 3684              		.loc 1 869 1 is_stmt 1 view -0
 3685              		.cfi_startproc
 3686              		@ args = 0, pretend = 0, frame = 0
 3687              		@ frame_needed = 0, uses_anonymous_args = 0
 3688 0000 10B5     		push	{r4, lr}
 3689              		.cfi_def_cfa_offset 8
 3690              		.cfi_offset 4, -8
 3691              		.cfi_offset 14, -4
 870:bluetooth_rxtx.c **** 	   || mode == MODE_BT_FOLLOW
 3692              		.loc 1 870 2 view .LVU1317
 870:bluetooth_rxtx.c **** 	   || mode == MODE_BT_FOLLOW
 3693              		.loc 1 870 12 is_stmt 0 view .LVU1318
 3694 0002 294B     		ldr	r3, .L320
 3695 0004 5A7C     		ldrb	r2, [r3, #17]	@ zero_extendqisi2
 870:bluetooth_rxtx.c **** 	   || mode == MODE_BT_FOLLOW
 3696              		.loc 1 870 5 view .LVU1319
 3697 0006 012A     		cmp	r2, #1
 3698 0008 11D0     		beq	.L285
 871:bluetooth_rxtx.c **** 	   || mode == MODE_SPECAN
 3699              		.loc 1 871 13 view .LVU1320
 3700 000a 5A7C     		ldrb	r2, [r3, #17]	@ zero_extendqisi2
 871:bluetooth_rxtx.c **** 	   || mode == MODE_SPECAN
 3701              		.loc 1 871 5 view .LVU1321
 3702 000c 082A     		cmp	r2, #8
 3703 000e 0ED0     		beq	.L285
 872:bluetooth_rxtx.c **** 	   || mode == MODE_BT_FOLLOW_LE
ARM GAS  /tmp/ccwF1FQu.s 			page 124


 3704              		.loc 1 872 13 view .LVU1322
 3705 0010 5A7C     		ldrb	r2, [r3, #17]	@ zero_extendqisi2
 872:bluetooth_rxtx.c **** 	   || mode == MODE_BT_FOLLOW_LE
 3706              		.loc 1 872 5 view .LVU1323
 3707 0012 042A     		cmp	r2, #4
 3708 0014 0BD0     		beq	.L285
 873:bluetooth_rxtx.c **** 	   || mode == MODE_BT_PROMISC_LE
 3709              		.loc 1 873 13 view .LVU1324
 3710 0016 5A7C     		ldrb	r2, [r3, #17]	@ zero_extendqisi2
 873:bluetooth_rxtx.c **** 	   || mode == MODE_BT_PROMISC_LE
 3711              		.loc 1 873 5 view .LVU1325
 3712 0018 092A     		cmp	r2, #9
 3713 001a 08D0     		beq	.L285
 874:bluetooth_rxtx.c **** 	   || mode == MODE_BT_SLAVE_LE
 3714              		.loc 1 874 13 view .LVU1326
 3715 001c 5A7C     		ldrb	r2, [r3, #17]	@ zero_extendqisi2
 874:bluetooth_rxtx.c **** 	   || mode == MODE_BT_SLAVE_LE
 3716              		.loc 1 874 5 view .LVU1327
 3717 001e 0A2A     		cmp	r2, #10
 3718 0020 05D0     		beq	.L285
 875:bluetooth_rxtx.c **** 	   || mode == MODE_RX_GENERIC)
 3719              		.loc 1 875 13 view .LVU1328
 3720 0022 5A7C     		ldrb	r2, [r3, #17]	@ zero_extendqisi2
 875:bluetooth_rxtx.c **** 	   || mode == MODE_RX_GENERIC)
 3721              		.loc 1 875 5 view .LVU1329
 3722 0024 0C2A     		cmp	r2, #12
 3723 0026 02D0     		beq	.L285
 876:bluetooth_rxtx.c **** 	{
 3724              		.loc 1 876 13 view .LVU1330
 3725 0028 5A7C     		ldrb	r2, [r3, #17]	@ zero_extendqisi2
 876:bluetooth_rxtx.c **** 	{
 3726              		.loc 1 876 5 view .LVU1331
 3727 002a 0F2A     		cmp	r2, #15
 3728 002c 3AD1     		bne	.L284
 3729              	.L285:
 879:bluetooth_rxtx.c **** 			if (DMACIntTCStat & (1 << 0)) {
 3730              		.loc 1 879 3 is_stmt 1 view .LVU1332
 879:bluetooth_rxtx.c **** 			if (DMACIntTCStat & (1 << 0)) {
 3731              		.loc 1 879 7 is_stmt 0 view .LVU1333
 3732 002e 1F4A     		ldr	r2, .L320+4
 3733 0030 1268     		ldr	r2, [r2]
 879:bluetooth_rxtx.c **** 			if (DMACIntTCStat & (1 << 0)) {
 3734              		.loc 1 879 6 view .LVU1334
 3735 0032 D107     		lsls	r1, r2, #31
 3736 0034 36D5     		bpl	.L284
 3737              	.LBB37:
 3738              	.LBI37:
 868:bluetooth_rxtx.c **** {
 3739              		.loc 1 868 6 is_stmt 1 view .LVU1335
 3740              	.LBB38:
 880:bluetooth_rxtx.c **** 				DMACIntTCClear = (1 << 0);
 3741              		.loc 1 880 4 view .LVU1336
 880:bluetooth_rxtx.c **** 				DMACIntTCClear = (1 << 0);
 3742              		.loc 1 880 8 is_stmt 0 view .LVU1337
 3743 0036 1E4A     		ldr	r2, .L320+8
 3744 0038 1268     		ldr	r2, [r2]
 880:bluetooth_rxtx.c **** 				DMACIntTCClear = (1 << 0);
ARM GAS  /tmp/ccwF1FQu.s 			page 125


 3745              		.loc 1 880 7 view .LVU1338
 3746 003a D207     		lsls	r2, r2, #31
 3747 003c 27D5     		bpl	.L288
 3748              	.LBB39:
 881:bluetooth_rxtx.c **** 
 3749              		.loc 1 881 5 is_stmt 1 view .LVU1339
 881:bluetooth_rxtx.c **** 
 3750              		.loc 1 881 20 is_stmt 0 view .LVU1340
 3751 003e 0121     		movs	r1, #1
 3752 0040 1C4A     		ldr	r2, .L320+12
 886:bluetooth_rxtx.c **** 				idle_buf_clkn_high = (clkn >> 20) & 0xff;
 3753              		.loc 1 886 26 view .LVU1341
 3754 0042 40F63544 		movw	r4, #3125
 881:bluetooth_rxtx.c **** 
 3755              		.loc 1 881 20 view .LVU1342
 3756 0046 1160     		str	r1, [r2]
 883:bluetooth_rxtx.c **** 					DIO_SSEL_SET;
 3757              		.loc 1 883 5 is_stmt 1 view .LVU1343
 883:bluetooth_rxtx.c **** 					DIO_SSEL_SET;
 3758              		.loc 1 883 18 is_stmt 0 view .LVU1344
 3759 0048 9A7A     		ldrb	r2, [r3, #10]	@ zero_extendqisi2
 886:bluetooth_rxtx.c **** 				idle_buf_clkn_high = (clkn >> 20) & 0xff;
 3760              		.loc 1 886 26 view .LVU1345
 3761 004a 1B48     		ldr	r0, .L320+16
 883:bluetooth_rxtx.c **** 					DIO_SSEL_SET;
 3762              		.loc 1 883 8 view .LVU1346
 3763 004c 022A     		cmp	r2, #2
 884:bluetooth_rxtx.c **** 
 3764              		.loc 1 884 6 is_stmt 1 view .LVU1347
 3765 004e 02BF     		ittt	eq
 3766 0050 4FF08051 		moveq	r1, #268435456
 3767 0054 194A     		ldreq	r2, .L320+20
 3768 0056 1160     		streq	r1, [r2]
 886:bluetooth_rxtx.c **** 				idle_buf_clkn_high = (clkn >> 20) & 0xff;
 3769              		.loc 1 886 5 view .LVU1348
 886:bluetooth_rxtx.c **** 				idle_buf_clkn_high = (clkn >> 20) & 0xff;
 3770              		.loc 1 886 26 is_stmt 0 view .LVU1349
 3771 0058 1949     		ldr	r1, .L320+24
 3772 005a 0A68     		ldr	r2, [r1]
 3773 005c 0068     		ldr	r0, [r0]
 3774 005e C2F31302 		ubfx	r2, r2, #0, #20
 3775 0062 04FB0202 		mla	r2, r4, r2, r0
 886:bluetooth_rxtx.c **** 				idle_buf_clkn_high = (clkn >> 20) & 0xff;
 3776              		.loc 1 886 24 view .LVU1350
 3777 0066 5A60     		str	r2, [r3, #4]
 887:bluetooth_rxtx.c **** 				idle_buf_channel   = channel;
 3778              		.loc 1 887 5 is_stmt 1 view .LVU1351
 887:bluetooth_rxtx.c **** 				idle_buf_channel   = channel;
 3779              		.loc 1 887 32 is_stmt 0 view .LVU1352
 3780 0068 0A68     		ldr	r2, [r1]
 887:bluetooth_rxtx.c **** 				idle_buf_channel   = channel;
 3781              		.loc 1 887 24 view .LVU1353
 3782 006a C2F30752 		ubfx	r2, r2, #20, #8
 3783 006e 9A70     		strb	r2, [r3, #2]
 888:bluetooth_rxtx.c **** 
 3784              		.loc 1 888 5 is_stmt 1 view .LVU1354
 888:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccwF1FQu.s 			page 126


 3785              		.loc 1 888 24 is_stmt 0 view .LVU1355
 3786 0070 144A     		ldr	r2, .L320+28
 3787 0072 B2F84C20 		ldrh	r2, [r2, #76]
 3788 0076 92B2     		uxth	r2, r2
 3789 0078 1A81     		strh	r2, [r3, #8]	@ movhi
 891:bluetooth_rxtx.c **** 				active_rxbuf = idle_rxbuf;
 3790              		.loc 1 891 5 is_stmt 1 view .LVU1356
 891:bluetooth_rxtx.c **** 				active_rxbuf = idle_rxbuf;
 3791              		.loc 1 891 23 is_stmt 0 view .LVU1357
 3792 007a 134A     		ldr	r2, .L320+32
 892:bluetooth_rxtx.c **** 				idle_rxbuf = tmp;
 3793              		.loc 1 892 18 view .LVU1358
 3794 007c 134B     		ldr	r3, .L320+36
 891:bluetooth_rxtx.c **** 				active_rxbuf = idle_rxbuf;
 3795              		.loc 1 891 23 view .LVU1359
 3796 007e 1168     		ldr	r1, [r2]
 3797              	.LVL370:
 892:bluetooth_rxtx.c **** 				idle_rxbuf = tmp;
 3798              		.loc 1 892 5 is_stmt 1 view .LVU1360
 892:bluetooth_rxtx.c **** 				idle_rxbuf = tmp;
 3799              		.loc 1 892 18 is_stmt 0 view .LVU1361
 3800 0080 1868     		ldr	r0, [r3]
 3801 0082 1060     		str	r0, [r2]
 893:bluetooth_rxtx.c **** 
 3802              		.loc 1 893 5 is_stmt 1 view .LVU1362
 895:bluetooth_rxtx.c **** 			}
 3803              		.loc 1 895 5 is_stmt 0 view .LVU1363
 3804 0084 124A     		ldr	r2, .L320+40
 893:bluetooth_rxtx.c **** 
 3805              		.loc 1 893 16 view .LVU1364
 3806 0086 1960     		str	r1, [r3]
 895:bluetooth_rxtx.c **** 			}
 3807              		.loc 1 895 5 is_stmt 1 view .LVU1365
 3808 0088 1368     		ldr	r3, [r2]
 3809 008a 0133     		adds	r3, r3, #1
 3810 008c 1360     		str	r3, [r2]
 3811              	.LVL371:
 3812              	.L288:
 895:bluetooth_rxtx.c **** 			}
 3813              		.loc 1 895 5 is_stmt 0 view .LVU1366
 3814              	.LBE39:
 897:bluetooth_rxtx.c **** 				DMACIntErrClr = (1 << 0);
 3815              		.loc 1 897 4 is_stmt 1 view .LVU1367
 897:bluetooth_rxtx.c **** 				DMACIntErrClr = (1 << 0);
 3816              		.loc 1 897 8 is_stmt 0 view .LVU1368
 3817 008e 114B     		ldr	r3, .L320+44
 3818 0090 1B68     		ldr	r3, [r3]
 897:bluetooth_rxtx.c **** 				DMACIntErrClr = (1 << 0);
 3819              		.loc 1 897 7 view .LVU1369
 3820 0092 DB07     		lsls	r3, r3, #31
 3821 0094 06D5     		bpl	.L284
 898:bluetooth_rxtx.c **** 				++rx_err;
 3822              		.loc 1 898 5 is_stmt 1 view .LVU1370
 898:bluetooth_rxtx.c **** 				++rx_err;
 3823              		.loc 1 898 19 is_stmt 0 view .LVU1371
 3824 0096 0122     		movs	r2, #1
 3825 0098 0F4B     		ldr	r3, .L320+48
ARM GAS  /tmp/ccwF1FQu.s 			page 127


 3826 009a 1A60     		str	r2, [r3]
 899:bluetooth_rxtx.c **** 			}
 3827              		.loc 1 899 5 is_stmt 1 view .LVU1372
 3828 009c 0F4A     		ldr	r2, .L320+52
 3829 009e 1368     		ldr	r3, [r2]
 3830 00a0 0133     		adds	r3, r3, #1
 3831 00a2 1360     		str	r3, [r2]
 3832              	.L284:
 3833              	.LBE38:
 3834              	.LBE37:
 903:bluetooth_rxtx.c **** 
 3835              		.loc 1 903 1 is_stmt 0 view .LVU1373
 3836 00a4 10BD     		pop	{r4, pc}
 3837              	.L321:
 3838 00a6 00BF     		.align	2
 3839              	.L320:
 3840 00a8 00000000 		.word	.LANCHOR1
 3841 00ac 00400050 		.word	1342193664
 3842 00b0 04400050 		.word	1342193668
 3843 00b4 08400050 		.word	1342193672
 3844 00b8 08400040 		.word	1073758216
 3845 00bc 98C00920 		.word	537510040
 3846 00c0 00000000 		.word	clkn
 3847 00c4 00000000 		.word	.LANCHOR0
 3848 00c8 00000000 		.word	active_rxbuf
 3849 00cc 00000000 		.word	idle_rxbuf
 3850 00d0 00000000 		.word	rx_tc
 3851 00d4 0C400050 		.word	1342193676
 3852 00d8 10400050 		.word	1342193680
 3853 00dc 00000000 		.word	rx_err
 3854              		.cfi_endproc
 3855              	.LFE7:
 3857              		.section	.text.DMA_IRQHandler,"ax",%progbits
 3858              		.align	1
 3859              		.global	DMA_IRQHandler
 3860              		.syntax unified
 3861              		.thumb
 3862              		.thumb_func
 3863              		.fpu softvfp
 3865              	DMA_IRQHandler:
 3866              	.LFB6:
 845:bluetooth_rxtx.c **** 	if (mode == MODE_BT_FOLLOW_LE)
 3867              		.loc 1 845 27 is_stmt 1 view -0
 3868              		.cfi_startproc
 3869              		@ args = 0, pretend = 0, frame = 0
 3870              		@ frame_needed = 0, uses_anonymous_args = 0
 3871 0000 08B5     		push	{r3, lr}
 3872              		.cfi_def_cfa_offset 8
 3873              		.cfi_offset 3, -8
 3874              		.cfi_offset 14, -4
 846:bluetooth_rxtx.c **** 		le_DMA_IRQHandler();
 3875              		.loc 1 846 2 view .LVU1375
 846:bluetooth_rxtx.c **** 		le_DMA_IRQHandler();
 3876              		.loc 1 846 11 is_stmt 0 view .LVU1376
 3877 0002 114B     		ldr	r3, .L337
 3878 0004 5B7C     		ldrb	r3, [r3, #17]	@ zero_extendqisi2
 846:bluetooth_rxtx.c **** 		le_DMA_IRQHandler();
ARM GAS  /tmp/ccwF1FQu.s 			page 128


 3879              		.loc 1 846 5 view .LVU1377
 3880 0006 092B     		cmp	r3, #9
 3881 0008 1AD1     		bne	.L323
 847:bluetooth_rxtx.c **** 	else
 3882              		.loc 1 847 3 is_stmt 1 view .LVU1378
 3883 000a FFF7FEFF 		bl	le_DMA_IRQHandler
 3884              	.LVL372:
 3885              	.L324:
 852:bluetooth_rxtx.c **** 		// TC -- DMA completed, unset flag so another printf can occur
 3886              		.loc 1 852 2 view .LVU1379
 852:bluetooth_rxtx.c **** 		// TC -- DMA completed, unset flag so another printf can occur
 3887              		.loc 1 852 6 is_stmt 0 view .LVU1380
 3888 000e 0F4B     		ldr	r3, .L337+4
 3889 0010 1B68     		ldr	r3, [r3]
 852:bluetooth_rxtx.c **** 		// TC -- DMA completed, unset flag so another printf can occur
 3890              		.loc 1 852 5 view .LVU1381
 3891 0012 1906     		lsls	r1, r3, #24
 3892 0014 17D5     		bpl	.L322
 854:bluetooth_rxtx.c **** 			DMACIntTCClear = (1 << 7);
 3893              		.loc 1 854 3 is_stmt 1 view .LVU1382
 854:bluetooth_rxtx.c **** 			DMACIntTCClear = (1 << 7);
 3894              		.loc 1 854 7 is_stmt 0 view .LVU1383
 3895 0016 0E4B     		ldr	r3, .L337+8
 3896 0018 1B68     		ldr	r3, [r3]
 854:bluetooth_rxtx.c **** 			DMACIntTCClear = (1 << 7);
 3897              		.loc 1 854 6 view .LVU1384
 3898 001a 1A06     		lsls	r2, r3, #24
 3899 001c 05D5     		bpl	.L326
 855:bluetooth_rxtx.c **** 			debug_dma_active = 0;
 3900              		.loc 1 855 4 is_stmt 1 view .LVU1385
 855:bluetooth_rxtx.c **** 			debug_dma_active = 0;
 3901              		.loc 1 855 19 is_stmt 0 view .LVU1386
 3902 001e 8022     		movs	r2, #128
 3903 0020 0C4B     		ldr	r3, .L337+12
 3904 0022 1A60     		str	r2, [r3]
 856:bluetooth_rxtx.c **** 		}
 3905              		.loc 1 856 4 is_stmt 1 view .LVU1387
 856:bluetooth_rxtx.c **** 		}
 3906              		.loc 1 856 21 is_stmt 0 view .LVU1388
 3907 0024 0022     		movs	r2, #0
 3908 0026 0C4B     		ldr	r3, .L337+16
 3909 0028 1A60     		str	r2, [r3]
 3910              	.L326:
 859:bluetooth_rxtx.c **** 			DMACIntErrClr = (1 << 7);
 3911              		.loc 1 859 3 is_stmt 1 view .LVU1389
 859:bluetooth_rxtx.c **** 			DMACIntErrClr = (1 << 7);
 3912              		.loc 1 859 7 is_stmt 0 view .LVU1390
 3913 002a 0C4B     		ldr	r3, .L337+20
 3914 002c 1B68     		ldr	r3, [r3]
 859:bluetooth_rxtx.c **** 			DMACIntErrClr = (1 << 7);
 3915              		.loc 1 859 6 view .LVU1391
 3916 002e 1B06     		lsls	r3, r3, #24
 3917 0030 09D5     		bpl	.L322
 860:bluetooth_rxtx.c **** 			// FIXME do something better here
 3918              		.loc 1 860 4 is_stmt 1 view .LVU1392
 860:bluetooth_rxtx.c **** 			// FIXME do something better here
 3919              		.loc 1 860 18 is_stmt 0 view .LVU1393
ARM GAS  /tmp/ccwF1FQu.s 			page 129


 3920 0032 8022     		movs	r2, #128
 3921 0034 0A4B     		ldr	r3, .L337+24
 3922 0036 1A60     		str	r2, [r3]
 862:bluetooth_rxtx.c **** 			while (1) { }
 3923              		.loc 1 862 4 is_stmt 1 view .LVU1394
 3924 0038 0222     		movs	r2, #2
 3925 003a 0A4B     		ldr	r3, .L337+28
 3926 003c 1A60     		str	r2, [r3]
 3927              	.L327:
 863:bluetooth_rxtx.c **** 		}
 3928              		.loc 1 863 4 discriminator 1 view .LVU1395
 863:bluetooth_rxtx.c **** 		}
 3929              		.loc 1 863 16 discriminator 1 view .LVU1396
 863:bluetooth_rxtx.c **** 		}
 3930              		.loc 1 863 10 discriminator 1 view .LVU1397
 3931 003e FEE7     		b	.L327
 3932              	.L323:
 849:bluetooth_rxtx.c **** 
 3933              		.loc 1 849 3 view .LVU1398
 3934 0040 FFF7FEFF 		bl	legacy_DMA_IRQHandler
 3935              	.LVL373:
 3936 0044 E3E7     		b	.L324
 3937              	.L322:
 866:bluetooth_rxtx.c **** 
 3938              		.loc 1 866 1 is_stmt 0 view .LVU1399
 3939 0046 08BD     		pop	{r3, pc}
 3940              	.L338:
 3941              		.align	2
 3942              	.L337:
 3943 0048 00000000 		.word	.LANCHOR1
 3944 004c 00400050 		.word	1342193664
 3945 0050 04400050 		.word	1342193668
 3946 0054 08400050 		.word	1342193672
 3947 0058 00000000 		.word	debug_dma_active
 3948 005c 0C400050 		.word	1342193676
 3949 0060 10400050 		.word	1342193680
 3950 0064 38C00920 		.word	537509944
 3951              		.cfi_endproc
 3952              	.LFE6:
 3954              		.section	.text.le_transmit,"ax",%progbits
 3955              		.align	1
 3956              		.global	le_transmit
 3957              		.syntax unified
 3958              		.thumb
 3959              		.thumb_func
 3960              		.fpu softvfp
 3962              	le_transmit:
 3963              	.LVL374:
 3964              	.LFB12:
1127:bluetooth_rxtx.c **** 	unsigned int fifo_space, i, j;
 3965              		.loc 1 1127 1 is_stmt 1 view -0
 3966              		.cfi_startproc
 3967              		@ args = 0, pretend = 0, frame = 256
 3968              		@ frame_needed = 0, uses_anonymous_args = 0
1127:bluetooth_rxtx.c **** 	unsigned int fifo_space, i, j;
 3969              		.loc 1 1127 1 is_stmt 0 view .LVU1401
 3970 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
ARM GAS  /tmp/ccwF1FQu.s 			page 130


 3971              		.cfi_def_cfa_offset 36
 3972              		.cfi_offset 4, -36
 3973              		.cfi_offset 5, -32
 3974              		.cfi_offset 6, -28
 3975              		.cfi_offset 7, -24
 3976              		.cfi_offset 8, -20
 3977              		.cfi_offset 9, -16
 3978              		.cfi_offset 10, -12
 3979              		.cfi_offset 11, -8
 3980              		.cfi_offset 14, -4
 3981 0004 C1B0     		sub	sp, sp, #260
 3982              		.cfi_def_cfa_offset 296
1128:bluetooth_rxtx.c **** 	int bit;
 3983              		.loc 1 1128 2 is_stmt 1 view .LVU1402
1129:bluetooth_rxtx.c **** 	u8 txbuf[LE_ADV_MAX_LEN];
 3984              		.loc 1 1129 2 view .LVU1403
1130:bluetooth_rxtx.c **** 	u8 tx_len;
 3985              		.loc 1 1130 2 view .LVU1404
1131:bluetooth_rxtx.c **** 	u8 byte;
 3986              		.loc 1 1131 2 view .LVU1405
1132:bluetooth_rxtx.c **** 	uint32_t sync = rbit(aa);
 3987              		.loc 1 1132 2 view .LVU1406
1133:bluetooth_rxtx.c **** 	u16 gio_save;
 3988              		.loc 1 1133 2 view .LVU1407
1127:bluetooth_rxtx.c **** 	unsigned int fifo_space, i, j;
 3989              		.loc 1 1127 1 is_stmt 0 view .LVU1408
 3990 0006 0C46     		mov	r4, r1
 3991 0008 9046     		mov	r8, r2
1133:bluetooth_rxtx.c **** 	u16 gio_save;
 3992              		.loc 1 1133 18 view .LVU1409
 3993 000a FFF7FEFF 		bl	rbit
 3994              	.LVL375:
1137:bluetooth_rxtx.c **** 	for (i = 0; i < len; ++i) {
 3995              		.loc 1 1137 28 view .LVU1410
 3996 000e 5E4E     		ldr	r6, .L363
1133:bluetooth_rxtx.c **** 	u16 gio_save;
 3997              		.loc 1 1133 18 view .LVU1411
 3998 0010 0546     		mov	r5, r0
 3999              	.LVL376:
1134:bluetooth_rxtx.c **** 
 4000              		.loc 1 1134 2 is_stmt 1 view .LVU1412
1137:bluetooth_rxtx.c **** 	for (i = 0; i < len; ++i) {
 4001              		.loc 1 1137 2 view .LVU1413
1137:bluetooth_rxtx.c **** 	for (i = 0; i < len; ++i) {
 4002              		.loc 1 1137 28 is_stmt 0 view .LVU1414
 4003 0012 B6F84C00 		ldrh	r0, [r6, #76]
 4004              	.LVL377:
1137:bluetooth_rxtx.c **** 	for (i = 0; i < len; ++i) {
 4005              		.loc 1 1137 27 view .LVU1415
 4006 0016 5D4F     		ldr	r7, .L363+4
1137:bluetooth_rxtx.c **** 	for (i = 0; i < len; ++i) {
 4007              		.loc 1 1137 28 view .LVU1416
 4008 0018 80B2     		uxth	r0, r0
 4009 001a FFF7FEFF 		bl	btle_channel_index
 4010              	.LVL378:
1143:bluetooth_rxtx.c **** 			byte >>= 1;
 4011              		.loc 1 1143 20 view .LVU1417
ARM GAS  /tmp/ccwF1FQu.s 			page 131


 4012 001e 4FF07F09 		mov	r9, #127
1137:bluetooth_rxtx.c **** 	for (i = 0; i < len; ++i) {
 4013              		.loc 1 1137 6 view .LVU1418
 4014 0022 395C     		ldrb	r1, [r7, r0]	@ zero_extendqisi2
 4015              	.LVL379:
1138:bluetooth_rxtx.c **** 		byte = data[i];
 4016              		.loc 1 1138 2 is_stmt 1 view .LVU1419
1138:bluetooth_rxtx.c **** 		byte = data[i];
 4017              		.loc 1 1138 2 is_stmt 0 view .LVU1420
 4018 0024 EE46     		mov	lr, sp
1138:bluetooth_rxtx.c **** 		byte = data[i];
 4019              		.loc 1 1138 9 view .LVU1421
 4020 0026 0020     		movs	r0, #0
 4021              	.LVL380:
 4022              	.L340:
1138:bluetooth_rxtx.c **** 		byte = data[i];
 4023              		.loc 1 1138 14 is_stmt 1 discriminator 1 view .LVU1422
1138:bluetooth_rxtx.c **** 		byte = data[i];
 4024              		.loc 1 1138 2 is_stmt 0 discriminator 1 view .LVU1423
 4025 0028 8442     		cmp	r4, r0
 4026 002a 72D8     		bhi	.L342
1150:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
 4027              		.loc 1 1150 2 is_stmt 1 view .LVU1424
 4028 002c 47F6FF71 		movw	r1, #32767
 4029              	.LVL381:
1150:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
 4030              		.loc 1 1150 2 is_stmt 0 view .LVU1425
 4031 0030 0D20     		movs	r0, #13
 4032              	.LVL382:
1150:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
 4033              		.loc 1 1150 2 view .LVU1426
 4034 0032 FFF7FEFF 		bl	cc2400_set
 4035              	.LVL383:
1151:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b);    // no PRNG
 4036              		.loc 1 1151 2 is_stmt 1 view .LVU1427
 4037 0036 42F62231 		movw	r1, #11042
 4038 003a 1220     		movs	r0, #18
 4039 003c FFF7FEFF 		bl	cc2400_set
 4040              	.LVL384:
1152:bluetooth_rxtx.c **** 
 4041              		.loc 1 1152 2 view .LVU1428
 4042 0040 41F24B31 		movw	r1, #4939
 4043 0044 1420     		movs	r0, #20
 4044 0046 FFF7FEFF 		bl	cc2400_set
 4045              	.LVL385:
1154:bluetooth_rxtx.c **** 	// 0 00 01 1 001 11 0 00 0 1
 4046              		.loc 1 1154 2 view .LVU1429
 4047 004a 40F6E141 		movw	r1, #3297
 4048 004e 2020     		movs	r0, #32
 4049 0050 FFF7FEFF 		bl	cc2400_set
 4050              	.LVL386:
1162:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
 4051              		.loc 1 1162 2 view .LVU1430
 4052 0054 B6F84C10 		ldrh	r1, [r6, #76]
 4053 0058 0220     		movs	r0, #2
 4054 005a 89B2     		uxth	r1, r1
 4055 005c FFF7FEFF 		bl	cc2400_set
ARM GAS  /tmp/ccwF1FQu.s 			page 132


 4056              	.LVL387:
1163:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
 4057              		.loc 1 1163 2 view .LVU1431
 4058 0060 0B21     		movs	r1, #11
 4059 0062 0520     		movs	r0, #5
 4060 0064 FFF7FEFF 		bl	cc2400_set
 4061              	.LVL388:
1164:bluetooth_rxtx.c **** 	cc2400_set(INT,     0x0010);    // FIFO_THRESHOLD: 16 bytes
 4062              		.loc 1 1164 2 view .LVU1432
 4063 0068 4021     		movs	r1, #64
 4064 006a 0320     		movs	r0, #3
 4065 006c FFF7FEFF 		bl	cc2400_set
 4066              	.LVL389:
1165:bluetooth_rxtx.c **** 
 4067              		.loc 1 1165 2 view .LVU1433
 4068 0070 1021     		movs	r1, #16
 4069 0072 2320     		movs	r0, #35
 4070 0074 FFF7FEFF 		bl	cc2400_set
 4071              	.LVL390:
1168:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (sync >> 16) & 0xffff);
 4072              		.loc 1 1168 2 view .LVU1434
 4073 0078 A9B2     		uxth	r1, r5
 4074 007a 2C20     		movs	r0, #44
 4075 007c FFF7FEFF 		bl	cc2400_set
 4076              	.LVL391:
1169:bluetooth_rxtx.c **** 
 4077              		.loc 1 1169 2 view .LVU1435
 4078 0080 290C     		lsrs	r1, r5, #16
 4079 0082 2D20     		movs	r0, #45
 4080 0084 FFF7FEFF 		bl	cc2400_set
 4081              	.LVL392:
1172:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, (GIO_FIFO_EMPTY << 9) | (gio_save & 0x1ff));
 4082              		.loc 1 1172 2 view .LVU1436
1172:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, (GIO_FIFO_EMPTY << 9) | (gio_save & 0x1ff));
 4083              		.loc 1 1172 13 is_stmt 0 view .LVU1437
 4084 0088 0820     		movs	r0, #8
 4085 008a FFF7FEFF 		bl	cc2400_get
 4086              	.LVL393:
1173:bluetooth_rxtx.c **** 
 4087              		.loc 1 1173 54 view .LVU1438
 4088 008e C0F30801 		ubfx	r1, r0, #0, #9
1172:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, (GIO_FIFO_EMPTY << 9) | (gio_save & 0x1ff));
 4089              		.loc 1 1172 13 view .LVU1439
 4090 0092 0546     		mov	r5, r0
 4091              	.LVL394:
1173:bluetooth_rxtx.c **** 
 4092              		.loc 1 1173 2 is_stmt 1 view .LVU1440
 4093 0094 41F49841 		orr	r1, r1, #19456
 4094 0098 0820     		movs	r0, #8
 4095              	.LVL395:
1173:bluetooth_rxtx.c **** 
 4096              		.loc 1 1173 2 is_stmt 0 view .LVU1441
 4097 009a FFF7FEFF 		bl	cc2400_set
 4098              	.LVL396:
1176:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 4099              		.loc 1 1176 2 is_stmt 1 view .LVU1442
 4100              	.L343:
ARM GAS  /tmp/ccwF1FQu.s 			page 133


1176:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 4101              		.loc 1 1176 45 discriminator 1 view .LVU1443
1176:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 4102              		.loc 1 1176 8 discriminator 1 view .LVU1444
1176:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 4103              		.loc 1 1176 11 is_stmt 0 discriminator 1 view .LVU1445
 4104 009e FFF7FEFF 		bl	cc2400_status
 4105              	.LVL397:
1176:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 4106              		.loc 1 1176 8 discriminator 1 view .LVU1446
 4107 00a2 4006     		lsls	r0, r0, #25
 4108 00a4 FBD5     		bpl	.L343
1177:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 4109              		.loc 1 1177 2 is_stmt 1 view .LVU1447
 4110 00a6 6120     		movs	r0, #97
 4111 00a8 FFF7FEFF 		bl	cc2400_strobe
 4112              	.LVL398:
1178:bluetooth_rxtx.c **** 	TXLED_SET;
 4113              		.loc 1 1178 2 view .LVU1448
 4114              	.L344:
1178:bluetooth_rxtx.c **** 	TXLED_SET;
 4115              		.loc 1 1178 38 discriminator 1 view .LVU1449
1178:bluetooth_rxtx.c **** 	TXLED_SET;
 4116              		.loc 1 1178 8 discriminator 1 view .LVU1450
1178:bluetooth_rxtx.c **** 	TXLED_SET;
 4117              		.loc 1 1178 11 is_stmt 0 discriminator 1 view .LVU1451
 4118 00ac FFF7FEFF 		bl	cc2400_status
 4119              	.LVL399:
1178:bluetooth_rxtx.c **** 	TXLED_SET;
 4120              		.loc 1 1178 8 discriminator 1 view .LVU1452
 4121 00b0 4107     		lsls	r1, r0, #29
 4122 00b2 FBD5     		bpl	.L344
1179:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
 4123              		.loc 1 1179 2 is_stmt 1 view .LVU1453
 4124 00b4 4FF48072 		mov	r2, #256
 4125 00b8 354B     		ldr	r3, .L363+8
 4126 00ba 1A60     		str	r2, [r3]
1181:bluetooth_rxtx.c **** #endif
 4127              		.loc 1 1181 2 view .LVU1454
 4128 00bc 8022     		movs	r2, #128
 4129 00be 1A62     		str	r2, [r3, #32]
1183:bluetooth_rxtx.c **** 	/*
 4130              		.loc 1 1183 2 view .LVU1455
 4131              	.L345:
1183:bluetooth_rxtx.c **** 	/*
 4132              		.loc 1 1183 61 discriminator 1 view .LVU1456
1183:bluetooth_rxtx.c **** 	/*
 4133              		.loc 1 1183 8 discriminator 1 view .LVU1457
1183:bluetooth_rxtx.c **** 	/*
 4134              		.loc 1 1183 10 is_stmt 0 discriminator 1 view .LVU1458
 4135 00c0 0E20     		movs	r0, #14
 4136 00c2 FFF7FEFF 		bl	cc2400_get
 4137              	.LVL400:
1183:bluetooth_rxtx.c **** 	/*
 4138              		.loc 1 1183 8 discriminator 1 view .LVU1459
 4139 00c6 00F01F00 		and	r0, r0, #31
 4140 00ca 0F28     		cmp	r0, #15
ARM GAS  /tmp/ccwF1FQu.s 			page 134


 4141 00cc F8D1     		bne	.L345
1192:bluetooth_rxtx.c **** 	while (len != 0)
 4142              		.loc 1 1192 4 view .LVU1460
 4143 00ce 0027     		movs	r7, #0
1191:bluetooth_rxtx.c **** 	i = 0;
 4144              		.loc 1 1191 13 view .LVU1461
 4145 00d0 2023     		movs	r3, #32
1196:bluetooth_rxtx.c **** 		// Decide how much we should send in this iteration
 4146              		.loc 1 1196 11 view .LVU1462
 4147 00d2 DFF8C880 		ldr	r8, .L363+20
 4148              	.LVL401:
 4149              	.L346:
1193:bluetooth_rxtx.c **** 	{
 4150              		.loc 1 1193 8 is_stmt 1 view .LVU1463
 4151 00d6 002C     		cmp	r4, #0
 4152 00d8 3FD1     		bne	.L347
 4153              	.LVL402:
 4154              	.L349:
1212:bluetooth_rxtx.c **** 	TXLED_CLR;
 4155              		.loc 1 1212 61 discriminator 1 view .LVU1464
1212:bluetooth_rxtx.c **** 	TXLED_CLR;
 4156              		.loc 1 1212 8 discriminator 1 view .LVU1465
1212:bluetooth_rxtx.c **** 	TXLED_CLR;
 4157              		.loc 1 1212 10 is_stmt 0 discriminator 1 view .LVU1466
 4158 00da 0E20     		movs	r0, #14
 4159 00dc FFF7FEFF 		bl	cc2400_get
 4160              	.LVL403:
1212:bluetooth_rxtx.c **** 	TXLED_CLR;
 4161              		.loc 1 1212 8 discriminator 1 view .LVU1467
 4162 00e0 00F01F00 		and	r0, r0, #31
 4163 00e4 0F28     		cmp	r0, #15
 4164 00e6 F8D1     		bne	.L349
1213:bluetooth_rxtx.c **** 
 4165              		.loc 1 1213 2 is_stmt 1 view .LVU1468
 4166 00e8 4FF48072 		mov	r2, #256
 4167 00ec 294B     		ldr	r3, .L363+12
1215:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 4168              		.loc 1 1215 2 is_stmt 0 view .LVU1469
 4169 00ee 6420     		movs	r0, #100
1213:bluetooth_rxtx.c **** 
 4170              		.loc 1 1213 2 view .LVU1470
 4171 00f0 1A60     		str	r2, [r3]
1215:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 4172              		.loc 1 1215 2 is_stmt 1 view .LVU1471
 4173 00f2 FFF7FEFF 		bl	cc2400_strobe
 4174              	.LVL404:
1216:bluetooth_rxtx.c **** 
 4175              		.loc 1 1216 2 view .LVU1472
 4176              	.L350:
1216:bluetooth_rxtx.c **** 
 4177              		.loc 1 1216 37 discriminator 1 view .LVU1473
1216:bluetooth_rxtx.c **** 
 4178              		.loc 1 1216 8 discriminator 1 view .LVU1474
1216:bluetooth_rxtx.c **** 
 4179              		.loc 1 1216 10 is_stmt 0 discriminator 1 view .LVU1475
 4180 00f6 FFF7FEFF 		bl	cc2400_status
 4181              	.LVL405:
ARM GAS  /tmp/ccwF1FQu.s 			page 135


1216:bluetooth_rxtx.c **** 
 4182              		.loc 1 1216 8 discriminator 1 view .LVU1476
 4183 00fa 4307     		lsls	r3, r0, #29
 4184 00fc FBD4     		bmi	.L350
1219:bluetooth_rxtx.c **** #endif
 4185              		.loc 1 1219 2 is_stmt 1 view .LVU1477
 4186 00fe 8022     		movs	r2, #128
 4187 0100 254B     		ldr	r3, .L363+16
1222:bluetooth_rxtx.c **** }
 4188              		.loc 1 1222 3 is_stmt 0 view .LVU1478
 4189 0102 2946     		mov	r1, r5
 4190 0104 0820     		movs	r0, #8
1219:bluetooth_rxtx.c **** #endif
 4191              		.loc 1 1219 2 view .LVU1479
 4192 0106 1A60     		str	r2, [r3]
1222:bluetooth_rxtx.c **** }
 4193              		.loc 1 1222 3 is_stmt 1 view .LVU1480
 4194 0108 FFF7FEFF 		bl	cc2400_set
 4195              	.LVL406:
1223:bluetooth_rxtx.c **** #endif
 4196              		.loc 1 1223 1 is_stmt 0 view .LVU1481
 4197 010c 41B0     		add	sp, sp, #260
 4198              		.cfi_remember_state
 4199              		.cfi_def_cfa_offset 36
 4200              		@ sp needed
 4201 010e BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 4202              	.LVL407:
 4203              	.L342:
 4204              		.cfi_restore_state
1139:bluetooth_rxtx.c **** 		txbuf[i] = 0;
 4205              		.loc 1 1139 3 is_stmt 1 view .LVU1482
1139:bluetooth_rxtx.c **** 		txbuf[i] = 0;
 4206              		.loc 1 1139 8 is_stmt 0 view .LVU1483
 4207 0112 4FF0070C 		mov	ip, #7
 4208 0116 4FF0000A 		mov	r10, #0
 4209 011a 18F80020 		ldrb	r2, [r8, r0]	@ zero_extendqisi2
 4210              	.LVL408:
1140:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 4211              		.loc 1 1140 3 is_stmt 1 view .LVU1484
1141:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 4212              		.loc 1 1141 3 view .LVU1485
1141:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 4213              		.loc 1 1141 15 view .LVU1486
 4214              	.L341:
1142:bluetooth_rxtx.c **** 			idx = (idx + 1) % sizeof(whitening);
 4215              		.loc 1 1142 4 discriminator 3 view .LVU1487
1142:bluetooth_rxtx.c **** 			idx = (idx + 1) % sizeof(whitening);
 4216              		.loc 1 1142 32 is_stmt 0 discriminator 3 view .LVU1488
 4217 011e 07EB010B 		add	fp, r7, r1
1142:bluetooth_rxtx.c **** 			idx = (idx + 1) % sizeof(whitening);
 4218              		.loc 1 1142 8 discriminator 3 view .LVU1489
 4219 0122 9BF828B0 		ldrb	fp, [fp, #40]	@ zero_extendqisi2
 4220 0126 02F00103 		and	r3, r2, #1
1143:bluetooth_rxtx.c **** 			byte >>= 1;
 4221              		.loc 1 1143 15 discriminator 3 view .LVU1490
 4222 012a 0131     		adds	r1, r1, #1
 4223              	.LVL409:
ARM GAS  /tmp/ccwF1FQu.s 			page 136


1142:bluetooth_rxtx.c **** 			idx = (idx + 1) % sizeof(whitening);
 4224              		.loc 1 1142 8 discriminator 3 view .LVU1491
 4225 012c 8BEA0303 		eor	r3, fp, r3
 4226              	.LVL410:
1143:bluetooth_rxtx.c **** 			byte >>= 1;
 4227              		.loc 1 1143 4 is_stmt 1 discriminator 3 view .LVU1492
1143:bluetooth_rxtx.c **** 			byte >>= 1;
 4228              		.loc 1 1143 20 is_stmt 0 discriminator 3 view .LVU1493
 4229 0130 B1FBF9FB 		udiv	fp, r1, r9
1145:bluetooth_rxtx.c **** 		}
 4230              		.loc 1 1145 20 discriminator 3 view .LVU1494
 4231 0134 03FA0CF3 		lsl	r3, r3, ip
 4232              	.LVL411:
1143:bluetooth_rxtx.c **** 			byte >>= 1;
 4233              		.loc 1 1143 20 discriminator 3 view .LVU1495
 4234 0138 CBEBCB1B 		rsb	fp, fp, fp, lsl #7
1145:bluetooth_rxtx.c **** 		}
 4235              		.loc 1 1145 13 discriminator 3 view .LVU1496
 4236 013c 43EA0A03 		orr	r3, r3, r10
1141:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 4237              		.loc 1 1141 3 discriminator 3 view .LVU1497
 4238 0140 BCF1010C 		subs	ip, ip, #1
 4239              	.LVL412:
1143:bluetooth_rxtx.c **** 			byte >>= 1;
 4240              		.loc 1 1143 20 discriminator 3 view .LVU1498
 4241 0144 A1EB0B01 		sub	r1, r1, fp
 4242              	.LVL413:
1144:bluetooth_rxtx.c **** 			txbuf[i] |= bit << (7 - j);
 4243              		.loc 1 1144 4 is_stmt 1 discriminator 3 view .LVU1499
1144:bluetooth_rxtx.c **** 			txbuf[i] |= bit << (7 - j);
 4244              		.loc 1 1144 9 is_stmt 0 discriminator 3 view .LVU1500
 4245 0148 4FEA5202 		lsr	r2, r2, #1
 4246              	.LVL414:
1145:bluetooth_rxtx.c **** 		}
 4247              		.loc 1 1145 4 is_stmt 1 discriminator 3 view .LVU1501
1145:bluetooth_rxtx.c **** 		}
 4248              		.loc 1 1145 13 is_stmt 0 discriminator 3 view .LVU1502
 4249 014c 5FFA83FA 		uxtb	r10, r3
1141:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 4250              		.loc 1 1141 22 is_stmt 1 discriminator 3 view .LVU1503
 4251              	.LVL415:
1141:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 4252              		.loc 1 1141 15 discriminator 3 view .LVU1504
1141:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 4253              		.loc 1 1141 3 is_stmt 0 discriminator 3 view .LVU1505
 4254 0150 E5D2     		bcs	.L341
 4255 0152 0EF801AB 		strb	r10, [lr], #1
1138:bluetooth_rxtx.c **** 		byte = data[i];
 4256              		.loc 1 1138 23 is_stmt 1 discriminator 2 view .LVU1506
 4257 0156 0130     		adds	r0, r0, #1
 4258              	.LVL416:
1138:bluetooth_rxtx.c **** 		byte = data[i];
 4259              		.loc 1 1138 23 is_stmt 0 discriminator 2 view .LVU1507
 4260 0158 66E7     		b	.L340
 4261              	.LVL417:
 4262              	.L347:
1196:bluetooth_rxtx.c **** 		// Decide how much we should send in this iteration
ARM GAS  /tmp/ccwF1FQu.s 			page 137


 4263              		.loc 1 1196 16 is_stmt 1 discriminator 1 view .LVU1508
1196:bluetooth_rxtx.c **** 		// Decide how much we should send in this iteration
 4264              		.loc 1 1196 9 discriminator 1 view .LVU1509
1196:bluetooth_rxtx.c **** 		// Decide how much we should send in this iteration
 4265              		.loc 1 1196 11 is_stmt 0 discriminator 1 view .LVU1510
 4266 015a D8F80020 		ldr	r2, [r8]
1196:bluetooth_rxtx.c **** 		// Decide how much we should send in this iteration
 4267              		.loc 1 1196 9 discriminator 1 view .LVU1511
 4268 015e 5207     		lsls	r2, r2, #29
 4269 0160 FBD5     		bpl	.L347
1198:bluetooth_rxtx.c **** 			len -= fifo_space;
 4270              		.loc 1 1198 3 is_stmt 1 view .LVU1512
1198:bluetooth_rxtx.c **** 			len -= fifo_space;
 4271              		.loc 1 1198 6 is_stmt 0 view .LVU1513
 4272 0162 9C42     		cmp	r4, r3
1199:bluetooth_rxtx.c **** 			tx_len = fifo_space;
 4273              		.loc 1 1199 4 is_stmt 1 view .LVU1514
1199:bluetooth_rxtx.c **** 			tx_len = fifo_space;
 4274              		.loc 1 1199 8 is_stmt 0 view .LVU1515
 4275 0164 23BF     		ittte	cs
 4276 0166 E41A     		subcs	r4, r4, r3
 4277              	.LVL418:
1199:bluetooth_rxtx.c **** 			tx_len = fifo_space;
 4278              		.loc 1 1199 8 view .LVU1516
 4279 0168 E6B2     		uxtbcs	r6, r4
 4280              	.LVL419:
1200:bluetooth_rxtx.c **** 		} else {
 4281              		.loc 1 1200 4 is_stmt 1 view .LVU1517
1200:bluetooth_rxtx.c **** 		} else {
 4282              		.loc 1 1200 11 is_stmt 0 view .LVU1518
 4283 016a 1C46     		movcs	r4, r3
1203:bluetooth_rxtx.c **** 		}
 4284              		.loc 1 1203 8 view .LVU1519
 4285 016c 0026     		movcc	r6, #0
 4286              	.LVL420:
1206:bluetooth_rxtx.c **** 		cc2400_strobe(STX);
 4287              		.loc 1 1206 3 is_stmt 1 view .LVU1520
 4288 016e 2046     		mov	r0, r4
 4289 0170 0DEB0701 		add	r1, sp, r7
 4290 0174 FFF7FEFF 		bl	cc2400_fifo_write
 4291              	.LVL421:
1207:bluetooth_rxtx.c **** 		i += tx_len;
 4292              		.loc 1 1207 3 view .LVU1521
 4293 0178 6320     		movs	r0, #99
 4294 017a FFF7FEFF 		bl	cc2400_strobe
 4295              	.LVL422:
1208:bluetooth_rxtx.c **** 		// From now on, we only get interrupt on GIO6, which means that we work according to FIFO_THRESHO
 4296              		.loc 1 1208 3 view .LVU1522
1208:bluetooth_rxtx.c **** 		// From now on, we only get interrupt on GIO6, which means that we work according to FIFO_THRESHO
 4297              		.loc 1 1208 5 is_stmt 0 view .LVU1523
 4298 017e 2744     		add	r7, r7, r4
 4299              	.LVL423:
1210:bluetooth_rxtx.c **** 	}
 4300              		.loc 1 1210 3 is_stmt 1 view .LVU1524
1210:bluetooth_rxtx.c **** 	}
 4301              		.loc 1 1210 14 is_stmt 0 view .LVU1525
 4302 0180 1023     		movs	r3, #16
ARM GAS  /tmp/ccwF1FQu.s 			page 138


1208:bluetooth_rxtx.c **** 		// From now on, we only get interrupt on GIO6, which means that we work according to FIFO_THRESHO
 4303              		.loc 1 1208 5 view .LVU1526
 4304 0182 3446     		mov	r4, r6
 4305              	.LVL424:
1208:bluetooth_rxtx.c **** 		// From now on, we only get interrupt on GIO6, which means that we work according to FIFO_THRESHO
 4306              		.loc 1 1208 5 view .LVU1527
 4307 0184 A7E7     		b	.L346
 4308              	.L364:
 4309 0186 00BF     		.align	2
 4310              	.L363:
 4311 0188 00000000 		.word	.LANCHOR0
 4312 018c 00000000 		.word	.LANCHOR2
 4313 0190 38C00920 		.word	537509944
 4314 0194 3CC00920 		.word	537509948
 4315 0198 5CC00920 		.word	537509980
 4316 019c 54C00920 		.word	537509972
 4317              		.cfi_endproc
 4318              	.LFE12:
 4320              		.section	.text.le_jam,"ax",%progbits
 4321              		.align	1
 4322              		.global	le_jam
 4323              		.syntax unified
 4324              		.thumb
 4325              		.thumb_func
 4326              		.fpu softvfp
 4328              	le_jam:
 4329              	.LFB13:
1227:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 4330              		.loc 1 1227 19 is_stmt 1 view -0
 4331              		.cfi_startproc
 4332              		@ args = 0, pretend = 0, frame = 0
 4333              		@ frame_needed = 0, uses_anonymous_args = 0
 4334 0000 08B5     		push	{r3, lr}
 4335              		.cfi_def_cfa_offset 8
 4336              		.cfi_offset 3, -8
 4337              		.cfi_offset 14, -4
1228:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
 4338              		.loc 1 1228 2 view .LVU1529
 4339 0002 47F6FF71 		movw	r1, #32767
 4340 0006 0D20     		movs	r0, #13
 4341 0008 FFF7FEFF 		bl	cc2400_set
 4342              	.LVL425:
1229:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x234b);    // PRNG, 1 MHz offset
 4343              		.loc 1 1229 2 view .LVU1530
 4344 000c 42F62231 		movw	r1, #11042
 4345 0010 1220     		movs	r0, #18
 4346 0012 FFF7FEFF 		bl	cc2400_set
 4347              	.LVL426:
1230:bluetooth_rxtx.c **** 
 4348              		.loc 1 1230 2 view .LVU1531
 4349 0016 42F24B31 		movw	r1, #9035
 4350 001a 1420     		movs	r0, #20
 4351 001c FFF7FEFF 		bl	cc2400_set
 4352              	.LVL427:
1232:bluetooth_rxtx.c **** 	// 0 00 01 1 000 00 0 00 0 1
 4353              		.loc 1 1232 2 view .LVU1532
 4354 0020 40F60141 		movw	r1, #3073
ARM GAS  /tmp/ccwF1FQu.s 			page 139


 4355 0024 2020     		movs	r0, #32
 4356 0026 FFF7FEFF 		bl	cc2400_set
 4357              	.LVL428:
1241:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
 4358              		.loc 1 1241 2 view .LVU1533
 4359 002a 0B21     		movs	r1, #11
 4360 002c 0520     		movs	r0, #5
 4361 002e FFF7FEFF 		bl	cc2400_set
 4362              	.LVL429:
1242:bluetooth_rxtx.c **** 
 4363              		.loc 1 1242 2 view .LVU1534
 4364 0032 4021     		movs	r1, #64
 4365 0034 0320     		movs	r0, #3
 4366 0036 FFF7FEFF 		bl	cc2400_set
 4367              	.LVL430:
1244:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 4368              		.loc 1 1244 2 view .LVU1535
 4369              	.L366:
1244:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 4370              		.loc 1 1244 45 discriminator 1 view .LVU1536
1244:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 4371              		.loc 1 1244 8 discriminator 1 view .LVU1537
1244:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 4372              		.loc 1 1244 11 is_stmt 0 discriminator 1 view .LVU1538
 4373 003a FFF7FEFF 		bl	cc2400_status
 4374              	.LVL431:
1244:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 4375              		.loc 1 1244 8 discriminator 1 view .LVU1539
 4376 003e 4206     		lsls	r2, r0, #25
 4377 0040 FBD5     		bpl	.L366
1245:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 4378              		.loc 1 1245 2 is_stmt 1 view .LVU1540
 4379 0042 6120     		movs	r0, #97
 4380 0044 FFF7FEFF 		bl	cc2400_strobe
 4381              	.LVL432:
1246:bluetooth_rxtx.c **** 	TXLED_SET;
 4382              		.loc 1 1246 2 view .LVU1541
 4383              	.L367:
1246:bluetooth_rxtx.c **** 	TXLED_SET;
 4384              		.loc 1 1246 38 discriminator 1 view .LVU1542
1246:bluetooth_rxtx.c **** 	TXLED_SET;
 4385              		.loc 1 1246 8 discriminator 1 view .LVU1543
1246:bluetooth_rxtx.c **** 	TXLED_SET;
 4386              		.loc 1 1246 11 is_stmt 0 discriminator 1 view .LVU1544
 4387 0048 FFF7FEFF 		bl	cc2400_status
 4388              	.LVL433:
1246:bluetooth_rxtx.c **** 	TXLED_SET;
 4389              		.loc 1 1246 8 discriminator 1 view .LVU1545
 4390 004c 4307     		lsls	r3, r0, #29
 4391 004e FBD5     		bpl	.L367
1247:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
 4392              		.loc 1 1247 2 is_stmt 1 view .LVU1546
 4393 0050 4FF48072 		mov	r2, #256
 4394 0054 074B     		ldr	r3, .L374
 4395 0056 1A60     		str	r2, [r3]
1249:bluetooth_rxtx.c **** #endif
 4396              		.loc 1 1249 2 view .LVU1547
ARM GAS  /tmp/ccwF1FQu.s 			page 140


 4397 0058 8022     		movs	r2, #128
 4398 005a 1A62     		str	r2, [r3, #32]
1251:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 4399              		.loc 1 1251 2 view .LVU1548
 4400              	.L368:
1251:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 4401              		.loc 1 1251 61 discriminator 1 view .LVU1549
1251:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 4402              		.loc 1 1251 8 discriminator 1 view .LVU1550
1251:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 4403              		.loc 1 1251 10 is_stmt 0 discriminator 1 view .LVU1551
 4404 005c 0E20     		movs	r0, #14
 4405 005e FFF7FEFF 		bl	cc2400_get
 4406              	.LVL434:
1251:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 4407              		.loc 1 1251 8 discriminator 1 view .LVU1552
 4408 0062 00F01F00 		and	r0, r0, #31
 4409 0066 0F28     		cmp	r0, #15
 4410 0068 F8D1     		bne	.L368
1252:bluetooth_rxtx.c **** }
 4411              		.loc 1 1252 2 is_stmt 1 view .LVU1553
1253:bluetooth_rxtx.c **** #endif
 4412              		.loc 1 1253 1 is_stmt 0 view .LVU1554
 4413 006a BDE80840 		pop	{r3, lr}
 4414              		.cfi_restore 14
 4415              		.cfi_restore 3
 4416              		.cfi_def_cfa_offset 0
1252:bluetooth_rxtx.c **** }
 4417              		.loc 1 1252 2 view .LVU1555
 4418 006e 6320     		movs	r0, #99
 4419 0070 FFF7FEBF 		b	cc2400_strobe
 4420              	.LVL435:
 4421              	.L375:
 4422              		.align	2
 4423              	.L374:
 4424 0074 38C00920 		.word	537509944
 4425              		.cfi_endproc
 4426              	.LFE13:
 4428              		.section	.text.hop,"ax",%progbits
 4429              		.align	1
 4430              		.global	hop
 4431              		.syntax unified
 4432              		.thumb
 4433              		.thumb_func
 4434              		.fpu softvfp
 4436              	hop:
 4437              	.LFB14:
1259:bluetooth_rxtx.c **** 	do_hop = 0;
 4438              		.loc 1 1259 1 is_stmt 1 view -0
 4439              		.cfi_startproc
 4440              		@ args = 0, pretend = 0, frame = 0
 4441              		@ frame_needed = 0, uses_anonymous_args = 0
 4442 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 4443              		.cfi_def_cfa_offset 24
 4444              		.cfi_offset 3, -24
 4445              		.cfi_offset 4, -20
 4446              		.cfi_offset 5, -16
ARM GAS  /tmp/ccwF1FQu.s 			page 141


 4447              		.cfi_offset 6, -12
 4448              		.cfi_offset 7, -8
 4449              		.cfi_offset 14, -4
1260:bluetooth_rxtx.c **** 	last_hop = clkn;
 4450              		.loc 1 1260 2 view .LVU1557
1260:bluetooth_rxtx.c **** 	last_hop = clkn;
 4451              		.loc 1 1260 9 is_stmt 0 view .LVU1558
 4452 0002 0023     		movs	r3, #0
 4453 0004 6A4C     		ldr	r4, .L417
1261:bluetooth_rxtx.c **** 
 4454              		.loc 1 1261 11 view .LVU1559
 4455 0006 6B4A     		ldr	r2, .L417+4
1260:bluetooth_rxtx.c **** 	last_hop = clkn;
 4456              		.loc 1 1260 9 view .LVU1560
 4457 0008 E372     		strb	r3, [r4, #11]
1261:bluetooth_rxtx.c **** 
 4458              		.loc 1 1261 2 is_stmt 1 view .LVU1561
1261:bluetooth_rxtx.c **** 
 4459              		.loc 1 1261 11 is_stmt 0 view .LVU1562
 4460 000a 6B4B     		ldr	r3, .L417+8
 4461 000c 1968     		ldr	r1, [r3]
 4462 000e 1160     		str	r1, [r2]
1264:bluetooth_rxtx.c **** 		if (cc2400_get(FSDIV) == (channel - 1))
 4463              		.loc 1 1264 2 is_stmt 1 view .LVU1563
1264:bluetooth_rxtx.c **** 		if (cc2400_get(FSDIV) == (channel - 1))
 4464              		.loc 1 1264 15 is_stmt 0 view .LVU1564
 4465 0010 A27A     		ldrb	r2, [r4, #10]	@ zero_extendqisi2
1264:bluetooth_rxtx.c **** 		if (cc2400_get(FSDIV) == (channel - 1))
 4466              		.loc 1 1264 5 view .LVU1565
 4467 0012 52B9     		cbnz	r2, .L377
1265:bluetooth_rxtx.c **** 			return;
 4468              		.loc 1 1265 3 is_stmt 1 view .LVU1566
1265:bluetooth_rxtx.c **** 			return;
 4469              		.loc 1 1265 7 is_stmt 0 view .LVU1567
 4470 0014 0220     		movs	r0, #2
 4471 0016 FFF7FEFF 		bl	cc2400_get
 4472              	.LVL436:
1265:bluetooth_rxtx.c **** 			return;
 4473              		.loc 1 1265 37 view .LVU1568
 4474 001a 684B     		ldr	r3, .L417+12
 4475 001c B3F84C30 		ldrh	r3, [r3, #76]
 4476 0020 9BB2     		uxth	r3, r3
 4477 0022 013B     		subs	r3, r3, #1
1265:bluetooth_rxtx.c **** 			return;
 4478              		.loc 1 1265 6 view .LVU1569
 4479 0024 9842     		cmp	r0, r3
 4480 0026 3DD1     		bne	.L379
1329:bluetooth_rxtx.c **** 
 4481              		.loc 1 1329 1 view .LVU1570
 4482 0028 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 4483              	.L377:
1271:bluetooth_rxtx.c **** 		do {
 4484              		.loc 1 1271 7 is_stmt 1 view .LVU1571
1271:bluetooth_rxtx.c **** 		do {
 4485              		.loc 1 1271 20 is_stmt 0 view .LVU1572
 4486 002a A27A     		ldrb	r2, [r4, #10]	@ zero_extendqisi2
1271:bluetooth_rxtx.c **** 		do {
ARM GAS  /tmp/ccwF1FQu.s 			page 142


 4487              		.loc 1 1271 10 view .LVU1573
 4488 002c 012A     		cmp	r2, #1
 4489 002e 69D1     		bne	.L380
1273:bluetooth_rxtx.c **** 			if (channel > 2480)
 4490              		.loc 1 1273 12 view .LVU1574
 4491 0030 624A     		ldr	r2, .L417+12
1276:bluetooth_rxtx.c **** 	}
 4492              		.loc 1 1276 27 view .LVU1575
 4493 0032 634B     		ldr	r3, .L417+16
 4494 0034 1046     		mov	r0, r2
 4495 0036 1E78     		ldrb	r6, [r3]	@ zero_extendqisi2
1276:bluetooth_rxtx.c **** 	}
 4496              		.loc 1 1276 32 view .LVU1576
 4497 0038 624B     		ldr	r3, .L417+20
1276:bluetooth_rxtx.c **** 	}
 4498              		.loc 1 1276 60 view .LVU1577
 4499 003a 634D     		ldr	r5, .L417+24
1276:bluetooth_rxtx.c **** 	}
 4500              		.loc 1 1276 32 view .LVU1578
 4501 003c 1F78     		ldrb	r7, [r3]	@ zero_extendqisi2
 4502              	.L383:
1272:bluetooth_rxtx.c **** 			channel += 32;
 4503              		.loc 1 1272 3 is_stmt 1 view .LVU1579
1273:bluetooth_rxtx.c **** 			if (channel > 2480)
 4504              		.loc 1 1273 4 view .LVU1580
1273:bluetooth_rxtx.c **** 			if (channel > 2480)
 4505              		.loc 1 1273 12 is_stmt 0 view .LVU1581
 4506 003e B2F84C30 		ldrh	r3, [r2, #76]
 4507 0042 2033     		adds	r3, r3, #32
 4508 0044 9BB2     		uxth	r3, r3
 4509 0046 A2F84C30 		strh	r3, [r2, #76]	@ movhi
1274:bluetooth_rxtx.c **** 				channel -= 79;
 4510              		.loc 1 1274 4 is_stmt 1 view .LVU1582
1274:bluetooth_rxtx.c **** 				channel -= 79;
 4511              		.loc 1 1274 16 is_stmt 0 view .LVU1583
 4512 004a B2F84C30 		ldrh	r3, [r2, #76]
 4513 004e 9BB2     		uxth	r3, r3
1274:bluetooth_rxtx.c **** 				channel -= 79;
 4514              		.loc 1 1274 7 view .LVU1584
 4515 0050 B3F51B6F 		cmp	r3, #2480
1275:bluetooth_rxtx.c **** 		} while ( used_channels != 0 && afh_enabled && !( afh_map[(channel-2402)/8] & 0x1<<((channel-2402
 4516              		.loc 1 1275 5 is_stmt 1 view .LVU1585
1275:bluetooth_rxtx.c **** 		} while ( used_channels != 0 && afh_enabled && !( afh_map[(channel-2402)/8] & 0x1<<((channel-2402
 4517              		.loc 1 1275 13 is_stmt 0 view .LVU1586
 4518 0054 81BF     		itttt	hi
 4519 0056 B2F84C30 		ldrhhi	r3, [r2, #76]
 4520 005a 4F3B     		subhi	r3, r3, #79
 4521 005c 9BB2     		uxthhi	r3, r3
 4522 005e A2F84C30 		strhhi	r3, [r2, #76]	@ movhi
1276:bluetooth_rxtx.c **** 	}
 4523              		.loc 1 1276 11 is_stmt 1 view .LVU1587
1276:bluetooth_rxtx.c **** 	}
 4524              		.loc 1 1276 3 is_stmt 0 view .LVU1588
 4525 0062 FEB1     		cbz	r6, .L379
1276:bluetooth_rxtx.c **** 	}
 4526              		.loc 1 1276 32 discriminator 1 view .LVU1589
 4527 0064 F7B1     		cbz	r7, .L379
ARM GAS  /tmp/ccwF1FQu.s 			page 143


1276:bluetooth_rxtx.c **** 	}
 4528              		.loc 1 1276 69 discriminator 2 view .LVU1590
 4529 0066 B0F84CC0 		ldrh	ip, [r0, #76]
1276:bluetooth_rxtx.c **** 	}
 4530              		.loc 1 1276 95 discriminator 2 view .LVU1591
 4531 006a B0F84C30 		ldrh	r3, [r0, #76]
1276:bluetooth_rxtx.c **** 	}
 4532              		.loc 1 1276 69 discriminator 2 view .LVU1592
 4533 006e 1FFA8CFC 		uxth	ip, ip
 4534 0072 ACF66211 		subw	r1, ip, #2402
1276:bluetooth_rxtx.c **** 	}
 4535              		.loc 1 1276 75 discriminator 2 view .LVU1593
 4536 0076 0029     		cmp	r1, #0
1276:bluetooth_rxtx.c **** 	}
 4537              		.loc 1 1276 95 discriminator 2 view .LVU1594
 4538 0078 9BB2     		uxth	r3, r3
1276:bluetooth_rxtx.c **** 	}
 4539              		.loc 1 1276 75 discriminator 2 view .LVU1595
 4540 007a B8BF     		it	lt
 4541 007c ACF65B11 		subwlt	r1, ip, #2395
1276:bluetooth_rxtx.c **** 	}
 4542              		.loc 1 1276 95 discriminator 2 view .LVU1596
 4543 0080 A3F66213 		subw	r3, r3, #2402
1276:bluetooth_rxtx.c **** 	}
 4544              		.loc 1 1276 101 discriminator 2 view .LVU1597
 4545 0084 D3F1000C 		rsbs	ip, r3, #0
1276:bluetooth_rxtx.c **** 	}
 4546              		.loc 1 1276 75 discriminator 2 view .LVU1598
 4547 0088 4FEAE101 		asr	r1, r1, #3
1276:bluetooth_rxtx.c **** 	}
 4548              		.loc 1 1276 60 discriminator 2 view .LVU1599
 4549 008c 695C     		ldrb	r1, [r5, r1]	@ zero_extendqisi2
1276:bluetooth_rxtx.c **** 	}
 4550              		.loc 1 1276 101 discriminator 2 view .LVU1600
 4551 008e 0CF0070C 		and	ip, ip, #7
 4552 0092 03F00703 		and	r3, r3, #7
 4553 0096 58BF     		it	pl
 4554 0098 CCF10003 		rsbpl	r3, ip, #0
1276:bluetooth_rxtx.c **** 	}
 4555              		.loc 1 1276 50 discriminator 2 view .LVU1601
 4556 009c 41FA03F3 		asr	r3, r1, r3
1276:bluetooth_rxtx.c **** 	}
 4557              		.loc 1 1276 47 discriminator 2 view .LVU1602
 4558 00a0 DB07     		lsls	r3, r3, #31
 4559 00a2 CCD5     		bpl	.L383
 4560              	.L379:
1302:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 4561              		.loc 1 1302 2 is_stmt 1 view .LVU1603
 4562 00a4 6420     		movs	r0, #100
 4563 00a6 FFF7FEFF 		bl	cc2400_strobe
 4564              	.LVL437:
1303:bluetooth_rxtx.c **** 
 4565              		.loc 1 1303 2 view .LVU1604
 4566              	.L391:
1303:bluetooth_rxtx.c **** 
 4567              		.loc 1 1303 37 discriminator 1 view .LVU1605
1303:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccwF1FQu.s 			page 144


 4568              		.loc 1 1303 8 discriminator 1 view .LVU1606
1303:bluetooth_rxtx.c **** 
 4569              		.loc 1 1303 10 is_stmt 0 discriminator 1 view .LVU1607
 4570 00aa FFF7FEFF 		bl	cc2400_status
 4571              	.LVL438:
1303:bluetooth_rxtx.c **** 
 4572              		.loc 1 1303 8 discriminator 1 view .LVU1608
 4573 00ae 4207     		lsls	r2, r0, #29
 4574 00b0 FBD4     		bmi	.L391
1306:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channel);
 4575              		.loc 1 1306 2 is_stmt 1 view .LVU1609
 4576 00b2 424D     		ldr	r5, .L417+12
1306:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channel);
 4577              		.loc 1 1306 10 is_stmt 0 view .LVU1610
 4578 00b4 637C     		ldrb	r3, [r4, #17]	@ zero_extendqisi2
1307:bluetooth_rxtx.c **** 	else
 4579              		.loc 1 1307 3 view .LVU1611
 4580 00b6 B5F84C10 		ldrh	r1, [r5, #76]
1307:bluetooth_rxtx.c **** 	else
 4581              		.loc 1 1307 3 is_stmt 1 view .LVU1612
1306:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channel);
 4582              		.loc 1 1306 4 is_stmt 0 view .LVU1613
 4583 00ba 022B     		cmp	r3, #2
1309:bluetooth_rxtx.c **** 
 4584              		.loc 1 1309 3 view .LVU1614
 4585 00bc 18BF     		it	ne
 4586 00be 01F1FF31 		addne	r1, r1, #-1
1306:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channel);
 4587              		.loc 1 1306 10 view .LVU1615
 4588 00c2 D8B2     		uxtb	r0, r3
1307:bluetooth_rxtx.c **** 	else
 4589              		.loc 1 1307 3 view .LVU1616
 4590 00c4 0EBF     		itee	eq
 4591 00c6 89B2     		uxtheq	r1, r1
1309:bluetooth_rxtx.c **** 
 4592              		.loc 1 1309 3 is_stmt 1 view .LVU1617
 4593 00c8 0220     		movne	r0, #2
 4594 00ca 89B2     		uxthne	r1, r1
 4595 00cc FFF7FEFF 		bl	cc2400_set
 4596              	.LVL439:
1312:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set(channel);
 4597              		.loc 1 1312 2 view .LVU1618
1312:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set(channel);
 4598              		.loc 1 1312 15 is_stmt 0 view .LVU1619
 4599 00d0 A37A     		ldrb	r3, [r4, #10]	@ zero_extendqisi2
1312:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set(channel);
 4600              		.loc 1 1312 5 view .LVU1620
 4601 00d2 23B1     		cbz	r3, .L394
1313:bluetooth_rxtx.c **** 	}
 4602              		.loc 1 1313 3 is_stmt 1 view .LVU1621
 4603 00d4 B5F84C00 		ldrh	r0, [r5, #76]
 4604 00d8 80B2     		uxth	r0, r0
 4605 00da FFF7FEFF 		bl	cs_threshold_calc_and_set
 4606              	.LVL440:
 4607              	.L394:
1317:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 4608              		.loc 1 1317 2 view .LVU1622
ARM GAS  /tmp/ccwF1FQu.s 			page 145


 4609 00de 6120     		movs	r0, #97
 4610 00e0 FFF7FEFF 		bl	cc2400_strobe
 4611              	.LVL441:
1318:bluetooth_rxtx.c **** 
 4612              		.loc 1 1318 2 view .LVU1623
 4613              	.L395:
1318:bluetooth_rxtx.c **** 
 4614              		.loc 1 1318 38 discriminator 1 view .LVU1624
1318:bluetooth_rxtx.c **** 
 4615              		.loc 1 1318 8 discriminator 1 view .LVU1625
1318:bluetooth_rxtx.c **** 
 4616              		.loc 1 1318 11 is_stmt 0 discriminator 1 view .LVU1626
 4617 00e4 FFF7FEFF 		bl	cc2400_status
 4618              	.LVL442:
1318:bluetooth_rxtx.c **** 
 4619              		.loc 1 1318 8 discriminator 1 view .LVU1627
 4620 00e8 4307     		lsls	r3, r0, #29
 4621 00ea FBD5     		bpl	.L395
1320:bluetooth_rxtx.c **** 
 4622              		.loc 1 1320 2 is_stmt 1 view .LVU1628
1320:bluetooth_rxtx.c **** 
 4623              		.loc 1 1320 14 is_stmt 0 view .LVU1629
 4624 00ec 0123     		movs	r3, #1
 4625 00ee 2374     		strb	r3, [r4, #16]
1322:bluetooth_rxtx.c **** #ifdef TX_ENABLE
 4626              		.loc 1 1322 2 is_stmt 1 view .LVU1630
1322:bluetooth_rxtx.c **** #ifdef TX_ENABLE
 4627              		.loc 1 1322 10 is_stmt 0 view .LVU1631
 4628 00f0 637C     		ldrb	r3, [r4, #17]	@ zero_extendqisi2
1322:bluetooth_rxtx.c **** #ifdef TX_ENABLE
 4629              		.loc 1 1322 4 view .LVU1632
 4630 00f2 022B     		cmp	r3, #2
1324:bluetooth_rxtx.c **** #endif
 4631              		.loc 1 1324 3 is_stmt 1 view .LVU1633
 4632 00f4 08BF     		it	eq
 4633 00f6 6320     		moveq	r0, #99
1327:bluetooth_rxtx.c **** 	}
 4634              		.loc 1 1327 3 view .LVU1634
1329:bluetooth_rxtx.c **** 
 4635              		.loc 1 1329 1 is_stmt 0 view .LVU1635
 4636 00f8 BDE8F840 		pop	{r3, r4, r5, r6, r7, lr}
 4637              		.cfi_remember_state
 4638              		.cfi_restore 14
 4639              		.cfi_restore 7
 4640              		.cfi_restore 6
 4641              		.cfi_restore 5
 4642              		.cfi_restore 4
 4643              		.cfi_restore 3
 4644              		.cfi_def_cfa_offset 0
1327:bluetooth_rxtx.c **** 	}
 4645              		.loc 1 1327 3 view .LVU1636
 4646 00fc 18BF     		it	ne
 4647 00fe 6220     		movne	r0, #98
 4648 0100 FFF7FEBF 		b	cc2400_strobe
 4649              	.LVL443:
 4650              	.L380:
 4651              		.cfi_restore_state
ARM GAS  /tmp/ccwF1FQu.s 			page 146


1282:bluetooth_rxtx.c **** 		do {
 4652              		.loc 1 1282 7 is_stmt 1 view .LVU1637
1282:bluetooth_rxtx.c **** 		do {
 4653              		.loc 1 1282 20 is_stmt 0 view .LVU1638
 4654 0104 A27A     		ldrb	r2, [r4, #10]	@ zero_extendqisi2
1282:bluetooth_rxtx.c **** 		do {
 4655              		.loc 1 1282 10 view .LVU1639
 4656 0106 052A     		cmp	r2, #5
 4657 0108 35D1     		bne	.L385
1284:bluetooth_rxtx.c **** 			if (channel > 2480)
 4658              		.loc 1 1284 12 view .LVU1640
 4659 010a 2C4A     		ldr	r2, .L417+12
1287:bluetooth_rxtx.c **** 	}
 4660              		.loc 1 1287 26 view .LVU1641
 4661 010c 2C4B     		ldr	r3, .L417+16
 4662 010e 1046     		mov	r0, r2
 4663 0110 1E78     		ldrb	r6, [r3]	@ zero_extendqisi2
1287:bluetooth_rxtx.c **** 	}
 4664              		.loc 1 1287 43 view .LVU1642
 4665 0112 2D4D     		ldr	r5, .L417+24
 4666              	.L387:
1283:bluetooth_rxtx.c **** 			channel += 32;
 4667              		.loc 1 1283 3 is_stmt 1 view .LVU1643
1284:bluetooth_rxtx.c **** 			if (channel > 2480)
 4668              		.loc 1 1284 4 view .LVU1644
1284:bluetooth_rxtx.c **** 			if (channel > 2480)
 4669              		.loc 1 1284 12 is_stmt 0 view .LVU1645
 4670 0114 B2F84C30 		ldrh	r3, [r2, #76]
 4671 0118 2033     		adds	r3, r3, #32
 4672 011a 9BB2     		uxth	r3, r3
 4673 011c A2F84C30 		strh	r3, [r2, #76]	@ movhi
1285:bluetooth_rxtx.c **** 				channel -= 79;
 4674              		.loc 1 1285 4 is_stmt 1 view .LVU1646
1285:bluetooth_rxtx.c **** 				channel -= 79;
 4675              		.loc 1 1285 16 is_stmt 0 view .LVU1647
 4676 0120 B2F84C30 		ldrh	r3, [r2, #76]
 4677 0124 9BB2     		uxth	r3, r3
1285:bluetooth_rxtx.c **** 				channel -= 79;
 4678              		.loc 1 1285 7 view .LVU1648
 4679 0126 B3F51B6F 		cmp	r3, #2480
1286:bluetooth_rxtx.c **** 		} while( used_channels != 79 && (afh_map[(channel-2402)/8] & 0x1<<((channel-2402)%8)) );
 4680              		.loc 1 1286 5 is_stmt 1 view .LVU1649
1286:bluetooth_rxtx.c **** 		} while( used_channels != 79 && (afh_map[(channel-2402)/8] & 0x1<<((channel-2402)%8)) );
 4681              		.loc 1 1286 13 is_stmt 0 view .LVU1650
 4682 012a 81BF     		itttt	hi
 4683 012c B2F84C30 		ldrhhi	r3, [r2, #76]
 4684 0130 4F3B     		subhi	r3, r3, #79
 4685 0132 9BB2     		uxthhi	r3, r3
 4686 0134 A2F84C30 		strhhi	r3, [r2, #76]	@ movhi
1287:bluetooth_rxtx.c **** 	}
 4687              		.loc 1 1287 10 is_stmt 1 view .LVU1651
1287:bluetooth_rxtx.c **** 	}
 4688              		.loc 1 1287 3 is_stmt 0 view .LVU1652
 4689 0138 4F2E     		cmp	r6, #79
 4690 013a B3D0     		beq	.L379
1287:bluetooth_rxtx.c **** 	}
 4691              		.loc 1 1287 52 discriminator 1 view .LVU1653
ARM GAS  /tmp/ccwF1FQu.s 			page 147


 4692 013c B0F84C70 		ldrh	r7, [r0, #76]
1287:bluetooth_rxtx.c **** 	}
 4693              		.loc 1 1287 78 discriminator 1 view .LVU1654
 4694 0140 B0F84C30 		ldrh	r3, [r0, #76]
1287:bluetooth_rxtx.c **** 	}
 4695              		.loc 1 1287 52 discriminator 1 view .LVU1655
 4696 0144 BFB2     		uxth	r7, r7
 4697 0146 A7F66211 		subw	r1, r7, #2402
1287:bluetooth_rxtx.c **** 	}
 4698              		.loc 1 1287 58 discriminator 1 view .LVU1656
 4699 014a 0029     		cmp	r1, #0
1287:bluetooth_rxtx.c **** 	}
 4700              		.loc 1 1287 78 discriminator 1 view .LVU1657
 4701 014c 9BB2     		uxth	r3, r3
1287:bluetooth_rxtx.c **** 	}
 4702              		.loc 1 1287 58 discriminator 1 view .LVU1658
 4703 014e B8BF     		it	lt
 4704 0150 A7F65B11 		subwlt	r1, r7, #2395
1287:bluetooth_rxtx.c **** 	}
 4705              		.loc 1 1287 78 discriminator 1 view .LVU1659
 4706 0154 A3F66213 		subw	r3, r3, #2402
1287:bluetooth_rxtx.c **** 	}
 4707              		.loc 1 1287 84 discriminator 1 view .LVU1660
 4708 0158 5F42     		rsbs	r7, r3, #0
1287:bluetooth_rxtx.c **** 	}
 4709              		.loc 1 1287 58 discriminator 1 view .LVU1661
 4710 015a 4FEAE101 		asr	r1, r1, #3
1287:bluetooth_rxtx.c **** 	}
 4711              		.loc 1 1287 43 discriminator 1 view .LVU1662
 4712 015e 695C     		ldrb	r1, [r5, r1]	@ zero_extendqisi2
1287:bluetooth_rxtx.c **** 	}
 4713              		.loc 1 1287 84 discriminator 1 view .LVU1663
 4714 0160 07F00707 		and	r7, r7, #7
 4715 0164 03F00703 		and	r3, r3, #7
 4716 0168 58BF     		it	pl
 4717 016a 7B42     		rsbpl	r3, r7, #0
1287:bluetooth_rxtx.c **** 	}
 4718              		.loc 1 1287 32 discriminator 1 view .LVU1664
 4719 016c 41FA03F3 		asr	r3, r1, r3
 4720 0170 D907     		lsls	r1, r3, #31
 4721 0172 CFD4     		bmi	.L387
 4722 0174 96E7     		b	.L379
 4723              	.L385:
1290:bluetooth_rxtx.c **** 		channel = next_hop(clkn);
 4724              		.loc 1 1290 7 is_stmt 1 view .LVU1665
1290:bluetooth_rxtx.c **** 		channel = next_hop(clkn);
 4725              		.loc 1 1290 20 is_stmt 0 view .LVU1666
 4726 0176 A27A     		ldrb	r2, [r4, #10]	@ zero_extendqisi2
1290:bluetooth_rxtx.c **** 		channel = next_hop(clkn);
 4727              		.loc 1 1290 10 view .LVU1667
 4728 0178 022A     		cmp	r2, #2
 4729 017a 06D1     		bne	.L389
1291:bluetooth_rxtx.c **** 	}
 4730              		.loc 1 1291 3 is_stmt 1 view .LVU1668
1291:bluetooth_rxtx.c **** 	}
 4731              		.loc 1 1291 13 is_stmt 0 view .LVU1669
 4732 017c 1868     		ldr	r0, [r3]
ARM GAS  /tmp/ccwF1FQu.s 			page 148


 4733 017e FFF7FEFF 		bl	next_hop
 4734              	.LVL444:
1291:bluetooth_rxtx.c **** 	}
 4735              		.loc 1 1291 11 view .LVU1670
 4736 0182 0E4B     		ldr	r3, .L417+12
 4737 0184 A3F84C00 		strh	r0, [r3, #76]	@ movhi
 4738 0188 8CE7     		b	.L379
 4739              	.L389:
1294:bluetooth_rxtx.c **** 		channel = btle_next_hop(&le);
 4740              		.loc 1 1294 7 is_stmt 1 view .LVU1671
1294:bluetooth_rxtx.c **** 		channel = btle_next_hop(&le);
 4741              		.loc 1 1294 20 is_stmt 0 view .LVU1672
 4742 018a A37A     		ldrb	r3, [r4, #10]	@ zero_extendqisi2
1294:bluetooth_rxtx.c **** 		channel = btle_next_hop(&le);
 4743              		.loc 1 1294 10 view .LVU1673
 4744 018c 032B     		cmp	r3, #3
 4745 018e 06D1     		bne	.L390
1295:bluetooth_rxtx.c **** 	}
 4746              		.loc 1 1295 3 is_stmt 1 view .LVU1674
1295:bluetooth_rxtx.c **** 	}
 4747              		.loc 1 1295 13 is_stmt 0 view .LVU1675
 4748 0190 0A4D     		ldr	r5, .L417+12
 4749 0192 2846     		mov	r0, r5
 4750 0194 FFF7FEFF 		bl	btle_next_hop
 4751              	.LVL445:
1295:bluetooth_rxtx.c **** 	}
 4752              		.loc 1 1295 11 view .LVU1676
 4753 0198 A5F84C00 		strh	r0, [r5, #76]	@ movhi
 4754 019c 82E7     		b	.L379
 4755              	.L390:
1298:bluetooth_rxtx.c **** 		channel = hop_direct_channel;
 4756              		.loc 1 1298 7 is_stmt 1 view .LVU1677
1298:bluetooth_rxtx.c **** 		channel = hop_direct_channel;
 4757              		.loc 1 1298 20 is_stmt 0 view .LVU1678
 4758 019e A37A     		ldrb	r3, [r4, #10]	@ zero_extendqisi2
1298:bluetooth_rxtx.c **** 		channel = hop_direct_channel;
 4759              		.loc 1 1298 10 view .LVU1679
 4760 01a0 042B     		cmp	r3, #4
1299:bluetooth_rxtx.c **** 	}
 4761              		.loc 1 1299 3 is_stmt 1 view .LVU1680
1299:bluetooth_rxtx.c **** 	}
 4762              		.loc 1 1299 11 is_stmt 0 view .LVU1681
 4763 01a2 01BF     		itttt	eq
 4764 01a4 A389     		ldrheq	r3, [r4, #12]
 4765 01a6 054A     		ldreq	r2, .L417+12
 4766 01a8 9BB2     		uxtheq	r3, r3
 4767 01aa A2F84C30 		strheq	r3, [r2, #76]	@ movhi
 4768 01ae 79E7     		b	.L379
 4769              	.L418:
 4770              		.align	2
 4771              	.L417:
 4772 01b0 00000000 		.word	.LANCHOR1
 4773 01b4 00000000 		.word	last_hop
 4774 01b8 00000000 		.word	clkn
 4775 01bc 00000000 		.word	.LANCHOR0
 4776 01c0 00000000 		.word	used_channels
 4777 01c4 00000000 		.word	afh_enabled
ARM GAS  /tmp/ccwF1FQu.s 			page 149


 4778 01c8 00000000 		.word	afh_map
 4779              		.cfi_endproc
 4780              	.LFE14:
 4782              		.section	.text.bt_stream_rx,"ax",%progbits
 4783              		.align	1
 4784              		.global	bt_stream_rx
 4785              		.syntax unified
 4786              		.thumb
 4787              		.thumb_func
 4788              		.fpu softvfp
 4790              	bt_stream_rx:
 4791              	.LFB15:
1333:bluetooth_rxtx.c **** 	int8_t rssi;
 4792              		.loc 1 1333 1 is_stmt 1 view -0
 4793              		.cfi_startproc
 4794              		@ args = 0, pretend = 0, frame = 0
 4795              		@ frame_needed = 0, uses_anonymous_args = 0
 4796 0000 2DE9F84F 		push	{r3, r4, r5, r6, r7, r8, r9, r10, fp, lr}
 4797              		.cfi_def_cfa_offset 40
 4798              		.cfi_offset 3, -40
 4799              		.cfi_offset 4, -36
 4800              		.cfi_offset 5, -32
 4801              		.cfi_offset 6, -28
 4802              		.cfi_offset 7, -24
 4803              		.cfi_offset 8, -20
 4804              		.cfi_offset 9, -16
 4805              		.cfi_offset 10, -12
 4806              		.cfi_offset 11, -8
 4807              		.cfi_offset 14, -4
1334:bluetooth_rxtx.c **** 	int8_t rssi_at_trigger;
 4808              		.loc 1 1334 2 view .LVU1683
1335:bluetooth_rxtx.c **** 
 4809              		.loc 1 1335 2 view .LVU1684
1337:bluetooth_rxtx.c **** 
 4810              		.loc 1 1337 2 view .LVU1685
 4811 0004 1023     		movs	r3, #16
 4812 0006 4D4E     		ldr	r6, .L450
1348:bluetooth_rxtx.c **** 	{
 4813              		.loc 1 1348 25 is_stmt 0 view .LVU1686
 4814 0008 4D4F     		ldr	r7, .L450+4
1337:bluetooth_rxtx.c **** 
 4815              		.loc 1 1337 2 view .LVU1687
 4816 000a 3360     		str	r3, [r6]
1339:bluetooth_rxtx.c **** 	dio_ssp_init();
 4817              		.loc 1 1339 2 is_stmt 1 view .LVU1688
 4818 000c FFF7FEFF 		bl	usb_queue_init
 4819              	.LVL446:
1340:bluetooth_rxtx.c **** 	dma_init_rx_symbols();
 4820              		.loc 1 1340 2 view .LVU1689
 4821 0010 3C46     		mov	r4, r7
 4822 0012 FFF7FEFF 		bl	dio_ssp_init
 4823              	.LVL447:
1341:bluetooth_rxtx.c **** 	dio_ssp_start();
 4824              		.loc 1 1341 2 view .LVU1690
 4825 0016 FFF7FEFF 		bl	dma_init_rx_symbols
 4826              	.LVL448:
1342:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccwF1FQu.s 			page 150


 4827              		.loc 1 1342 2 view .LVU1691
 4828 001a FFF7FEFF 		bl	dio_ssp_start
 4829              	.LVL449:
1344:bluetooth_rxtx.c **** 
 4830              		.loc 1 1344 2 view .LVU1692
 4831 001e FFF7FEFF 		bl	cc2400_rx
 4832              	.LVL450:
1346:bluetooth_rxtx.c **** 
 4833              		.loc 1 1346 2 view .LVU1693
 4834 0022 FFF7FEFF 		bl	cs_trigger_enable
 4835              	.LVL451:
1348:bluetooth_rxtx.c **** 	{
 4836              		.loc 1 1348 2 view .LVU1694
1385:bluetooth_rxtx.c **** 
 4837              		.loc 1 1385 3 is_stmt 0 view .LVU1695
 4838 0026 DFF834B1 		ldr	fp, .L450+32
 4839              	.L420:
1348:bluetooth_rxtx.c **** 	{
 4840              		.loc 1 1348 8 is_stmt 1 view .LVU1696
1348:bluetooth_rxtx.c **** 	{
 4841              		.loc 1 1348 25 is_stmt 0 view .LVU1697
 4842 002a BB7C     		ldrb	r3, [r7, #18]	@ zero_extendqisi2
1348:bluetooth_rxtx.c **** 	{
 4843              		.loc 1 1348 8 view .LVU1698
 4844 002c 012B     		cmp	r3, #1
 4845 002e 08D0     		beq	.L431
1348:bluetooth_rxtx.c **** 	{
 4846              		.loc 1 1348 62 discriminator 1 view .LVU1699
 4847 0030 BB7C     		ldrb	r3, [r7, #18]	@ zero_extendqisi2
1348:bluetooth_rxtx.c **** 	{
 4848              		.loc 1 1348 44 discriminator 1 view .LVU1700
 4849 0032 082B     		cmp	r3, #8
 4850 0034 05D0     		beq	.L431
1422:bluetooth_rxtx.c **** 	cs_trigger_disable();
 4851              		.loc 1 1422 2 is_stmt 1 view .LVU1701
 4852 0036 FFF7FEFF 		bl	dio_ssp_stop
 4853              	.LVL452:
1423:bluetooth_rxtx.c **** }
 4854              		.loc 1 1423 2 view .LVU1702
1424:bluetooth_rxtx.c **** 
 4855              		.loc 1 1424 1 is_stmt 0 view .LVU1703
 4856 003a BDE8F84F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, lr}
 4857              		.cfi_remember_state
 4858              		.cfi_restore 14
 4859              		.cfi_restore 11
 4860              		.cfi_restore 10
 4861              		.cfi_restore 9
 4862              		.cfi_restore 8
 4863              		.cfi_restore 7
 4864              		.cfi_restore 6
 4865              		.cfi_restore 5
 4866              		.cfi_restore 4
 4867              		.cfi_restore 3
 4868              		.cfi_def_cfa_offset 0
1423:bluetooth_rxtx.c **** }
 4869              		.loc 1 1423 2 view .LVU1704
 4870 003e FFF7FEBF 		b	cs_trigger_disable
ARM GAS  /tmp/ccwF1FQu.s 			page 151


 4871              	.LVL453:
 4872              	.L431:
 4873              		.cfi_restore_state
1351:bluetooth_rxtx.c **** 
 4874              		.loc 1 1351 3 is_stmt 1 view .LVU1705
 4875 0042 1023     		movs	r3, #16
 4876 0044 3360     		str	r3, [r6]
1363:bluetooth_rxtx.c **** 		rssi_at_trigger = INT8_MIN;
 4877              		.loc 1 1363 3 view .LVU1706
 4878 0046 FFF7FEFF 		bl	rssi_reset
 4879              	.LVL454:
1364:bluetooth_rxtx.c **** 		while (!rx_tc) {
 4880              		.loc 1 1364 3 view .LVU1707
1365:bluetooth_rxtx.c **** 			rssi = (int8_t)(cc2400_get(RSSI) >> 8);
 4881              		.loc 1 1365 3 view .LVU1708
1364:bluetooth_rxtx.c **** 		while (!rx_tc) {
 4882              		.loc 1 1364 19 is_stmt 0 view .LVU1709
 4883 004a 6FF07F05 		mvn	r5, #127
1365:bluetooth_rxtx.c **** 			rssi = (int8_t)(cc2400_get(RSSI) >> 8);
 4884              		.loc 1 1365 10 view .LVU1710
 4885 004e DFF81081 		ldr	r8, .L450+36
 4886 0052 DFF81091 		ldr	r9, .L450+40
 4887              	.LVL455:
 4888              	.L421:
1365:bluetooth_rxtx.c **** 			rssi = (int8_t)(cc2400_get(RSSI) >> 8);
 4889              		.loc 1 1365 9 is_stmt 1 view .LVU1711
1365:bluetooth_rxtx.c **** 			rssi = (int8_t)(cc2400_get(RSSI) >> 8);
 4890              		.loc 1 1365 10 is_stmt 0 view .LVU1712
 4891 0056 D8F80030 		ldr	r3, [r8]
 4892 005a DFF80CA1 		ldr	r10, .L450+44
1365:bluetooth_rxtx.c **** 			rssi = (int8_t)(cc2400_get(RSSI) >> 8);
 4893              		.loc 1 1365 9 view .LVU1713
 4894 005e 002B     		cmp	r3, #0
 4895 0060 49D0     		beq	.L425
1385:bluetooth_rxtx.c **** 
 4896              		.loc 1 1385 3 is_stmt 1 view .LVU1714
 4897 0062 1023     		movs	r3, #16
1387:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 4898              		.loc 1 1387 7 is_stmt 0 view .LVU1715
 4899 0064 374D     		ldr	r5, .L450+8
 4900              	.LVL456:
1385:bluetooth_rxtx.c **** 
 4901              		.loc 1 1385 3 view .LVU1716
 4902 0066 CBF80030 		str	r3, [fp]
1387:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 4903              		.loc 1 1387 3 is_stmt 1 view .LVU1717
1387:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 4904              		.loc 1 1387 7 is_stmt 0 view .LVU1718
 4905 006a 2B68     		ldr	r3, [r5]
1387:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 4906              		.loc 1 1387 6 view .LVU1719
 4907 006c 1BB1     		cbz	r3, .L426
1388:bluetooth_rxtx.c **** 		}
 4908              		.loc 1 1388 4 is_stmt 1 view .LVU1720
1388:bluetooth_rxtx.c **** 		}
 4909              		.loc 1 1388 11 is_stmt 0 view .LVU1721
 4910 006e 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
ARM GAS  /tmp/ccwF1FQu.s 			page 152


 4911 0070 43F00203 		orr	r3, r3, #2
 4912 0074 6370     		strb	r3, [r4, #1]
 4913              	.L426:
1392:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
 4914              		.loc 1 1392 3 is_stmt 1 view .LVU1722
1392:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
 4915              		.loc 1 1392 13 is_stmt 0 view .LVU1723
 4916 0076 D8F80030 		ldr	r3, [r8]
1392:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
 4917              		.loc 1 1392 6 view .LVU1724
 4918 007a 012B     		cmp	r3, #1
1393:bluetooth_rxtx.c **** 
 4919              		.loc 1 1393 4 is_stmt 1 view .LVU1725
1393:bluetooth_rxtx.c **** 
 4920              		.loc 1 1393 11 is_stmt 0 view .LVU1726
 4921 007c 82BF     		ittt	hi
 4922 007e 6378     		ldrbhi	r3, [r4, #1]	@ zero_extendqisi2
 4923 0080 43F00103 		orrhi	r3, r3, #1
 4924 0084 6370     		strbhi	r3, [r4, #1]
1395:bluetooth_rxtx.c **** 			status |= DISCARD;
 4925              		.loc 1 1395 3 is_stmt 1 view .LVU1727
1395:bluetooth_rxtx.c **** 			status |= DISCARD;
 4926              		.loc 1 1395 7 is_stmt 0 view .LVU1728
 4927 0086 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
1395:bluetooth_rxtx.c **** 			status |= DISCARD;
 4928              		.loc 1 1395 6 view .LVU1729
 4929 0088 2BB1     		cbz	r3, .L428
1396:bluetooth_rxtx.c **** 			dma_discard = 0;
 4930              		.loc 1 1396 4 is_stmt 1 view .LVU1730
1396:bluetooth_rxtx.c **** 			dma_discard = 0;
 4931              		.loc 1 1396 11 is_stmt 0 view .LVU1731
 4932 008a 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 4933 008c 43F02003 		orr	r3, r3, #32
 4934 0090 6370     		strb	r3, [r4, #1]
1397:bluetooth_rxtx.c **** 		}
 4935              		.loc 1 1397 4 is_stmt 1 view .LVU1732
1397:bluetooth_rxtx.c **** 		}
 4936              		.loc 1 1397 16 is_stmt 0 view .LVU1733
 4937 0092 0023     		movs	r3, #0
 4938 0094 2374     		strb	r3, [r4, #16]
 4939              	.L428:
1400:bluetooth_rxtx.c **** 
 4940              		.loc 1 1400 3 is_stmt 1 view .LVU1734
 4941 0096 2C4B     		ldr	r3, .L450+12
 4942 0098 B3F84C00 		ldrh	r0, [r3, #76]
 4943 009c 80B2     		uxth	r0, r0
 4944 009e FFF7FEFF 		bl	rssi_iir_update
 4945              	.LVL457:
1406:bluetooth_rxtx.c **** 			status |= CS_TRIGGER;
 4946              		.loc 1 1406 3 view .LVU1735
1406:bluetooth_rxtx.c **** 			status |= CS_TRIGGER;
 4947              		.loc 1 1406 18 is_stmt 0 view .LVU1736
 4948 00a2 2A4B     		ldr	r3, .L450+16
1406:bluetooth_rxtx.c **** 			status |= CS_TRIGGER;
 4949              		.loc 1 1406 7 view .LVU1737
 4950 00a4 99F80020 		ldrb	r2, [r9]	@ zero_extendqisi2
1406:bluetooth_rxtx.c **** 			status |= CS_TRIGGER;
ARM GAS  /tmp/ccwF1FQu.s 			page 153


 4951              		.loc 1 1406 18 view .LVU1738
 4952 00a8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4953 00aa 1343     		orrs	r3, r2, r3
 4954 00ac 06D0     		beq	.L429
1407:bluetooth_rxtx.c **** 			cs_trigger = 0;
 4955              		.loc 1 1407 4 is_stmt 1 view .LVU1739
1407:bluetooth_rxtx.c **** 			cs_trigger = 0;
 4956              		.loc 1 1407 11 is_stmt 0 view .LVU1740
 4957 00ae 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 4958 00b0 43F00803 		orr	r3, r3, #8
 4959 00b4 6370     		strb	r3, [r4, #1]
1408:bluetooth_rxtx.c **** 		}
 4960              		.loc 1 1408 4 is_stmt 1 view .LVU1741
1408:bluetooth_rxtx.c **** 		}
 4961              		.loc 1 1408 15 is_stmt 0 view .LVU1742
 4962 00b6 0023     		movs	r3, #0
 4963 00b8 89F80030 		strb	r3, [r9]
 4964              	.L429:
1411:bluetooth_rxtx.c **** 			status |= RSSI_TRIGGER;
 4965              		.loc 1 1411 3 is_stmt 1 view .LVU1743
1411:bluetooth_rxtx.c **** 			status |= RSSI_TRIGGER;
 4966              		.loc 1 1411 16 is_stmt 0 view .LVU1744
 4967 00bc 244B     		ldr	r3, .L450+20
 4968 00be 254A     		ldr	r2, .L450+24
 4969 00c0 93F90030 		ldrsb	r3, [r3]
 4970 00c4 92F90020 		ldrsb	r2, [r2]
 4971 00c8 3533     		adds	r3, r3, #53
1411:bluetooth_rxtx.c **** 			status |= RSSI_TRIGGER;
 4972              		.loc 1 1411 6 view .LVU1745
 4973 00ca 9342     		cmp	r3, r2
1412:bluetooth_rxtx.c **** 		}
 4974              		.loc 1 1412 4 is_stmt 1 view .LVU1746
1412:bluetooth_rxtx.c **** 		}
 4975              		.loc 1 1412 11 is_stmt 0 view .LVU1747
 4976 00cc B8BF     		it	lt
 4977 00ce 6378     		ldrblt	r3, [r4, #1]	@ zero_extendqisi2
1415:bluetooth_rxtx.c **** 
 4978              		.loc 1 1415 3 view .LVU1748
 4979 00d0 4FF00000 		mov	r0, #0
1412:bluetooth_rxtx.c **** 		}
 4980              		.loc 1 1412 11 view .LVU1749
 4981 00d4 BCBF     		itt	lt
 4982 00d6 43F01003 		orrlt	r3, r3, #16
 4983 00da 6370     		strblt	r3, [r4, #1]
1415:bluetooth_rxtx.c **** 
 4984              		.loc 1 1415 3 is_stmt 1 view .LVU1750
 4985 00dc 1E4B     		ldr	r3, .L450+28
 4986 00de 1968     		ldr	r1, [r3]
 4987 00e0 FFF7FEFF 		bl	enqueue
 4988              	.LVL458:
1417:bluetooth_rxtx.c **** 		rx_tc = 0;
 4989              		.loc 1 1417 3 view .LVU1751
 4990 00e4 DAF80000 		ldr	r0, [r10]
 4991 00e8 FFF7FEFF 		bl	handle_usb
 4992              	.LVL459:
1418:bluetooth_rxtx.c **** 		rx_err = 0;
 4993              		.loc 1 1418 3 view .LVU1752
ARM GAS  /tmp/ccwF1FQu.s 			page 154


1418:bluetooth_rxtx.c **** 		rx_err = 0;
 4994              		.loc 1 1418 9 is_stmt 0 view .LVU1753
 4995 00ec 0023     		movs	r3, #0
 4996 00ee C8F80030 		str	r3, [r8]
1419:bluetooth_rxtx.c **** 	}
 4997              		.loc 1 1419 3 is_stmt 1 view .LVU1754
1419:bluetooth_rxtx.c **** 	}
 4998              		.loc 1 1419 10 is_stmt 0 view .LVU1755
 4999 00f2 2B60     		str	r3, [r5]
 5000 00f4 99E7     		b	.L420
 5001              	.LVL460:
 5002              	.L425:
1366:bluetooth_rxtx.c **** 			if (cs_trigger && (rssi_at_trigger == INT8_MIN)) {
 5003              		.loc 1 1366 4 is_stmt 1 view .LVU1756
1366:bluetooth_rxtx.c **** 			if (cs_trigger && (rssi_at_trigger == INT8_MIN)) {
 5004              		.loc 1 1366 20 is_stmt 0 view .LVU1757
 5005 00f6 0620     		movs	r0, #6
 5006 00f8 FFF7FEFF 		bl	cc2400_get
 5007              	.LVL461:
1367:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
 5008              		.loc 1 1367 8 view .LVU1758
 5009 00fc 99F80030 		ldrb	r3, [r9]	@ zero_extendqisi2
1366:bluetooth_rxtx.c **** 			if (cs_trigger && (rssi_at_trigger == INT8_MIN)) {
 5010              		.loc 1 1366 9 view .LVU1759
 5011 0100 40F30720 		sbfx	r0, r0, #8, #8
 5012              	.LVL462:
1367:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
 5013              		.loc 1 1367 4 is_stmt 1 view .LVU1760
1367:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
 5014              		.loc 1 1367 7 is_stmt 0 view .LVU1761
 5015 0104 5BB1     		cbz	r3, .L422
1367:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
 5016              		.loc 1 1367 19 discriminator 1 view .LVU1762
 5017 0106 15F1800F 		cmn	r5, #128
 5018 010a 08D1     		bne	.L422
1368:bluetooth_rxtx.c **** 				rssi_at_trigger = rssi;
 5019              		.loc 1 1368 5 is_stmt 1 view .LVU1763
1368:bluetooth_rxtx.c **** 				rssi_at_trigger = rssi;
 5020              		.loc 1 1368 12 is_stmt 0 view .LVU1764
 5021 010c 104B     		ldr	r3, .L450+20
 5022 010e 93F90050 		ldrsb	r5, [r3]
 5023              	.LVL463:
1368:bluetooth_rxtx.c **** 				rssi_at_trigger = rssi;
 5024              		.loc 1 1368 12 view .LVU1765
 5025 0112 3635     		adds	r5, r5, #54
 5026 0114 A842     		cmp	r0, r5
 5027 0116 B8BF     		it	lt
 5028 0118 2846     		movlt	r0, r5
 5029              	.LVL464:
1368:bluetooth_rxtx.c **** 				rssi_at_trigger = rssi;
 5030              		.loc 1 1368 10 view .LVU1766
 5031 011a 45B2     		sxtb	r5, r0
1369:bluetooth_rxtx.c **** 			}
 5032              		.loc 1 1369 5 is_stmt 1 view .LVU1767
1369:bluetooth_rxtx.c **** 			}
 5033              		.loc 1 1369 21 is_stmt 0 view .LVU1768
 5034 011c 2846     		mov	r0, r5
ARM GAS  /tmp/ccwF1FQu.s 			page 155


 5035              	.L422:
 5036              	.LVL465:
1371:bluetooth_rxtx.c **** 
 5037              		.loc 1 1371 4 is_stmt 1 view .LVU1769
 5038 011e FFF7FEFF 		bl	rssi_add
 5039              	.LVL466:
1373:bluetooth_rxtx.c **** 
 5040              		.loc 1 1373 4 view .LVU1770
 5041 0122 DAF80000 		ldr	r0, [r10]
 5042 0126 FFF7FEFF 		bl	handle_usb
 5043              	.LVL467:
1376:bluetooth_rxtx.c **** 				hop();
 5044              		.loc 1 1376 4 view .LVU1771
1376:bluetooth_rxtx.c **** 				hop();
 5045              		.loc 1 1376 8 is_stmt 0 view .LVU1772
 5046 012a E37A     		ldrb	r3, [r4, #11]	@ zero_extendqisi2
1376:bluetooth_rxtx.c **** 				hop();
 5047              		.loc 1 1376 7 view .LVU1773
 5048 012c 13B1     		cbz	r3, .L423
1377:bluetooth_rxtx.c **** 			} else {
 5049              		.loc 1 1377 5 is_stmt 1 view .LVU1774
 5050 012e FFF7FEFF 		bl	hop
 5051              	.LVL468:
 5052 0132 90E7     		b	.L421
 5053              	.L423:
1379:bluetooth_rxtx.c **** 			}
 5054              		.loc 1 1379 5 view .LVU1775
 5055 0134 4FF48073 		mov	r3, #256
 5056 0138 3360     		str	r3, [r6]
 5057 013a 8CE7     		b	.L421
 5058              	.L451:
 5059              		.align	2
 5060              	.L450:
 5061 013c 3CC00920 		.word	537509948
 5062 0140 00000000 		.word	.LANCHOR1
 5063 0144 00000000 		.word	rx_err
 5064 0148 00000000 		.word	.LANCHOR0
 5065 014c 00000000 		.word	cs_no_squelch
 5066 0150 00000000 		.word	cs_threshold_cur
 5067 0154 00000000 		.word	rssi_max
 5068 0158 00000000 		.word	idle_rxbuf
 5069 015c 38C00920 		.word	537509944
 5070 0160 00000000 		.word	rx_tc
 5071 0164 00000000 		.word	cs_trigger
 5072 0168 00000000 		.word	clkn
 5073              		.cfi_endproc
 5074              	.LFE15:
 5076              		.section	.text.br_transmit,"ax",%progbits
 5077              		.align	1
 5078              		.global	br_transmit
 5079              		.syntax unified
 5080              		.thumb
 5081              		.thumb_func
 5082              		.fpu softvfp
 5084              	br_transmit:
 5085              	.LFB18:
1457:bluetooth_rxtx.c **** 	uint16_t gio_save;
ARM GAS  /tmp/ccwF1FQu.s 			page 156


 5086              		.loc 1 1457 1 view -0
 5087              		.cfi_startproc
 5088              		@ args = 0, pretend = 0, frame = 16
 5089              		@ frame_needed = 0, uses_anonymous_args = 0
 5090 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 5091              		.cfi_def_cfa_offset 28
 5092              		.cfi_offset 4, -28
 5093              		.cfi_offset 5, -24
 5094              		.cfi_offset 6, -20
 5095              		.cfi_offset 7, -16
 5096              		.cfi_offset 8, -12
 5097              		.cfi_offset 9, -8
 5098              		.cfi_offset 14, -4
 5099 0004 85B0     		sub	sp, sp, #20
 5100              		.cfi_def_cfa_offset 48
1458:bluetooth_rxtx.c **** 
 5101              		.loc 1 1458 2 view .LVU1777
1460:bluetooth_rxtx.c **** 
 5102              		.loc 1 1460 2 view .LVU1778
 5103              	.LVL469:
1462:bluetooth_rxtx.c **** 	uint8_t trailer = ((target.syncword >> 63) & 1) == 1 ? 0xaa : 0x55;
 5104              		.loc 1 1462 2 view .LVU1779
1462:bluetooth_rxtx.c **** 	uint8_t trailer = ((target.syncword >> 63) & 1) == 1 ? 0xaa : 0x55;
 5105              		.loc 1 1462 39 is_stmt 0 view .LVU1780
 5106 0006 0024     		movs	r4, #0
1462:bluetooth_rxtx.c **** 	uint8_t trailer = ((target.syncword >> 63) & 1) == 1 ? 0xaa : 0x55;
 5107              		.loc 1 1462 29 view .LVU1781
 5108 0008 954B     		ldr	r3, .L490
1462:bluetooth_rxtx.c **** 	uint8_t trailer = ((target.syncword >> 63) & 1) == 1 ? 0xaa : 0x55;
 5109              		.loc 1 1462 11 view .LVU1782
 5110 000a 45F25557 		movw	r7, #21845
1462:bluetooth_rxtx.c **** 	uint8_t trailer = ((target.syncword >> 63) & 1) == 1 ? 0xaa : 0x55;
 5111              		.loc 1 1462 29 view .LVU1783
 5112 000e D3E90265 		ldrd	r6, r5, [r3, #8]
1462:bluetooth_rxtx.c **** 	uint8_t trailer = ((target.syncword >> 63) & 1) == 1 ? 0xaa : 0x55;
 5113              		.loc 1 1462 39 view .LVU1784
 5114 0012 2346     		mov	r3, r4
 5115 0014 06F00102 		and	r2, r6, #1
1462:bluetooth_rxtx.c **** 	uint8_t trailer = ((target.syncword >> 63) & 1) == 1 ? 0xaa : 0x55;
 5116              		.loc 1 1462 11 view .LVU1785
 5117 0018 1343     		orrs	r3, r2, r3
 5118 001a 4AF6AA23 		movw	r3, #43690
1463:bluetooth_rxtx.c **** 
 5119              		.loc 1 1463 45 view .LVU1786
 5120 001e 4FEAD572 		lsr	r2, r5, #31
1462:bluetooth_rxtx.c **** 	uint8_t trailer = ((target.syncword >> 63) & 1) == 1 ? 0xaa : 0x55;
 5121              		.loc 1 1462 11 view .LVU1787
 5122 0022 08BF     		it	eq
 5123 0024 1F46     		moveq	r7, r3
 5124              	.LVL470:
1463:bluetooth_rxtx.c **** 
 5125              		.loc 1 1463 2 is_stmt 1 view .LVU1788
1463:bluetooth_rxtx.c **** 
 5126              		.loc 1 1463 10 is_stmt 0 view .LVU1789
 5127 0026 002C     		cmp	r4, #0
 5128 0028 08BF     		it	eq
 5129 002a 012A     		cmpeq	r2, #1
ARM GAS  /tmp/ccwF1FQu.s 			page 157


1466:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 8) & 0xFF),
 5130              		.loc 1 1466 3 view .LVU1790
 5131 002c F0B2     		uxtb	r0, r6
1463:bluetooth_rxtx.c **** 
 5132              		.loc 1 1463 10 view .LVU1791
 5133 002e 0CBF     		ite	eq
 5134 0030 4FF0AA08 		moveq	r8, #170
 5135 0034 4FF05508 		movne	r8, #85
 5136              	.LVL471:
1465:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 5137              		.loc 1 1465 2 is_stmt 1 view .LVU1792
1466:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 8) & 0xFF),
 5138              		.loc 1 1466 3 is_stmt 0 view .LVU1793
 5139 0038 FFF7FEFF 		bl	reverse8
 5140              	.LVL472:
1465:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 5141              		.loc 1 1465 10 view .LVU1794
 5142 003c 8DF80000 		strb	r0, [sp]
1467:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 16) & 0xFF),
 5143              		.loc 1 1467 3 view .LVU1795
 5144 0040 C6F30720 		ubfx	r0, r6, #8, #8
 5145 0044 FFF7FEFF 		bl	reverse8
 5146              	.LVL473:
1465:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 5147              		.loc 1 1465 10 view .LVU1796
 5148 0048 8DF80100 		strb	r0, [sp, #1]
1468:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 24) & 0xFF),
 5149              		.loc 1 1468 3 view .LVU1797
 5150 004c C6F30740 		ubfx	r0, r6, #16, #8
 5151 0050 FFF7FEFF 		bl	reverse8
 5152              	.LVL474:
1465:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 5153              		.loc 1 1465 10 view .LVU1798
 5154 0054 8DF80200 		strb	r0, [sp, #2]
1469:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 32) & 0xFF),
 5155              		.loc 1 1469 3 view .LVU1799
 5156 0058 300E     		lsrs	r0, r6, #24
 5157 005a FFF7FEFF 		bl	reverse8
 5158              	.LVL475:
1465:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 5159              		.loc 1 1465 10 view .LVU1800
 5160 005e 8DF80300 		strb	r0, [sp, #3]
1470:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 40) & 0xFF),
 5161              		.loc 1 1470 3 view .LVU1801
 5162 0062 E8B2     		uxtb	r0, r5
 5163 0064 FFF7FEFF 		bl	reverse8
 5164              	.LVL476:
1465:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 5165              		.loc 1 1465 10 view .LVU1802
 5166 0068 8DF80400 		strb	r0, [sp, #4]
1471:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 48) & 0xFF),
 5167              		.loc 1 1471 3 view .LVU1803
 5168 006c C5F30720 		ubfx	r0, r5, #8, #8
 5169 0070 FFF7FEFF 		bl	reverse8
 5170              	.LVL477:
1465:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 5171              		.loc 1 1465 10 view .LVU1804
ARM GAS  /tmp/ccwF1FQu.s 			page 158


 5172 0074 8DF80500 		strb	r0, [sp, #5]
1472:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 56) & 0xFF),
 5173              		.loc 1 1472 3 view .LVU1805
 5174 0078 C5F30740 		ubfx	r0, r5, #16, #8
 5175 007c FFF7FEFF 		bl	reverse8
 5176              	.LVL478:
1465:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 5177              		.loc 1 1465 10 view .LVU1806
 5178 0080 8DF80600 		strb	r0, [sp, #6]
1473:bluetooth_rxtx.c **** 		reverse8(trailer),
 5179              		.loc 1 1473 3 view .LVU1807
 5180 0084 280E     		lsrs	r0, r5, #24
 5181 0086 FFF7FEFF 		bl	reverse8
 5182              	.LVL479:
1465:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 5183              		.loc 1 1465 10 view .LVU1808
 5184 008a 8DF80700 		strb	r0, [sp, #7]
1474:bluetooth_rxtx.c **** 		reverse8(0x77),
 5185              		.loc 1 1474 3 view .LVU1809
 5186 008e 4046     		mov	r0, r8
 5187 0090 FFF7FEFF 		bl	reverse8
 5188              	.LVL480:
1465:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 5189              		.loc 1 1465 10 view .LVU1810
 5190 0094 8DF80800 		strb	r0, [sp, #8]
1475:bluetooth_rxtx.c **** 		reverse8(0x66),
 5191              		.loc 1 1475 3 view .LVU1811
 5192 0098 7720     		movs	r0, #119
 5193 009a FFF7FEFF 		bl	reverse8
 5194              	.LVL481:
1465:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 5195              		.loc 1 1465 10 view .LVU1812
 5196 009e 8DF80900 		strb	r0, [sp, #9]
1476:bluetooth_rxtx.c **** 		reverse8(0x55),
 5197              		.loc 1 1476 3 view .LVU1813
 5198 00a2 6620     		movs	r0, #102
 5199 00a4 FFF7FEFF 		bl	reverse8
 5200              	.LVL482:
1465:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 5201              		.loc 1 1465 10 view .LVU1814
 5202 00a8 8DF80A00 		strb	r0, [sp, #10]
1477:bluetooth_rxtx.c **** 		reverse8(0x44),
 5203              		.loc 1 1477 3 view .LVU1815
 5204 00ac 5520     		movs	r0, #85
 5205 00ae FFF7FEFF 		bl	reverse8
 5206              	.LVL483:
1465:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 5207              		.loc 1 1465 10 view .LVU1816
 5208 00b2 8DF80B00 		strb	r0, [sp, #11]
1478:bluetooth_rxtx.c **** 		reverse8(0x33),
 5209              		.loc 1 1478 3 view .LVU1817
 5210 00b6 4420     		movs	r0, #68
 5211 00b8 FFF7FEFF 		bl	reverse8
 5212              	.LVL484:
1465:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 5213              		.loc 1 1465 10 view .LVU1818
 5214 00bc 8DF80C00 		strb	r0, [sp, #12]
ARM GAS  /tmp/ccwF1FQu.s 			page 159


1479:bluetooth_rxtx.c **** 		reverse8(0x22),
 5215              		.loc 1 1479 3 view .LVU1819
 5216 00c0 3320     		movs	r0, #51
 5217 00c2 FFF7FEFF 		bl	reverse8
 5218              	.LVL485:
1465:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 5219              		.loc 1 1465 10 view .LVU1820
 5220 00c6 8DF80D00 		strb	r0, [sp, #13]
1480:bluetooth_rxtx.c **** 		reverse8(0x11)
 5221              		.loc 1 1480 3 view .LVU1821
 5222 00ca 2220     		movs	r0, #34
 5223 00cc FFF7FEFF 		bl	reverse8
 5224              	.LVL486:
1465:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 5225              		.loc 1 1465 10 view .LVU1822
 5226 00d0 8DF80E00 		strb	r0, [sp, #14]
1481:bluetooth_rxtx.c **** 	};
 5227              		.loc 1 1481 3 view .LVU1823
 5228 00d4 1120     		movs	r0, #17
 5229 00d6 FFF7FEFF 		bl	reverse8
 5230              	.LVL487:
 5231              	.LBB45:
 5232              	.LBB46:
 5233              	.LBB47:
1442:bluetooth_rxtx.c **** 	{
 5234              		.loc 1 1442 13 view .LVU1824
 5235 00da 2346     		mov	r3, r4
 5236              	.LBE47:
 5237              	.LBE46:
 5238              	.LBE45:
1465:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 5239              		.loc 1 1465 10 view .LVU1825
 5240 00dc 8DF80F00 		strb	r0, [sp, #15]
1484:bluetooth_rxtx.c **** 
 5241              		.loc 1 1484 2 is_stmt 1 view .LVU1826
 5242              	.LVL488:
 5243              	.LBB50:
 5244              	.LBI45:
1438:bluetooth_rxtx.c **** {
 5245              		.loc 1 1438 17 view .LVU1827
 5246              	.LBB49:
1440:bluetooth_rxtx.c **** 
 5247              		.loc 1 1440 2 view .LVU1828
1442:bluetooth_rxtx.c **** 	{
 5248              		.loc 1 1442 2 view .LVU1829
 5249              	.LBB48:
1442:bluetooth_rxtx.c **** 	{
 5250              		.loc 1 1442 6 view .LVU1830
1442:bluetooth_rxtx.c **** 	{
 5251              		.loc 1 1442 18 view .LVU1831
 5252              	.L455:
1444:bluetooth_rxtx.c **** 	}
 5253              		.loc 1 1444 3 view .LVU1832
1444:bluetooth_rxtx.c **** 	}
 5254              		.loc 1 1444 22 is_stmt 0 view .LVU1833
 5255 00e0 47FA03F2 		asr	r2, r7, r3
1444:bluetooth_rxtx.c **** 	}
ARM GAS  /tmp/ccwF1FQu.s 			page 160


 5256              		.loc 1 1444 36 view .LVU1834
 5257 00e4 C3F10F01 		rsb	r1, r3, #15
1444:bluetooth_rxtx.c **** 	}
 5258              		.loc 1 1444 28 view .LVU1835
 5259 00e8 02F00102 		and	r2, r2, #1
1444:bluetooth_rxtx.c **** 	}
 5260              		.loc 1 1444 36 view .LVU1836
 5261 00ec 8A40     		lsls	r2, r2, r1
1442:bluetooth_rxtx.c **** 	{
 5262              		.loc 1 1442 25 view .LVU1837
 5263 00ee 0133     		adds	r3, r3, #1
 5264              	.LVL489:
1444:bluetooth_rxtx.c **** 	}
 5265              		.loc 1 1444 12 view .LVU1838
 5266 00f0 1443     		orrs	r4, r4, r2
 5267              	.LVL490:
1442:bluetooth_rxtx.c **** 	{
 5268              		.loc 1 1442 2 view .LVU1839
 5269 00f2 102B     		cmp	r3, #16
1444:bluetooth_rxtx.c **** 	}
 5270              		.loc 1 1444 12 view .LVU1840
 5271 00f4 A4B2     		uxth	r4, r4
 5272              	.LVL491:
1442:bluetooth_rxtx.c **** 	{
 5273              		.loc 1 1442 24 is_stmt 1 view .LVU1841
1442:bluetooth_rxtx.c **** 	{
 5274              		.loc 1 1442 18 view .LVU1842
1442:bluetooth_rxtx.c **** 	{
 5275              		.loc 1 1442 2 is_stmt 0 view .LVU1843
 5276 00f6 F3D1     		bne	.L455
 5277              	.LBE48:
1447:bluetooth_rxtx.c **** }
 5278              		.loc 1 1447 2 is_stmt 1 view .LVU1844
 5279              	.LVL492:
1447:bluetooth_rxtx.c **** }
 5280              		.loc 1 1447 2 is_stmt 0 view .LVU1845
 5281              	.LBE49:
 5282              	.LBE50:
 5283              	.LBB51:
 5284              	.LBI51:
1071:bluetooth_rxtx.c **** {
 5285              		.loc 1 1071 13 is_stmt 1 view .LVU1846
 5286              	.LBB52:
1074:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
 5287              		.loc 1 1074 2 view .LVU1847
 5288 00f8 47F6FF71 		movw	r1, #32767
 5289 00fc 0D20     		movs	r0, #13
 5290 00fe FFF7FEFF 		bl	cc2400_set
 5291              	.LVL493:
1075:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b);    // no PRNG
 5292              		.loc 1 1075 2 view .LVU1848
 5293 0102 42F62231 		movw	r1, #11042
 5294 0106 1220     		movs	r0, #18
 5295 0108 FFF7FEFF 		bl	cc2400_set
 5296              	.LVL494:
1076:bluetooth_rxtx.c **** 
 5297              		.loc 1 1076 2 view .LVU1849
ARM GAS  /tmp/ccwF1FQu.s 			page 161


 5298 010c 41F24B31 		movw	r1, #4939
 5299 0110 1420     		movs	r0, #20
 5300 0112 FFF7FEFF 		bl	cc2400_set
 5301              	.LVL495:
1078:bluetooth_rxtx.c **** 	// 0 00 01 1 000 00 0 00 0 1
 5302              		.loc 1 1078 2 view .LVU1850
 5303 0116 40F60141 		movw	r1, #3073
 5304 011a 2020     		movs	r0, #32
 5305 011c FFF7FEFF 		bl	cc2400_set
 5306              	.LVL496:
1086:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (sync >> 16) & 0xffff);
 5307              		.loc 1 1086 2 view .LVU1851
 5308 0120 2146     		mov	r1, r4
 5309 0122 2C20     		movs	r0, #44
 5310 0124 FFF7FEFF 		bl	cc2400_set
 5311              	.LVL497:
1087:bluetooth_rxtx.c **** 
 5312              		.loc 1 1087 2 view .LVU1852
 5313 0128 0021     		movs	r1, #0
 5314 012a 2D20     		movs	r0, #45
 5315 012c FFF7FEFF 		bl	cc2400_set
 5316              	.LVL498:
1089:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
 5317              		.loc 1 1089 2 view .LVU1853
 5318 0130 4C4B     		ldr	r3, .L490+4
 5319 0132 0220     		movs	r0, #2
 5320 0134 B3F84C10 		ldrh	r1, [r3, #76]
1092:bluetooth_rxtx.c **** 		cc2400_set(MDMCTRL, 0x0029);    // 160 kHz frequency deviation
 5321              		.loc 1 1092 17 is_stmt 0 view .LVU1854
 5322 0138 4B4C     		ldr	r4, .L490+8
 5323              	.LVL499:
1089:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
 5324              		.loc 1 1089 2 view .LVU1855
 5325 013a 89B2     		uxth	r1, r1
 5326 013c FFF7FEFF 		bl	cc2400_set
 5327              	.LVL500:
1090:bluetooth_rxtx.c **** 
 5328              		.loc 1 1090 2 is_stmt 1 view .LVU1856
 5329 0140 0B21     		movs	r1, #11
 5330 0142 0520     		movs	r0, #5
 5331 0144 FFF7FEFF 		bl	cc2400_set
 5332              	.LVL501:
1092:bluetooth_rxtx.c **** 		cc2400_set(MDMCTRL, 0x0029);    // 160 kHz frequency deviation
 5333              		.loc 1 1092 2 view .LVU1857
1092:bluetooth_rxtx.c **** 		cc2400_set(MDMCTRL, 0x0029);    // 160 kHz frequency deviation
 5334              		.loc 1 1092 17 is_stmt 0 view .LVU1858
 5335 0148 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
1092:bluetooth_rxtx.c **** 		cc2400_set(MDMCTRL, 0x0029);    // 160 kHz frequency deviation
 5336              		.loc 1 1092 5 view .LVU1859
 5337 014a BBBB     		cbnz	r3, .L456
1093:bluetooth_rxtx.c **** 	} else if (modulation == MOD_BT_LOW_ENERGY) {
 5338              		.loc 1 1093 3 is_stmt 1 view .LVU1860
 5339 014c 2921     		movs	r1, #41
 5340              	.L489:
1095:bluetooth_rxtx.c **** 	} else {
 5341              		.loc 1 1095 3 is_stmt 0 view .LVU1861
 5342 014e 0320     		movs	r0, #3
ARM GAS  /tmp/ccwF1FQu.s 			page 162


 5343 0150 FFF7FEFF 		bl	cc2400_set
 5344              	.LVL502:
1101:bluetooth_rxtx.c **** 
 5345              		.loc 1 1101 2 is_stmt 1 view .LVU1862
 5346 0154 FFF7FEFF 		bl	clkn_start
 5347              	.LVL503:
1103:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5348              		.loc 1 1103 2 view .LVU1863
 5349              	.L459:
1103:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5350              		.loc 1 1103 45 view .LVU1864
1103:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5351              		.loc 1 1103 8 view .LVU1865
1103:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5352              		.loc 1 1103 11 is_stmt 0 view .LVU1866
 5353 0158 FFF7FEFF 		bl	cc2400_status
 5354              	.LVL504:
1103:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5355              		.loc 1 1103 8 view .LVU1867
 5356 015c 4506     		lsls	r5, r0, #25
 5357 015e FBD5     		bpl	.L459
1104:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 5358              		.loc 1 1104 2 is_stmt 1 view .LVU1868
 5359 0160 6120     		movs	r0, #97
 5360 0162 FFF7FEFF 		bl	cc2400_strobe
 5361              	.LVL505:
1105:bluetooth_rxtx.c **** 
 5362              		.loc 1 1105 2 view .LVU1869
 5363              	.L460:
1105:bluetooth_rxtx.c **** 
 5364              		.loc 1 1105 38 view .LVU1870
1105:bluetooth_rxtx.c **** 
 5365              		.loc 1 1105 8 view .LVU1871
1105:bluetooth_rxtx.c **** 
 5366              		.loc 1 1105 11 is_stmt 0 view .LVU1872
 5367 0166 FFF7FEFF 		bl	cc2400_status
 5368              	.LVL506:
1105:bluetooth_rxtx.c **** 
 5369              		.loc 1 1105 8 view .LVU1873
 5370 016a 4007     		lsls	r0, r0, #29
 5371 016c FBD5     		bpl	.L460
1108:bluetooth_rxtx.c **** #endif
 5372              		.loc 1 1108 2 is_stmt 1 view .LVU1874
 5373 016e 8022     		movs	r2, #128
 5374 0170 3E4B     		ldr	r3, .L490+12
 5375 0172 1A60     		str	r2, [r3]
1111:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 5376              		.loc 1 1111 2 view .LVU1875
 5377              	.L461:
1111:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 5378              		.loc 1 1111 61 view .LVU1876
1111:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 5379              		.loc 1 1111 8 view .LVU1877
1111:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 5380              		.loc 1 1111 10 is_stmt 0 view .LVU1878
 5381 0174 0E20     		movs	r0, #14
 5382 0176 FFF7FEFF 		bl	cc2400_get
ARM GAS  /tmp/ccwF1FQu.s 			page 163


 5383              	.LVL507:
1111:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 5384              		.loc 1 1111 8 view .LVU1879
 5385 017a 00F01F00 		and	r0, r0, #31
 5386 017e 0F28     		cmp	r0, #15
 5387 0180 F8D1     		bne	.L461
1112:bluetooth_rxtx.c **** 
 5388              		.loc 1 1112 2 is_stmt 1 view .LVU1880
 5389 0182 6320     		movs	r0, #99
 5390 0184 FFF7FEFF 		bl	cc2400_strobe
 5391              	.LVL508:
 5392              	.L458:
1112:bluetooth_rxtx.c **** 
 5393              		.loc 1 1112 2 is_stmt 0 view .LVU1881
 5394              	.LBE52:
 5395              	.LBE51:
1486:bluetooth_rxtx.c **** 
 5396              		.loc 1 1486 2 is_stmt 1 view .LVU1882
 5397 0188 1421     		movs	r1, #20
 5398 018a 2320     		movs	r0, #35
 5399 018c FFF7FEFF 		bl	cc2400_set
 5400              	.LVL509:
1489:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, (GIO_FIFO_FULL << 9) | (gio_save & 0x1ff));
 5401              		.loc 1 1489 2 view .LVU1883
1489:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, (GIO_FIFO_FULL << 9) | (gio_save & 0x1ff));
 5402              		.loc 1 1489 13 is_stmt 0 view .LVU1884
 5403 0190 0820     		movs	r0, #8
 5404 0192 FFF7FEFF 		bl	cc2400_get
 5405              	.LVL510:
1490:bluetooth_rxtx.c **** 
 5406              		.loc 1 1490 53 view .LVU1885
 5407 0196 C0F30801 		ubfx	r1, r0, #0, #9
1489:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, (GIO_FIFO_FULL << 9) | (gio_save & 0x1ff));
 5408              		.loc 1 1489 13 view .LVU1886
 5409 019a 0546     		mov	r5, r0
 5410              	.LVL511:
1490:bluetooth_rxtx.c **** 
 5411              		.loc 1 1490 2 is_stmt 1 view .LVU1887
 5412 019c 41F49C41 		orr	r1, r1, #19968
 5413 01a0 0820     		movs	r0, #8
 5414              	.LVL512:
1490:bluetooth_rxtx.c **** 
 5415              		.loc 1 1490 2 is_stmt 0 view .LVU1888
 5416 01a2 FFF7FEFF 		bl	cc2400_set
 5417              	.LVL513:
1492:bluetooth_rxtx.c **** 	{
 5418              		.loc 1 1492 2 is_stmt 1 view .LVU1889
1460:bluetooth_rxtx.c **** 
 5419              		.loc 1 1460 11 is_stmt 0 view .LVU1890
 5420 01a6 0026     		movs	r6, #0
1495:bluetooth_rxtx.c **** 
 5421              		.loc 1 1495 16 view .LVU1891
 5422 01a8 314F     		ldr	r7, .L490+16
 5423              	.LVL514:
1505:bluetooth_rxtx.c **** 
 5424              		.loc 1 1505 3 view .LVU1892
 5425 01aa DFF8D080 		ldr	r8, .L490+28
ARM GAS  /tmp/ccwF1FQu.s 			page 164


 5426              	.LVL515:
 5427              	.L462:
1492:bluetooth_rxtx.c **** 	{
 5428              		.loc 1 1492 8 is_stmt 1 view .LVU1893
1492:bluetooth_rxtx.c **** 	{
 5429              		.loc 1 1492 25 is_stmt 0 view .LVU1894
 5430 01ae A37C     		ldrb	r3, [r4, #18]	@ zero_extendqisi2
1492:bluetooth_rxtx.c **** 	{
 5431              		.loc 1 1492 8 view .LVU1895
 5432 01b0 022B     		cmp	r3, #2
 5433 01b2 4AD1     		bne	.L470
1495:bluetooth_rxtx.c **** 
 5434              		.loc 1 1495 46 view .LVU1896
 5435 01b4 DFF8C890 		ldr	r9, .L490+32
1495:bluetooth_rxtx.c **** 
 5436              		.loc 1 1495 37 view .LVU1897
 5437 01b8 7608     		lsrs	r6, r6, #1
 5438              	.LVL516:
1495:bluetooth_rxtx.c **** 
 5439              		.loc 1 1495 37 view .LVU1898
 5440 01ba 08E0     		b	.L471
 5441              	.LVL517:
 5442              	.L456:
 5443              	.LBB54:
 5444              	.LBB53:
1094:bluetooth_rxtx.c **** 		cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
 5445              		.loc 1 1094 9 is_stmt 1 view .LVU1899
1094:bluetooth_rxtx.c **** 		cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
 5446              		.loc 1 1094 24 is_stmt 0 view .LVU1900
 5447 01bc 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
1094:bluetooth_rxtx.c **** 		cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
 5448              		.loc 1 1094 12 view .LVU1901
 5449 01be 012B     		cmp	r3, #1
 5450 01c0 E2D1     		bne	.L458
1095:bluetooth_rxtx.c **** 	} else {
 5451              		.loc 1 1095 3 is_stmt 1 view .LVU1902
 5452 01c2 4021     		movs	r1, #64
 5453 01c4 C3E7     		b	.L489
 5454              	.LVL518:
 5455              	.L464:
1095:bluetooth_rxtx.c **** 	} else {
 5456              		.loc 1 1095 3 is_stmt 0 view .LVU1903
 5457              	.LBE53:
 5458              	.LBE54:
1498:bluetooth_rxtx.c **** 				hop();
 5459              		.loc 1 1498 4 is_stmt 1 view .LVU1904
1498:bluetooth_rxtx.c **** 				hop();
 5460              		.loc 1 1498 8 is_stmt 0 view .LVU1905
 5461 01c6 E27A     		ldrb	r2, [r4, #11]	@ zero_extendqisi2
1498:bluetooth_rxtx.c **** 				hop();
 5462              		.loc 1 1498 7 view .LVU1906
 5463 01c8 1AB1     		cbz	r2, .L463
1499:bluetooth_rxtx.c **** 			}
 5464              		.loc 1 1499 5 is_stmt 1 view .LVU1907
 5465 01ca FFF7FEFF 		bl	hop
 5466              	.LVL519:
 5467              	.L471:
ARM GAS  /tmp/ccwF1FQu.s 			page 165


1495:bluetooth_rxtx.c **** 
 5468              		.loc 1 1495 43 is_stmt 0 view .LVU1908
 5469 01ce 40F6C903 		movw	r3, #2249
 5470              	.L463:
1495:bluetooth_rxtx.c **** 
 5471              		.loc 1 1495 9 is_stmt 1 view .LVU1909
1495:bluetooth_rxtx.c **** 
 5472              		.loc 1 1495 16 is_stmt 0 view .LVU1910
 5473 01d2 3A68     		ldr	r2, [r7]
1495:bluetooth_rxtx.c **** 
 5474              		.loc 1 1495 9 view .LVU1911
 5475 01d4 B6EB520F 		cmp	r6, r2, lsr #1
 5476 01d8 F5D0     		beq	.L464
1495:bluetooth_rxtx.c **** 
 5477              		.loc 1 1495 46 discriminator 1 view .LVU1912
 5478 01da D9F80020 		ldr	r2, [r9]
1495:bluetooth_rxtx.c **** 
 5479              		.loc 1 1495 43 discriminator 1 view .LVU1913
 5480 01de 9A42     		cmp	r2, r3
 5481 01e0 F1D9     		bls	.L464
1503:bluetooth_rxtx.c **** 
 5482              		.loc 1 1503 3 is_stmt 1 view .LVU1914
1505:bluetooth_rxtx.c **** 
 5483              		.loc 1 1505 3 is_stmt 0 view .LVU1915
 5484 01e2 4FF48073 		mov	r3, #256
1503:bluetooth_rxtx.c **** 
 5485              		.loc 1 1503 14 view .LVU1916
 5486 01e6 3E68     		ldr	r6, [r7]
 5487              	.LVL520:
1505:bluetooth_rxtx.c **** 
 5488              		.loc 1 1505 3 is_stmt 1 view .LVU1917
1507:bluetooth_rxtx.c **** 
 5489              		.loc 1 1507 3 is_stmt 0 view .LVU1918
 5490 01e8 6946     		mov	r1, sp
 5491 01ea 1020     		movs	r0, #16
1505:bluetooth_rxtx.c **** 
 5492              		.loc 1 1505 3 view .LVU1919
 5493 01ec C8F80030 		str	r3, [r8]
1507:bluetooth_rxtx.c **** 
 5494              		.loc 1 1507 3 is_stmt 1 view .LVU1920
 5495 01f0 FFF7FEFF 		bl	cc2400_fifo_write
 5496              	.LVL521:
1509:bluetooth_rxtx.c **** 		TXLED_CLR;
 5497              		.loc 1 1509 3 view .LVU1921
 5498              	.L465:
1509:bluetooth_rxtx.c **** 		TXLED_CLR;
 5499              		.loc 1 1509 62 discriminator 1 view .LVU1922
1509:bluetooth_rxtx.c **** 		TXLED_CLR;
 5500              		.loc 1 1509 9 discriminator 1 view .LVU1923
1509:bluetooth_rxtx.c **** 		TXLED_CLR;
 5501              		.loc 1 1509 11 is_stmt 0 discriminator 1 view .LVU1924
 5502 01f4 0E20     		movs	r0, #14
 5503 01f6 FFF7FEFF 		bl	cc2400_get
 5504              	.LVL522:
1509:bluetooth_rxtx.c **** 		TXLED_CLR;
 5505              		.loc 1 1509 9 discriminator 1 view .LVU1925
 5506 01fa 00F01F00 		and	r0, r0, #31
ARM GAS  /tmp/ccwF1FQu.s 			page 166


 5507 01fe 0F28     		cmp	r0, #15
 5508 0200 F8D1     		bne	.L465
1510:bluetooth_rxtx.c **** 
 5509              		.loc 1 1510 3 is_stmt 1 view .LVU1926
 5510 0202 4FF48072 		mov	r2, #256
 5511 0206 1B4B     		ldr	r3, .L490+20
1512:bluetooth_rxtx.c **** 		while ((cc2400_status() & FS_LOCK));
 5512              		.loc 1 1512 3 is_stmt 0 view .LVU1927
 5513 0208 6420     		movs	r0, #100
1510:bluetooth_rxtx.c **** 
 5514              		.loc 1 1510 3 view .LVU1928
 5515 020a 1A60     		str	r2, [r3]
1512:bluetooth_rxtx.c **** 		while ((cc2400_status() & FS_LOCK));
 5516              		.loc 1 1512 3 is_stmt 1 view .LVU1929
 5517 020c FFF7FEFF 		bl	cc2400_strobe
 5518              	.LVL523:
1513:bluetooth_rxtx.c **** 
 5519              		.loc 1 1513 3 view .LVU1930
 5520              	.L466:
1513:bluetooth_rxtx.c **** 
 5521              		.loc 1 1513 38 discriminator 1 view .LVU1931
1513:bluetooth_rxtx.c **** 
 5522              		.loc 1 1513 9 discriminator 1 view .LVU1932
1513:bluetooth_rxtx.c **** 
 5523              		.loc 1 1513 11 is_stmt 0 discriminator 1 view .LVU1933
 5524 0210 FFF7FEFF 		bl	cc2400_status
 5525              	.LVL524:
1513:bluetooth_rxtx.c **** 
 5526              		.loc 1 1513 9 discriminator 1 view .LVU1934
 5527 0214 4107     		lsls	r1, r0, #29
 5528 0216 FBD4     		bmi	.L466
 5529              	.L467:
1515:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
 5530              		.loc 1 1515 46 is_stmt 1 discriminator 1 view .LVU1935
1515:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
 5531              		.loc 1 1515 9 discriminator 1 view .LVU1936
1515:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
 5532              		.loc 1 1515 12 is_stmt 0 discriminator 1 view .LVU1937
 5533 0218 FFF7FEFF 		bl	cc2400_status
 5534              	.LVL525:
1515:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
 5535              		.loc 1 1515 9 discriminator 1 view .LVU1938
 5536 021c 4206     		lsls	r2, r0, #25
 5537 021e FBD5     		bpl	.L467
1516:bluetooth_rxtx.c **** 		while (!(cc2400_status() & FS_LOCK));
 5538              		.loc 1 1516 3 is_stmt 1 view .LVU1939
 5539 0220 6120     		movs	r0, #97
 5540 0222 FFF7FEFF 		bl	cc2400_strobe
 5541              	.LVL526:
1517:bluetooth_rxtx.c **** 
 5542              		.loc 1 1517 3 view .LVU1940
 5543              	.L468:
1517:bluetooth_rxtx.c **** 
 5544              		.loc 1 1517 39 discriminator 1 view .LVU1941
1517:bluetooth_rxtx.c **** 
 5545              		.loc 1 1517 9 discriminator 1 view .LVU1942
1517:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccwF1FQu.s 			page 167


 5546              		.loc 1 1517 12 is_stmt 0 discriminator 1 view .LVU1943
 5547 0226 FFF7FEFF 		bl	cc2400_status
 5548              	.LVL527:
1517:bluetooth_rxtx.c **** 
 5549              		.loc 1 1517 9 discriminator 1 view .LVU1944
 5550 022a 4307     		lsls	r3, r0, #29
 5551 022c FBD5     		bpl	.L468
 5552              	.L469:
1519:bluetooth_rxtx.c **** 		cc2400_strobe(STX);
 5553              		.loc 1 1519 62 is_stmt 1 discriminator 1 view .LVU1945
1519:bluetooth_rxtx.c **** 		cc2400_strobe(STX);
 5554              		.loc 1 1519 9 discriminator 1 view .LVU1946
1519:bluetooth_rxtx.c **** 		cc2400_strobe(STX);
 5555              		.loc 1 1519 11 is_stmt 0 discriminator 1 view .LVU1947
 5556 022e 0E20     		movs	r0, #14
 5557 0230 FFF7FEFF 		bl	cc2400_get
 5558              	.LVL528:
1519:bluetooth_rxtx.c **** 		cc2400_strobe(STX);
 5559              		.loc 1 1519 9 discriminator 1 view .LVU1948
 5560 0234 00F01F00 		and	r0, r0, #31
 5561 0238 0F28     		cmp	r0, #15
 5562 023a F8D1     		bne	.L469
1520:bluetooth_rxtx.c **** 
 5563              		.loc 1 1520 3 is_stmt 1 view .LVU1949
 5564 023c 6320     		movs	r0, #99
 5565 023e FFF7FEFF 		bl	cc2400_strobe
 5566              	.LVL529:
1522:bluetooth_rxtx.c **** 	}
 5567              		.loc 1 1522 3 view .LVU1950
 5568 0242 3868     		ldr	r0, [r7]
 5569 0244 FFF7FEFF 		bl	handle_usb
 5570              	.LVL530:
 5571 0248 B1E7     		b	.L462
 5572              	.L470:
1526:bluetooth_rxtx.c **** #endif
 5573              		.loc 1 1526 2 view .LVU1951
 5574 024a 8022     		movs	r2, #128
 5575 024c 0A4B     		ldr	r3, .L490+24
1530:bluetooth_rxtx.c **** }
 5576              		.loc 1 1530 2 is_stmt 0 view .LVU1952
 5577 024e 2946     		mov	r1, r5
 5578 0250 0820     		movs	r0, #8
1526:bluetooth_rxtx.c **** #endif
 5579              		.loc 1 1526 2 view .LVU1953
 5580 0252 1A60     		str	r2, [r3]
1530:bluetooth_rxtx.c **** }
 5581              		.loc 1 1530 2 is_stmt 1 view .LVU1954
 5582 0254 FFF7FEFF 		bl	cc2400_set
 5583              	.LVL531:
1531:bluetooth_rxtx.c **** #endif
 5584              		.loc 1 1531 1 is_stmt 0 view .LVU1955
 5585 0258 05B0     		add	sp, sp, #20
 5586              		.cfi_def_cfa_offset 28
 5587              		@ sp needed
 5588 025a BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 5589              	.LVL532:
 5590              	.L491:
ARM GAS  /tmp/ccwF1FQu.s 			page 168


1531:bluetooth_rxtx.c **** #endif
 5591              		.loc 1 1531 1 view .LVU1956
 5592 025e 00BF     		.align	2
 5593              	.L490:
 5594 0260 00000000 		.word	target
 5595 0264 00000000 		.word	.LANCHOR0
 5596 0268 00000000 		.word	.LANCHOR1
 5597 026c 58C00920 		.word	537509976
 5598 0270 00000000 		.word	clkn
 5599 0274 3CC00920 		.word	537509948
 5600 0278 5CC00920 		.word	537509980
 5601 027c 38C00920 		.word	537509944
 5602 0280 08400040 		.word	1073758216
 5603              		.cfi_endproc
 5604              	.LFE18:
 5606              		.section	.text.reset_le,"ax",%progbits
 5607              		.align	1
 5608              		.global	reset_le
 5609              		.syntax unified
 5610              		.thumb
 5611              		.thumb_func
 5612              		.fpu softvfp
 5614              	reset_le:
 5615              	.LFB20:
1545:bluetooth_rxtx.c **** 	le_set_access_address(0x8e89bed6);     // advertising channel access address
 5616              		.loc 1 1545 17 is_stmt 1 view -0
 5617              		.cfi_startproc
 5618              		@ args = 0, pretend = 0, frame = 0
 5619              		@ frame_needed = 0, uses_anonymous_args = 0
 5620 0000 08B5     		push	{r3, lr}
 5621              		.cfi_def_cfa_offset 8
 5622              		.cfi_offset 3, -8
 5623              		.cfi_offset 14, -4
1546:bluetooth_rxtx.c **** 	le.crc_init  = 0x555555;               // advertising channel CRCInit
 5624              		.loc 1 1546 2 view .LVU1958
 5625 0002 0E48     		ldr	r0, .L493
 5626 0004 FFF7FEFF 		bl	le_set_access_address
 5627              	.LVL533:
1547:bluetooth_rxtx.c **** 	le.crc_init_reversed = 0xAAAAAA;
 5628              		.loc 1 1547 2 view .LVU1959
1548:bluetooth_rxtx.c **** 	le.crc_verify = 0;
 5629              		.loc 1 1548 2 view .LVU1960
1549:bluetooth_rxtx.c **** 	le.last_packet = 0;
 5630              		.loc 1 1549 2 view .LVU1961
1550:bluetooth_rxtx.c **** 
 5631              		.loc 1 1550 2 view .LVU1962
1550:bluetooth_rxtx.c **** 
 5632              		.loc 1 1550 17 is_stmt 0 view .LVU1963
 5633 0008 0022     		movs	r2, #0
 5634 000a 0D4B     		ldr	r3, .L493+4
1548:bluetooth_rxtx.c **** 	le.crc_verify = 0;
 5635              		.loc 1 1548 23 view .LVU1964
 5636 000c 0D48     		ldr	r0, .L493+8
 5637 000e 0E49     		ldr	r1, .L493+12
1558:bluetooth_rxtx.c **** 	le.conn_interval = 0;
 5638              		.loc 1 1558 20 view .LVU1965
 5639 0010 9A83     		strh	r2, [r3, #28]	@ movhi
ARM GAS  /tmp/ccwF1FQu.s 			page 169


1548:bluetooth_rxtx.c **** 	le.crc_verify = 0;
 5640              		.loc 1 1548 23 view .LVU1966
 5641 0012 C3E90201 		strd	r0, r1, [r3, #8]
1561:bluetooth_rxtx.c **** 
 5642              		.loc 1 1561 16 view .LVU1967
 5643 0016 1A84     		strh	r2, [r3, #32]	@ movhi
1567:bluetooth_rxtx.c **** 	le.interval_update = 0;
 5644              		.loc 1 1567 20 view .LVU1968
 5645 0018 C3E90A22 		strd	r2, r2, [r3, #40]
1550:bluetooth_rxtx.c **** 
 5646              		.loc 1 1550 17 view .LVU1969
 5647 001c 9A64     		str	r2, [r3, #72]
1552:bluetooth_rxtx.c **** 
 5648              		.loc 1 1552 2 is_stmt 1 view .LVU1970
1554:bluetooth_rxtx.c **** 	le.channel_increment = 0;
 5649              		.loc 1 1554 2 view .LVU1971
1555:bluetooth_rxtx.c **** 
 5650              		.loc 1 1555 2 view .LVU1972
1549:bluetooth_rxtx.c **** 	le.last_packet = 0;
 5651              		.loc 1 1549 16 is_stmt 0 view .LVU1973
 5652 001e 1A61     		str	r2, [r3, #16]
1552:bluetooth_rxtx.c **** 
 5653              		.loc 1 1552 16 view .LVU1974
 5654 0020 9A82     		strh	r2, [r3, #20]	@ movhi
1555:bluetooth_rxtx.c **** 
 5655              		.loc 1 1555 23 view .LVU1975
 5656 0022 9A75     		strb	r2, [r3, #22]
1557:bluetooth_rxtx.c **** 	le.interval_timer = 0;
 5657              		.loc 1 1557 2 is_stmt 1 view .LVU1976
1557:bluetooth_rxtx.c **** 	le.interval_timer = 0;
 5658              		.loc 1 1557 16 is_stmt 0 view .LVU1977
 5659 0024 9A61     		str	r2, [r3, #24]
1558:bluetooth_rxtx.c **** 	le.conn_interval = 0;
 5660              		.loc 1 1558 2 is_stmt 1 view .LVU1978
1559:bluetooth_rxtx.c **** 	le.conn_interval = 0;
 5661              		.loc 1 1559 2 view .LVU1979
1559:bluetooth_rxtx.c **** 	le.conn_interval = 0;
 5662              		.loc 1 1559 19 is_stmt 0 view .LVU1980
 5663 0026 DA83     		strh	r2, [r3, #30]	@ movhi
1560:bluetooth_rxtx.c **** 	le.conn_count = 0;
 5664              		.loc 1 1560 2 is_stmt 1 view .LVU1981
1561:bluetooth_rxtx.c **** 
 5665              		.loc 1 1561 2 view .LVU1982
1563:bluetooth_rxtx.c **** 	le.win_offset = 0;
 5666              		.loc 1 1563 2 view .LVU1983
1563:bluetooth_rxtx.c **** 	le.win_offset = 0;
 5667              		.loc 1 1563 14 is_stmt 0 view .LVU1984
 5668 0028 83F82220 		strb	r2, [r3, #34]
1564:bluetooth_rxtx.c **** 
 5669              		.loc 1 1564 2 is_stmt 1 view .LVU1985
1564:bluetooth_rxtx.c **** 
 5670              		.loc 1 1564 16 is_stmt 0 view .LVU1986
 5671 002c 9A84     		strh	r2, [r3, #36]	@ movhi
1566:bluetooth_rxtx.c **** 	le.update_instant = 0;
 5672              		.loc 1 1566 2 is_stmt 1 view .LVU1987
1567:bluetooth_rxtx.c **** 	le.interval_update = 0;
 5673              		.loc 1 1567 2 view .LVU1988
ARM GAS  /tmp/ccwF1FQu.s 			page 170


1568:bluetooth_rxtx.c **** 	le.win_size_update = 0;
 5674              		.loc 1 1568 2 view .LVU1989
1569:bluetooth_rxtx.c **** 	le.win_offset_update = 0;
 5675              		.loc 1 1569 2 view .LVU1990
1569:bluetooth_rxtx.c **** 	le.win_offset_update = 0;
 5676              		.loc 1 1569 21 is_stmt 0 view .LVU1991
 5677 002e 83F83020 		strb	r2, [r3, #48]
1570:bluetooth_rxtx.c **** 
 5678              		.loc 1 1570 2 is_stmt 1 view .LVU1992
1570:bluetooth_rxtx.c **** 
 5679              		.loc 1 1570 23 is_stmt 0 view .LVU1993
 5680 0032 5A86     		strh	r2, [r3, #50]	@ movhi
1572:bluetooth_rxtx.c **** }
 5681              		.loc 1 1572 2 is_stmt 1 view .LVU1994
1572:bluetooth_rxtx.c **** }
 5682              		.loc 1 1572 9 is_stmt 0 view .LVU1995
 5683 0034 054B     		ldr	r3, .L493+16
 5684 0036 DA72     		strb	r2, [r3, #11]
1573:bluetooth_rxtx.c **** 
 5685              		.loc 1 1573 1 view .LVU1996
 5686 0038 08BD     		pop	{r3, pc}
 5687              	.L494:
 5688 003a 00BF     		.align	2
 5689              	.L493:
 5690 003c D6BE898E 		.word	-1903575338
 5691 0040 00000000 		.word	.LANCHOR0
 5692 0044 55555500 		.word	5592405
 5693 0048 AAAAAA00 		.word	11184810
 5694 004c 00000000 		.word	.LANCHOR1
 5695              		.cfi_endproc
 5696              	.LFE20:
 5698              		.section	.text.reset_le_promisc,"ax",%progbits
 5699              		.align	1
 5700              		.global	reset_le_promisc
 5701              		.syntax unified
 5702              		.thumb
 5703              		.thumb_func
 5704              		.fpu softvfp
 5706              	reset_le_promisc:
 5707              	.LFB21:
1576:bluetooth_rxtx.c **** 	memset(&le_promisc, 0, sizeof(le_promisc));
 5708              		.loc 1 1576 29 is_stmt 1 view -0
 5709              		.cfi_startproc
 5710              		@ args = 0, pretend = 0, frame = 0
 5711              		@ frame_needed = 0, uses_anonymous_args = 0
 5712 0000 10B5     		push	{r4, lr}
 5713              		.cfi_def_cfa_offset 8
 5714              		.cfi_offset 4, -8
 5715              		.cfi_offset 14, -4
1577:bluetooth_rxtx.c **** 	le_promisc.smallest_hop_interval = 0xffffffff;
 5716              		.loc 1 1577 2 view .LVU1998
 5717 0002 064C     		ldr	r4, .L496
 5718 0004 4FF48472 		mov	r2, #264
 5719 0008 0021     		movs	r1, #0
 5720 000a 2046     		mov	r0, r4
 5721 000c FFF7FEFF 		bl	memset
 5722              	.LVL534:
ARM GAS  /tmp/ccwF1FQu.s 			page 171


1578:bluetooth_rxtx.c **** }
 5723              		.loc 1 1578 2 view .LVU1999
1578:bluetooth_rxtx.c **** }
 5724              		.loc 1 1578 35 is_stmt 0 view .LVU2000
 5725 0010 4FF0FF33 		mov	r3, #-1
 5726 0014 C4F80031 		str	r3, [r4, #256]
1579:bluetooth_rxtx.c **** 
 5727              		.loc 1 1579 1 view .LVU2001
 5728 0018 10BD     		pop	{r4, pc}
 5729              	.L497:
 5730 001a 00BF     		.align	2
 5731              	.L496:
 5732 001c 00000000 		.word	le_promisc
 5733              		.cfi_endproc
 5734              	.LFE21:
 5736              		.section	.text.bt_generic_le,"ax",%progbits
 5737              		.align	1
 5738              		.global	bt_generic_le
 5739              		.syntax unified
 5740              		.thumb
 5741              		.thumb_func
 5742              		.fpu softvfp
 5744              	bt_generic_le:
 5745              	.LVL535:
 5746              	.LFB22:
1583:bluetooth_rxtx.c **** 	u8 hold;
 5747              		.loc 1 1583 1 is_stmt 1 view -0
 5748              		.cfi_startproc
 5749              		@ args = 0, pretend = 0, frame = 0
 5750              		@ frame_needed = 0, uses_anonymous_args = 0
1583:bluetooth_rxtx.c **** 	u8 hold;
 5751              		.loc 1 1583 1 is_stmt 0 view .LVU2003
 5752 0000 2DE9F84F 		push	{r3, r4, r5, r6, r7, r8, r9, r10, fp, lr}
 5753              		.cfi_def_cfa_offset 40
 5754              		.cfi_offset 3, -40
 5755              		.cfi_offset 4, -36
 5756              		.cfi_offset 5, -32
 5757              		.cfi_offset 6, -28
 5758              		.cfi_offset 7, -24
 5759              		.cfi_offset 8, -20
 5760              		.cfi_offset 9, -16
 5761              		.cfi_offset 10, -12
 5762              		.cfi_offset 11, -8
 5763              		.cfi_offset 14, -4
1584:bluetooth_rxtx.c **** 	int i, j;
 5764              		.loc 1 1584 2 is_stmt 1 view .LVU2004
1585:bluetooth_rxtx.c **** 	int8_t rssi, rssi_at_trigger;
 5765              		.loc 1 1585 2 view .LVU2005
1586:bluetooth_rxtx.c **** 
 5766              		.loc 1 1586 2 view .LVU2006
1588:bluetooth_rxtx.c **** 	mode = active_mode;
 5767              		.loc 1 1588 2 view .LVU2007
1588:bluetooth_rxtx.c **** 	mode = active_mode;
 5768              		.loc 1 1588 13 is_stmt 0 view .LVU2008
 5769 0004 0123     		movs	r3, #1
 5770 0006 724C     		ldr	r4, .L542
1583:bluetooth_rxtx.c **** 	u8 hold;
ARM GAS  /tmp/ccwF1FQu.s 			page 172


 5771              		.loc 1 1583 1 view .LVU2009
 5772 0008 0746     		mov	r7, r0
1588:bluetooth_rxtx.c **** 	mode = active_mode;
 5773              		.loc 1 1588 13 view .LVU2010
 5774 000a 2370     		strb	r3, [r4]
1589:bluetooth_rxtx.c **** 
 5775              		.loc 1 1589 2 is_stmt 1 view .LVU2011
1589:bluetooth_rxtx.c **** 
 5776              		.loc 1 1589 7 is_stmt 0 view .LVU2012
 5777 000c 6074     		strb	r0, [r4, #17]
1591:bluetooth_rxtx.c **** 
 5778              		.loc 1 1591 2 is_stmt 1 view .LVU2013
 5779 000e FFF7FEFF 		bl	reset_le
 5780              	.LVL536:
1594:bluetooth_rxtx.c **** 
 5781              		.loc 1 1594 2 view .LVU2014
1594:bluetooth_rxtx.c **** 
 5782              		.loc 1 1594 8 is_stmt 0 view .LVU2015
 5783 0012 4FF08072 		mov	r2, #16777216
 5784 0016 6F4B     		ldr	r3, .L542+4
1596:bluetooth_rxtx.c **** 
 5785              		.loc 1 1596 2 view .LVU2016
 5786 0018 6F4E     		ldr	r6, .L542+8
1594:bluetooth_rxtx.c **** 
 5787              		.loc 1 1594 8 view .LVU2017
 5788 001a 1A60     		str	r2, [r3]
1596:bluetooth_rxtx.c **** 
 5789              		.loc 1 1596 2 is_stmt 1 view .LVU2018
 5790 001c 1023     		movs	r3, #16
 5791 001e 3360     		str	r3, [r6]
1598:bluetooth_rxtx.c **** 	dio_ssp_init();
 5792              		.loc 1 1598 2 view .LVU2019
 5793 0020 FFF7FEFF 		bl	usb_queue_init
 5794              	.LVL537:
1599:bluetooth_rxtx.c **** 	dma_init_rx_symbols();
 5795              		.loc 1 1599 2 view .LVU2020
1606:bluetooth_rxtx.c **** 
 5796              		.loc 1 1606 7 is_stmt 0 view .LVU2021
 5797 0024 0025     		movs	r5, #0
1599:bluetooth_rxtx.c **** 	dma_init_rx_symbols();
 5798              		.loc 1 1599 2 view .LVU2022
 5799 0026 FFF7FEFF 		bl	dio_ssp_init
 5800              	.LVL538:
1600:bluetooth_rxtx.c **** 	dio_ssp_start();
 5801              		.loc 1 1600 2 is_stmt 1 view .LVU2023
 5802 002a FFF7FEFF 		bl	dma_init_rx_symbols
 5803              	.LVL539:
1601:bluetooth_rxtx.c **** 	cc2400_rx();
 5804              		.loc 1 1601 2 view .LVU2024
 5805 002e FFF7FEFF 		bl	dio_ssp_start
 5806              	.LVL540:
1602:bluetooth_rxtx.c **** 
 5807              		.loc 1 1602 2 view .LVU2025
 5808 0032 FFF7FEFF 		bl	cc2400_rx
 5809              	.LVL541:
1604:bluetooth_rxtx.c **** 
 5810              		.loc 1 1604 2 view .LVU2026
ARM GAS  /tmp/ccwF1FQu.s 			page 173


 5811 0036 FFF7FEFF 		bl	cs_trigger_enable
 5812              	.LVL542:
1606:bluetooth_rxtx.c **** 
 5813              		.loc 1 1606 2 view .LVU2027
1608:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 5814              		.loc 1 1608 2 view .LVU2028
 5815              	.LBB55:
1614:bluetooth_rxtx.c **** 
 5816              		.loc 1 1614 4 is_stmt 0 view .LVU2029
 5817 003a DFF8BCA1 		ldr	r10, .L542+40
1637:bluetooth_rxtx.c **** 		{
 5818              		.loc 1 1637 17 view .LVU2030
 5819 003e DFF8BC81 		ldr	r8, .L542+44
 5820              	.LVL543:
 5821              	.L499:
1637:bluetooth_rxtx.c **** 		{
 5822              		.loc 1 1637 17 view .LVU2031
 5823              	.LBE55:
1608:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 5824              		.loc 1 1608 8 is_stmt 1 view .LVU2032
1608:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 5825              		.loc 1 1608 24 is_stmt 0 view .LVU2033
 5826 0042 A37C     		ldrb	r3, [r4, #18]	@ zero_extendqisi2
1608:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 5827              		.loc 1 1608 8 view .LVU2034
 5828 0044 BB42     		cmp	r3, r7
 5829 0046 40F09180 		bne	.L519
 5830              	.LBB56:
1609:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 5831              		.loc 1 1609 3 is_stmt 1 view .LVU2035
1609:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 5832              		.loc 1 1609 25 is_stmt 0 view .LVU2036
 5833 004a E389     		ldrh	r3, [r4, #14]
 5834 004c 9BB2     		uxth	r3, r3
1609:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 5835              		.loc 1 1609 6 view .LVU2037
 5836 004e CBB1     		cbz	r3, .L500
1610:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 5837              		.loc 1 1610 4 is_stmt 1 view .LVU2038
 5838 0050 6420     		movs	r0, #100
 5839 0052 FFF7FEFF 		bl	cc2400_strobe
 5840              	.LVL544:
1611:bluetooth_rxtx.c **** 
 5841              		.loc 1 1611 4 view .LVU2039
 5842              	.L501:
1611:bluetooth_rxtx.c **** 
 5843              		.loc 1 1611 39 discriminator 1 view .LVU2040
1611:bluetooth_rxtx.c **** 
 5844              		.loc 1 1611 10 discriminator 1 view .LVU2041
1611:bluetooth_rxtx.c **** 
 5845              		.loc 1 1611 12 is_stmt 0 discriminator 1 view .LVU2042
 5846 0056 FFF7FEFF 		bl	cc2400_status
 5847              	.LVL545:
1611:bluetooth_rxtx.c **** 
 5848              		.loc 1 1611 10 discriminator 1 view .LVU2043
 5849 005a 4207     		lsls	r2, r0, #29
 5850 005c FBD4     		bmi	.L501
ARM GAS  /tmp/ccwF1FQu.s 			page 174


1614:bluetooth_rxtx.c **** 
 5851              		.loc 1 1614 4 is_stmt 1 view .LVU2044
 5852 005e BAF84C10 		ldrh	r1, [r10, #76]
 5853 0062 0220     		movs	r0, #2
 5854 0064 0139     		subs	r1, r1, #1
 5855 0066 89B2     		uxth	r1, r1
 5856 0068 FFF7FEFF 		bl	cc2400_set
 5857              	.LVL546:
1617:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 5858              		.loc 1 1617 4 view .LVU2045
 5859 006c 6120     		movs	r0, #97
 5860 006e FFF7FEFF 		bl	cc2400_strobe
 5861              	.LVL547:
1618:bluetooth_rxtx.c **** 
 5862              		.loc 1 1618 4 view .LVU2046
 5863              	.L502:
1618:bluetooth_rxtx.c **** 
 5864              		.loc 1 1618 40 discriminator 1 view .LVU2047
1618:bluetooth_rxtx.c **** 
 5865              		.loc 1 1618 10 discriminator 1 view .LVU2048
1618:bluetooth_rxtx.c **** 
 5866              		.loc 1 1618 13 is_stmt 0 discriminator 1 view .LVU2049
 5867 0072 FFF7FEFF 		bl	cc2400_status
 5868              	.LVL548:
1618:bluetooth_rxtx.c **** 
 5869              		.loc 1 1618 10 discriminator 1 view .LVU2050
 5870 0076 4307     		lsls	r3, r0, #29
 5871 0078 FBD5     		bpl	.L502
1621:bluetooth_rxtx.c **** 
 5872              		.loc 1 1621 4 is_stmt 1 view .LVU2051
 5873 007a 6220     		movs	r0, #98
 5874 007c FFF7FEFF 		bl	cc2400_strobe
 5875              	.LVL549:
1623:bluetooth_rxtx.c **** 		}
 5876              		.loc 1 1623 4 view .LVU2052
1623:bluetooth_rxtx.c **** 		}
 5877              		.loc 1 1623 22 is_stmt 0 view .LVU2053
 5878 0080 0023     		movs	r3, #0
 5879 0082 E381     		strh	r3, [r4, #14]	@ movhi
 5880              	.L500:
1626:bluetooth_rxtx.c **** 			hop();
 5881              		.loc 1 1626 3 is_stmt 1 view .LVU2054
1626:bluetooth_rxtx.c **** 			hop();
 5882              		.loc 1 1626 7 is_stmt 0 view .LVU2055
 5883 0084 E37A     		ldrb	r3, [r4, #11]	@ zero_extendqisi2
1626:bluetooth_rxtx.c **** 			hop();
 5884              		.loc 1 1626 6 view .LVU2056
 5885 0086 002B     		cmp	r3, #0
 5886 0088 7CD0     		beq	.L503
1627:bluetooth_rxtx.c **** 		} else {
 5887              		.loc 1 1627 4 is_stmt 1 view .LVU2057
 5888 008a FFF7FEFF 		bl	hop
 5889              	.LVL550:
 5890              	.L504:
1632:bluetooth_rxtx.c **** 
 5891              		.loc 1 1632 3 view .LVU2058
 5892 008e 1023     		movs	r3, #16
ARM GAS  /tmp/ccwF1FQu.s 			page 175


 5893 0090 3360     		str	r3, [r6]
1635:bluetooth_rxtx.c **** 		rssi_at_trigger = INT8_MIN;
 5894              		.loc 1 1635 3 view .LVU2059
 5895 0092 FFF7FEFF 		bl	rssi_reset
 5896              	.LVL551:
1636:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0))
 5897              		.loc 1 1636 3 view .LVU2060
1637:bluetooth_rxtx.c **** 		{
 5898              		.loc 1 1637 3 view .LVU2061
1636:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0))
 5899              		.loc 1 1636 19 is_stmt 0 view .LVU2062
 5900 0096 6FF07F0B 		mvn	fp, #127
 5901 009a DFF86491 		ldr	r9, .L542+48
 5902              	.LVL552:
 5903              	.L505:
1637:bluetooth_rxtx.c **** 		{
 5904              		.loc 1 1637 9 is_stmt 1 view .LVU2063
1637:bluetooth_rxtx.c **** 		{
 5905              		.loc 1 1637 17 is_stmt 0 view .LVU2064
 5906 009e D8F80030 		ldr	r3, [r8]
1637:bluetooth_rxtx.c **** 		{
 5907              		.loc 1 1637 9 view .LVU2065
 5908 00a2 1BB9     		cbnz	r3, .L507
1637:bluetooth_rxtx.c **** 		{
 5909              		.loc 1 1637 34 discriminator 1 view .LVU2066
 5910 00a4 D9F80030 		ldr	r3, [r9]
1637:bluetooth_rxtx.c **** 		{
 5911              		.loc 1 1637 23 discriminator 1 view .LVU2067
 5912 00a8 002B     		cmp	r3, #0
 5913 00aa 6FD0     		beq	.L508
 5914              	.L507:
1647:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 5915              		.loc 1 1647 3 is_stmt 1 view .LVU2068
1647:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 5916              		.loc 1 1647 7 is_stmt 0 view .LVU2069
 5917 00ac D9F80030 		ldr	r3, [r9]
1647:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 5918              		.loc 1 1647 6 view .LVU2070
 5919 00b0 1BB1     		cbz	r3, .L509
1648:bluetooth_rxtx.c **** 		}
 5920              		.loc 1 1648 4 is_stmt 1 view .LVU2071
1648:bluetooth_rxtx.c **** 		}
 5921              		.loc 1 1648 11 is_stmt 0 view .LVU2072
 5922 00b2 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 5923 00b4 43F00203 		orr	r3, r3, #2
 5924 00b8 6370     		strb	r3, [r4, #1]
 5925              	.L509:
1652:bluetooth_rxtx.c **** 			goto rx_continue;
 5926              		.loc 1 1652 3 is_stmt 1 view .LVU2073
1652:bluetooth_rxtx.c **** 			goto rx_continue;
 5927              		.loc 1 1652 7 is_stmt 0 view .LVU2074
 5928 00ba D8F80030 		ldr	r3, [r8]
1652:bluetooth_rxtx.c **** 			goto rx_continue;
 5929              		.loc 1 1652 6 view .LVU2075
 5930 00be 002B     		cmp	r3, #0
 5931 00c0 7FD0     		beq	.L510
1656:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
ARM GAS  /tmp/ccwF1FQu.s 			page 176


 5932              		.loc 1 1656 3 is_stmt 1 view .LVU2076
1656:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
 5933              		.loc 1 1656 13 is_stmt 0 view .LVU2077
 5934 00c2 D8F80030 		ldr	r3, [r8]
1656:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
 5935              		.loc 1 1656 6 view .LVU2078
 5936 00c6 012B     		cmp	r3, #1
1657:bluetooth_rxtx.c **** 
 5937              		.loc 1 1657 4 is_stmt 1 view .LVU2079
1657:bluetooth_rxtx.c **** 
 5938              		.loc 1 1657 11 is_stmt 0 view .LVU2080
 5939 00c8 82BF     		ittt	hi
 5940 00ca 6378     		ldrbhi	r3, [r4, #1]	@ zero_extendqisi2
 5941 00cc 43F00103 		orrhi	r3, r3, #1
 5942 00d0 6370     		strbhi	r3, [r4, #1]
1659:bluetooth_rxtx.c **** 
 5943              		.loc 1 1659 3 is_stmt 1 view .LVU2081
 5944 00d2 BAF84C00 		ldrh	r0, [r10, #76]
 5945 00d6 80B2     		uxth	r0, r0
 5946 00d8 FFF7FEFF 		bl	rssi_iir_update
 5947              	.LVL553:
1665:bluetooth_rxtx.c **** 			status |= CS_TRIGGER;
 5948              		.loc 1 1665 3 view .LVU2082
1665:bluetooth_rxtx.c **** 			status |= CS_TRIGGER;
 5949              		.loc 1 1665 7 is_stmt 0 view .LVU2083
 5950 00dc 3F4A     		ldr	r2, .L542+12
1665:bluetooth_rxtx.c **** 			status |= CS_TRIGGER;
 5951              		.loc 1 1665 18 view .LVU2084
 5952 00de 404B     		ldr	r3, .L542+16
1665:bluetooth_rxtx.c **** 			status |= CS_TRIGGER;
 5953              		.loc 1 1665 7 view .LVU2085
 5954 00e0 1178     		ldrb	r1, [r2]	@ zero_extendqisi2
1665:bluetooth_rxtx.c **** 			status |= CS_TRIGGER;
 5955              		.loc 1 1665 18 view .LVU2086
 5956 00e2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5957 00e4 0B43     		orrs	r3, r1, r3
 5958 00e6 06D0     		beq	.L512
1666:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
 5959              		.loc 1 1666 4 is_stmt 1 view .LVU2087
1666:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
 5960              		.loc 1 1666 11 is_stmt 0 view .LVU2088
 5961 00e8 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
1667:bluetooth_rxtx.c **** 			cs_trigger = 0;
 5962              		.loc 1 1667 9 view .LVU2089
 5963 00ea 0225     		movs	r5, #2
 5964              	.LVL554:
1666:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
 5965              		.loc 1 1666 11 view .LVU2090
 5966 00ec 43F00803 		orr	r3, r3, #8
 5967 00f0 6370     		strb	r3, [r4, #1]
1667:bluetooth_rxtx.c **** 			cs_trigger = 0;
 5968              		.loc 1 1667 4 is_stmt 1 view .LVU2091
 5969              	.LVL555:
1668:bluetooth_rxtx.c **** 		}
 5970              		.loc 1 1668 4 view .LVU2092
1668:bluetooth_rxtx.c **** 		}
 5971              		.loc 1 1668 15 is_stmt 0 view .LVU2093
ARM GAS  /tmp/ccwF1FQu.s 			page 177


 5972 00f2 0023     		movs	r3, #0
 5973 00f4 1370     		strb	r3, [r2]
 5974              	.LVL556:
 5975              	.L512:
1671:bluetooth_rxtx.c **** 			status |= RSSI_TRIGGER;
 5976              		.loc 1 1671 3 is_stmt 1 view .LVU2094
1671:bluetooth_rxtx.c **** 			status |= RSSI_TRIGGER;
 5977              		.loc 1 1671 16 is_stmt 0 view .LVU2095
 5978 00f6 3B4B     		ldr	r3, .L542+20
 5979 00f8 3B4A     		ldr	r2, .L542+24
 5980 00fa 93F90030 		ldrsb	r3, [r3]
 5981 00fe 92F90020 		ldrsb	r2, [r2]
 5982 0102 3533     		adds	r3, r3, #53
1671:bluetooth_rxtx.c **** 			status |= RSSI_TRIGGER;
 5983              		.loc 1 1671 6 view .LVU2096
 5984 0104 9342     		cmp	r3, r2
 5985 0106 5ADA     		bge	.L513
1672:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
 5986              		.loc 1 1672 4 is_stmt 1 view .LVU2097
1673:bluetooth_rxtx.c **** 		}
 5987              		.loc 1 1673 9 is_stmt 0 view .LVU2098
 5988 0108 0225     		movs	r5, #2
 5989              	.LVL557:
1672:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
 5990              		.loc 1 1672 11 view .LVU2099
 5991 010a 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 5992 010c 43F01003 		orr	r3, r3, #16
 5993 0110 6370     		strb	r3, [r4, #1]
1673:bluetooth_rxtx.c **** 		}
 5994              		.loc 1 1673 4 is_stmt 1 view .LVU2100
 5995              	.LVL558:
1677:bluetooth_rxtx.c **** 			goto rx_continue;
 5996              		.loc 1 1677 3 view .LVU2101
 5997              	.L514:
1680:bluetooth_rxtx.c **** 
 5998              		.loc 1 1680 3 view .LVU2102
1683:bluetooth_rxtx.c **** 
 5999              		.loc 1 1683 3 is_stmt 0 view .LVU2103
 6000 0112 3649     		ldr	r1, .L542+28
 6001 0114 4FF4C872 		mov	r2, #400
 6002 0118 A1F5C870 		sub	r0, r1, #400
 6003 011c FFF7FEFF 		bl	memcpy
 6004              	.LVL559:
 6005 0120 4FF4C870 		mov	r0, #400
1686:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
 6006              		.loc 1 1686 10 view .LVU2104
 6007 0124 0023     		movs	r3, #0
1680:bluetooth_rxtx.c **** 
 6008              		.loc 1 1680 7 view .LVU2105
 6009 0126 013D     		subs	r5, r5, #1
1689:bluetooth_rxtx.c **** 				idle_rxbuf[i] <<= 1;
 6010              		.loc 1 1689 51 view .LVU2106
 6011 0128 DFF8D8E0 		ldr	lr, .L542+52
1680:bluetooth_rxtx.c **** 
 6012              		.loc 1 1680 7 view .LVU2107
 6013 012c EDB2     		uxtb	r5, r5
 6014              	.LVL560:
ARM GAS  /tmp/ccwF1FQu.s 			page 178


1683:bluetooth_rxtx.c **** 
 6015              		.loc 1 1683 3 is_stmt 1 view .LVU2108
1686:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
 6016              		.loc 1 1686 3 view .LVU2109
1686:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
 6017              		.loc 1 1686 15 view .LVU2110
 6018              	.L515:
1688:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 6019              		.loc 1 1688 16 view .LVU2111
1688:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 6020              		.loc 1 1688 11 is_stmt 0 view .LVU2112
 6021 012e 0021     		movs	r1, #0
 6022 0130 2F4A     		ldr	r2, .L542+32
 6023 0132 00EB020C 		add	ip, r0, r2
 6024              	.LVL561:
 6025              	.L516:
1689:bluetooth_rxtx.c **** 				idle_rxbuf[i] <<= 1;
 6026              		.loc 1 1689 5 is_stmt 1 discriminator 3 view .LVU2113
1689:bluetooth_rxtx.c **** 				idle_rxbuf[i] <<= 1;
 6027              		.loc 1 1689 51 is_stmt 0 discriminator 3 view .LVU2114
 6028 0136 DEF80020 		ldr	r2, [lr]
1688:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 6029              		.loc 1 1688 23 discriminator 3 view .LVU2115
 6030 013a 0131     		adds	r1, r1, #1
 6031              	.LVL562:
1689:bluetooth_rxtx.c **** 				idle_rxbuf[i] <<= 1;
 6032              		.loc 1 1689 51 discriminator 3 view .LVU2116
 6033 013c D25C     		ldrb	r2, [r2, r3]	@ zero_extendqisi2
1690:bluetooth_rxtx.c **** 			}
 6034              		.loc 1 1690 19 discriminator 3 view .LVU2117
 6035 013e DEF800B0 		ldr	fp, [lr]
1689:bluetooth_rxtx.c **** 				idle_rxbuf[i] <<= 1;
 6036              		.loc 1 1689 63 discriminator 3 view .LVU2118
 6037 0142 D209     		lsrs	r2, r2, #7
 6038 0144 0CF8012B 		strb	r2, [ip], #1
1690:bluetooth_rxtx.c **** 			}
 6039              		.loc 1 1690 5 is_stmt 1 discriminator 3 view .LVU2119
1690:bluetooth_rxtx.c **** 			}
 6040              		.loc 1 1690 19 is_stmt 0 discriminator 3 view .LVU2120
 6041 0148 1BF80320 		ldrb	r2, [fp, r3]	@ zero_extendqisi2
1688:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 6042              		.loc 1 1688 4 discriminator 3 view .LVU2121
 6043 014c 0829     		cmp	r1, #8
1690:bluetooth_rxtx.c **** 			}
 6044              		.loc 1 1690 19 discriminator 3 view .LVU2122
 6045 014e 4FEA4202 		lsl	r2, r2, #1
 6046 0152 D2B2     		uxtb	r2, r2
 6047 0154 0BF80320 		strb	r2, [fp, r3]
1688:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 6048              		.loc 1 1688 23 is_stmt 1 discriminator 3 view .LVU2123
 6049              	.LVL563:
1688:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 6050              		.loc 1 1688 16 discriminator 3 view .LVU2124
1688:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 6051              		.loc 1 1688 4 is_stmt 0 discriminator 3 view .LVU2125
 6052 0158 EDD1     		bne	.L516
1686:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
ARM GAS  /tmp/ccwF1FQu.s 			page 179


 6053              		.loc 1 1686 29 is_stmt 1 discriminator 2 view .LVU2126
 6054 015a 0133     		adds	r3, r3, #1
 6055              	.LVL564:
1686:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
 6056              		.loc 1 1686 15 discriminator 2 view .LVU2127
1686:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
 6057              		.loc 1 1686 3 is_stmt 0 discriminator 2 view .LVU2128
 6058 015c 322B     		cmp	r3, #50
 6059 015e 00F10800 		add	r0, r0, #8
 6060 0162 E4D1     		bne	.L515
1694:bluetooth_rxtx.c **** 		if (!ret) break;
 6061              		.loc 1 1694 3 is_stmt 1 view .LVU2129
1694:bluetooth_rxtx.c **** 		if (!ret) break;
 6062              		.loc 1 1694 13 is_stmt 0 view .LVU2130
 6063 0164 E36A     		ldr	r3, [r4, #44]
 6064              	.LVL565:
1694:bluetooth_rxtx.c **** 		if (!ret) break;
 6065              		.loc 1 1694 13 view .LVU2131
 6066 0166 2248     		ldr	r0, .L542+32
 6067 0168 9847     		blx	r3
 6068              	.LVL566:
1695:bluetooth_rxtx.c **** 
 6069              		.loc 1 1695 3 is_stmt 1 view .LVU2132
1695:bluetooth_rxtx.c **** 
 6070              		.loc 1 1695 6 is_stmt 0 view .LVU2133
 6071 016a 50BB     		cbnz	r0, .L510
 6072              	.LVL567:
 6073              	.L519:
1695:bluetooth_rxtx.c **** 
 6074              		.loc 1 1695 6 view .LVU2134
 6075              	.LBE56:
1703:bluetooth_rxtx.c **** 
 6076              		.loc 1 1703 2 is_stmt 1 view .LVU2135
1703:bluetooth_rxtx.c **** 
 6077              		.loc 1 1703 8 is_stmt 0 view .LVU2136
 6078 016c 4FF08072 		mov	r2, #16777216
 6079 0170 204B     		ldr	r3, .L542+36
 6080 0172 1A60     		str	r2, [r3]
1706:bluetooth_rxtx.c **** 	dio_ssp_stop();
 6081              		.loc 1 1706 2 is_stmt 1 view .LVU2137
 6082 0174 FFF7FEFF 		bl	cc2400_idle
 6083              	.LVL568:
1707:bluetooth_rxtx.c **** 	cs_trigger_disable();
 6084              		.loc 1 1707 2 view .LVU2138
 6085 0178 FFF7FEFF 		bl	dio_ssp_stop
 6086              	.LVL569:
1708:bluetooth_rxtx.c **** }
 6087              		.loc 1 1708 2 view .LVU2139
1709:bluetooth_rxtx.c **** 
 6088              		.loc 1 1709 1 is_stmt 0 view .LVU2140
 6089 017c BDE8F84F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, lr}
 6090              		.cfi_remember_state
 6091              		.cfi_restore 14
 6092              		.cfi_restore 11
 6093              		.cfi_restore 10
 6094              		.cfi_restore 9
 6095              		.cfi_restore 8
ARM GAS  /tmp/ccwF1FQu.s 			page 180


 6096              		.cfi_restore 7
 6097              		.cfi_restore 6
 6098              		.cfi_restore 5
 6099              		.cfi_restore 4
 6100              		.cfi_restore 3
 6101              		.cfi_def_cfa_offset 0
 6102              	.LVL570:
1708:bluetooth_rxtx.c **** }
 6103              		.loc 1 1708 2 view .LVU2141
 6104 0180 FFF7FEBF 		b	cs_trigger_disable
 6105              	.LVL571:
 6106              	.L503:
 6107              		.cfi_restore_state
 6108              	.LBB57:
1629:bluetooth_rxtx.c **** 		}
 6109              		.loc 1 1629 4 is_stmt 1 view .LVU2142
 6110 0184 4FF48073 		mov	r3, #256
 6111 0188 3360     		str	r3, [r6]
 6112 018a 80E7     		b	.L504
 6113              	.LVL572:
 6114              	.L508:
1639:bluetooth_rxtx.c **** 			if (cs_trigger && (rssi_at_trigger == INT8_MIN)) {
 6115              		.loc 1 1639 4 view .LVU2143
1639:bluetooth_rxtx.c **** 			if (cs_trigger && (rssi_at_trigger == INT8_MIN)) {
 6116              		.loc 1 1639 20 is_stmt 0 view .LVU2144
 6117 018c 0620     		movs	r0, #6
 6118 018e FFF7FEFF 		bl	cc2400_get
 6119              	.LVL573:
1640:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
 6120              		.loc 1 1640 8 view .LVU2145
 6121 0192 124B     		ldr	r3, .L542+12
1639:bluetooth_rxtx.c **** 			if (cs_trigger && (rssi_at_trigger == INT8_MIN)) {
 6122              		.loc 1 1639 9 view .LVU2146
 6123 0194 40F30720 		sbfx	r0, r0, #8, #8
 6124              	.LVL574:
1640:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
 6125              		.loc 1 1640 4 is_stmt 1 view .LVU2147
1640:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
 6126              		.loc 1 1640 8 is_stmt 0 view .LVU2148
 6127 0198 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
1640:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
 6128              		.loc 1 1640 7 view .LVU2149
 6129 019a 6BB1     		cbz	r3, .L506
1640:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
 6130              		.loc 1 1640 19 discriminator 1 view .LVU2150
 6131 019c 1BF1800F 		cmn	fp, #128
 6132 01a0 0AD1     		bne	.L506
1641:bluetooth_rxtx.c **** 				rssi_at_trigger = rssi;
 6133              		.loc 1 1641 5 is_stmt 1 view .LVU2151
1641:bluetooth_rxtx.c **** 				rssi_at_trigger = rssi;
 6134              		.loc 1 1641 12 is_stmt 0 view .LVU2152
 6135 01a2 104B     		ldr	r3, .L542+20
 6136 01a4 93F900B0 		ldrsb	fp, [r3]
 6137              	.LVL575:
1641:bluetooth_rxtx.c **** 				rssi_at_trigger = rssi;
 6138              		.loc 1 1641 12 view .LVU2153
 6139 01a8 0BF1360B 		add	fp, fp, #54
ARM GAS  /tmp/ccwF1FQu.s 			page 181


 6140 01ac 5845     		cmp	r0, fp
 6141 01ae B8BF     		it	lt
 6142 01b0 5846     		movlt	r0, fp
 6143              	.LVL576:
1641:bluetooth_rxtx.c **** 				rssi_at_trigger = rssi;
 6144              		.loc 1 1641 10 view .LVU2154
 6145 01b2 4FFA80FB 		sxtb	fp, r0
1642:bluetooth_rxtx.c **** 			}
 6146              		.loc 1 1642 5 is_stmt 1 view .LVU2155
1642:bluetooth_rxtx.c **** 			}
 6147              		.loc 1 1642 21 is_stmt 0 view .LVU2156
 6148 01b6 5846     		mov	r0, fp
 6149              	.L506:
 6150              	.LVL577:
1644:bluetooth_rxtx.c **** 		}
 6151              		.loc 1 1644 4 is_stmt 1 view .LVU2157
 6152 01b8 FFF7FEFF 		bl	rssi_add
 6153              	.LVL578:
1644:bluetooth_rxtx.c **** 		}
 6154              		.loc 1 1644 4 is_stmt 0 view .LVU2158
 6155 01bc 6FE7     		b	.L505
 6156              	.L513:
1677:bluetooth_rxtx.c **** 			goto rx_continue;
 6157              		.loc 1 1677 3 is_stmt 1 view .LVU2159
1677:bluetooth_rxtx.c **** 			goto rx_continue;
 6158              		.loc 1 1677 6 is_stmt 0 view .LVU2160
 6159 01be 002D     		cmp	r5, #0
 6160 01c0 A7D1     		bne	.L514
 6161              	.LVL579:
 6162              	.L510:
1698:bluetooth_rxtx.c **** 		rx_err = 0;
 6163              		.loc 1 1698 3 is_stmt 1 view .LVU2161
1698:bluetooth_rxtx.c **** 		rx_err = 0;
 6164              		.loc 1 1698 9 is_stmt 0 view .LVU2162
 6165 01c2 0023     		movs	r3, #0
 6166 01c4 C8F80030 		str	r3, [r8]
1699:bluetooth_rxtx.c **** 	}
 6167              		.loc 1 1699 3 is_stmt 1 view .LVU2163
1699:bluetooth_rxtx.c **** 	}
 6168              		.loc 1 1699 10 is_stmt 0 view .LVU2164
 6169 01c8 C9F80030 		str	r3, [r9]
 6170 01cc 39E7     		b	.L499
 6171              	.L543:
 6172 01ce 00BF     		.align	2
 6173              	.L542:
 6174 01d0 00000000 		.word	.LANCHOR1
 6175 01d4 00E100E0 		.word	-536813312
 6176 01d8 3CC00920 		.word	537509948
 6177 01dc 00000000 		.word	cs_trigger
 6178 01e0 00000000 		.word	cs_no_squelch
 6179 01e4 00000000 		.word	cs_threshold_cur
 6180 01e8 00000000 		.word	rssi_max
 6181 01ec 90010000 		.word	unpacked+400
 6182 01f0 00000000 		.word	unpacked
 6183 01f4 80E100E0 		.word	-536813184
 6184 01f8 00000000 		.word	.LANCHOR0
 6185 01fc 00000000 		.word	rx_tc
ARM GAS  /tmp/ccwF1FQu.s 			page 182


 6186 0200 00000000 		.word	rx_err
 6187 0204 00000000 		.word	idle_rxbuf
 6188              	.LBE57:
 6189              		.cfi_endproc
 6190              	.LFE22:
 6192              		.section	.text.bt_le_sync,"ax",%progbits
 6193              		.align	1
 6194              		.global	bt_le_sync
 6195              		.syntax unified
 6196              		.thumb
 6197              		.thumb_func
 6198              		.fpu softvfp
 6200              	bt_le_sync:
 6201              	.LVL580:
 6202              	.LFB23:
1713:bluetooth_rxtx.c **** 	int i;
 6203              		.loc 1 1713 1 is_stmt 1 view -0
 6204              		.cfi_startproc
 6205              		@ args = 0, pretend = 0, frame = 72
 6206              		@ frame_needed = 0, uses_anonymous_args = 0
1713:bluetooth_rxtx.c **** 	int i;
 6207              		.loc 1 1713 1 is_stmt 0 view .LVU2166
 6208 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 6209              		.cfi_def_cfa_offset 36
 6210              		.cfi_offset 4, -36
 6211              		.cfi_offset 5, -32
 6212              		.cfi_offset 6, -28
 6213              		.cfi_offset 7, -24
 6214              		.cfi_offset 8, -20
 6215              		.cfi_offset 9, -16
 6216              		.cfi_offset 10, -12
 6217              		.cfi_offset 11, -8
 6218              		.cfi_offset 14, -4
 6219 0004 93B0     		sub	sp, sp, #76
 6220              		.cfi_def_cfa_offset 112
1714:bluetooth_rxtx.c **** 	int8_t rssi;
 6221              		.loc 1 1714 2 is_stmt 1 view .LVU2167
1715:bluetooth_rxtx.c **** 	static int restart_jamming = 0;
 6222              		.loc 1 1715 2 view .LVU2168
1716:bluetooth_rxtx.c **** 
 6223              		.loc 1 1716 2 view .LVU2169
1718:bluetooth_rxtx.c **** 	mode = active_mode;
 6224              		.loc 1 1718 2 view .LVU2170
1718:bluetooth_rxtx.c **** 	mode = active_mode;
 6225              		.loc 1 1718 13 is_stmt 0 view .LVU2171
 6226 0006 0123     		movs	r3, #1
1724:bluetooth_rxtx.c **** 
 6227              		.loc 1 1724 8 view .LVU2172
 6228 0008 4FF08072 		mov	r2, #16777216
1718:bluetooth_rxtx.c **** 	mode = active_mode;
 6229              		.loc 1 1718 13 view .LVU2173
 6230 000c AB4C     		ldr	r4, .L612
1721:bluetooth_rxtx.c **** 
 6231              		.loc 1 1721 16 view .LVU2174
 6232 000e AC4D     		ldr	r5, .L612+4
1718:bluetooth_rxtx.c **** 	mode = active_mode;
 6233              		.loc 1 1718 13 view .LVU2175
ARM GAS  /tmp/ccwF1FQu.s 			page 183


 6234 0010 2370     		strb	r3, [r4]
1719:bluetooth_rxtx.c **** 
 6235              		.loc 1 1719 2 is_stmt 1 view .LVU2176
1721:bluetooth_rxtx.c **** 
 6236              		.loc 1 1721 16 is_stmt 0 view .LVU2177
 6237 0012 2B75     		strb	r3, [r5, #20]
1724:bluetooth_rxtx.c **** 
 6238              		.loc 1 1724 8 view .LVU2178
 6239 0014 AB4B     		ldr	r3, .L612+8
1719:bluetooth_rxtx.c **** 
 6240              		.loc 1 1719 7 view .LVU2179
 6241 0016 6074     		strb	r0, [r4, #17]
1721:bluetooth_rxtx.c **** 
 6242              		.loc 1 1721 2 is_stmt 1 view .LVU2180
1724:bluetooth_rxtx.c **** 
 6243              		.loc 1 1724 2 view .LVU2181
1724:bluetooth_rxtx.c **** 
 6244              		.loc 1 1724 8 is_stmt 0 view .LVU2182
 6245 0018 1A60     		str	r2, [r3]
1726:bluetooth_rxtx.c **** 
 6246              		.loc 1 1726 2 is_stmt 1 view .LVU2183
 6247 001a 1023     		movs	r3, #16
 6248 001c AA4E     		ldr	r6, .L612+12
1713:bluetooth_rxtx.c **** 	int i;
 6249              		.loc 1 1713 1 is_stmt 0 view .LVU2184
 6250 001e 8046     		mov	r8, r0
1726:bluetooth_rxtx.c **** 
 6251              		.loc 1 1726 2 view .LVU2185
 6252 0020 3360     		str	r3, [r6]
1728:bluetooth_rxtx.c **** 	dio_ssp_init();
 6253              		.loc 1 1728 2 is_stmt 1 view .LVU2186
 6254 0022 FFF7FEFF 		bl	usb_queue_init
 6255              	.LVL581:
1729:bluetooth_rxtx.c **** 	dma_init_le();
 6256              		.loc 1 1729 2 view .LVU2187
 6257 0026 FFF7FEFF 		bl	dio_ssp_init
 6258              	.LVL582:
1730:bluetooth_rxtx.c **** 	dio_ssp_start();
 6259              		.loc 1 1730 2 view .LVU2188
 6260 002a FFF7FEFF 		bl	dma_init_le
 6261              	.LVL583:
1731:bluetooth_rxtx.c **** 
 6262              		.loc 1 1731 2 view .LVU2189
 6263 002e FFF7FEFF 		bl	dio_ssp_start
 6264              	.LVL584:
1733:bluetooth_rxtx.c **** 
 6265              		.loc 1 1733 2 view .LVU2190
 6266 0032 2868     		ldr	r0, [r5]
 6267 0034 FFF7FEFF 		bl	rbit
 6268              	.LVL585:
 6269              	.LBB58:
1847:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 6270              		.loc 1 1847 17 is_stmt 0 view .LVU2191
 6271 0038 DFF8C8A2 		ldr	r10, .L612+72
 6272              	.LBE58:
1733:bluetooth_rxtx.c **** 
 6273              		.loc 1 1733 2 view .LVU2192
ARM GAS  /tmp/ccwF1FQu.s 			page 184


 6274 003c FFF7FEFF 		bl	cc2400_rx_sync
 6275              	.LVL586:
1735:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 6276              		.loc 1 1735 2 is_stmt 1 view .LVU2193
 6277 0040 0196     		str	r6, [sp, #4]
 6278              	.L545:
1735:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 6279              		.loc 1 1735 8 view .LVU2194
1735:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 6280              		.loc 1 1735 24 is_stmt 0 view .LVU2195
 6281 0042 A37C     		ldrb	r3, [r4, #18]	@ zero_extendqisi2
1735:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 6282              		.loc 1 1735 8 view .LVU2196
 6283 0044 4345     		cmp	r3, r8
 6284 0046 40F01481 		bne	.L578
 6285              	.LBB66:
1736:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 6286              		.loc 1 1736 3 is_stmt 1 view .LVU2197
1736:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 6287              		.loc 1 1736 25 is_stmt 0 view .LVU2198
 6288 004a E389     		ldrh	r3, [r4, #14]
 6289 004c 9BB2     		uxth	r3, r3
1736:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 6290              		.loc 1 1736 6 view .LVU2199
 6291 004e CBB1     		cbz	r3, .L546
1737:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 6292              		.loc 1 1737 4 is_stmt 1 view .LVU2200
 6293 0050 6420     		movs	r0, #100
 6294 0052 FFF7FEFF 		bl	cc2400_strobe
 6295              	.LVL587:
1738:bluetooth_rxtx.c **** 
 6296              		.loc 1 1738 4 view .LVU2201
 6297              	.L547:
1738:bluetooth_rxtx.c **** 
 6298              		.loc 1 1738 39 discriminator 1 view .LVU2202
1738:bluetooth_rxtx.c **** 
 6299              		.loc 1 1738 10 discriminator 1 view .LVU2203
1738:bluetooth_rxtx.c **** 
 6300              		.loc 1 1738 12 is_stmt 0 discriminator 1 view .LVU2204
 6301 0056 FFF7FEFF 		bl	cc2400_status
 6302              	.LVL588:
1738:bluetooth_rxtx.c **** 
 6303              		.loc 1 1738 10 discriminator 1 view .LVU2205
 6304 005a 4707     		lsls	r7, r0, #29
 6305 005c FBD4     		bmi	.L547
1741:bluetooth_rxtx.c **** 
 6306              		.loc 1 1741 4 is_stmt 1 view .LVU2206
 6307 005e B5F84C10 		ldrh	r1, [r5, #76]
 6308 0062 0220     		movs	r0, #2
 6309 0064 0139     		subs	r1, r1, #1
 6310 0066 89B2     		uxth	r1, r1
 6311 0068 FFF7FEFF 		bl	cc2400_set
 6312              	.LVL589:
1744:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 6313              		.loc 1 1744 4 view .LVU2207
 6314 006c 6120     		movs	r0, #97
 6315 006e FFF7FEFF 		bl	cc2400_strobe
ARM GAS  /tmp/ccwF1FQu.s 			page 185


 6316              	.LVL590:
1745:bluetooth_rxtx.c **** 
 6317              		.loc 1 1745 4 view .LVU2208
 6318              	.L548:
1745:bluetooth_rxtx.c **** 
 6319              		.loc 1 1745 40 discriminator 1 view .LVU2209
1745:bluetooth_rxtx.c **** 
 6320              		.loc 1 1745 10 discriminator 1 view .LVU2210
1745:bluetooth_rxtx.c **** 
 6321              		.loc 1 1745 13 is_stmt 0 discriminator 1 view .LVU2211
 6322 0072 FFF7FEFF 		bl	cc2400_status
 6323              	.LVL591:
1745:bluetooth_rxtx.c **** 
 6324              		.loc 1 1745 10 discriminator 1 view .LVU2212
 6325 0076 4607     		lsls	r6, r0, #29
 6326 0078 FBD5     		bpl	.L548
1748:bluetooth_rxtx.c **** 
 6327              		.loc 1 1748 4 is_stmt 1 view .LVU2213
 6328 007a 6220     		movs	r0, #98
 6329 007c FFF7FEFF 		bl	cc2400_strobe
 6330              	.LVL592:
1750:bluetooth_rxtx.c **** 		}
 6331              		.loc 1 1750 4 view .LVU2214
1750:bluetooth_rxtx.c **** 		}
 6332              		.loc 1 1750 22 is_stmt 0 view .LVU2215
 6333 0080 0023     		movs	r3, #0
 6334 0082 E381     		strh	r3, [r4, #14]	@ movhi
 6335              	.L546:
1753:bluetooth_rxtx.c **** 
 6336              		.loc 1 1753 3 is_stmt 1 view .LVU2216
 6337 0084 1023     		movs	r3, #16
 6338 0086 019A     		ldr	r2, [sp, #4]
1757:bluetooth_rxtx.c **** 			;
 6339              		.loc 1 1757 17 is_stmt 0 view .LVU2217
 6340 0088 DFF87CB2 		ldr	fp, .L612+76
1753:bluetooth_rxtx.c **** 
 6341              		.loc 1 1753 3 view .LVU2218
 6342 008c 1360     		str	r3, [r2]
1756:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0) && (do_hop == 0) && requested_mode == active_mode)
 6343              		.loc 1 1756 3 is_stmt 1 view .LVU2219
 6344 008e FFF7FEFF 		bl	rssi_reset
 6345              	.LVL593:
1757:bluetooth_rxtx.c **** 			;
 6346              		.loc 1 1757 3 view .LVU2220
1757:bluetooth_rxtx.c **** 			;
 6347              		.loc 1 1757 34 is_stmt 0 view .LVU2221
 6348 0092 8E4A     		ldr	r2, .L612+16
 6349              	.L550:
1758:bluetooth_rxtx.c **** 
 6350              		.loc 1 1758 4 is_stmt 1 discriminator 4 view .LVU2222
1757:bluetooth_rxtx.c **** 			;
 6351              		.loc 1 1757 9 discriminator 4 view .LVU2223
1757:bluetooth_rxtx.c **** 			;
 6352              		.loc 1 1757 17 is_stmt 0 discriminator 4 view .LVU2224
 6353 0094 DBF80030 		ldr	r3, [fp]
1757:bluetooth_rxtx.c **** 			;
 6354              		.loc 1 1757 9 discriminator 4 view .LVU2225
ARM GAS  /tmp/ccwF1FQu.s 			page 186


 6355 0098 33B9     		cbnz	r3, .L549
1757:bluetooth_rxtx.c **** 			;
 6356              		.loc 1 1757 34 discriminator 1 view .LVU2226
 6357 009a 1368     		ldr	r3, [r2]
1757:bluetooth_rxtx.c **** 			;
 6358              		.loc 1 1757 23 discriminator 1 view .LVU2227
 6359 009c 23B9     		cbnz	r3, .L549
1757:bluetooth_rxtx.c **** 			;
 6360              		.loc 1 1757 51 discriminator 2 view .LVU2228
 6361 009e E37A     		ldrb	r3, [r4, #11]	@ zero_extendqisi2
1757:bluetooth_rxtx.c **** 			;
 6362              		.loc 1 1757 40 discriminator 2 view .LVU2229
 6363 00a0 13B9     		cbnz	r3, .L549
1757:bluetooth_rxtx.c **** 			;
 6364              		.loc 1 1757 75 discriminator 3 view .LVU2230
 6365 00a2 A37C     		ldrb	r3, [r4, #18]	@ zero_extendqisi2
1757:bluetooth_rxtx.c **** 			;
 6366              		.loc 1 1757 57 discriminator 3 view .LVU2231
 6367 00a4 4345     		cmp	r3, r8
 6368 00a6 F5D0     		beq	.L550
 6369              	.L549:
1760:bluetooth_rxtx.c **** 		rssi_min = rssi_max = rssi;
 6370              		.loc 1 1760 3 is_stmt 1 view .LVU2232
1760:bluetooth_rxtx.c **** 		rssi_min = rssi_max = rssi;
 6371              		.loc 1 1760 19 is_stmt 0 view .LVU2233
 6372 00a8 0620     		movs	r0, #6
 6373 00aa FFF7FEFF 		bl	cc2400_get
 6374              	.LVL594:
1761:bluetooth_rxtx.c **** 
 6375              		.loc 1 1761 23 view .LVU2234
 6376 00ae 884B     		ldr	r3, .L612+20
1760:bluetooth_rxtx.c **** 		rssi_min = rssi_max = rssi;
 6377              		.loc 1 1760 8 view .LVU2235
 6378 00b0 40F30720 		sbfx	r0, r0, #8, #8
 6379              	.LVL595:
1761:bluetooth_rxtx.c **** 
 6380              		.loc 1 1761 3 is_stmt 1 view .LVU2236
1761:bluetooth_rxtx.c **** 
 6381              		.loc 1 1761 23 is_stmt 0 view .LVU2237
 6382 00b4 1870     		strb	r0, [r3]
1761:bluetooth_rxtx.c **** 
 6383              		.loc 1 1761 12 view .LVU2238
 6384 00b6 874B     		ldr	r3, .L612+24
 6385 00b8 1870     		strb	r0, [r3]
1763:bluetooth_rxtx.c **** 			goto cleanup;
 6386              		.loc 1 1763 3 is_stmt 1 view .LVU2239
1763:bluetooth_rxtx.c **** 			goto cleanup;
 6387              		.loc 1 1763 22 is_stmt 0 view .LVU2240
 6388 00ba A37C     		ldrb	r3, [r4, #18]	@ zero_extendqisi2
1763:bluetooth_rxtx.c **** 			goto cleanup;
 6389              		.loc 1 1763 6 view .LVU2241
 6390 00bc 4345     		cmp	r3, r8
 6391 00be 40F0D880 		bne	.L578
1767:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 6392              		.loc 1 1767 3 is_stmt 1 view .LVU2242
1767:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 6393              		.loc 1 1767 7 is_stmt 0 view .LVU2243
ARM GAS  /tmp/ccwF1FQu.s 			page 187


 6394 00c2 824F     		ldr	r7, .L612+16
 6395 00c4 3B68     		ldr	r3, [r7]
1767:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 6396              		.loc 1 1767 6 view .LVU2244
 6397 00c6 1BB1     		cbz	r3, .L552
1768:bluetooth_rxtx.c **** 		}
 6398              		.loc 1 1768 4 is_stmt 1 view .LVU2245
1768:bluetooth_rxtx.c **** 		}
 6399              		.loc 1 1768 11 is_stmt 0 view .LVU2246
 6400 00c8 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 6401 00ca 43F00203 		orr	r3, r3, #2
 6402 00ce 6370     		strb	r3, [r4, #1]
 6403              	.L552:
1771:bluetooth_rxtx.c **** 			goto rx_flush;
 6404              		.loc 1 1771 3 is_stmt 1 view .LVU2247
1771:bluetooth_rxtx.c **** 			goto rx_flush;
 6405              		.loc 1 1771 7 is_stmt 0 view .LVU2248
 6406 00d0 E37A     		ldrb	r3, [r4, #11]	@ zero_extendqisi2
1771:bluetooth_rxtx.c **** 			goto rx_flush;
 6407              		.loc 1 1771 6 view .LVU2249
 6408 00d2 03F0FF01 		and	r1, r3, #255
 6409 00d6 002B     		cmp	r3, #0
 6410 00d8 40F09380 		bne	.L554
1775:bluetooth_rxtx.c **** 			continue;
 6411              		.loc 1 1775 3 is_stmt 1 view .LVU2250
1775:bluetooth_rxtx.c **** 			continue;
 6412              		.loc 1 1775 7 is_stmt 0 view .LVU2251
 6413 00dc DBF80030 		ldr	r3, [fp]
1775:bluetooth_rxtx.c **** 			continue;
 6414              		.loc 1 1775 6 view .LVU2252
 6415 00e0 002B     		cmp	r3, #0
 6416 00e2 AED0     		beq	.L545
1781:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
 6417              		.loc 1 1781 3 is_stmt 1 view .LVU2253
1781:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
 6418              		.loc 1 1781 12 is_stmt 0 view .LVU2254
 6419 00e4 4FF03009 		mov	r9, #48
 6420 00e8 06A8     		add	r0, sp, #24
 6421              	.LVL596:
1781:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
 6422              		.loc 1 1781 12 view .LVU2255
 6423 00ea 4A46     		mov	r2, r9
 6424 00ec FFF7FEFF 		bl	memset
 6425              	.LVL597:
1782:bluetooth_rxtx.c **** 		packet[0] = le.access_address;
 6426              		.loc 1 1782 3 is_stmt 1 view .LVU2256
1783:bluetooth_rxtx.c **** 
 6427              		.loc 1 1783 3 view .LVU2257
1785:bluetooth_rxtx.c **** 		for (i = 0; i < 4; i+= 4) {
 6428              		.loc 1 1785 41 is_stmt 0 view .LVU2258
 6429 00f0 B5F84C00 		ldrh	r0, [r5, #76]
1783:bluetooth_rxtx.c **** 
 6430              		.loc 1 1783 13 view .LVU2259
 6431 00f4 2B68     		ldr	r3, [r5]
1785:bluetooth_rxtx.c **** 		for (i = 0; i < 4; i+= 4) {
 6432              		.loc 1 1785 41 view .LVU2260
 6433 00f6 80B2     		uxth	r0, r0
ARM GAS  /tmp/ccwF1FQu.s 			page 188


1783:bluetooth_rxtx.c **** 
 6434              		.loc 1 1783 13 view .LVU2261
 6435 00f8 0593     		str	r3, [sp, #20]
1785:bluetooth_rxtx.c **** 		for (i = 0; i < 4; i+= 4) {
 6436              		.loc 1 1785 3 is_stmt 1 view .LVU2262
1785:bluetooth_rxtx.c **** 		for (i = 0; i < 4; i+= 4) {
 6437              		.loc 1 1785 41 is_stmt 0 view .LVU2263
 6438 00fa FFF7FEFF 		bl	btle_channel_index
 6439              	.LVL598:
1785:bluetooth_rxtx.c **** 		for (i = 0; i < 4; i+= 4) {
 6440              		.loc 1 1785 19 view .LVU2264
 6441 00fe 09FB00F9 		mul	r9, r9, r0
 6442 0102 754E     		ldr	r6, .L612+28
 6443 0104 06EB0903 		add	r3, r6, r9
 6444 0108 0293     		str	r3, [sp, #8]
 6445              	.LVL599:
1786:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 6446              		.loc 1 1786 3 is_stmt 1 view .LVU2265
1786:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 6447              		.loc 1 1786 15 view .LVU2266
 6448              	.LBB59:
1787:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 6449              		.loc 1 1787 4 view .LVU2267
1787:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 6450              		.loc 1 1787 23 is_stmt 0 view .LVU2268
 6451 010a 744B     		ldr	r3, .L612+32
 6452              	.LVL600:
1787:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 6453              		.loc 1 1787 23 view .LVU2269
 6454 010c 93F800C0 		ldrb	ip, [r3]	@ zero_extendqisi2
1788:bluetooth_rxtx.c **** 					   | rxbuf1[i+2] << 8
 6455              		.loc 1 1788 17 view .LVU2270
 6456 0110 5978     		ldrb	r1, [r3, #1]	@ zero_extendqisi2
1789:bluetooth_rxtx.c **** 					   | rxbuf1[i+3] << 0;
 6457              		.loc 1 1789 17 view .LVU2271
 6458 0112 9A78     		ldrb	r2, [r3, #2]	@ zero_extendqisi2
1788:bluetooth_rxtx.c **** 					   | rxbuf1[i+2] << 8
 6459              		.loc 1 1788 23 view .LVU2272
 6460 0114 0904     		lsls	r1, r1, #16
1790:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 6461              		.loc 1 1790 17 view .LVU2273
 6462 0116 D878     		ldrb	r0, [r3, #3]	@ zero_extendqisi2
 6463              	.LVL601:
1791:bluetooth_rxtx.c **** 		}
 6464              		.loc 1 1791 4 is_stmt 1 view .LVU2274
1788:bluetooth_rxtx.c **** 					   | rxbuf1[i+2] << 8
 6465              		.loc 1 1788 9 is_stmt 0 view .LVU2275
 6466 0118 41EA0C61 		orr	r1, r1, ip, lsl #24
1790:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 6467              		.loc 1 1790 9 view .LVU2276
 6468 011c 0843     		orrs	r0, r0, r1
1791:bluetooth_rxtx.c **** 		}
 6469              		.loc 1 1791 20 view .LVU2277
 6470 011e 40EA0220 		orr	r0, r0, r2, lsl #8
 6471 0122 FFF7FEFF 		bl	rbit
 6472              	.LVL602:
1791:bluetooth_rxtx.c **** 		}
ARM GAS  /tmp/ccwF1FQu.s 			page 189


 6473              		.loc 1 1791 28 view .LVU2278
 6474 0126 56F80960 		ldr	r6, [r6, r9]
 6475 012a 4640     		eors	r6, r6, r0
1791:bluetooth_rxtx.c **** 		}
 6476              		.loc 1 1791 18 view .LVU2279
 6477 012c 0696     		str	r6, [sp, #24]
 6478              	.LBE59:
1786:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 6479              		.loc 1 1786 22 is_stmt 1 view .LVU2280
 6480              	.LVL603:
1786:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 6481              		.loc 1 1786 15 view .LVU2281
1794:bluetooth_rxtx.c **** 		if (len > 39)
 6482              		.loc 1 1794 3 view .LVU2282
 6483 012e C6F30526 		ubfx	r6, r6, #8, #6
1794:bluetooth_rxtx.c **** 		if (len > 39)
 6484              		.loc 1 1794 32 is_stmt 0 view .LVU2283
 6485 0132 B21C     		adds	r2, r6, #2
 6486              	.LVL604:
1795:bluetooth_rxtx.c **** 			goto rx_flush;
 6487              		.loc 1 1795 3 is_stmt 1 view .LVU2284
1795:bluetooth_rxtx.c **** 			goto rx_flush;
 6488              		.loc 1 1795 6 is_stmt 0 view .LVU2285
 6489 0134 272A     		cmp	r2, #39
 6490 0136 64DC     		bgt	.L554
1800:bluetooth_rxtx.c **** 		if (total_transfers < 11) {
 6491              		.loc 1 1800 3 is_stmt 1 view .LVU2286
1800:bluetooth_rxtx.c **** 		if (total_transfers < 11) {
 6492              		.loc 1 1800 45 is_stmt 0 view .LVU2287
 6493 0138 06F10809 		add	r9, r6, #8
 6494              	.LVL605:
1801:bluetooth_rxtx.c **** 			while (DMACC0DestAddr < (uint32_t)rxbuf1 + 4 * total_transfers && rx_err == 0)
 6495              		.loc 1 1801 3 is_stmt 1 view .LVU2288
1801:bluetooth_rxtx.c **** 			while (DMACC0DestAddr < (uint32_t)rxbuf1 + 4 * total_transfers && rx_err == 0)
 6496              		.loc 1 1801 6 is_stmt 0 view .LVU2289
 6497 013c B9F12B0F 		cmp	r9, #43
 6498 0140 664B     		ldr	r3, .L612+32
 6499 0142 07D9     		bls	.L611
1805:bluetooth_rxtx.c **** 				;
 6500              		.loc 1 1805 11 view .LVU2290
 6501 0144 6649     		ldr	r1, .L612+36
 6502              	.L558:
1806:bluetooth_rxtx.c **** 		}
 6503              		.loc 1 1806 5 is_stmt 1 discriminator 2 view .LVU2291
1805:bluetooth_rxtx.c **** 				;
 6504              		.loc 1 1805 10 discriminator 2 view .LVU2292
1805:bluetooth_rxtx.c **** 				;
 6505              		.loc 1 1805 11 is_stmt 0 discriminator 2 view .LVU2293
 6506 0146 0B68     		ldr	r3, [r1]
1805:bluetooth_rxtx.c **** 				;
 6507              		.loc 1 1805 10 discriminator 2 view .LVU2294
 6508 0148 D807     		lsls	r0, r3, #31
 6509 014a 0DD5     		bpl	.L559
1805:bluetooth_rxtx.c **** 				;
 6510              		.loc 1 1805 51 discriminator 1 view .LVU2295
 6511 014c 3B68     		ldr	r3, [r7]
1805:bluetooth_rxtx.c **** 				;
ARM GAS  /tmp/ccwF1FQu.s 			page 190


 6512              		.loc 1 1805 41 discriminator 1 view .LVU2296
 6513 014e 002B     		cmp	r3, #0
 6514 0150 F9D0     		beq	.L558
 6515 0152 09E0     		b	.L559
 6516              	.L611:
1802:bluetooth_rxtx.c **** 				;
 6517              		.loc 1 1802 49 view .LVU2297
 6518 0154 29F00301 		bic	r1, r9, #3
1802:bluetooth_rxtx.c **** 				;
 6519              		.loc 1 1802 11 view .LVU2298
 6520 0158 6248     		ldr	r0, .L612+40
1802:bluetooth_rxtx.c **** 				;
 6521              		.loc 1 1802 45 view .LVU2299
 6522 015a 0B44     		add	r3, r3, r1
 6523              	.L560:
1803:bluetooth_rxtx.c **** 		} else { // max transfers? just wait till DMA's done
 6524              		.loc 1 1803 5 is_stmt 1 discriminator 2 view .LVU2300
1802:bluetooth_rxtx.c **** 				;
 6525              		.loc 1 1802 10 discriminator 2 view .LVU2301
1802:bluetooth_rxtx.c **** 				;
 6526              		.loc 1 1802 11 is_stmt 0 discriminator 2 view .LVU2302
 6527 015c 0168     		ldr	r1, [r0]
1802:bluetooth_rxtx.c **** 				;
 6528              		.loc 1 1802 10 discriminator 2 view .LVU2303
 6529 015e 9942     		cmp	r1, r3
 6530 0160 02D2     		bcs	.L559
1802:bluetooth_rxtx.c **** 				;
 6531              		.loc 1 1802 77 discriminator 1 view .LVU2304
 6532 0162 3968     		ldr	r1, [r7]
1802:bluetooth_rxtx.c **** 				;
 6533              		.loc 1 1802 67 discriminator 1 view .LVU2305
 6534 0164 0029     		cmp	r1, #0
 6535 0166 F9D0     		beq	.L560
 6536              	.L559:
1814:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 6537              		.loc 1 1814 10 view .LVU2306
 6538 0168 0427     		movs	r7, #4
1808:bluetooth_rxtx.c **** 
 6539              		.loc 1 1808 17 view .LVU2307
 6540 016a DAF80030 		ldr	r3, [r10]
 6541 016e 0392     		str	r2, [sp, #12]
1808:bluetooth_rxtx.c **** 
 6542              		.loc 1 1808 3 is_stmt 1 view .LVU2308
1808:bluetooth_rxtx.c **** 
 6543              		.loc 1 1808 17 is_stmt 0 view .LVU2309
 6544 0170 23F00103 		bic	r3, r3, #1
1811:bluetooth_rxtx.c **** 
 6545              		.loc 1 1811 3 view .LVU2310
 6546 0174 6120     		movs	r0, #97
1808:bluetooth_rxtx.c **** 
 6547              		.loc 1 1808 17 view .LVU2311
 6548 0176 CAF80030 		str	r3, [r10]
1811:bluetooth_rxtx.c **** 
 6549              		.loc 1 1811 3 is_stmt 1 view .LVU2312
 6550 017a FFF7FEFF 		bl	cc2400_strobe
 6551              	.LVL606:
1814:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
ARM GAS  /tmp/ccwF1FQu.s 			page 191


 6552              		.loc 1 1814 3 view .LVU2313
1814:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 6553              		.loc 1 1814 15 view .LVU2314
 6554              	.LBB60:
1815:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 6555              		.loc 1 1815 23 is_stmt 0 view .LVU2315
 6556 017e 5749     		ldr	r1, .L612+32
 6557 0180 039A     		ldr	r2, [sp, #12]
 6558              	.LVL607:
 6559              	.L561:
1815:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 6560              		.loc 1 1815 23 view .LVU2316
 6561 0182 7B1C     		adds	r3, r7, #1
1815:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 6562              		.loc 1 1815 23 discriminator 3 view .LVU2317
 6563 0184 11F807E0 		ldrb	lr, [r1, r7]	@ zero_extendqisi2
1816:bluetooth_rxtx.c **** 					   | rxbuf1[i+2] << 8
 6564              		.loc 1 1816 17 discriminator 3 view .LVU2318
 6565 0188 C85C     		ldrb	r0, [r1, r3]	@ zero_extendqisi2
 6566 018a BB1C     		adds	r3, r7, #2
1817:bluetooth_rxtx.c **** 					   | rxbuf1[i+3] << 0;
 6567              		.loc 1 1817 17 discriminator 3 view .LVU2319
 6568 018c 11F803C0 		ldrb	ip, [r1, r3]	@ zero_extendqisi2
 6569 0190 FB1C     		adds	r3, r7, #3
1818:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 6570              		.loc 1 1818 17 discriminator 3 view .LVU2320
 6571 0192 CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 6572 0194 0392     		str	r2, [sp, #12]
 6573              	.LVL608:
1815:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 6574              		.loc 1 1815 4 is_stmt 1 discriminator 3 view .LVU2321
1819:bluetooth_rxtx.c **** 		}
 6575              		.loc 1 1819 4 discriminator 3 view .LVU2322
1818:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 6576              		.loc 1 1818 9 is_stmt 0 discriminator 3 view .LVU2323
 6577 0196 43EA0E63 		orr	r3, r3, lr, lsl #24
 6578              	.LVL609:
1818:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 6579              		.loc 1 1818 9 discriminator 3 view .LVU2324
 6580 019a 43EA0040 		orr	r0, r3, r0, lsl #16
1819:bluetooth_rxtx.c **** 		}
 6581              		.loc 1 1819 20 discriminator 3 view .LVU2325
 6582 019e 40EA0C20 		orr	r0, r0, ip, lsl #8
 6583 01a2 FFF7FEFF 		bl	rbit
 6584              	.LVL610:
1819:bluetooth_rxtx.c **** 		}
 6585              		.loc 1 1819 36 discriminator 3 view .LVU2326
 6586 01a6 BB10     		asrs	r3, r7, #2
1819:bluetooth_rxtx.c **** 		}
 6587              		.loc 1 1819 18 discriminator 3 view .LVU2327
 6588 01a8 12AA     		add	r2, sp, #72
 6589 01aa 02EB830C 		add	ip, r2, r3, lsl #2
1819:bluetooth_rxtx.c **** 		}
 6590              		.loc 1 1819 28 discriminator 3 view .LVU2328
 6591 01ae 029A     		ldr	r2, [sp, #8]
 6592              	.LBE60:
1814:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
ARM GAS  /tmp/ccwF1FQu.s 			page 192


 6593              		.loc 1 1814 25 discriminator 3 view .LVU2329
 6594 01b0 0437     		adds	r7, r7, #4
 6595              	.LVL611:
 6596              	.LBB61:
1819:bluetooth_rxtx.c **** 		}
 6597              		.loc 1 1819 28 discriminator 3 view .LVU2330
 6598 01b2 52F82330 		ldr	r3, [r2, r3, lsl #2]
 6599              	.LBE61:
1814:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 6600              		.loc 1 1814 3 discriminator 3 view .LVU2331
 6601 01b6 2C2F     		cmp	r7, #44
 6602              	.LBB62:
1819:bluetooth_rxtx.c **** 		}
 6603              		.loc 1 1819 28 discriminator 3 view .LVU2332
 6604 01b8 83EA0003 		eor	r3, r3, r0
 6605              	.LBE62:
1814:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 6606              		.loc 1 1814 3 discriminator 3 view .LVU2333
 6607 01bc 4749     		ldr	r1, .L612+32
 6608 01be 039A     		ldr	r2, [sp, #12]
 6609              	.LBB63:
1819:bluetooth_rxtx.c **** 		}
 6610              		.loc 1 1819 18 discriminator 3 view .LVU2334
 6611 01c0 4CF8303C 		str	r3, [ip, #-48]
 6612              	.LBE63:
1814:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 6613              		.loc 1 1814 23 is_stmt 1 discriminator 3 view .LVU2335
 6614              	.LVL612:
1814:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 6615              		.loc 1 1814 15 discriminator 3 view .LVU2336
1814:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 6616              		.loc 1 1814 3 is_stmt 0 discriminator 3 view .LVU2337
 6617 01c4 DDD1     		bne	.L561
1822:bluetooth_rxtx.c **** 			u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, p + 4, len);
 6618              		.loc 1 1822 3 is_stmt 1 view .LVU2338
1822:bluetooth_rxtx.c **** 			u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, p + 4, len);
 6619              		.loc 1 1822 6 is_stmt 0 view .LVU2339
 6620 01c6 2B69     		ldr	r3, [r5, #16]
 6621 01c8 002B     		cmp	r3, #0
 6622 01ca 5FD1     		bne	.L562
 6623              	.LVL613:
 6624              	.L563:
1832:bluetooth_rxtx.c **** 		packet_cb((uint8_t *)packet);
 6625              		.loc 1 1832 3 is_stmt 1 view .LVU2340
 6626 01cc 1022     		movs	r2, #16
1836:bluetooth_rxtx.c **** 		enqueue(LE_PACKET, (uint8_t *)packet);
 6627              		.loc 1 1836 9 is_stmt 0 view .LVU2341
 6628 01ce 4FF08076 		mov	r6, #16777216
1832:bluetooth_rxtx.c **** 		packet_cb((uint8_t *)packet);
 6629              		.loc 1 1832 3 view .LVU2342
 6630 01d2 454B     		ldr	r3, .L612+44
1833:bluetooth_rxtx.c **** 
 6631              		.loc 1 1833 3 view .LVU2343
 6632 01d4 05A8     		add	r0, sp, #20
 6633              	.LVL614:
1832:bluetooth_rxtx.c **** 		packet_cb((uint8_t *)packet);
 6634              		.loc 1 1832 3 view .LVU2344
ARM GAS  /tmp/ccwF1FQu.s 			page 193


 6635 01d6 1A60     		str	r2, [r3]
1833:bluetooth_rxtx.c **** 
 6636              		.loc 1 1833 3 is_stmt 1 view .LVU2345
 6637 01d8 A369     		ldr	r3, [r4, #24]
 6638 01da 9847     		blx	r3
 6639              	.LVL615:
1836:bluetooth_rxtx.c **** 		enqueue(LE_PACKET, (uint8_t *)packet);
 6640              		.loc 1 1836 3 view .LVU2346
1836:bluetooth_rxtx.c **** 		enqueue(LE_PACKET, (uint8_t *)packet);
 6641              		.loc 1 1836 9 is_stmt 0 view .LVU2347
 6642 01dc 434B     		ldr	r3, .L612+48
1837:bluetooth_rxtx.c **** 		ISER0 = ISER0_ISE_USB;
 6643              		.loc 1 1837 3 view .LVU2348
 6644 01de 05A9     		add	r1, sp, #20
 6645              	.LVL616:
1836:bluetooth_rxtx.c **** 		enqueue(LE_PACKET, (uint8_t *)packet);
 6646              		.loc 1 1836 9 view .LVU2349
 6647 01e0 1E60     		str	r6, [r3]
1837:bluetooth_rxtx.c **** 		ISER0 = ISER0_ISE_USB;
 6648              		.loc 1 1837 3 is_stmt 1 view .LVU2350
 6649 01e2 0120     		movs	r0, #1
 6650 01e4 FFF7FEFF 		bl	enqueue
 6651              	.LVL617:
1838:bluetooth_rxtx.c **** 
 6652              		.loc 1 1838 3 view .LVU2351
1840:bluetooth_rxtx.c **** 
 6653              		.loc 1 1840 20 is_stmt 0 view .LVU2352
 6654 01e8 40F63541 		movw	r1, #3125
1838:bluetooth_rxtx.c **** 
 6655              		.loc 1 1838 9 view .LVU2353
 6656 01ec 354B     		ldr	r3, .L612+8
1840:bluetooth_rxtx.c **** 
 6657              		.loc 1 1840 20 view .LVU2354
 6658 01ee 404A     		ldr	r2, .L612+52
1838:bluetooth_rxtx.c **** 
 6659              		.loc 1 1838 9 view .LVU2355
 6660 01f0 1E60     		str	r6, [r3]
1840:bluetooth_rxtx.c **** 
 6661              		.loc 1 1840 3 is_stmt 1 view .LVU2356
1840:bluetooth_rxtx.c **** 
 6662              		.loc 1 1840 20 is_stmt 0 view .LVU2357
 6663 01f2 404B     		ldr	r3, .L612+56
 6664 01f4 1B68     		ldr	r3, [r3]
 6665 01f6 1268     		ldr	r2, [r2]
 6666 01f8 C3F31303 		ubfx	r3, r3, #0, #20
 6667 01fc 01FB0323 		mla	r3, r1, r3, r2
1840:bluetooth_rxtx.c **** 
 6668              		.loc 1 1840 18 view .LVU2358
 6669 0200 AB64     		str	r3, [r5, #72]
 6670              	.LVL618:
 6671              	.L554:
1844:bluetooth_rxtx.c **** 
 6672              		.loc 1 1844 3 is_stmt 1 view .LVU2359
 6673 0202 6120     		movs	r0, #97
 6674 0204 FFF7FEFF 		bl	cc2400_strobe
 6675              	.LVL619:
1847:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
ARM GAS  /tmp/ccwF1FQu.s 			page 194


 6676              		.loc 1 1847 3 view .LVU2360
1847:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 6677              		.loc 1 1847 17 is_stmt 0 view .LVU2361
 6678 0208 DAF80030 		ldr	r3, [r10]
1848:bluetooth_rxtx.c **** 			u8 tmp = (u8)DIO_SSP_DR;
 6679              		.loc 1 1848 10 view .LVU2362
 6680 020c 3A4A     		ldr	r2, .L612+60
1847:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 6681              		.loc 1 1847 17 view .LVU2363
 6682 020e 23F00103 		bic	r3, r3, #1
 6683 0212 CAF80030 		str	r3, [r10]
1848:bluetooth_rxtx.c **** 			u8 tmp = (u8)DIO_SSP_DR;
 6684              		.loc 1 1848 3 is_stmt 1 view .LVU2364
 6685              	.L564:
1848:bluetooth_rxtx.c **** 			u8 tmp = (u8)DIO_SSP_DR;
 6686              		.loc 1 1848 9 view .LVU2365
1848:bluetooth_rxtx.c **** 			u8 tmp = (u8)DIO_SSP_DR;
 6687              		.loc 1 1848 10 is_stmt 0 view .LVU2366
 6688 0216 1368     		ldr	r3, [r2]
1848:bluetooth_rxtx.c **** 			u8 tmp = (u8)DIO_SSP_DR;
 6689              		.loc 1 1848 9 view .LVU2367
 6690 0218 5907     		lsls	r1, r3, #29
 6691 021a 4BD4     		bmi	.L565
1853:bluetooth_rxtx.c **** 		if (now < le.last_packet)
 6692              		.loc 1 1853 3 is_stmt 1 view .LVU2368
1853:bluetooth_rxtx.c **** 		if (now < le.last_packet)
 6693              		.loc 1 1853 7 is_stmt 0 view .LVU2369
 6694 021c 40F63541 		movw	r1, #3125
1853:bluetooth_rxtx.c **** 		if (now < le.last_packet)
 6695              		.loc 1 1853 13 view .LVU2370
 6696 0220 344B     		ldr	r3, .L612+56
 6697 0222 334A     		ldr	r2, .L612+52
 6698 0224 1B68     		ldr	r3, [r3]
 6699 0226 1268     		ldr	r2, [r2]
 6700 0228 C3F31303 		ubfx	r3, r3, #0, #20
1853:bluetooth_rxtx.c **** 		if (now < le.last_packet)
 6701              		.loc 1 1853 7 view .LVU2371
 6702 022c 01FB0323 		mla	r3, r1, r3, r2
 6703              	.LVL620:
1854:bluetooth_rxtx.c **** 			now += 3276800000; // handle rollover
 6704              		.loc 1 1854 3 is_stmt 1 view .LVU2372
1854:bluetooth_rxtx.c **** 			now += 3276800000; // handle rollover
 6705              		.loc 1 1854 15 is_stmt 0 view .LVU2373
 6706 0230 A96C     		ldr	r1, [r5, #72]
1857:bluetooth_rxtx.c **** 			&& (now - le.last_packet > 50000000))
 6707              		.loc 1 1857 38 view .LVU2374
 6708 0232 2A7D     		ldrb	r2, [r5, #20]	@ zero_extendqisi2
1854:bluetooth_rxtx.c **** 			now += 3276800000; // handle rollover
 6709              		.loc 1 1854 6 view .LVU2375
 6710 0234 9942     		cmp	r1, r3
1855:bluetooth_rxtx.c **** 		if  ( // timeout
 6711              		.loc 1 1855 4 is_stmt 1 view .LVU2376
1855:bluetooth_rxtx.c **** 		if  ( // timeout
 6712              		.loc 1 1855 8 is_stmt 0 view .LVU2377
 6713 0236 88BF     		it	hi
 6714 0238 03F14343 		addhi	r3, r3, #-1023410176
 6715              	.LVL621:
ARM GAS  /tmp/ccwF1FQu.s 			page 195


1856:bluetooth_rxtx.c **** 			((le.link_state == LINK_CONNECTED || le.link_state == LINK_CONN_PENDING)
 6716              		.loc 1 1856 7 view .LVU2378
 6717 023c A2F10202 		sub	r2, r2, #2
1855:bluetooth_rxtx.c **** 		if  ( // timeout
 6718              		.loc 1 1855 8 view .LVU2379
 6719 0240 88BF     		it	hi
 6720 0242 03F5A003 		addhi	r3, r3, #5242880
 6721              	.LVL622:
1856:bluetooth_rxtx.c **** 			((le.link_state == LINK_CONNECTED || le.link_state == LINK_CONN_PENDING)
 6722              		.loc 1 1856 3 is_stmt 1 view .LVU2380
1856:bluetooth_rxtx.c **** 			((le.link_state == LINK_CONNECTED || le.link_state == LINK_CONN_PENDING)
 6723              		.loc 1 1856 7 is_stmt 0 view .LVU2381
 6724 0246 012A     		cmp	r2, #1
 6725 0248 03D8     		bhi	.L567
1858:bluetooth_rxtx.c **** 			// jam finished
 6726              		.loc 1 1858 4 view .LVU2382
 6727 024a 2C4A     		ldr	r2, .L612+64
1858:bluetooth_rxtx.c **** 			// jam finished
 6728              		.loc 1 1858 12 view .LVU2383
 6729 024c 5B1A     		subs	r3, r3, r1
 6730              	.LVL623:
1858:bluetooth_rxtx.c **** 			// jam finished
 6731              		.loc 1 1858 4 view .LVU2384
 6732 024e 9342     		cmp	r3, r2
 6733 0250 02D8     		bhi	.L568
 6734              	.L567:
1860:bluetooth_rxtx.c **** 			)
 6735              		.loc 1 1860 4 view .LVU2385
 6736 0252 E369     		ldr	r3, [r4, #28]
 6737 0254 012B     		cmp	r3, #1
 6738 0256 70D1     		bne	.L569
 6739              	.L568:
1863:bluetooth_rxtx.c **** 			le_jam_count = 0;
 6740              		.loc 1 1863 4 is_stmt 1 view .LVU2386
 6741 0258 FFF7FEFF 		bl	reset_le
 6742              	.LVL624:
1864:bluetooth_rxtx.c **** 			TXLED_CLR;
 6743              		.loc 1 1864 4 view .LVU2387
1865:bluetooth_rxtx.c **** 
 6744              		.loc 1 1865 4 is_stmt 0 view .LVU2388
 6745 025c 4FF48072 		mov	r2, #256
1864:bluetooth_rxtx.c **** 			TXLED_CLR;
 6746              		.loc 1 1864 17 view .LVU2389
 6747 0260 0023     		movs	r3, #0
1865:bluetooth_rxtx.c **** 
 6748              		.loc 1 1865 4 view .LVU2390
 6749 0262 0199     		ldr	r1, [sp, #4]
1864:bluetooth_rxtx.c **** 			TXLED_CLR;
 6750              		.loc 1 1864 17 view .LVU2391
 6751 0264 E361     		str	r3, [r4, #28]
1865:bluetooth_rxtx.c **** 
 6752              		.loc 1 1865 4 is_stmt 1 view .LVU2392
 6753 0266 0A60     		str	r2, [r1]
1867:bluetooth_rxtx.c **** 				jam_mode = JAM_NONE;
 6754              		.loc 1 1867 4 view .LVU2393
1867:bluetooth_rxtx.c **** 				jam_mode = JAM_NONE;
 6755              		.loc 1 1867 17 is_stmt 0 view .LVU2394
ARM GAS  /tmp/ccwF1FQu.s 			page 196


 6756 0268 E27C     		ldrb	r2, [r4, #19]	@ zero_extendqisi2
1867:bluetooth_rxtx.c **** 				jam_mode = JAM_NONE;
 6757              		.loc 1 1867 7 view .LVU2395
 6758 026a 012A     		cmp	r2, #1
 6759 026c 4ED1     		bne	.L570
1868:bluetooth_rxtx.c **** 				requested_mode = MODE_IDLE;
 6760              		.loc 1 1868 5 is_stmt 1 view .LVU2396
1868:bluetooth_rxtx.c **** 				requested_mode = MODE_IDLE;
 6761              		.loc 1 1868 14 is_stmt 0 view .LVU2397
 6762 026e E374     		strb	r3, [r4, #19]
1869:bluetooth_rxtx.c **** 				goto cleanup;
 6763              		.loc 1 1869 5 is_stmt 1 view .LVU2398
1869:bluetooth_rxtx.c **** 				goto cleanup;
 6764              		.loc 1 1869 20 is_stmt 0 view .LVU2399
 6765 0270 A374     		strb	r3, [r4, #18]
1870:bluetooth_rxtx.c **** 			}
 6766              		.loc 1 1870 5 is_stmt 1 view .LVU2400
 6767              	.L578:
1870:bluetooth_rxtx.c **** 			}
 6768              		.loc 1 1870 5 is_stmt 0 view .LVU2401
 6769              	.LBE66:
1921:bluetooth_rxtx.c **** 
 6770              		.loc 1 1921 2 is_stmt 1 view .LVU2402
1921:bluetooth_rxtx.c **** 
 6771              		.loc 1 1921 8 is_stmt 0 view .LVU2403
 6772 0272 4FF08072 		mov	r2, #16777216
 6773 0276 1D4B     		ldr	r3, .L612+48
 6774 0278 1A60     		str	r2, [r3]
1924:bluetooth_rxtx.c **** 	dio_ssp_stop();
 6775              		.loc 1 1924 2 is_stmt 1 view .LVU2404
 6776 027a FFF7FEFF 		bl	cc2400_idle
 6777              	.LVL625:
1925:bluetooth_rxtx.c **** 	cs_trigger_disable();
 6778              		.loc 1 1925 2 view .LVU2405
 6779 027e FFF7FEFF 		bl	dio_ssp_stop
 6780              	.LVL626:
1926:bluetooth_rxtx.c **** }
 6781              		.loc 1 1926 2 view .LVU2406
 6782 0282 FFF7FEFF 		bl	cs_trigger_disable
 6783              	.LVL627:
1927:bluetooth_rxtx.c **** 
 6784              		.loc 1 1927 1 is_stmt 0 view .LVU2407
 6785 0286 13B0     		add	sp, sp, #76
 6786              		.cfi_remember_state
 6787              		.cfi_def_cfa_offset 36
 6788              		@ sp needed
 6789 0288 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 6790              	.LVL628:
 6791              	.L562:
 6792              		.cfi_restore_state
 6793              	.LBB67:
 6794              	.LBB64:
1823:bluetooth_rxtx.c **** 			u32 wire_crc = (p[4+len+2] << 16)
 6795              		.loc 1 1823 4 is_stmt 1 view .LVU2408
1823:bluetooth_rxtx.c **** 			u32 wire_crc = (p[4+len+2] << 16)
 6796              		.loc 1 1823 19 is_stmt 0 view .LVU2409
 6797 028c E868     		ldr	r0, [r5, #12]
ARM GAS  /tmp/ccwF1FQu.s 			page 197


 6798 028e 06A9     		add	r1, sp, #24
 6799 0290 FFF7FEFF 		bl	btle_crcgen_lut
 6800              	.LVL629:
1824:bluetooth_rxtx.c **** 						 | (p[4+len+1] << 8)
 6801              		.loc 1 1824 4 is_stmt 1 view .LVU2410
1827:bluetooth_rxtx.c **** 				goto rx_flush;
 6802              		.loc 1 1827 4 view .LVU2411
1825:bluetooth_rxtx.c **** 						 | (p[4+len+0] << 0);
 6803              		.loc 1 1825 12 is_stmt 0 view .LVU2412
 6804 0294 12AB     		add	r3, sp, #72
1824:bluetooth_rxtx.c **** 						 | (p[4+len+1] << 8)
 6805              		.loc 1 1824 21 view .LVU2413
 6806 0296 9944     		add	r9, r9, r3
 6807              	.LVL630:
1825:bluetooth_rxtx.c **** 						 | (p[4+len+0] << 0);
 6808              		.loc 1 1825 12 view .LVU2414
 6809 0298 1E44     		add	r6, r6, r3
 6810              	.LVL631:
1824:bluetooth_rxtx.c **** 						 | (p[4+len+1] << 8)
 6811              		.loc 1 1824 21 view .LVU2415
 6812 029a 19F8343C 		ldrb	r3, [r9, #-52]	@ zero_extendqisi2
1825:bluetooth_rxtx.c **** 						 | (p[4+len+0] << 0);
 6813              		.loc 1 1825 12 view .LVU2416
 6814 029e 16F82D2C 		ldrb	r2, [r6, #-45]	@ zero_extendqisi2
1824:bluetooth_rxtx.c **** 						 | (p[4+len+1] << 8)
 6815              		.loc 1 1824 31 view .LVU2417
 6816 02a2 1B04     		lsls	r3, r3, #16
1825:bluetooth_rxtx.c **** 						 | (p[4+len+0] << 0);
 6817              		.loc 1 1825 8 view .LVU2418
 6818 02a4 43EA0223 		orr	r3, r3, r2, lsl #8
1826:bluetooth_rxtx.c **** 			if (calc_crc != wire_crc) // skip packets with a bad CRC
 6819              		.loc 1 1826 22 view .LVU2419
 6820 02a8 16F82E2C 		ldrb	r2, [r6, #-46]	@ zero_extendqisi2
1826:bluetooth_rxtx.c **** 			if (calc_crc != wire_crc) // skip packets with a bad CRC
 6821              		.loc 1 1826 8 view .LVU2420
 6822 02ac 1343     		orrs	r3, r3, r2
1827:bluetooth_rxtx.c **** 				goto rx_flush;
 6823              		.loc 1 1827 7 view .LVU2421
 6824 02ae 9842     		cmp	r0, r3
 6825 02b0 8CD0     		beq	.L563
 6826 02b2 A6E7     		b	.L554
 6827              	.LVL632:
 6828              	.L565:
1827:bluetooth_rxtx.c **** 				goto rx_flush;
 6829              		.loc 1 1827 7 view .LVU2422
 6830              	.LBE64:
 6831              	.LBB65:
1849:bluetooth_rxtx.c **** 		}
 6832              		.loc 1 1849 4 is_stmt 1 view .LVU2423
1849:bluetooth_rxtx.c **** 		}
 6833              		.loc 1 1849 17 is_stmt 0 view .LVU2424
 6834 02b4 124B     		ldr	r3, .L612+68
 6835 02b6 1B68     		ldr	r3, [r3]
 6836 02b8 ADE7     		b	.L564
 6837              	.L613:
 6838 02ba 00BF     		.align	2
 6839              	.L612:
ARM GAS  /tmp/ccwF1FQu.s 			page 198


 6840 02bc 00000000 		.word	.LANCHOR1
 6841 02c0 00000000 		.word	.LANCHOR0
 6842 02c4 00E100E0 		.word	-536813312
 6843 02c8 3CC00920 		.word	537509948
 6844 02cc 00000000 		.word	rx_err
 6845 02d0 00000000 		.word	rssi_max
 6846 02d4 00000000 		.word	rssi_min
 6847 02d8 F0000000 		.word	.LANCHOR2+240
 6848 02dc 00000000 		.word	rxbuf1
 6849 02e0 10410050 		.word	1342193936
 6850 02e4 04410050 		.word	1342193924
 6851 02e8 38C00920 		.word	537509944
 6852 02ec 80E100E0 		.word	-536813184
 6853 02f0 08400040 		.word	1073758216
 6854 02f4 00000000 		.word	clkn
 6855 02f8 0C000340 		.word	1073938444
 6856 02fc 80F0FA02 		.word	50000000
 6857 0300 08000340 		.word	1073938440
 6858 0304 24000340 		.word	1073938468
 6859 0308 00000000 		.word	rx_tc
 6860              	.L570:
1849:bluetooth_rxtx.c **** 		}
 6861              		.loc 1 1849 17 view .LVU2425
 6862              	.LBE65:
1874:bluetooth_rxtx.c **** 				goto cleanup;
 6863              		.loc 1 1874 4 is_stmt 1 view .LVU2426
1874:bluetooth_rxtx.c **** 				goto cleanup;
 6864              		.loc 1 1874 7 is_stmt 0 view .LVU2427
 6865 030c B8F10A0F 		cmp	r8, #10
 6866 0310 AFD0     		beq	.L578
1877:bluetooth_rxtx.c **** 
 6867              		.loc 1 1877 4 is_stmt 1 view .LVU2428
1877:bluetooth_rxtx.c **** 
 6868              		.loc 1 1877 18 is_stmt 0 view .LVU2429
 6869 0312 0123     		movs	r3, #1
1879:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
 6870              		.loc 1 1879 4 view .LVU2430
 6871 0314 6420     		movs	r0, #100
1877:bluetooth_rxtx.c **** 
 6872              		.loc 1 1877 18 view .LVU2431
 6873 0316 2B75     		strb	r3, [r5, #20]
1879:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
 6874              		.loc 1 1879 4 is_stmt 1 view .LVU2432
 6875 0318 FFF7FEFF 		bl	cc2400_strobe
 6876              	.LVL633:
1880:bluetooth_rxtx.c **** 
 6877              		.loc 1 1880 4 view .LVU2433
 6878              	.L572:
1880:bluetooth_rxtx.c **** 
 6879              		.loc 1 1880 39 discriminator 1 view .LVU2434
1880:bluetooth_rxtx.c **** 
 6880              		.loc 1 1880 10 discriminator 1 view .LVU2435
1880:bluetooth_rxtx.c **** 
 6881              		.loc 1 1880 12 is_stmt 0 discriminator 1 view .LVU2436
 6882 031c FFF7FEFF 		bl	cc2400_status
 6883              	.LVL634:
1880:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccwF1FQu.s 			page 199


 6884              		.loc 1 1880 10 discriminator 1 view .LVU2437
 6885 0320 4207     		lsls	r2, r0, #29
 6886 0322 FBD4     		bmi	.L572
1883:bluetooth_rxtx.c **** 			restart_jamming = 1;
 6887              		.loc 1 1883 4 is_stmt 1 view .LVU2438
1883:bluetooth_rxtx.c **** 			restart_jamming = 1;
 6888              		.loc 1 1883 29 is_stmt 0 view .LVU2439
 6889 0324 B5F85030 		ldrh	r3, [r5, #80]
 6890 0328 9BB2     		uxth	r3, r3
1883:bluetooth_rxtx.c **** 			restart_jamming = 1;
 6891              		.loc 1 1883 12 view .LVU2440
 6892 032a 03B3     		cbz	r3, .L580
1883:bluetooth_rxtx.c **** 			restart_jamming = 1;
 6893              		.loc 1 1883 12 discriminator 1 view .LVU2441
 6894 032c B5F85030 		ldrh	r3, [r5, #80]
 6895 0330 9BB2     		uxth	r3, r3
 6896              	.L573:
1883:bluetooth_rxtx.c **** 			restart_jamming = 1;
 6897              		.loc 1 1883 12 discriminator 4 view .LVU2442
 6898 0332 A5F84C30 		strh	r3, [r5, #76]	@ movhi
1884:bluetooth_rxtx.c **** 		}
 6899              		.loc 1 1884 4 is_stmt 1 discriminator 4 view .LVU2443
1884:bluetooth_rxtx.c **** 		}
 6900              		.loc 1 1884 20 is_stmt 0 discriminator 4 view .LVU2444
 6901 0336 0123     		movs	r3, #1
 6902 0338 2363     		str	r3, [r4, #48]
 6903              	.L569:
1887:bluetooth_rxtx.c **** 		cc2400_set(SYNCH, le.synch);
 6904              		.loc 1 1887 3 is_stmt 1 view .LVU2445
 6905 033a 2C20     		movs	r0, #44
 6906 033c E988     		ldrh	r1, [r5, #6]
 6907 033e FFF7FEFF 		bl	cc2400_set
 6908              	.LVL635:
1888:bluetooth_rxtx.c **** 
 6909              		.loc 1 1888 3 view .LVU2446
 6910 0342 2D20     		movs	r0, #45
 6911 0344 A988     		ldrh	r1, [r5, #4]
 6912 0346 FFF7FEFF 		bl	cc2400_set
 6913              	.LVL636:
1890:bluetooth_rxtx.c **** 			hop();
 6914              		.loc 1 1890 3 view .LVU2447
1890:bluetooth_rxtx.c **** 			hop();
 6915              		.loc 1 1890 7 is_stmt 0 view .LVU2448
 6916 034a E37A     		ldrb	r3, [r4, #11]	@ zero_extendqisi2
1890:bluetooth_rxtx.c **** 			hop();
 6917              		.loc 1 1890 6 view .LVU2449
 6918 034c 0BB1     		cbz	r3, .L574
1891:bluetooth_rxtx.c **** 
 6919              		.loc 1 1891 4 is_stmt 1 view .LVU2450
 6920 034e FFF7FEFF 		bl	hop
 6921              	.LVL637:
 6922              	.L574:
1894:bluetooth_rxtx.c **** #ifdef TX_ENABLE
 6923              		.loc 1 1894 3 view .LVU2451
1894:bluetooth_rxtx.c **** #ifdef TX_ENABLE
 6924              		.loc 1 1894 6 is_stmt 0 view .LVU2452
 6925 0352 E369     		ldr	r3, [r4, #28]
ARM GAS  /tmp/ccwF1FQu.s 			page 200


 6926 0354 002B     		cmp	r3, #0
 6927 0356 0DDD     		ble	.L575
1896:bluetooth_rxtx.c **** #endif
 6928              		.loc 1 1896 4 is_stmt 1 view .LVU2453
 6929 0358 FFF7FEFF 		bl	le_jam
 6930              	.LVL638:
1898:bluetooth_rxtx.c **** 		} else {
 6931              		.loc 1 1898 4 view .LVU2454
 6932 035c E369     		ldr	r3, [r4, #28]
 6933 035e 013B     		subs	r3, r3, #1
 6934 0360 E361     		str	r3, [r4, #28]
 6935              	.L576:
1914:bluetooth_rxtx.c **** 		rx_err = 0;
 6936              		.loc 1 1914 3 view .LVU2455
1914:bluetooth_rxtx.c **** 		rx_err = 0;
 6937              		.loc 1 1914 9 is_stmt 0 view .LVU2456
 6938 0362 0023     		movs	r3, #0
1915:bluetooth_rxtx.c **** 	}
 6939              		.loc 1 1915 10 view .LVU2457
 6940 0364 0E4A     		ldr	r2, .L614
1914:bluetooth_rxtx.c **** 		rx_err = 0;
 6941              		.loc 1 1914 9 view .LVU2458
 6942 0366 CBF80030 		str	r3, [fp]
1915:bluetooth_rxtx.c **** 	}
 6943              		.loc 1 1915 3 is_stmt 1 view .LVU2459
1915:bluetooth_rxtx.c **** 	}
 6944              		.loc 1 1915 10 is_stmt 0 view .LVU2460
 6945 036a 1360     		str	r3, [r2]
 6946 036c 69E6     		b	.L545
 6947              	.L580:
1883:bluetooth_rxtx.c **** 			restart_jamming = 1;
 6948              		.loc 1 1883 12 view .LVU2461
 6949 036e 40F66213 		movw	r3, #2402
 6950 0372 DEE7     		b	.L573
 6951              	.L575:
1901:bluetooth_rxtx.c **** 			dio_ssp_start();
 6952              		.loc 1 1901 4 is_stmt 1 view .LVU2462
 6953 0374 FFF7FEFF 		bl	dma_init_le
 6954              	.LVL639:
1902:bluetooth_rxtx.c **** 
 6955              		.loc 1 1902 4 view .LVU2463
 6956 0378 FFF7FEFF 		bl	dio_ssp_start
 6957              	.LVL640:
1904:bluetooth_rxtx.c **** 				cc2400_rx_sync(rbit(le.access_address));
 6958              		.loc 1 1904 4 view .LVU2464
1904:bluetooth_rxtx.c **** 				cc2400_rx_sync(rbit(le.access_address));
 6959              		.loc 1 1904 7 is_stmt 0 view .LVU2465
 6960 037c 236B     		ldr	r3, [r4, #48]
 6961 037e 3BB1     		cbz	r3, .L577
1905:bluetooth_rxtx.c **** 				restart_jamming = 0;
 6962              		.loc 1 1905 5 is_stmt 1 view .LVU2466
 6963 0380 2868     		ldr	r0, [r5]
 6964 0382 FFF7FEFF 		bl	rbit
 6965              	.LVL641:
 6966 0386 FFF7FEFF 		bl	cc2400_rx_sync
 6967              	.LVL642:
1906:bluetooth_rxtx.c **** 			} else {
ARM GAS  /tmp/ccwF1FQu.s 			page 201


 6968              		.loc 1 1906 5 view .LVU2467
1906:bluetooth_rxtx.c **** 			} else {
 6969              		.loc 1 1906 21 is_stmt 0 view .LVU2468
 6970 038a 0023     		movs	r3, #0
 6971 038c 2363     		str	r3, [r4, #48]
 6972 038e E8E7     		b	.L576
 6973              	.L577:
1909:bluetooth_rxtx.c **** 				cc2400_strobe(SRX);
 6974              		.loc 1 1909 41 is_stmt 1 discriminator 1 view .LVU2469
1909:bluetooth_rxtx.c **** 				cc2400_strobe(SRX);
 6975              		.loc 1 1909 11 discriminator 1 view .LVU2470
1909:bluetooth_rxtx.c **** 				cc2400_strobe(SRX);
 6976              		.loc 1 1909 14 is_stmt 0 discriminator 1 view .LVU2471
 6977 0390 FFF7FEFF 		bl	cc2400_status
 6978              	.LVL643:
1909:bluetooth_rxtx.c **** 				cc2400_strobe(SRX);
 6979              		.loc 1 1909 11 discriminator 1 view .LVU2472
 6980 0394 4307     		lsls	r3, r0, #29
 6981 0396 FBD5     		bpl	.L577
1910:bluetooth_rxtx.c **** 			}
 6982              		.loc 1 1910 5 is_stmt 1 view .LVU2473
 6983 0398 6220     		movs	r0, #98
 6984 039a FFF7FEFF 		bl	cc2400_strobe
 6985              	.LVL644:
 6986 039e E0E7     		b	.L576
 6987              	.L615:
 6988              		.align	2
 6989              	.L614:
 6990 03a0 00000000 		.word	rx_err
 6991              	.LBE67:
 6992              		.cfi_endproc
 6993              	.LFE23:
 6995              		.section	.text.bt_follow_le,"ax",%progbits
 6996              		.align	1
 6997              		.global	bt_follow_le
 6998              		.syntax unified
 6999              		.thumb
 7000              		.thumb_func
 7001              		.fpu softvfp
 7003              	bt_follow_le:
 7004              	.LFB26:
2095:bluetooth_rxtx.c **** 
2096:bluetooth_rxtx.c **** void le_phy_main(void);
2097:bluetooth_rxtx.c **** void bt_follow_le() {
 7005              		.loc 1 2097 21 view -0
 7006              		.cfi_startproc
 7007              		@ args = 0, pretend = 0, frame = 0
 7008              		@ frame_needed = 0, uses_anonymous_args = 0
 7009              		@ link register save eliminated.
2098:bluetooth_rxtx.c **** 	le_phy_main();
 7010              		.loc 1 2098 2 view .LVU2475
 7011 0000 FFF7FEBF 		b	le_phy_main
 7012              	.LVL645:
 7013              		.cfi_endproc
 7014              	.LFE26:
 7016              		.section	.text.le_promisc_state,"ax",%progbits
 7017              		.align	1
ARM GAS  /tmp/ccwF1FQu.s 			page 202


 7018              		.global	le_promisc_state
 7019              		.syntax unified
 7020              		.thumb
 7021              		.thumb_func
 7022              		.fpu softvfp
 7024              	le_promisc_state:
 7025              	.LVL646:
 7026              	.LFB27:
2099:bluetooth_rxtx.c **** 
2100:bluetooth_rxtx.c **** 	/* old method
2101:bluetooth_rxtx.c **** 	reset_le();
2102:bluetooth_rxtx.c **** 	packet_cb = connection_follow_cb;
2103:bluetooth_rxtx.c **** 	bt_le_sync(MODE_BT_FOLLOW_LE);
2104:bluetooth_rxtx.c **** 	*/
2105:bluetooth_rxtx.c **** }
2106:bluetooth_rxtx.c **** 
2107:bluetooth_rxtx.c **** // issue state change message
2108:bluetooth_rxtx.c **** void le_promisc_state(u8 type, void *data, unsigned len) {
 7027              		.loc 1 2108 58 view -0
 7028              		.cfi_startproc
 7029              		@ args = 0, pretend = 0, frame = 56
 7030              		@ frame_needed = 0, uses_anonymous_args = 0
 7031              		.loc 1 2108 58 is_stmt 0 view .LVU2477
 7032 0000 70B5     		push	{r4, r5, r6, lr}
 7033              		.cfi_def_cfa_offset 16
 7034              		.cfi_offset 4, -16
 7035              		.cfi_offset 5, -12
 7036              		.cfi_offset 6, -8
 7037              		.cfi_offset 14, -4
 7038 0002 8EB0     		sub	sp, sp, #56
 7039              		.cfi_def_cfa_offset 72
2109:bluetooth_rxtx.c **** 	u8 buf[50] = { 0, };
 7040              		.loc 1 2109 2 is_stmt 1 view .LVU2478
2108:bluetooth_rxtx.c **** 	u8 buf[50] = { 0, };
 7041              		.loc 1 2108 58 is_stmt 0 view .LVU2479
 7042 0004 1546     		mov	r5, r2
 7043 0006 0C46     		mov	r4, r1
 7044              		.loc 1 2109 5 view .LVU2480
 7045 0008 0021     		movs	r1, #0
 7046              	.LVL647:
2108:bluetooth_rxtx.c **** 	u8 buf[50] = { 0, };
 7047              		.loc 1 2108 58 view .LVU2481
 7048 000a 0646     		mov	r6, r0
 7049              		.loc 1 2109 5 view .LVU2482
 7050 000c 2E22     		movs	r2, #46
 7051              	.LVL648:
 7052              		.loc 1 2109 5 view .LVU2483
 7053 000e 02A8     		add	r0, sp, #8
 7054              	.LVL649:
 7055              		.loc 1 2109 5 view .LVU2484
 7056 0010 0191     		str	r1, [sp, #4]
 7057 0012 FFF7FEFF 		bl	memset
 7058              	.LVL650:
2110:bluetooth_rxtx.c **** 	if (len > 49)
 7059              		.loc 1 2110 2 is_stmt 1 view .LVU2485
2111:bluetooth_rxtx.c **** 		len = 49;
2112:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccwF1FQu.s 			page 203


2113:bluetooth_rxtx.c **** 	buf[0] = type;
 7060              		.loc 1 2113 2 view .LVU2486
2114:bluetooth_rxtx.c **** 	memcpy(&buf[1], data, len);
 7061              		.loc 1 2114 2 is_stmt 0 view .LVU2487
 7062 0016 312D     		cmp	r5, #49
 7063 0018 2A46     		mov	r2, r5
 7064 001a 2146     		mov	r1, r4
 7065 001c 28BF     		it	cs
 7066 001e 3122     		movcs	r2, #49
 7067 0020 0DF10500 		add	r0, sp, #5
2113:bluetooth_rxtx.c **** 	memcpy(&buf[1], data, len);
 7068              		.loc 1 2113 9 view .LVU2488
 7069 0024 8DF80460 		strb	r6, [sp, #4]
 7070              		.loc 1 2114 2 is_stmt 1 view .LVU2489
 7071 0028 FFF7FEFF 		bl	memcpy
 7072              	.LVL651:
2115:bluetooth_rxtx.c **** 	enqueue(LE_PROMISC, (uint8_t*)buf);
 7073              		.loc 1 2115 2 view .LVU2490
 7074 002c 01A9     		add	r1, sp, #4
 7075 002e 0520     		movs	r0, #5
 7076 0030 FFF7FEFF 		bl	enqueue
 7077              	.LVL652:
2116:bluetooth_rxtx.c **** }
 7078              		.loc 1 2116 1 is_stmt 0 view .LVU2491
 7079 0034 0EB0     		add	sp, sp, #56
 7080              		.cfi_def_cfa_offset 16
 7081              		@ sp needed
 7082 0036 70BD     		pop	{r4, r5, r6, pc}
 7083              		.loc 1 2116 1 view .LVU2492
 7084              		.cfi_endproc
 7085              	.LFE27:
 7087              		.section	.text.promisc_recover_hop_increment,"ax",%progbits
 7088              		.align	1
 7089              		.global	promisc_recover_hop_increment
 7090              		.syntax unified
 7091              		.thumb
 7092              		.thumb_func
 7093              		.fpu softvfp
 7095              	promisc_recover_hop_increment:
 7096              	.LVL653:
 7097              	.LFB28:
2117:bluetooth_rxtx.c **** 
2118:bluetooth_rxtx.c **** // divide, rounding to the nearest integer: round up at 0.5.
2119:bluetooth_rxtx.c **** #define DIVIDE_ROUND(N, D) ((N) + (D)/2) / (D)
2120:bluetooth_rxtx.c **** 
2121:bluetooth_rxtx.c **** void promisc_recover_hop_increment(u8 *packet) {
 7098              		.loc 1 2121 48 is_stmt 1 view -0
 7099              		.cfi_startproc
 7100              		@ args = 0, pretend = 0, frame = 0
 7101              		@ frame_needed = 0, uses_anonymous_args = 0
 7102              		.loc 1 2121 48 is_stmt 0 view .LVU2494
 7103 0000 38B5     		push	{r3, r4, r5, lr}
 7104              		.cfi_def_cfa_offset 16
 7105              		.cfi_offset 3, -16
 7106              		.cfi_offset 4, -12
 7107              		.cfi_offset 5, -8
 7108              		.cfi_offset 14, -4
ARM GAS  /tmp/ccwF1FQu.s 			page 204


2122:bluetooth_rxtx.c **** 	static u32 first_ts = 0;
 7109              		.loc 1 2122 2 is_stmt 1 view .LVU2495
2123:bluetooth_rxtx.c **** 	if (channel == 2404) {
 7110              		.loc 1 2123 2 view .LVU2496
 7111              		.loc 1 2123 5 is_stmt 0 view .LVU2497
 7112 0002 40F66411 		movw	r1, #2404
 7113              		.loc 1 2123 14 view .LVU2498
 7114 0006 314B     		ldr	r3, .L629
 7115 0008 314C     		ldr	r4, .L629+4
 7116 000a B3F84C20 		ldrh	r2, [r3, #76]
 7117 000e 92B2     		uxth	r2, r2
 7118              		.loc 1 2123 5 view .LVU2499
 7119 0010 8A42     		cmp	r2, r1
 7120 0012 10D1     		bne	.L619
2124:bluetooth_rxtx.c **** 		first_ts = CLK100NS;
 7121              		.loc 1 2124 3 is_stmt 1 view .LVU2500
 7122              		.loc 1 2124 14 is_stmt 0 view .LVU2501
 7123 0014 40F63541 		movw	r1, #3125
 7124 0018 2E4B     		ldr	r3, .L629+8
 7125 001a 2F4A     		ldr	r2, .L629+12
 7126 001c 1B68     		ldr	r3, [r3]
 7127 001e 1268     		ldr	r2, [r2]
 7128 0020 C3F31303 		ubfx	r3, r3, #0, #20
 7129 0024 01FB0323 		mla	r3, r1, r3, r2
 7130              		.loc 1 2124 12 view .LVU2502
 7131 0028 6363     		str	r3, [r4, #52]
2125:bluetooth_rxtx.c **** 		hop_direct_channel = 2406;
 7132              		.loc 1 2125 3 is_stmt 1 view .LVU2503
 7133              		.loc 1 2125 22 is_stmt 0 view .LVU2504
 7134 002a 40F66613 		movw	r3, #2406
 7135              	.LVL654:
 7136              	.L628:
 7137              	.LBB71:
 7138              	.LBB72:
 7139              	.LBB73:
2126:bluetooth_rxtx.c **** 		do_hop = 1;
2127:bluetooth_rxtx.c **** 	} else if (channel == 2406) {
2128:bluetooth_rxtx.c **** 		u32 second_ts = CLK100NS;
2129:bluetooth_rxtx.c **** 		if (second_ts < first_ts)
2130:bluetooth_rxtx.c **** 			second_ts += 3276800000; // handle rollover
2131:bluetooth_rxtx.c **** 		// Number of channels hopped between previous and current timestamp.
2132:bluetooth_rxtx.c **** 		u32 channels_hopped = DIVIDE_ROUND(second_ts - first_ts,
2133:bluetooth_rxtx.c **** 										   le.conn_interval * LE_BASECLK);
2134:bluetooth_rxtx.c **** 		if (channels_hopped < 37) {
2135:bluetooth_rxtx.c **** 			// Get the hop increment based on the number of channels hopped.
2136:bluetooth_rxtx.c **** 			le.channel_increment = hop_interval_lut[channels_hopped];
2137:bluetooth_rxtx.c **** 			le.interval_timer = le.conn_interval / 2;
2138:bluetooth_rxtx.c **** 			le.conn_count = 0;
2139:bluetooth_rxtx.c **** 			le.conn_epoch = 0;
2140:bluetooth_rxtx.c **** 			do_hop = 0;
2141:bluetooth_rxtx.c **** 			// Move on to regular connection following.
2142:bluetooth_rxtx.c **** 			le.channel_idx = (1 + le.channel_increment) % 37;
2143:bluetooth_rxtx.c **** 			le.link_state = LINK_CONNECTED;
2144:bluetooth_rxtx.c **** 			le.crc_verify = 0;
2145:bluetooth_rxtx.c **** 			hop_mode = HOP_BTLE;
2146:bluetooth_rxtx.c **** 			packet_cb = connection_follow_cb;
2147:bluetooth_rxtx.c **** 			le_promisc_state(3, &le.channel_increment, 1);
ARM GAS  /tmp/ccwF1FQu.s 			page 205


2148:bluetooth_rxtx.c **** 
2149:bluetooth_rxtx.c **** 			if (jam_mode != JAM_NONE)
2150:bluetooth_rxtx.c **** 				le_jam_count = JAM_COUNT_DEFAULT;
2151:bluetooth_rxtx.c **** 
2152:bluetooth_rxtx.c **** 			return;
2153:bluetooth_rxtx.c **** 		}
2154:bluetooth_rxtx.c **** 		hop_direct_channel = 2404;
 7140              		.loc 1 2154 22 view .LVU2505
 7141 002e A381     		strh	r3, [r4, #12]	@ movhi
2155:bluetooth_rxtx.c **** 		do_hop = 1;
 7142              		.loc 1 2155 3 is_stmt 1 view .LVU2506
 7143              	.L627:
 7144              	.LBE73:
 7145              	.LBE72:
 7146              	.LBE71:
2156:bluetooth_rxtx.c **** 	}
2157:bluetooth_rxtx.c **** 	else {
2158:bluetooth_rxtx.c **** 		hop_direct_channel = 2404;
2159:bluetooth_rxtx.c **** 		do_hop = 1;
 7147              		.loc 1 2159 3 view .LVU2507
 7148              		.loc 1 2159 10 is_stmt 0 view .LVU2508
 7149 0030 0123     		movs	r3, #1
 7150 0032 E372     		strb	r3, [r4, #11]
 7151 0034 44E0     		b	.L618
 7152              	.LVL655:
 7153              	.L619:
2127:bluetooth_rxtx.c **** 		u32 second_ts = CLK100NS;
 7154              		.loc 1 2127 9 is_stmt 1 view .LVU2509
2127:bluetooth_rxtx.c **** 		u32 second_ts = CLK100NS;
 7155              		.loc 1 2127 12 is_stmt 0 view .LVU2510
 7156 0036 40F66610 		movw	r0, #2406
 7157              	.LVL656:
2127:bluetooth_rxtx.c **** 		u32 second_ts = CLK100NS;
 7158              		.loc 1 2127 21 view .LVU2511
 7159 003a B3F84C20 		ldrh	r2, [r3, #76]
 7160 003e 92B2     		uxth	r2, r2
2127:bluetooth_rxtx.c **** 		u32 second_ts = CLK100NS;
 7161              		.loc 1 2127 12 view .LVU2512
 7162 0040 8242     		cmp	r2, r0
 7163 0042 41D1     		bne	.L621
 7164              	.LBB78:
 7165              	.LBI71:
2121:bluetooth_rxtx.c **** 	static u32 first_ts = 0;
 7166              		.loc 1 2121 6 is_stmt 1 view .LVU2513
 7167              	.LVL657:
 7168              	.LBB76:
 7169              	.LBB74:
2128:bluetooth_rxtx.c **** 		if (second_ts < first_ts)
 7170              		.loc 1 2128 3 view .LVU2514
2128:bluetooth_rxtx.c **** 		if (second_ts < first_ts)
 7171              		.loc 1 2128 7 is_stmt 0 view .LVU2515
 7172 0044 40F63540 		movw	r0, #3125
2128:bluetooth_rxtx.c **** 		if (second_ts < first_ts)
 7173              		.loc 1 2128 19 view .LVU2516
 7174 0048 224A     		ldr	r2, .L629+8
 7175 004a 2349     		ldr	r1, .L629+12
 7176 004c 1268     		ldr	r2, [r2]
ARM GAS  /tmp/ccwF1FQu.s 			page 206


 7177 004e 0968     		ldr	r1, [r1]
 7178 0050 C2F31302 		ubfx	r2, r2, #0, #20
2128:bluetooth_rxtx.c **** 		if (second_ts < first_ts)
 7179              		.loc 1 2128 7 view .LVU2517
 7180 0054 00FB0212 		mla	r2, r0, r2, r1
 7181              	.LVL658:
2129:bluetooth_rxtx.c **** 			second_ts += 3276800000; // handle rollover
 7182              		.loc 1 2129 3 is_stmt 1 view .LVU2518
2132:bluetooth_rxtx.c **** 										   le.conn_interval * LE_BASECLK);
 7183              		.loc 1 2132 25 is_stmt 0 view .LVU2519
 7184 0058 41F66A01 		movw	r1, #6250
2129:bluetooth_rxtx.c **** 			second_ts += 3276800000; // handle rollover
 7185              		.loc 1 2129 17 view .LVU2520
 7186 005c 656B     		ldr	r5, [r4, #52]
2132:bluetooth_rxtx.c **** 										   le.conn_interval * LE_BASECLK);
 7187              		.loc 1 2132 25 view .LVU2521
 7188 005e D88B     		ldrh	r0, [r3, #30]
2129:bluetooth_rxtx.c **** 			second_ts += 3276800000; // handle rollover
 7189              		.loc 1 2129 6 view .LVU2522
 7190 0060 AA42     		cmp	r2, r5
2130:bluetooth_rxtx.c **** 		// Number of channels hopped between previous and current timestamp.
 7191              		.loc 1 2130 4 is_stmt 1 view .LVU2523
2130:bluetooth_rxtx.c **** 		// Number of channels hopped between previous and current timestamp.
 7192              		.loc 1 2130 14 is_stmt 0 view .LVU2524
 7193 0062 3CBF     		itt	cc
 7194 0064 02F14342 		addcc	r2, r2, #-1023410176
 7195              	.LVL659:
2130:bluetooth_rxtx.c **** 		// Number of channels hopped between previous and current timestamp.
 7196              		.loc 1 2130 14 view .LVU2525
 7197 0068 02F5A002 		addcc	r2, r2, #5242880
 7198              	.LVL660:
2132:bluetooth_rxtx.c **** 										   le.conn_interval * LE_BASECLK);
 7199              		.loc 1 2132 3 is_stmt 1 view .LVU2526
2132:bluetooth_rxtx.c **** 										   le.conn_interval * LE_BASECLK);
 7200              		.loc 1 2132 25 is_stmt 0 view .LVU2527
 7201 006c 01FB0022 		mla	r2, r1, r0, r2
 7202              	.LVL661:
2132:bluetooth_rxtx.c **** 										   le.conn_interval * LE_BASECLK);
 7203              		.loc 1 2132 25 view .LVU2528
 7204 0070 43F2D401 		movw	r1, #12500
 7205 0074 4143     		muls	r1, r0, r1
 7206 0076 521B     		subs	r2, r2, r5
2132:bluetooth_rxtx.c **** 										   le.conn_interval * LE_BASECLK);
 7207              		.loc 1 2132 7 view .LVU2529
 7208 0078 B2FBF1F2 		udiv	r2, r2, r1
 7209              	.LVL662:
2134:bluetooth_rxtx.c **** 			// Get the hop increment based on the number of channels hopped.
 7210              		.loc 1 2134 3 is_stmt 1 view .LVU2530
2134:bluetooth_rxtx.c **** 			// Get the hop increment based on the number of channels hopped.
 7211              		.loc 1 2134 6 is_stmt 0 view .LVU2531
 7212 007c 242A     		cmp	r2, #36
2134:bluetooth_rxtx.c **** 			// Get the hop increment based on the number of channels hopped.
 7213              		.loc 1 2134 6 view .LVU2532
 7214 007e 20D8     		bhi	.L623
2136:bluetooth_rxtx.c **** 			le.interval_timer = le.conn_interval / 2;
 7215              		.loc 1 2136 4 is_stmt 1 view .LVU2533
2142:bluetooth_rxtx.c **** 			le.link_state = LINK_CONNECTED;
ARM GAS  /tmp/ccwF1FQu.s 			page 207


 7216              		.loc 1 2142 48 is_stmt 0 view .LVU2534
 7217 0080 2525     		movs	r5, #37
2136:bluetooth_rxtx.c **** 			le.interval_timer = le.conn_interval / 2;
 7218              		.loc 1 2136 43 view .LVU2535
 7219 0082 1649     		ldr	r1, .L629+16
2137:bluetooth_rxtx.c **** 			le.conn_count = 0;
 7220              		.loc 1 2137 22 view .LVU2536
 7221 0084 4008     		lsrs	r0, r0, #1
2136:bluetooth_rxtx.c **** 			le.interval_timer = le.conn_interval / 2;
 7222              		.loc 1 2136 43 view .LVU2537
 7223 0086 0A44     		add	r2, r2, r1
 7224              	.LVL663:
2136:bluetooth_rxtx.c **** 			le.interval_timer = le.conn_interval / 2;
 7225              		.loc 1 2136 43 view .LVU2538
 7226 0088 92F87028 		ldrb	r2, [r2, #2160]	@ zero_extendqisi2
 7227              	.LVL664:
2137:bluetooth_rxtx.c **** 			le.conn_count = 0;
 7228              		.loc 1 2137 22 view .LVU2539
 7229 008c 9883     		strh	r0, [r3, #28]	@ movhi
2136:bluetooth_rxtx.c **** 			le.interval_timer = le.conn_interval / 2;
 7230              		.loc 1 2136 25 view .LVU2540
 7231 008e 9A75     		strb	r2, [r3, #22]
2137:bluetooth_rxtx.c **** 			le.conn_count = 0;
 7232              		.loc 1 2137 4 is_stmt 1 view .LVU2541
2138:bluetooth_rxtx.c **** 			le.conn_epoch = 0;
 7233              		.loc 1 2138 4 view .LVU2542
2142:bluetooth_rxtx.c **** 			le.link_state = LINK_CONNECTED;
 7234              		.loc 1 2142 24 is_stmt 0 view .LVU2543
 7235 0090 0132     		adds	r2, r2, #1
2142:bluetooth_rxtx.c **** 			le.link_state = LINK_CONNECTED;
 7236              		.loc 1 2142 48 view .LVU2544
 7237 0092 B2FBF5F0 		udiv	r0, r2, r5
2138:bluetooth_rxtx.c **** 			le.conn_epoch = 0;
 7238              		.loc 1 2138 18 view .LVU2545
 7239 0096 0021     		movs	r1, #0
2142:bluetooth_rxtx.c **** 			le.link_state = LINK_CONNECTED;
 7240              		.loc 1 2142 48 view .LVU2546
 7241 0098 05FB1022 		mls	r2, r5, r0, r2
2143:bluetooth_rxtx.c **** 			le.crc_verify = 0;
 7242              		.loc 1 2143 18 view .LVU2547
 7243 009c 0320     		movs	r0, #3
2138:bluetooth_rxtx.c **** 			le.conn_epoch = 0;
 7244              		.loc 1 2138 18 view .LVU2548
 7245 009e 1984     		strh	r1, [r3, #32]	@ movhi
2139:bluetooth_rxtx.c **** 			do_hop = 0;
 7246              		.loc 1 2139 4 is_stmt 1 view .LVU2549
2139:bluetooth_rxtx.c **** 			do_hop = 0;
 7247              		.loc 1 2139 18 is_stmt 0 view .LVU2550
 7248 00a0 9961     		str	r1, [r3, #24]
2140:bluetooth_rxtx.c **** 			// Move on to regular connection following.
 7249              		.loc 1 2140 4 is_stmt 1 view .LVU2551
2142:bluetooth_rxtx.c **** 			le.link_state = LINK_CONNECTED;
 7250              		.loc 1 2142 19 is_stmt 0 view .LVU2552
 7251 00a2 5A75     		strb	r2, [r3, #21]
2144:bluetooth_rxtx.c **** 			hop_mode = HOP_BTLE;
 7252              		.loc 1 2144 18 view .LVU2553
 7253 00a4 1961     		str	r1, [r3, #16]
ARM GAS  /tmp/ccwF1FQu.s 			page 208


2143:bluetooth_rxtx.c **** 			le.crc_verify = 0;
 7254              		.loc 1 2143 18 view .LVU2554
 7255 00a6 1875     		strb	r0, [r3, #20]
2146:bluetooth_rxtx.c **** 			le_promisc_state(3, &le.channel_increment, 1);
 7256              		.loc 1 2146 14 view .LVU2555
 7257 00a8 0D4B     		ldr	r3, .L629+20
2140:bluetooth_rxtx.c **** 			// Move on to regular connection following.
 7258              		.loc 1 2140 11 view .LVU2556
 7259 00aa E172     		strb	r1, [r4, #11]
2142:bluetooth_rxtx.c **** 			le.link_state = LINK_CONNECTED;
 7260              		.loc 1 2142 4 is_stmt 1 view .LVU2557
2143:bluetooth_rxtx.c **** 			le.crc_verify = 0;
 7261              		.loc 1 2143 4 view .LVU2558
2144:bluetooth_rxtx.c **** 			hop_mode = HOP_BTLE;
 7262              		.loc 1 2144 4 view .LVU2559
2145:bluetooth_rxtx.c **** 			packet_cb = connection_follow_cb;
 7263              		.loc 1 2145 4 view .LVU2560
2147:bluetooth_rxtx.c **** 
 7264              		.loc 1 2147 4 is_stmt 0 view .LVU2561
 7265 00ac 0122     		movs	r2, #1
 7266 00ae 0D49     		ldr	r1, .L629+24
2146:bluetooth_rxtx.c **** 			le_promisc_state(3, &le.channel_increment, 1);
 7267              		.loc 1 2146 14 view .LVU2562
 7268 00b0 A361     		str	r3, [r4, #24]
2145:bluetooth_rxtx.c **** 			packet_cb = connection_follow_cb;
 7269              		.loc 1 2145 13 view .LVU2563
 7270 00b2 A072     		strb	r0, [r4, #10]
2146:bluetooth_rxtx.c **** 			le_promisc_state(3, &le.channel_increment, 1);
 7271              		.loc 1 2146 4 is_stmt 1 view .LVU2564
2147:bluetooth_rxtx.c **** 
 7272              		.loc 1 2147 4 view .LVU2565
 7273 00b4 FFF7FEFF 		bl	le_promisc_state
 7274              	.LVL665:
2149:bluetooth_rxtx.c **** 				le_jam_count = JAM_COUNT_DEFAULT;
 7275              		.loc 1 2149 4 view .LVU2566
2149:bluetooth_rxtx.c **** 				le_jam_count = JAM_COUNT_DEFAULT;
 7276              		.loc 1 2149 17 is_stmt 0 view .LVU2567
 7277 00b8 E37C     		ldrb	r3, [r4, #19]	@ zero_extendqisi2
2149:bluetooth_rxtx.c **** 				le_jam_count = JAM_COUNT_DEFAULT;
 7278              		.loc 1 2149 7 view .LVU2568
 7279 00ba 0BB1     		cbz	r3, .L618
2150:bluetooth_rxtx.c **** 
 7280              		.loc 1 2150 5 is_stmt 1 view .LVU2569
2150:bluetooth_rxtx.c **** 
 7281              		.loc 1 2150 18 is_stmt 0 view .LVU2570
 7282 00bc 2823     		movs	r3, #40
 7283 00be E361     		str	r3, [r4, #28]
 7284              	.LVL666:
 7285              	.L618:
2150:bluetooth_rxtx.c **** 
 7286              		.loc 1 2150 18 view .LVU2571
 7287              	.LBE74:
 7288              	.LBE76:
 7289              	.LBE78:
2160:bluetooth_rxtx.c **** 	}
2161:bluetooth_rxtx.c **** }
 7290              		.loc 1 2161 1 view .LVU2572
ARM GAS  /tmp/ccwF1FQu.s 			page 209


 7291 00c0 38BD     		pop	{r3, r4, r5, pc}
 7292              	.LVL667:
 7293              	.L623:
 7294              	.LBB79:
 7295              	.LBB77:
 7296              	.LBB75:
2154:bluetooth_rxtx.c **** 		do_hop = 1;
 7297              		.loc 1 2154 3 is_stmt 1 view .LVU2573
2154:bluetooth_rxtx.c **** 		do_hop = 1;
 7298              		.loc 1 2154 22 is_stmt 0 view .LVU2574
 7299 00c2 40F66413 		movw	r3, #2404
 7300 00c6 B2E7     		b	.L628
 7301              	.LVL668:
 7302              	.L621:
2154:bluetooth_rxtx.c **** 		do_hop = 1;
 7303              		.loc 1 2154 22 view .LVU2575
 7304              	.LBE75:
 7305              	.LBE77:
 7306              	.LBE79:
2158:bluetooth_rxtx.c **** 		do_hop = 1;
 7307              		.loc 1 2158 3 is_stmt 1 view .LVU2576
2158:bluetooth_rxtx.c **** 		do_hop = 1;
 7308              		.loc 1 2158 22 is_stmt 0 view .LVU2577
 7309 00c8 A181     		strh	r1, [r4, #12]	@ movhi
 7310 00ca B1E7     		b	.L627
 7311              	.L630:
 7312              		.align	2
 7313              	.L629:
 7314 00cc 00000000 		.word	.LANCHOR0
 7315 00d0 00000000 		.word	.LANCHOR1
 7316 00d4 00000000 		.word	clkn
 7317 00d8 08400040 		.word	1073758216
 7318 00dc 00000000 		.word	.LANCHOR2
 7319 00e0 00000000 		.word	connection_follow_cb
 7320 00e4 16000000 		.word	.LANCHOR0+22
 7321              		.cfi_endproc
 7322              	.LFE28:
 7324              		.section	.text.promisc_recover_hop_interval,"ax",%progbits
 7325              		.align	1
 7326              		.global	promisc_recover_hop_interval
 7327              		.syntax unified
 7328              		.thumb
 7329              		.thumb_func
 7330              		.fpu softvfp
 7332              	promisc_recover_hop_interval:
 7333              	.LVL669:
 7334              	.LFB29:
2162:bluetooth_rxtx.c **** 
2163:bluetooth_rxtx.c **** void promisc_recover_hop_interval(u8 *packet) {
 7335              		.loc 1 2163 47 is_stmt 1 view -0
 7336              		.cfi_startproc
 7337              		@ args = 0, pretend = 0, frame = 0
 7338              		@ frame_needed = 0, uses_anonymous_args = 0
 7339              		.loc 1 2163 47 is_stmt 0 view .LVU2579
 7340 0000 38B5     		push	{r3, r4, r5, lr}
 7341              		.cfi_def_cfa_offset 16
 7342              		.cfi_offset 3, -16
ARM GAS  /tmp/ccwF1FQu.s 			page 210


 7343              		.cfi_offset 4, -12
 7344              		.cfi_offset 5, -8
 7345              		.cfi_offset 14, -4
2164:bluetooth_rxtx.c **** 	static u32 prev_clk = 0;
 7346              		.loc 1 2164 2 is_stmt 1 view .LVU2580
2165:bluetooth_rxtx.c **** 
2166:bluetooth_rxtx.c **** 	u32 cur_clk = CLK100NS;
 7347              		.loc 1 2166 2 view .LVU2581
 7348              		.loc 1 2166 6 is_stmt 0 view .LVU2582
 7349 0002 40F63542 		movw	r2, #3125
 7350              		.loc 1 2166 16 view .LVU2583
 7351 0006 244B     		ldr	r3, .L637
2167:bluetooth_rxtx.c **** 	if (cur_clk < prev_clk)
 7352              		.loc 1 2167 14 view .LVU2584
 7353 0008 244D     		ldr	r5, .L637+4
2166:bluetooth_rxtx.c **** 	if (cur_clk < prev_clk)
 7354              		.loc 1 2166 16 view .LVU2585
 7355 000a 1C68     		ldr	r4, [r3]
 7356 000c 244B     		ldr	r3, .L637+8
 7357 000e C4F31304 		ubfx	r4, r4, #0, #20
 7358 0012 1B68     		ldr	r3, [r3]
2166:bluetooth_rxtx.c **** 	if (cur_clk < prev_clk)
 7359              		.loc 1 2166 6 view .LVU2586
 7360 0014 02FB0434 		mla	r4, r2, r4, r3
 7361              	.LVL670:
 7362              		.loc 1 2167 2 is_stmt 1 view .LVU2587
2168:bluetooth_rxtx.c **** 		cur_clk += 3267800000; // handle rollover
2169:bluetooth_rxtx.c **** 	u32 clk_diff = cur_clk - prev_clk;
2170:bluetooth_rxtx.c **** 	u16 obsv_hop_interval; // observed hop interval
2171:bluetooth_rxtx.c **** 
2172:bluetooth_rxtx.c **** 	// probably consecutive data packets on the same channel
2173:bluetooth_rxtx.c **** 	if (clk_diff < 2 * LE_BASECLK)
 7363              		.loc 1 2173 5 is_stmt 0 view .LVU2588
 7364 0018 46F2A712 		movw	r2, #24999
2167:bluetooth_rxtx.c **** 		cur_clk += 3267800000; // handle rollover
 7365              		.loc 1 2167 14 view .LVU2589
 7366 001c AB6B     		ldr	r3, [r5, #56]
2167:bluetooth_rxtx.c **** 		cur_clk += 3267800000; // handle rollover
 7367              		.loc 1 2167 5 view .LVU2590
 7368 001e A342     		cmp	r3, r4
2168:bluetooth_rxtx.c **** 		cur_clk += 3267800000; // handle rollover
 7369              		.loc 1 2168 3 is_stmt 1 view .LVU2591
2168:bluetooth_rxtx.c **** 		cur_clk += 3267800000; // handle rollover
 7370              		.loc 1 2168 11 is_stmt 0 view .LVU2592
 7371 0020 82BF     		ittt	hi
 7372 0022 04F14344 		addhi	r4, r4, #-1023410176
 7373              	.LVL671:
2168:bluetooth_rxtx.c **** 		cur_clk += 3267800000; // handle rollover
 7374              		.loc 1 2168 11 view .LVU2593
 7375 0026 A4F56514 		subhi	r4, r4, #3751936
 7376 002a A4F5A254 		subhi	r4, r4, #5184
 7377              	.LVL672:
2169:bluetooth_rxtx.c **** 	u16 obsv_hop_interval; // observed hop interval
 7378              		.loc 1 2169 2 is_stmt 1 view .LVU2594
2169:bluetooth_rxtx.c **** 	u16 obsv_hop_interval; // observed hop interval
 7379              		.loc 1 2169 6 is_stmt 0 view .LVU2595
 7380 002e E31A     		subs	r3, r4, r3
ARM GAS  /tmp/ccwF1FQu.s 			page 211


 7381              	.LVL673:
2170:bluetooth_rxtx.c **** 
 7382              		.loc 1 2170 2 is_stmt 1 view .LVU2596
 7383              		.loc 1 2173 2 view .LVU2597
 7384              		.loc 1 2173 5 is_stmt 0 view .LVU2598
 7385 0030 9342     		cmp	r3, r2
 7386 0032 2AD9     		bls	.L631
2174:bluetooth_rxtx.c **** 		return;
2175:bluetooth_rxtx.c **** 
2176:bluetooth_rxtx.c **** 	if (clk_diff < le_promisc.smallest_hop_interval)
 7387              		.loc 1 2176 2 is_stmt 1 view .LVU2599
 7388              		.loc 1 2176 27 is_stmt 0 view .LVU2600
 7389 0034 1B4A     		ldr	r2, .L637+12
 7390              		.loc 1 2176 5 view .LVU2601
 7391 0036 D2F80011 		ldr	r1, [r2, #256]
 7392 003a 9942     		cmp	r1, r3
2177:bluetooth_rxtx.c **** 		le_promisc.smallest_hop_interval = clk_diff;
 7393              		.loc 1 2177 3 is_stmt 1 view .LVU2602
 7394              		.loc 1 2177 36 is_stmt 0 view .LVU2603
 7395 003c 88BF     		it	hi
 7396 003e C2F80031 		strhi	r3, [r2, #256]
2178:bluetooth_rxtx.c **** 
2179:bluetooth_rxtx.c **** 	obsv_hop_interval = DIVIDE_ROUND(le_promisc.smallest_hop_interval, 37 * LE_BASECLK);
 7397              		.loc 1 2179 2 is_stmt 1 view .LVU2604
 7398              		.loc 1 2179 22 is_stmt 0 view .LVU2605
 7399 0042 D2F80031 		ldr	r3, [r2, #256]
 7400              	.LVL674:
 7401              		.loc 1 2179 22 view .LVU2606
 7402 0046 1849     		ldr	r1, .L637+16
 7403 0048 03F56133 		add	r3, r3, #230400
 7404 004c 03F25233 		addw	r3, r3, #850
 7405 0050 B3FBF1F3 		udiv	r3, r3, r1
2180:bluetooth_rxtx.c **** 
2181:bluetooth_rxtx.c **** 	if (le.conn_interval == obsv_hop_interval) {
 7406              		.loc 1 2181 8 view .LVU2607
 7407 0054 1549     		ldr	r1, .L637+20
2179:bluetooth_rxtx.c **** 
 7408              		.loc 1 2179 20 view .LVU2608
 7409 0056 9BB2     		uxth	r3, r3
 7410              	.LVL675:
 7411              		.loc 1 2181 2 is_stmt 1 view .LVU2609
 7412              		.loc 1 2181 5 is_stmt 0 view .LVU2610
 7413 0058 C88B     		ldrh	r0, [r1, #30]
 7414              	.LVL676:
 7415              		.loc 1 2181 5 view .LVU2611
 7416 005a 9842     		cmp	r0, r3
 7417 005c 16D1     		bne	.L635
2182:bluetooth_rxtx.c **** 		// 5 consecutive hop intervals: consider it legit and move on
2183:bluetooth_rxtx.c **** 		++le_promisc.consec_intervals;
 7418              		.loc 1 2183 3 is_stmt 1 view .LVU2612
 7419 005e D2F80431 		ldr	r3, [r2, #260]
 7420              	.LVL677:
 7421              		.loc 1 2183 3 is_stmt 0 view .LVU2613
 7422 0062 0133     		adds	r3, r3, #1
2184:bluetooth_rxtx.c **** 		if (le_promisc.consec_intervals == 5) {
 7423              		.loc 1 2184 6 view .LVU2614
 7424 0064 052B     		cmp	r3, #5
ARM GAS  /tmp/ccwF1FQu.s 			page 212


2183:bluetooth_rxtx.c **** 		if (le_promisc.consec_intervals == 5) {
 7425              		.loc 1 2183 3 view .LVU2615
 7426 0066 C2F80431 		str	r3, [r2, #260]
 7427              		.loc 1 2184 3 is_stmt 1 view .LVU2616
 7428              		.loc 1 2184 6 is_stmt 0 view .LVU2617
 7429 006a 0DD1     		bne	.L636
2185:bluetooth_rxtx.c **** 			packet_cb = promisc_recover_hop_increment;
 7430              		.loc 1 2185 4 is_stmt 1 view .LVU2618
 7431              		.loc 1 2185 14 is_stmt 0 view .LVU2619
 7432 006c 104B     		ldr	r3, .L637+24
2186:bluetooth_rxtx.c **** 			hop_direct_channel = 2404;
2187:bluetooth_rxtx.c **** 			hop_mode = HOP_DIRECT;
2188:bluetooth_rxtx.c **** 			do_hop = 1;
2189:bluetooth_rxtx.c **** 			le_promisc_state(2, &le.conn_interval, 2);
 7433              		.loc 1 2189 4 view .LVU2620
 7434 006e 0222     		movs	r2, #2
2185:bluetooth_rxtx.c **** 			packet_cb = promisc_recover_hop_increment;
 7435              		.loc 1 2185 14 view .LVU2621
 7436 0070 AB61     		str	r3, [r5, #24]
2186:bluetooth_rxtx.c **** 			hop_direct_channel = 2404;
 7437              		.loc 1 2186 4 is_stmt 1 view .LVU2622
2186:bluetooth_rxtx.c **** 			hop_direct_channel = 2404;
 7438              		.loc 1 2186 23 is_stmt 0 view .LVU2623
 7439 0072 40F66413 		movw	r3, #2404
 7440 0076 AB81     		strh	r3, [r5, #12]	@ movhi
2187:bluetooth_rxtx.c **** 			do_hop = 1;
 7441              		.loc 1 2187 4 is_stmt 1 view .LVU2624
2187:bluetooth_rxtx.c **** 			do_hop = 1;
 7442              		.loc 1 2187 13 is_stmt 0 view .LVU2625
 7443 0078 0423     		movs	r3, #4
 7444 007a AB72     		strb	r3, [r5, #10]
2188:bluetooth_rxtx.c **** 			le_promisc_state(2, &le.conn_interval, 2);
 7445              		.loc 1 2188 4 is_stmt 1 view .LVU2626
2188:bluetooth_rxtx.c **** 			le_promisc_state(2, &le.conn_interval, 2);
 7446              		.loc 1 2188 11 is_stmt 0 view .LVU2627
 7447 007c 0123     		movs	r3, #1
 7448              		.loc 1 2189 4 view .LVU2628
 7449 007e 1046     		mov	r0, r2
 7450 0080 1E31     		adds	r1, r1, #30
2188:bluetooth_rxtx.c **** 			le_promisc_state(2, &le.conn_interval, 2);
 7451              		.loc 1 2188 11 view .LVU2629
 7452 0082 EB72     		strb	r3, [r5, #11]
 7453              		.loc 1 2189 4 is_stmt 1 view .LVU2630
 7454 0084 FFF7FEFF 		bl	le_promisc_state
 7455              	.LVL678:
 7456              	.L636:
2190:bluetooth_rxtx.c **** 		}
2191:bluetooth_rxtx.c **** 	} else {
2192:bluetooth_rxtx.c **** 		le.conn_interval = obsv_hop_interval;
2193:bluetooth_rxtx.c **** 		le_promisc.consec_intervals = 0;
2194:bluetooth_rxtx.c **** 	}
2195:bluetooth_rxtx.c **** 
2196:bluetooth_rxtx.c **** 	prev_clk = cur_clk;
 7457              		.loc 1 2196 2 view .LVU2631
 7458              		.loc 1 2196 11 is_stmt 0 view .LVU2632
 7459 0088 AC63     		str	r4, [r5, #56]
 7460              	.L631:
ARM GAS  /tmp/ccwF1FQu.s 			page 213


2197:bluetooth_rxtx.c **** }
 7461              		.loc 1 2197 1 view .LVU2633
 7462 008a 38BD     		pop	{r3, r4, r5, pc}
 7463              	.LVL679:
 7464              	.L635:
2192:bluetooth_rxtx.c **** 		le_promisc.consec_intervals = 0;
 7465              		.loc 1 2192 3 is_stmt 1 view .LVU2634
2192:bluetooth_rxtx.c **** 		le_promisc.consec_intervals = 0;
 7466              		.loc 1 2192 20 is_stmt 0 view .LVU2635
 7467 008c CB83     		strh	r3, [r1, #30]	@ movhi
2193:bluetooth_rxtx.c **** 	}
 7468              		.loc 1 2193 3 is_stmt 1 view .LVU2636
2193:bluetooth_rxtx.c **** 	}
 7469              		.loc 1 2193 31 is_stmt 0 view .LVU2637
 7470 008e 0023     		movs	r3, #0
 7471              	.LVL680:
2193:bluetooth_rxtx.c **** 	}
 7472              		.loc 1 2193 31 view .LVU2638
 7473 0090 C2F80431 		str	r3, [r2, #260]
 7474 0094 F8E7     		b	.L636
 7475              	.L638:
 7476 0096 00BF     		.align	2
 7477              	.L637:
 7478 0098 00000000 		.word	clkn
 7479 009c 00000000 		.word	.LANCHOR1
 7480 00a0 08400040 		.word	1073758216
 7481 00a4 00000000 		.word	le_promisc
 7482 00a8 A40E0700 		.word	462500
 7483 00ac 00000000 		.word	.LANCHOR0
 7484 00b0 00000000 		.word	promisc_recover_hop_increment
 7485              		.cfi_endproc
 7486              	.LFE29:
 7488              		.section	.text.promisc_follow_cb,"ax",%progbits
 7489              		.align	1
 7490              		.global	promisc_follow_cb
 7491              		.syntax unified
 7492              		.thumb
 7493              		.thumb_func
 7494              		.fpu softvfp
 7496              	promisc_follow_cb:
 7497              	.LVL681:
 7498              	.LFB30:
2198:bluetooth_rxtx.c **** 
2199:bluetooth_rxtx.c **** void promisc_follow_cb(u8 *packet) {
 7499              		.loc 1 2199 36 is_stmt 1 view -0
 7500              		.cfi_startproc
 7501              		@ args = 0, pretend = 0, frame = 0
 7502              		@ frame_needed = 0, uses_anonymous_args = 0
 7503              		.loc 1 2199 36 is_stmt 0 view .LVU2640
 7504 0000 70B5     		push	{r4, r5, r6, lr}
 7505              		.cfi_def_cfa_offset 16
 7506              		.cfi_offset 4, -16
 7507              		.cfi_offset 5, -12
 7508              		.cfi_offset 6, -8
 7509              		.cfi_offset 14, -4
2200:bluetooth_rxtx.c **** 	int i;
 7510              		.loc 1 2200 2 is_stmt 1 view .LVU2641
ARM GAS  /tmp/ccwF1FQu.s 			page 214


2201:bluetooth_rxtx.c **** 
2202:bluetooth_rxtx.c **** 	// get the CRCInit
2203:bluetooth_rxtx.c **** 	if (!le.crc_verify && packet[4] == 0x01 && packet[5] == 0x00) {
 7511              		.loc 1 2203 2 view .LVU2642
 7512              		.loc 1 2203 9 is_stmt 0 view .LVU2643
 7513 0002 174D     		ldr	r5, .L643
 7514 0004 2C69     		ldr	r4, [r5, #16]
 7515              		.loc 1 2203 5 view .LVU2644
 7516 0006 54BB     		cbnz	r4, .L639
 7517              		.loc 1 2203 21 discriminator 1 view .LVU2645
 7518 0008 0379     		ldrb	r3, [r0, #4]	@ zero_extendqisi2
 7519 000a 012B     		cmp	r3, #1
 7520 000c 27D1     		bne	.L639
 7521              		.loc 1 2203 42 discriminator 2 view .LVU2646
 7522 000e 4379     		ldrb	r3, [r0, #5]	@ zero_extendqisi2
 7523 0010 2BBB     		cbnz	r3, .L639
 7524              	.LVL682:
 7525              	.LBB83:
 7526              	.LBI83:
2199:bluetooth_rxtx.c **** 	int i;
 7527              		.loc 1 2199 6 is_stmt 1 view .LVU2647
 7528              	.LBB84:
 7529              	.LBB85:
2204:bluetooth_rxtx.c **** 		u32 crc = (packet[8] << 16) | (packet[7] << 8) | packet[6];
 7530              		.loc 1 2204 3 view .LVU2648
2205:bluetooth_rxtx.c **** 
2206:bluetooth_rxtx.c **** 		le.crc_init = btle_reverse_crc(crc, packet + 4, 2);
 7531              		.loc 1 2206 3 view .LVU2649
2204:bluetooth_rxtx.c **** 		u32 crc = (packet[8] << 16) | (packet[7] << 8) | packet[6];
 7532              		.loc 1 2204 40 is_stmt 0 view .LVU2650
 7533 0012 C379     		ldrb	r3, [r0, #7]	@ zero_extendqisi2
2204:bluetooth_rxtx.c **** 		u32 crc = (packet[8] << 16) | (packet[7] << 8) | packet[6];
 7534              		.loc 1 2204 20 view .LVU2651
 7535 0014 027A     		ldrb	r2, [r0, #8]	@ zero_extendqisi2
2204:bluetooth_rxtx.c **** 		u32 crc = (packet[8] << 16) | (packet[7] << 8) | packet[6];
 7536              		.loc 1 2204 58 view .LVU2652
 7537 0016 8679     		ldrb	r6, [r0, #6]	@ zero_extendqisi2
2204:bluetooth_rxtx.c **** 		u32 crc = (packet[8] << 16) | (packet[7] << 8) | packet[6];
 7538              		.loc 1 2204 44 view .LVU2653
 7539 0018 1B02     		lsls	r3, r3, #8
2204:bluetooth_rxtx.c **** 		u32 crc = (packet[8] << 16) | (packet[7] << 8) | packet[6];
 7540              		.loc 1 2204 31 view .LVU2654
 7541 001a 43EA0243 		orr	r3, r3, r2, lsl #16
 7542              		.loc 1 2206 17 view .LVU2655
 7543 001e 011D     		adds	r1, r0, #4
 7544 0020 0222     		movs	r2, #2
 7545 0022 43EA0600 		orr	r0, r3, r6
 7546              	.LVL683:
 7547              		.loc 1 2206 17 view .LVU2656
 7548 0026 FFF7FEFF 		bl	btle_reverse_crc
 7549              	.LVL684:
 7550              		.loc 1 2206 15 view .LVU2657
 7551 002a 2246     		mov	r2, r4
 7552 002c A860     		str	r0, [r5, #8]
2207:bluetooth_rxtx.c **** 		le.crc_init_reversed = 0;
 7553              		.loc 1 2207 3 is_stmt 1 view .LVU2658
2208:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
ARM GAS  /tmp/ccwF1FQu.s 			page 215


 7554              		.loc 1 2208 3 view .LVU2659
 7555              	.LVL685:
 7556              		.loc 1 2208 15 view .LVU2660
 7557              	.L641:
2209:bluetooth_rxtx.c **** 			le.crc_init_reversed |= ((le.crc_init >> i) & 1) << (23 - i);
 7558              		.loc 1 2209 4 view .LVU2661
 7559              		.loc 1 2209 42 is_stmt 0 view .LVU2662
 7560 002e 20FA04F3 		lsr	r3, r0, r4
 7561              		.loc 1 2209 53 view .LVU2663
 7562 0032 C4F11701 		rsb	r1, r4, #23
 7563              		.loc 1 2209 48 view .LVU2664
 7564 0036 03F00103 		and	r3, r3, #1
2208:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
 7565              		.loc 1 2208 23 view .LVU2665
 7566 003a 0134     		adds	r4, r4, #1
 7567              	.LVL686:
 7568              		.loc 1 2209 53 view .LVU2666
 7569 003c 8B40     		lsls	r3, r3, r1
2208:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
 7570              		.loc 1 2208 3 view .LVU2667
 7571 003e 182C     		cmp	r4, #24
 7572              		.loc 1 2209 25 view .LVU2668
 7573 0040 42EA0302 		orr	r2, r2, r3
2208:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
 7574              		.loc 1 2208 23 is_stmt 1 view .LVU2669
 7575              	.LVL687:
2208:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
 7576              		.loc 1 2208 15 view .LVU2670
2208:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
 7577              		.loc 1 2208 3 is_stmt 0 view .LVU2671
 7578 0044 F3D1     		bne	.L641
2210:bluetooth_rxtx.c **** 
2211:bluetooth_rxtx.c **** 		le.crc_verify = 1;
 7579              		.loc 1 2211 17 view .LVU2672
 7580 0046 0120     		movs	r0, #1
 7581 0048 EA60     		str	r2, [r5, #12]
 7582              		.loc 1 2211 3 is_stmt 1 view .LVU2673
2212:bluetooth_rxtx.c **** 		packet_cb = promisc_recover_hop_interval;
 7583              		.loc 1 2212 13 is_stmt 0 view .LVU2674
 7584 004a 064B     		ldr	r3, .L643+4
 7585 004c 064A     		ldr	r2, .L643+8
2211:bluetooth_rxtx.c **** 		packet_cb = promisc_recover_hop_interval;
 7586              		.loc 1 2211 17 view .LVU2675
 7587 004e 2861     		str	r0, [r5, #16]
 7588              		.loc 1 2212 3 is_stmt 1 view .LVU2676
 7589              		.loc 1 2212 13 is_stmt 0 view .LVU2677
 7590 0050 9A61     		str	r2, [r3, #24]
2213:bluetooth_rxtx.c **** 		le_promisc_state(1, &le.crc_init, 3);
 7591              		.loc 1 2213 3 is_stmt 1 view .LVU2678
 7592 0052 0649     		ldr	r1, .L643+12
 7593 0054 0322     		movs	r2, #3
 7594              	.LBE85:
 7595              	.LBE84:
 7596              	.LBE83:
2214:bluetooth_rxtx.c **** 	}
2215:bluetooth_rxtx.c **** }
 7597              		.loc 1 2215 1 is_stmt 0 view .LVU2679
ARM GAS  /tmp/ccwF1FQu.s 			page 216


 7598 0056 BDE87040 		pop	{r4, r5, r6, lr}
 7599              		.cfi_remember_state
 7600              		.cfi_restore 14
 7601              		.cfi_restore 6
 7602              		.cfi_restore 5
 7603              		.cfi_restore 4
 7604              		.cfi_def_cfa_offset 0
 7605              	.LVL688:
 7606              	.LBB88:
 7607              	.LBB87:
 7608              	.LBB86:
2213:bluetooth_rxtx.c **** 		le_promisc_state(1, &le.crc_init, 3);
 7609              		.loc 1 2213 3 view .LVU2680
 7610 005a FFF7FEBF 		b	le_promisc_state
 7611              	.LVL689:
 7612              	.L639:
 7613              		.cfi_restore_state
2213:bluetooth_rxtx.c **** 		le_promisc_state(1, &le.crc_init, 3);
 7614              		.loc 1 2213 3 view .LVU2681
 7615              	.LBE86:
 7616              	.LBE87:
 7617              	.LBE88:
 7618              		.loc 1 2215 1 view .LVU2682
 7619 005e 70BD     		pop	{r4, r5, r6, pc}
 7620              	.L644:
 7621              		.align	2
 7622              	.L643:
 7623 0060 00000000 		.word	.LANCHOR0
 7624 0064 00000000 		.word	.LANCHOR1
 7625 0068 00000000 		.word	promisc_recover_hop_interval
 7626 006c 08000000 		.word	.LANCHOR0+8
 7627              		.cfi_endproc
 7628              	.LFE30:
 7630              		.section	.text.see_aa,"ax",%progbits
 7631              		.align	1
 7632              		.global	see_aa
 7633              		.syntax unified
 7634              		.thumb
 7635              		.thumb_func
 7636              		.fpu softvfp
 7638              	see_aa:
 7639              	.LVL690:
 7640              	.LFB31:
2216:bluetooth_rxtx.c **** 
2217:bluetooth_rxtx.c **** // called when we see an AA, add it to the list
2218:bluetooth_rxtx.c **** void see_aa(u32 aa) {
 7641              		.loc 1 2218 21 is_stmt 1 view -0
 7642              		.cfi_startproc
 7643              		@ args = 0, pretend = 0, frame = 0
 7644              		@ frame_needed = 0, uses_anonymous_args = 0
 7645              		.loc 1 2218 21 is_stmt 0 view .LVU2684
 7646 0000 70B5     		push	{r4, r5, r6, lr}
 7647              		.cfi_def_cfa_offset 16
 7648              		.cfi_offset 4, -16
 7649              		.cfi_offset 5, -12
 7650              		.cfi_offset 6, -8
 7651              		.cfi_offset 14, -4
ARM GAS  /tmp/ccwF1FQu.s 			page 217


2219:bluetooth_rxtx.c **** 	int i, max = -1, killme = -1;
 7652              		.loc 1 2219 2 is_stmt 1 view .LVU2685
 7653              	.LVL691:
2220:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i)
 7654              		.loc 1 2220 2 view .LVU2686
 7655              		.loc 1 2220 14 view .LVU2687
2221:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 7656              		.loc 1 2221 30 is_stmt 0 view .LVU2688
 7657 0002 134A     		ldr	r2, .L654
2220:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i)
 7658              		.loc 1 2220 9 view .LVU2689
 7659 0004 0023     		movs	r3, #0
 7660 0006 1146     		mov	r1, r2
 7661              	.LVL692:
 7662              	.L648:
 7663              		.loc 1 2221 3 is_stmt 1 view .LVU2690
 7664              		.loc 1 2221 6 is_stmt 0 view .LVU2691
 7665 0008 52F83350 		ldr	r5, [r2, r3, lsl #3]
 7666              		.loc 1 2221 30 view .LVU2692
 7667 000c 02EBC304 		add	r4, r2, r3, lsl #3
 7668              		.loc 1 2221 6 view .LVU2693
 7669 0010 8542     		cmp	r5, r0
 7670 0012 03D1     		bne	.L646
2222:bluetooth_rxtx.c **** 			++le_promisc.active_aa[i].count;
 7671              		.loc 1 2222 4 is_stmt 1 view .LVU2694
 7672 0014 6368     		ldr	r3, [r4, #4]
 7673              	.LVL693:
 7674              		.loc 1 2222 4 is_stmt 0 view .LVU2695
 7675 0016 0133     		adds	r3, r3, #1
 7676 0018 6360     		str	r3, [r4, #4]
2223:bluetooth_rxtx.c **** 			return;
 7677              		.loc 1 2223 4 is_stmt 1 view .LVU2696
 7678              	.L645:
2224:bluetooth_rxtx.c **** 		}
2225:bluetooth_rxtx.c **** 
2226:bluetooth_rxtx.c **** 	// evict someone
2227:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i)
2228:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
2229:bluetooth_rxtx.c **** 			killme = i;
2230:bluetooth_rxtx.c **** 			max = le_promisc.active_aa[i].count;
2231:bluetooth_rxtx.c **** 		}
2232:bluetooth_rxtx.c **** 
2233:bluetooth_rxtx.c **** 	le_promisc.active_aa[killme].aa = aa;
2234:bluetooth_rxtx.c **** 	le_promisc.active_aa[killme].count = 1;
2235:bluetooth_rxtx.c **** }
 7679              		.loc 1 2235 1 is_stmt 0 view .LVU2697
 7680 001a 70BD     		pop	{r4, r5, r6, pc}
 7681              	.LVL694:
 7682              	.L646:
2220:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 7683              		.loc 1 2220 32 is_stmt 1 discriminator 2 view .LVU2698
 7684 001c 0133     		adds	r3, r3, #1
 7685              	.LVL695:
2220:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 7686              		.loc 1 2220 14 discriminator 2 view .LVU2699
2220:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 7687              		.loc 1 2220 2 is_stmt 0 discriminator 2 view .LVU2700
ARM GAS  /tmp/ccwF1FQu.s 			page 218


 7688 001e 202B     		cmp	r3, #32
 7689 0020 F2D1     		bne	.L648
 7690              	.LBB91:
 7691              	.LBB92:
2219:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i)
 7692              		.loc 1 2219 19 view .LVU2701
 7693 0022 4FF0FF32 		mov	r2, #-1
2227:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 7694              		.loc 1 2227 9 view .LVU2702
 7695 0026 0023     		movs	r3, #0
 7696              	.LVL696:
2219:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i)
 7697              		.loc 1 2219 9 view .LVU2703
 7698 0028 1446     		mov	r4, r2
2228:bluetooth_rxtx.c **** 			killme = i;
 7699              		.loc 1 2228 30 view .LVU2704
 7700 002a 0A4E     		ldr	r6, .L654+4
 7701              	.L650:
 7702              	.LVL697:
2228:bluetooth_rxtx.c **** 			killme = i;
 7703              		.loc 1 2228 3 is_stmt 1 view .LVU2705
2228:bluetooth_rxtx.c **** 			killme = i;
 7704              		.loc 1 2228 30 is_stmt 0 view .LVU2706
 7705 002c 56F83350 		ldr	r5, [r6, r3, lsl #3]
2228:bluetooth_rxtx.c **** 			killme = i;
 7706              		.loc 1 2228 6 view .LVU2707
 7707 0030 A542     		cmp	r5, r4
 7708 0032 01DB     		blt	.L651
2228:bluetooth_rxtx.c **** 			killme = i;
 7709              		.loc 1 2228 43 view .LVU2708
 7710 0034 002C     		cmp	r4, #0
 7711 0036 01DA     		bge	.L649
 7712              	.L651:
 7713 0038 1A46     		mov	r2, r3
 7714 003a 2C46     		mov	r4, r5
 7715              	.LVL698:
 7716              	.L649:
2227:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 7717              		.loc 1 2227 32 is_stmt 1 view .LVU2709
 7718 003c 0133     		adds	r3, r3, #1
 7719              	.LVL699:
2227:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 7720              		.loc 1 2227 14 view .LVU2710
2227:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 7721              		.loc 1 2227 2 is_stmt 0 view .LVU2711
 7722 003e 202B     		cmp	r3, #32
 7723 0040 F4D1     		bne	.L650
2233:bluetooth_rxtx.c **** 	le_promisc.active_aa[killme].count = 1;
 7724              		.loc 1 2233 2 is_stmt 1 view .LVU2712
2234:bluetooth_rxtx.c **** }
 7725              		.loc 1 2234 37 is_stmt 0 view .LVU2713
 7726 0042 0123     		movs	r3, #1
 7727              	.LVL700:
2233:bluetooth_rxtx.c **** 	le_promisc.active_aa[killme].count = 1;
 7728              		.loc 1 2233 34 view .LVU2714
 7729 0044 41F83200 		str	r0, [r1, r2, lsl #3]
2234:bluetooth_rxtx.c **** }
ARM GAS  /tmp/ccwF1FQu.s 			page 219


 7730              		.loc 1 2234 2 is_stmt 1 view .LVU2715
2234:bluetooth_rxtx.c **** }
 7731              		.loc 1 2234 37 is_stmt 0 view .LVU2716
 7732 0048 01EBC202 		add	r2, r1, r2, lsl #3
 7733 004c 5360     		str	r3, [r2, #4]
 7734              	.LVL701:
2234:bluetooth_rxtx.c **** }
 7735              		.loc 1 2234 37 view .LVU2717
 7736 004e E4E7     		b	.L645
 7737              	.L655:
 7738              		.align	2
 7739              	.L654:
 7740 0050 00000000 		.word	le_promisc
 7741 0054 04000000 		.word	le_promisc+4
 7742              	.LBE92:
 7743              	.LBE91:
 7744              		.cfi_endproc
 7745              	.LFE31:
 7747              		.section	.text.cb_le_promisc,"ax",%progbits
 7748              		.align	1
 7749              		.global	cb_le_promisc
 7750              		.syntax unified
 7751              		.thumb
 7752              		.thumb_func
 7753              		.fpu softvfp
 7755              	cb_le_promisc:
 7756              	.LVL702:
 7757              	.LFB32:
2236:bluetooth_rxtx.c **** 
2237:bluetooth_rxtx.c **** /* le promiscuous mode */
2238:bluetooth_rxtx.c **** int cb_le_promisc(char *unpacked) {
 7758              		.loc 1 2238 35 is_stmt 1 view -0
 7759              		.cfi_startproc
 7760              		@ args = 0, pretend = 0, frame = 88
 7761              		@ frame_needed = 0, uses_anonymous_args = 0
 7762              		.loc 1 2238 35 is_stmt 0 view .LVU2719
 7763 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 7764              		.cfi_def_cfa_offset 36
 7765              		.cfi_offset 4, -36
 7766              		.cfi_offset 5, -32
 7767              		.cfi_offset 6, -28
 7768              		.cfi_offset 7, -24
 7769              		.cfi_offset 8, -20
 7770              		.cfi_offset 9, -16
 7771              		.cfi_offset 10, -12
 7772              		.cfi_offset 11, -8
 7773              		.cfi_offset 14, -4
 7774 0004 97B0     		sub	sp, sp, #92
 7775              		.cfi_def_cfa_offset 128
2239:bluetooth_rxtx.c **** 	int i, j, k;
 7776              		.loc 1 2239 2 is_stmt 1 view .LVU2720
2240:bluetooth_rxtx.c **** 	int idx;
 7777              		.loc 1 2240 2 view .LVU2721
2241:bluetooth_rxtx.c **** 
2242:bluetooth_rxtx.c **** 	// empty data PDU: 01 00
2243:bluetooth_rxtx.c **** 	char desired[4][16] = {
 7778              		.loc 1 2243 2 view .LVU2722
ARM GAS  /tmp/ccwF1FQu.s 			page 220


 7779              		.loc 1 2243 7 is_stmt 0 view .LVU2723
 7780 0006 06AA     		add	r2, sp, #24
2238:bluetooth_rxtx.c **** 	int i, j, k;
 7781              		.loc 1 2238 35 view .LVU2724
 7782 0008 0446     		mov	r4, r0
 7783 000a 9046     		mov	r8, r2
 7784              		.loc 1 2243 7 view .LVU2725
 7785 000c 694B     		ldr	r3, .L686
 7786 000e 03F14006 		add	r6, r3, #64
 7787              	.LVL703:
 7788              	.L657:
 7789              		.loc 1 2243 7 view .LVU2726
 7790 0012 1546     		mov	r5, r2
 7791 0014 1868     		ldr	r0, [r3]	@ unaligned
 7792 0016 5968     		ldr	r1, [r3, #4]	@ unaligned
 7793 0018 0833     		adds	r3, r3, #8
 7794 001a 03C5     		stmia	r5!, {r0, r1}
 7795 001c B342     		cmp	r3, r6
 7796 001e 2A46     		mov	r2, r5
 7797 0020 F7D1     		bne	.L657
2244:bluetooth_rxtx.c **** 		{ 1, 0, 0, 0, 0, 0, 0, 0,
2245:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2246:bluetooth_rxtx.c **** 		{ 1, 0, 0, 1, 0, 0, 0, 0,
2247:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2248:bluetooth_rxtx.c **** 		{ 1, 0, 1, 0, 0, 0, 0, 0,
2249:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2250:bluetooth_rxtx.c **** 		{ 1, 0, 1, 1, 0, 0, 0, 0,
2251:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2252:bluetooth_rxtx.c **** 	};
2253:bluetooth_rxtx.c **** 
2254:bluetooth_rxtx.c **** 	for (i = 0; i < 4; ++i) {
 7798              		.loc 1 2254 2 is_stmt 1 view .LVU2727
 7799              	.LVL704:
 7800              		.loc 1 2254 14 view .LVU2728
2243:bluetooth_rxtx.c **** 		{ 1, 0, 0, 0, 0, 0, 0, 0,
 7801              		.loc 1 2243 7 is_stmt 0 view .LVU2729
 7802 0022 4746     		mov	r7, r8
 7803              		.loc 1 2254 9 view .LVU2730
 7804 0024 0025     		movs	r5, #0
2255:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel)];
 7805              		.loc 1 2255 25 view .LVU2731
 7806 0026 DFF8AC91 		ldr	r9, .L686+32
 7807              		.loc 1 2255 24 view .LVU2732
 7808 002a 634E     		ldr	r6, .L686+4
 7809              	.LVL705:
 7810              	.L659:
 7811              		.loc 1 2255 3 is_stmt 1 view .LVU2733
 7812              		.loc 1 2255 25 is_stmt 0 view .LVU2734
 7813 002c B9F84C00 		ldrh	r0, [r9, #76]
 7814 0030 80B2     		uxth	r0, r0
 7815 0032 FFF7FEFF 		bl	btle_channel_index
 7816              	.LVL706:
 7817              		.loc 1 2255 7 view .LVU2735
 7818 0036 1021     		movs	r1, #16
 7819 0038 335C     		ldrb	r3, [r6, r0]	@ zero_extendqisi2
 7820              	.LVL707:
2256:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccwF1FQu.s 			page 221


2257:bluetooth_rxtx.c **** 		// whiten the desired data
2258:bluetooth_rxtx.c **** 		for (j = 0; j < (int)sizeof(desired[i]); ++j) {
 7821              		.loc 1 2258 3 is_stmt 1 view .LVU2736
 7822              		.loc 1 2258 15 view .LVU2737
2259:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
2260:bluetooth_rxtx.c **** 			idx = (idx + 1) % sizeof(whitening);
 7823              		.loc 1 2260 20 is_stmt 0 view .LVU2738
 7824 003a 4FF07F0C 		mov	ip, #127
2255:bluetooth_rxtx.c **** 
 7825              		.loc 1 2255 7 view .LVU2739
 7826 003e 3846     		mov	r0, r7
 7827              	.LVL708:
 7828              	.L658:
2259:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 7829              		.loc 1 2259 4 is_stmt 1 discriminator 3 view .LVU2740
2259:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 7830              		.loc 1 2259 30 is_stmt 0 discriminator 3 view .LVU2741
 7831 0040 06EB030E 		add	lr, r6, r3
2259:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 7832              		.loc 1 2259 18 discriminator 3 view .LVU2742
 7833 0044 0278     		ldrb	r2, [r0]	@ zero_extendqisi2
 7834 0046 9EF828E0 		ldrb	lr, [lr, #40]	@ zero_extendqisi2
 7835              		.loc 1 2260 15 discriminator 3 view .LVU2743
 7836 004a 0133     		adds	r3, r3, #1
 7837              	.LVL709:
2259:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 7838              		.loc 1 2259 18 discriminator 3 view .LVU2744
 7839 004c 82EA0E02 		eor	r2, r2, lr
 7840 0050 00F8012B 		strb	r2, [r0], #1
 7841              		.loc 1 2260 4 is_stmt 1 discriminator 3 view .LVU2745
 7842              		.loc 1 2260 20 is_stmt 0 discriminator 3 view .LVU2746
 7843 0054 B3FBFCF2 		udiv	r2, r3, ip
2258:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 7844              		.loc 1 2258 3 discriminator 3 view .LVU2747
 7845 0058 0139     		subs	r1, r1, #1
 7846              		.loc 1 2260 20 discriminator 3 view .LVU2748
 7847 005a C2EBC212 		rsb	r2, r2, r2, lsl #7
 7848 005e A3EB0203 		sub	r3, r3, r2
 7849              	.LVL710:
2258:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 7850              		.loc 1 2258 44 is_stmt 1 discriminator 3 view .LVU2749
2258:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 7851              		.loc 1 2258 15 discriminator 3 view .LVU2750
2258:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 7852              		.loc 1 2258 3 is_stmt 0 discriminator 3 view .LVU2751
 7853 0062 EDD1     		bne	.L658
2254:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel)];
 7854              		.loc 1 2254 21 is_stmt 1 discriminator 2 view .LVU2752
 7855 0064 0135     		adds	r5, r5, #1
 7856              	.LVL711:
2254:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel)];
 7857              		.loc 1 2254 14 discriminator 2 view .LVU2753
2254:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel)];
 7858              		.loc 1 2254 2 is_stmt 0 discriminator 2 view .LVU2754
 7859 0066 042D     		cmp	r5, #4
 7860 0068 07F11007 		add	r7, r7, #16
 7861 006c DED1     		bne	.L659
ARM GAS  /tmp/ccwF1FQu.s 			page 222


2261:bluetooth_rxtx.c **** 		}
2262:bluetooth_rxtx.c **** 	}
2263:bluetooth_rxtx.c **** 
2264:bluetooth_rxtx.c **** 	// then look for that bitsream in our receive buffer
2265:bluetooth_rxtx.c **** 	for (i = 32; i < (DMA_SIZE*8*2 - 32 - 16); i++) {
 7862              		.loc 1 2265 9 view .LVU2755
 7863 006e 2027     		movs	r7, #32
 7864 0070 04F13005 		add	r5, r4, #48
 7865              	.LVL712:
 7866              		.loc 1 2265 9 view .LVU2756
 7867 0074 2034     		adds	r4, r4, #32
 7868              	.LVL713:
 7869              	.L672:
 7870              	.LBB93:
2266:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 7871              		.loc 1 2266 3 is_stmt 1 view .LVU2757
 7872              		.loc 1 2266 7 is_stmt 0 view .LVU2758
 7873 0076 514B     		ldr	r3, .L686+8
 7874 0078 0DF1080C 		add	ip, sp, #8
 7875 007c 0FCB     		ldm	r3, {r0, r1, r2, r3}
 7876 007e 8CE80F00 		stm	ip, {r0, r1, r2, r3}
2267:bluetooth_rxtx.c **** 		int matching = -1;
 7877              		.loc 1 2267 3 is_stmt 1 view .LVU2759
 7878              	.LVL714:
2268:bluetooth_rxtx.c **** 
2269:bluetooth_rxtx.c **** 		for (j = 0; j < 4; ++j) {
 7879              		.loc 1 2269 3 view .LVU2760
 7880              		.loc 1 2269 15 view .LVU2761
 7881              		.loc 1 2269 10 is_stmt 0 view .LVU2762
 7882 0082 0023     		movs	r3, #0
2266:bluetooth_rxtx.c **** 		int matching = -1;
 7883              		.loc 1 2266 7 view .LVU2763
 7884 0084 4146     		mov	r1, r8
2270:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
2271:bluetooth_rxtx.c **** 				if (unpacked[i+k] != desired[j][k]) {
2272:bluetooth_rxtx.c **** 					ok[j] = 0;
 7885              		.loc 1 2272 12 view .LVU2764
 7886 0086 9E46     		mov	lr, r3
 7887              	.LVL715:
 7888              	.L660:
2270:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 7889              		.loc 1 2270 16 is_stmt 1 view .LVU2765
 7890              	.LBE93:
2265:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 7891              		.loc 1 2265 9 is_stmt 0 view .LVU2766
 7892 0088 0846     		mov	r0, r1
 7893 008a 2246     		mov	r2, r4
 7894 008c 01E0     		b	.L663
 7895              	.LVL716:
 7896              	.L661:
 7897              	.LBB101:
2270:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 7898              		.loc 1 2270 45 is_stmt 1 discriminator 2 view .LVU2767
2270:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 7899              		.loc 1 2270 16 discriminator 2 view .LVU2768
2270:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 7900              		.loc 1 2270 4 is_stmt 0 discriminator 2 view .LVU2769
ARM GAS  /tmp/ccwF1FQu.s 			page 223


 7901 008e AA42     		cmp	r2, r5
 7902 0090 07D0     		beq	.L662
 7903              	.L663:
2271:bluetooth_rxtx.c **** 					ok[j] = 0;
 7904              		.loc 1 2271 5 is_stmt 1 view .LVU2770
2271:bluetooth_rxtx.c **** 					ok[j] = 0;
 7905              		.loc 1 2271 17 is_stmt 0 view .LVU2771
 7906 0092 12F801AB 		ldrb	r10, [r2], #1	@ zero_extendqisi2
2271:bluetooth_rxtx.c **** 					ok[j] = 0;
 7907              		.loc 1 2271 36 view .LVU2772
 7908 0096 10F8019B 		ldrb	r9, [r0], #1	@ zero_extendqisi2
2271:bluetooth_rxtx.c **** 					ok[j] = 0;
 7909              		.loc 1 2271 8 view .LVU2773
 7910 009a CA45     		cmp	r10, r9
 7911 009c F7D0     		beq	.L661
 7912              		.loc 1 2272 6 is_stmt 1 view .LVU2774
 7913              		.loc 1 2272 12 is_stmt 0 view .LVU2775
 7914 009e 4CF823E0 		str	lr, [ip, r3, lsl #2]
2273:bluetooth_rxtx.c **** 					break;
 7915              		.loc 1 2273 6 is_stmt 1 view .LVU2776
 7916              	.L662:
2269:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 7917              		.loc 1 2269 22 discriminator 2 view .LVU2777
 7918 00a2 0133     		adds	r3, r3, #1
 7919              	.LVL717:
2269:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 7920              		.loc 1 2269 15 discriminator 2 view .LVU2778
2269:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 7921              		.loc 1 2269 3 is_stmt 0 discriminator 2 view .LVU2779
 7922 00a4 042B     		cmp	r3, #4
 7923 00a6 01F11001 		add	r1, r1, #16
 7924 00aa EDD1     		bne	.L660
2274:bluetooth_rxtx.c **** 				}
2275:bluetooth_rxtx.c **** 			}
2276:bluetooth_rxtx.c **** 		}
2277:bluetooth_rxtx.c **** 
2278:bluetooth_rxtx.c **** 		// see if any match
2279:bluetooth_rxtx.c **** 		for (j = 0; j < 4; ++j) {
 7925              		.loc 1 2279 10 view .LVU2780
 7926 00ac 0023     		movs	r3, #0
 7927              	.LVL718:
 7928              	.L666:
2280:bluetooth_rxtx.c **** 			if (ok[j]) {
 7929              		.loc 1 2280 4 is_stmt 1 view .LVU2781
 7930              		.loc 1 2280 10 is_stmt 0 view .LVU2782
 7931 00ae 5CF8042B 		ldr	r2, [ip], #4
 7932              		.loc 1 2280 7 view .LVU2783
 7933 00b2 002A     		cmp	r2, #0
 7934 00b4 71D1     		bne	.L665
2279:bluetooth_rxtx.c **** 			if (ok[j]) {
 7935              		.loc 1 2279 22 is_stmt 1 discriminator 2 view .LVU2784
 7936              	.LVL719:
2279:bluetooth_rxtx.c **** 			if (ok[j]) {
 7937              		.loc 1 2279 22 is_stmt 0 discriminator 2 view .LVU2785
 7938 00b6 0133     		adds	r3, r3, #1
 7939              	.LVL720:
2279:bluetooth_rxtx.c **** 			if (ok[j]) {
ARM GAS  /tmp/ccwF1FQu.s 			page 224


 7940              		.loc 1 2279 15 is_stmt 1 discriminator 2 view .LVU2786
2279:bluetooth_rxtx.c **** 			if (ok[j]) {
 7941              		.loc 1 2279 3 is_stmt 0 discriminator 2 view .LVU2787
 7942 00b8 042B     		cmp	r3, #4
 7943 00ba F8D1     		bne	.L666
 7944              	.LVL721:
 7945              	.L676:
2279:bluetooth_rxtx.c **** 			if (ok[j]) {
 7946              		.loc 1 2279 3 discriminator 2 view .LVU2788
 7947              	.LBE101:
2265:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 7948              		.loc 1 2265 45 is_stmt 1 discriminator 2 view .LVU2789
2265:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 7949              		.loc 1 2265 46 is_stmt 0 discriminator 2 view .LVU2790
 7950 00bc 0137     		adds	r7, r7, #1
 7951              	.LVL722:
2265:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 7952              		.loc 1 2265 15 is_stmt 1 discriminator 2 view .LVU2791
2265:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 7953              		.loc 1 2265 2 is_stmt 0 discriminator 2 view .LVU2792
 7954 00be B7F53C7F 		cmp	r7, #752
 7955 00c2 05F10105 		add	r5, r5, #1
 7956 00c6 04F10104 		add	r4, r4, #1
 7957 00ca D4D1     		bne	.L672
2281:bluetooth_rxtx.c **** 				matching = j;
2282:bluetooth_rxtx.c **** 				break;
2283:bluetooth_rxtx.c **** 			}
2284:bluetooth_rxtx.c **** 		}
2285:bluetooth_rxtx.c **** 
2286:bluetooth_rxtx.c **** 		// skip if no match
2287:bluetooth_rxtx.c **** 		if (matching < 0)
2288:bluetooth_rxtx.c **** 			continue;
2289:bluetooth_rxtx.c **** 
2290:bluetooth_rxtx.c **** 		// found a match! unwhiten it and send it home
2291:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel)];
2292:bluetooth_rxtx.c **** 		for (j = 0; j < 4+3+3; ++j) {
2293:bluetooth_rxtx.c **** 			u8 byte = 0;
2294:bluetooth_rxtx.c **** 			for (k = 0; k < 8; k++) {
2295:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
2296:bluetooth_rxtx.c **** 				if (offset >= DMA_SIZE*8*2) break;
2297:bluetooth_rxtx.c **** 				int bit = unpacked[offset];
2298:bluetooth_rxtx.c **** 				if (j >= 4) { // unwhiten data bytes
2299:bluetooth_rxtx.c **** 					bit ^= whitening[idx];
2300:bluetooth_rxtx.c **** 					idx = (idx + 1) % sizeof(whitening);
2301:bluetooth_rxtx.c **** 				}
2302:bluetooth_rxtx.c **** 				byte |= bit << k;
2303:bluetooth_rxtx.c **** 			}
2304:bluetooth_rxtx.c **** 			idle_rxbuf[j] = byte;
2305:bluetooth_rxtx.c **** 		}
2306:bluetooth_rxtx.c **** 
2307:bluetooth_rxtx.c **** 		u32 aa = (idle_rxbuf[3] << 24) |
2308:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
2309:bluetooth_rxtx.c **** 				 (idle_rxbuf[1] <<  8) |
2310:bluetooth_rxtx.c **** 				 (idle_rxbuf[0]);
2311:bluetooth_rxtx.c **** 		see_aa(aa);
2312:bluetooth_rxtx.c **** 
2313:bluetooth_rxtx.c **** 		enqueue(LE_PACKET, (uint8_t*)idle_rxbuf);
ARM GAS  /tmp/ccwF1FQu.s 			page 225


2314:bluetooth_rxtx.c **** 
2315:bluetooth_rxtx.c **** 	}
2316:bluetooth_rxtx.c **** 
2317:bluetooth_rxtx.c **** 	// once we see an AA 5 times, start following it
2318:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i) {
 7958              		.loc 1 2318 9 view .LVU2793
 7959 00cc 0023     		movs	r3, #0
2319:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 7960              		.loc 1 2319 30 view .LVU2794
 7961 00ce 3C4A     		ldr	r2, .L686+12
 7962              	.LVL723:
 7963              	.L675:
 7964              		.loc 1 2319 3 is_stmt 1 view .LVU2795
 7965              		.loc 1 2319 6 is_stmt 0 view .LVU2796
 7966 00d0 52F83310 		ldr	r1, [r2, r3, lsl #3]
 7967 00d4 0329     		cmp	r1, #3
 7968 00d6 5BDD     		ble	.L673
2320:bluetooth_rxtx.c **** 			le_set_access_address(le_promisc.active_aa[i].aa);
 7969              		.loc 1 2320 4 is_stmt 1 view .LVU2797
2321:bluetooth_rxtx.c **** 			data_cb = cb_follow_le;
2322:bluetooth_rxtx.c **** 			packet_cb = promisc_follow_cb;
2323:bluetooth_rxtx.c **** 			le.crc_verify = 0;
 7970              		.loc 1 2323 18 is_stmt 0 view .LVU2798
 7971 00d8 0024     		movs	r4, #0
2320:bluetooth_rxtx.c **** 			le_set_access_address(le_promisc.active_aa[i].aa);
 7972              		.loc 1 2320 4 view .LVU2799
 7973 00da 3A4A     		ldr	r2, .L686+16
 7974 00dc 52F83300 		ldr	r0, [r2, r3, lsl #3]
 7975 00e0 FFF7FEFF 		bl	le_set_access_address
 7976              	.LVL724:
2321:bluetooth_rxtx.c **** 			data_cb = cb_follow_le;
 7977              		.loc 1 2321 4 is_stmt 1 view .LVU2800
2321:bluetooth_rxtx.c **** 			data_cb = cb_follow_le;
 7978              		.loc 1 2321 12 is_stmt 0 view .LVU2801
 7979 00e4 384B     		ldr	r3, .L686+20
 7980 00e6 394A     		ldr	r2, .L686+24
2324:bluetooth_rxtx.c **** 			le_promisc_state(0, &le.access_address, 4);
 7981              		.loc 1 2324 4 view .LVU2802
 7982 00e8 2046     		mov	r0, r4
2321:bluetooth_rxtx.c **** 			data_cb = cb_follow_le;
 7983              		.loc 1 2321 12 view .LVU2803
 7984 00ea DA62     		str	r2, [r3, #44]
2322:bluetooth_rxtx.c **** 			le.crc_verify = 0;
 7985              		.loc 1 2322 4 is_stmt 1 view .LVU2804
2322:bluetooth_rxtx.c **** 			le.crc_verify = 0;
 7986              		.loc 1 2322 14 is_stmt 0 view .LVU2805
 7987 00ec 384A     		ldr	r2, .L686+28
 7988 00ee 9A61     		str	r2, [r3, #24]
2323:bluetooth_rxtx.c **** 			le_promisc_state(0, &le.access_address, 4);
 7989              		.loc 1 2323 4 is_stmt 1 view .LVU2806
2323:bluetooth_rxtx.c **** 			le_promisc_state(0, &le.access_address, 4);
 7990              		.loc 1 2323 18 is_stmt 0 view .LVU2807
 7991 00f0 384B     		ldr	r3, .L686+32
 7992              		.loc 1 2324 4 view .LVU2808
 7993 00f2 0422     		movs	r2, #4
 7994 00f4 1946     		mov	r1, r3
2323:bluetooth_rxtx.c **** 			le_promisc_state(0, &le.access_address, 4);
ARM GAS  /tmp/ccwF1FQu.s 			page 226


 7995              		.loc 1 2323 18 view .LVU2809
 7996 00f6 1C61     		str	r4, [r3, #16]
 7997              		.loc 1 2324 4 is_stmt 1 view .LVU2810
 7998 00f8 FFF7FEFF 		bl	le_promisc_state
 7999              	.LVL725:
2325:bluetooth_rxtx.c **** 			// quit using the old stuff and switch to sync mode
2326:bluetooth_rxtx.c **** 			return 0;
 8000              		.loc 1 2326 4 view .LVU2811
 8001              		.loc 1 2326 11 is_stmt 0 view .LVU2812
 8002 00fc 2046     		mov	r0, r4
 8003              	.L656:
2327:bluetooth_rxtx.c **** 		}
2328:bluetooth_rxtx.c **** 	}
2329:bluetooth_rxtx.c **** 
2330:bluetooth_rxtx.c **** 	return 1;
2331:bluetooth_rxtx.c **** }
 8004              		.loc 1 2331 1 view .LVU2813
 8005 00fe 17B0     		add	sp, sp, #92
 8006              		.cfi_remember_state
 8007              		.cfi_def_cfa_offset 36
 8008              		@ sp needed
 8009 0100 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 8010              	.LVL726:
 8011              	.L670:
 8012              		.cfi_restore_state
 8013              	.LBB102:
 8014              	.LBB94:
 8015              	.LBB95:
2295:bluetooth_rxtx.c **** 				if (offset >= DMA_SIZE*8*2) break;
 8016              		.loc 1 2295 5 is_stmt 1 view .LVU2814
2296:bluetooth_rxtx.c **** 				int bit = unpacked[offset];
 8017              		.loc 1 2296 5 view .LVU2815
2297:bluetooth_rxtx.c **** 				if (j >= 4) { // unwhiten data bytes
 8018              		.loc 1 2297 5 view .LVU2816
2297:bluetooth_rxtx.c **** 				if (j >= 4) { // unwhiten data bytes
 8019              		.loc 1 2297 23 is_stmt 0 view .LVU2817
 8020 0104 1AF8013F 		ldrb	r3, [r10, #1]!	@ zero_extendqisi2
2298:bluetooth_rxtx.c **** 					bit ^= whitening[idx];
 8021              		.loc 1 2298 8 view .LVU2818
 8022 0108 0329     		cmp	r1, #3
2297:bluetooth_rxtx.c **** 				if (j >= 4) { // unwhiten data bytes
 8023              		.loc 1 2297 23 view .LVU2819
 8024 010a 0193     		str	r3, [sp, #4]
 8025              	.LVL727:
2298:bluetooth_rxtx.c **** 					bit ^= whitening[idx];
 8026              		.loc 1 2298 5 is_stmt 1 view .LVU2820
2298:bluetooth_rxtx.c **** 					bit ^= whitening[idx];
 8027              		.loc 1 2298 8 is_stmt 0 view .LVU2821
 8028 010c 10DD     		ble	.L669
2299:bluetooth_rxtx.c **** 					idx = (idx + 1) % sizeof(whitening);
 8029              		.loc 1 2299 6 is_stmt 1 view .LVU2822
2299:bluetooth_rxtx.c **** 					idx = (idx + 1) % sizeof(whitening);
 8030              		.loc 1 2299 22 is_stmt 0 view .LVU2823
 8031 010e 2A4B     		ldr	r3, .L686+4
 8032 0110 03EB020B 		add	fp, r3, r2
2299:bluetooth_rxtx.c **** 					idx = (idx + 1) % sizeof(whitening);
 8033              		.loc 1 2299 10 view .LVU2824
ARM GAS  /tmp/ccwF1FQu.s 			page 227


 8034 0114 9BF828B0 		ldrb	fp, [fp, #40]	@ zero_extendqisi2
 8035 0118 019B     		ldr	r3, [sp, #4]
 8036 011a 83EA0B03 		eor	r3, r3, fp
 8037              	.LVL728:
2300:bluetooth_rxtx.c **** 				}
 8038              		.loc 1 2300 6 is_stmt 1 view .LVU2825
2300:bluetooth_rxtx.c **** 				}
 8039              		.loc 1 2300 17 is_stmt 0 view .LVU2826
 8040 011e 02F1010B 		add	fp, r2, #1
2300:bluetooth_rxtx.c **** 				}
 8041              		.loc 1 2300 22 view .LVU2827
 8042 0122 7F22     		movs	r2, #127
 8043              	.LVL729:
2300:bluetooth_rxtx.c **** 				}
 8044              		.loc 1 2300 22 view .LVU2828
 8045 0124 BBFBF2F2 		udiv	r2, fp, r2
 8046 0128 C2EBC212 		rsb	r2, r2, r2, lsl #7
 8047 012c ABEB0202 		sub	r2, fp, r2
 8048              	.LVL730:
 8049              	.L669:
2302:bluetooth_rxtx.c **** 			}
 8050              		.loc 1 2302 5 is_stmt 1 discriminator 2 view .LVU2829
2302:bluetooth_rxtx.c **** 			}
 8051              		.loc 1 2302 17 is_stmt 0 discriminator 2 view .LVU2830
 8052 0130 8340     		lsls	r3, r3, r0
 8053              	.LVL731:
2302:bluetooth_rxtx.c **** 			}
 8054              		.loc 1 2302 17 discriminator 2 view .LVU2831
 8055              	.LBE95:
2294:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 8056              		.loc 1 2294 24 discriminator 2 view .LVU2832
 8057 0132 0130     		adds	r0, r0, #1
 8058              	.LVL732:
 8059              	.LBB96:
2302:bluetooth_rxtx.c **** 			}
 8060              		.loc 1 2302 10 discriminator 2 view .LVU2833
 8061 0134 43EA0C03 		orr	r3, r3, ip
 8062              	.LBE96:
2294:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 8063              		.loc 1 2294 4 discriminator 2 view .LVU2834
 8064 0138 0828     		cmp	r0, #8
 8065              	.LBB97:
2302:bluetooth_rxtx.c **** 			}
 8066              		.loc 1 2302 10 discriminator 2 view .LVU2835
 8067 013a 5FFA83FC 		uxtb	ip, r3
 8068              	.LVL733:
2302:bluetooth_rxtx.c **** 			}
 8069              		.loc 1 2302 10 discriminator 2 view .LVU2836
 8070              	.LBE97:
2294:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 8071              		.loc 1 2294 23 is_stmt 1 discriminator 2 view .LVU2837
2294:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 8072              		.loc 1 2294 16 discriminator 2 view .LVU2838
2294:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 8073              		.loc 1 2294 4 is_stmt 0 discriminator 2 view .LVU2839
 8074 013e E1D1     		bne	.L670
2304:bluetooth_rxtx.c **** 		}
ARM GAS  /tmp/ccwF1FQu.s 			page 228


 8075              		.loc 1 2304 4 is_stmt 1 discriminator 2 view .LVU2840
2304:bluetooth_rxtx.c **** 		}
 8076              		.loc 1 2304 14 is_stmt 0 discriminator 2 view .LVU2841
 8077 0140 D9F80030 		ldr	r3, [r9]
 8078 0144 0EF1080E 		add	lr, lr, #8
2304:bluetooth_rxtx.c **** 		}
 8079              		.loc 1 2304 18 discriminator 2 view .LVU2842
 8080 0148 03F801C0 		strb	ip, [r3, r1]
 8081              	.LBE94:
2292:bluetooth_rxtx.c **** 			u8 byte = 0;
 8082              		.loc 1 2292 26 is_stmt 1 discriminator 2 view .LVU2843
 8083 014c 0131     		adds	r1, r1, #1
 8084              	.LVL734:
2292:bluetooth_rxtx.c **** 			u8 byte = 0;
 8085              		.loc 1 2292 15 discriminator 2 view .LVU2844
2292:bluetooth_rxtx.c **** 			u8 byte = 0;
 8086              		.loc 1 2292 3 is_stmt 0 discriminator 2 view .LVU2845
 8087 014e 0A29     		cmp	r1, #10
 8088 0150 04D0     		beq	.L671
 8089              	.LVL735:
 8090              	.L677:
 8091              	.LBB98:
2294:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 8092              		.loc 1 2294 16 is_stmt 1 view .LVU2846
2293:bluetooth_rxtx.c **** 			for (k = 0; k < 8; k++) {
 8093              		.loc 1 2293 7 is_stmt 0 view .LVU2847
 8094 0152 4FF0000C 		mov	ip, #0
 8095              	.LBE98:
2279:bluetooth_rxtx.c **** 			if (ok[j]) {
 8096              		.loc 1 2279 10 view .LVU2848
 8097 0156 F246     		mov	r10, lr
 8098              	.LBB99:
2294:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 8099              		.loc 1 2294 11 view .LVU2849
 8100 0158 6046     		mov	r0, ip
 8101 015a D3E7     		b	.L670
 8102              	.LVL736:
 8103              	.L671:
2294:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 8104              		.loc 1 2294 11 view .LVU2850
 8105              	.LBE99:
2307:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 8106              		.loc 1 2307 3 is_stmt 1 view .LVU2851
2307:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 8107              		.loc 1 2307 23 is_stmt 0 view .LVU2852
 8108 015c D9F80030 		ldr	r3, [r9]
 8109 0160 D978     		ldrb	r1, [r3, #3]	@ zero_extendqisi2
 8110              	.LVL737:
2308:bluetooth_rxtx.c **** 				 (idle_rxbuf[1] <<  8) |
 8111              		.loc 1 2308 17 view .LVU2853
 8112 0162 D9F80030 		ldr	r3, [r9]
 8113 0166 9B78     		ldrb	r3, [r3, #2]	@ zero_extendqisi2
2309:bluetooth_rxtx.c **** 				 (idle_rxbuf[0]);
 8114              		.loc 1 2309 17 view .LVU2854
 8115 0168 D9F80020 		ldr	r2, [r9]
 8116              	.LVL738:
2308:bluetooth_rxtx.c **** 				 (idle_rxbuf[1] <<  8) |
ARM GAS  /tmp/ccwF1FQu.s 			page 229


 8117              		.loc 1 2308 21 view .LVU2855
 8118 016c 1B04     		lsls	r3, r3, #16
2309:bluetooth_rxtx.c **** 				 (idle_rxbuf[0]);
 8119              		.loc 1 2309 17 view .LVU2856
 8120 016e 5078     		ldrb	r0, [r2, #1]	@ zero_extendqisi2
 8121              	.LVL739:
2310:bluetooth_rxtx.c **** 		see_aa(aa);
 8122              		.loc 1 2310 17 view .LVU2857
 8123 0170 D9F80020 		ldr	r2, [r9]
2307:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 8124              		.loc 1 2307 34 view .LVU2858
 8125 0174 43EA0163 		orr	r3, r3, r1, lsl #24
2310:bluetooth_rxtx.c **** 		see_aa(aa);
 8126              		.loc 1 2310 17 view .LVU2859
 8127 0178 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 8128              	.LVL740:
2311:bluetooth_rxtx.c **** 
 8129              		.loc 1 2311 3 is_stmt 1 view .LVU2860
2309:bluetooth_rxtx.c **** 				 (idle_rxbuf[0]);
 8130              		.loc 1 2309 28 is_stmt 0 view .LVU2861
 8131 017a 1343     		orrs	r3, r3, r2
2311:bluetooth_rxtx.c **** 
 8132              		.loc 1 2311 3 view .LVU2862
 8133 017c 43EA0020 		orr	r0, r3, r0, lsl #8
 8134 0180 FFF7FEFF 		bl	see_aa
 8135              	.LVL741:
2313:bluetooth_rxtx.c **** 
 8136              		.loc 1 2313 3 is_stmt 1 view .LVU2863
 8137 0184 D9F80010 		ldr	r1, [r9]
 8138 0188 0120     		movs	r0, #1
 8139 018a FFF7FEFF 		bl	enqueue
 8140              	.LVL742:
2313:bluetooth_rxtx.c **** 
 8141              		.loc 1 2313 3 is_stmt 0 view .LVU2864
 8142 018e 95E7     		b	.L676
 8143              	.LVL743:
 8144              	.L673:
2313:bluetooth_rxtx.c **** 
 8145              		.loc 1 2313 3 view .LVU2865
 8146              	.LBE102:
2318:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 8147              		.loc 1 2318 32 is_stmt 1 discriminator 2 view .LVU2866
 8148 0190 0133     		adds	r3, r3, #1
 8149              	.LVL744:
2318:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 8150              		.loc 1 2318 14 discriminator 2 view .LVU2867
2318:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 8151              		.loc 1 2318 2 is_stmt 0 discriminator 2 view .LVU2868
 8152 0192 202B     		cmp	r3, #32
 8153 0194 9CD1     		bne	.L675
2330:bluetooth_rxtx.c **** }
 8154              		.loc 1 2330 9 view .LVU2869
 8155 0196 0120     		movs	r0, #1
 8156 0198 B1E7     		b	.L656
 8157              	.LVL745:
 8158              	.L665:
 8159              	.LBB103:
ARM GAS  /tmp/ccwF1FQu.s 			page 230


2287:bluetooth_rxtx.c **** 			continue;
 8160              		.loc 1 2287 3 is_stmt 1 view .LVU2870
2291:bluetooth_rxtx.c **** 		for (j = 0; j < 4+3+3; ++j) {
 8161              		.loc 1 2291 3 view .LVU2871
2291:bluetooth_rxtx.c **** 		for (j = 0; j < 4+3+3; ++j) {
 8162              		.loc 1 2291 25 is_stmt 0 view .LVU2872
 8163 019a 0E4B     		ldr	r3, .L686+32
 8164              	.LBB100:
2304:bluetooth_rxtx.c **** 		}
 8165              		.loc 1 2304 14 view .LVU2873
 8166 019c DFF83890 		ldr	r9, .L686+36
 8167              	.LBE100:
2291:bluetooth_rxtx.c **** 		for (j = 0; j < 4+3+3; ++j) {
 8168              		.loc 1 2291 25 view .LVU2874
 8169 01a0 B3F84C00 		ldrh	r0, [r3, #76]
 8170 01a4 80B2     		uxth	r0, r0
 8171 01a6 FFF7FEFF 		bl	btle_channel_index
 8172              	.LVL746:
2292:bluetooth_rxtx.c **** 			u8 byte = 0;
 8173              		.loc 1 2292 10 view .LVU2875
 8174 01aa 0021     		movs	r1, #0
2291:bluetooth_rxtx.c **** 		for (j = 0; j < 4+3+3; ++j) {
 8175              		.loc 1 2291 7 view .LVU2876
 8176 01ac 325C     		ldrb	r2, [r6, r0]	@ zero_extendqisi2
 8177              	.LVL747:
2292:bluetooth_rxtx.c **** 			u8 byte = 0;
 8178              		.loc 1 2292 3 is_stmt 1 view .LVU2877
2292:bluetooth_rxtx.c **** 			u8 byte = 0;
 8179              		.loc 1 2292 15 view .LVU2878
 8180 01ae A5F1310E 		sub	lr, r5, #49
 8181 01b2 CEE7     		b	.L677
 8182              	.L687:
 8183              		.align	2
 8184              	.L686:
 8185 01b4 95080000 		.word	.LANCHOR2+2197
 8186 01b8 00000000 		.word	.LANCHOR2
 8187 01bc D8080000 		.word	.LANCHOR2+2264
 8188 01c0 04000000 		.word	le_promisc+4
 8189 01c4 00000000 		.word	le_promisc
 8190 01c8 00000000 		.word	.LANCHOR1
 8191 01cc 00000000 		.word	cb_follow_le
 8192 01d0 00000000 		.word	promisc_follow_cb
 8193 01d4 00000000 		.word	.LANCHOR0
 8194 01d8 00000000 		.word	idle_rxbuf
 8195              	.LBE103:
 8196              		.cfi_endproc
 8197              	.LFE32:
 8199              		.section	.text.bt_promisc_le,"ax",%progbits
 8200              		.align	1
 8201              		.global	bt_promisc_le
 8202              		.syntax unified
 8203              		.thumb
 8204              		.thumb_func
 8205              		.fpu softvfp
 8207              	bt_promisc_le:
 8208              	.LFB33:
2332:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccwF1FQu.s 			page 231


2333:bluetooth_rxtx.c **** void bt_promisc_le() {
 8209              		.loc 1 2333 22 view -0
 8210              		.cfi_startproc
 8211              		@ args = 0, pretend = 0, frame = 0
 8212              		@ frame_needed = 0, uses_anonymous_args = 0
 8213 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 8214              		.cfi_def_cfa_offset 24
 8215              		.cfi_offset 3, -24
 8216              		.cfi_offset 4, -20
 8217              		.cfi_offset 5, -16
 8218              		.cfi_offset 6, -12
 8219              		.cfi_offset 7, -8
 8220              		.cfi_offset 14, -4
2334:bluetooth_rxtx.c **** 	while (requested_mode == MODE_BT_PROMISC_LE) {
 8221              		.loc 1 2334 2 view .LVU2880
 8222              		.loc 1 2334 24 is_stmt 0 view .LVU2881
 8223 0002 174E     		ldr	r6, .L698
2335:bluetooth_rxtx.c **** 		reset_le_promisc();
2336:bluetooth_rxtx.c **** 
2337:bluetooth_rxtx.c **** 		// jump to a random data channel and turn up the squelch
2338:bluetooth_rxtx.c **** 		if ((channel & 1) == 1)
 8224              		.loc 1 2338 16 view .LVU2882
 8225 0004 174C     		ldr	r4, .L698+4
 8226 0006 3546     		mov	r5, r6
 8227              	.L689:
2334:bluetooth_rxtx.c **** 	while (requested_mode == MODE_BT_PROMISC_LE) {
 8228              		.loc 1 2334 8 is_stmt 1 view .LVU2883
2334:bluetooth_rxtx.c **** 	while (requested_mode == MODE_BT_PROMISC_LE) {
 8229              		.loc 1 2334 24 is_stmt 0 view .LVU2884
 8230 0008 B37C     		ldrb	r3, [r6, #18]	@ zero_extendqisi2
2334:bluetooth_rxtx.c **** 	while (requested_mode == MODE_BT_PROMISC_LE) {
 8231              		.loc 1 2334 8 view .LVU2885
 8232 000a 0A2B     		cmp	r3, #10
 8233 000c 00D0     		beq	.L693
 8234              	.L688:
2339:bluetooth_rxtx.c **** 			channel = 2440;
2340:bluetooth_rxtx.c **** 
2341:bluetooth_rxtx.c **** 		// if the PC hasn't given us AA, determine by listening
2342:bluetooth_rxtx.c **** 		if (!le.target_set) {
2343:bluetooth_rxtx.c **** 			// cs_threshold_req = -80;
2344:bluetooth_rxtx.c **** 			cs_threshold_calc_and_set(channel);
2345:bluetooth_rxtx.c **** 			data_cb = cb_le_promisc;
2346:bluetooth_rxtx.c **** 			bt_generic_le(MODE_BT_PROMISC_LE);
2347:bluetooth_rxtx.c **** 		}
2348:bluetooth_rxtx.c **** 
2349:bluetooth_rxtx.c **** 		// could have got mode change in middle of above
2350:bluetooth_rxtx.c **** 		if (requested_mode != MODE_BT_PROMISC_LE)
2351:bluetooth_rxtx.c **** 			break;
2352:bluetooth_rxtx.c **** 
2353:bluetooth_rxtx.c **** 		le_promisc_state(0, &le.access_address, 4);
2354:bluetooth_rxtx.c **** 		packet_cb = promisc_follow_cb;
2355:bluetooth_rxtx.c **** 		le.crc_verify = 0;
2356:bluetooth_rxtx.c **** 		bt_le_sync(MODE_BT_PROMISC_LE);
2357:bluetooth_rxtx.c **** 	}
2358:bluetooth_rxtx.c **** }
 8235              		.loc 1 2358 1 view .LVU2886
 8236 000e F8BD     		pop	{r3, r4, r5, r6, r7, pc}
ARM GAS  /tmp/ccwF1FQu.s 			page 232


 8237              	.L693:
2335:bluetooth_rxtx.c **** 		reset_le_promisc();
 8238              		.loc 1 2335 3 is_stmt 1 view .LVU2887
 8239 0010 FFF7FEFF 		bl	reset_le_promisc
 8240              	.LVL748:
2338:bluetooth_rxtx.c **** 			channel = 2440;
 8241              		.loc 1 2338 3 view .LVU2888
2338:bluetooth_rxtx.c **** 			channel = 2440;
 8242              		.loc 1 2338 16 is_stmt 0 view .LVU2889
 8243 0014 B4F84C30 		ldrh	r3, [r4, #76]
2338:bluetooth_rxtx.c **** 			channel = 2440;
 8244              		.loc 1 2338 6 view .LVU2890
 8245 0018 DB07     		lsls	r3, r3, #31
2339:bluetooth_rxtx.c **** 			channel = 2440;
 8246              		.loc 1 2339 4 is_stmt 1 view .LVU2891
2339:bluetooth_rxtx.c **** 			channel = 2440;
 8247              		.loc 1 2339 12 is_stmt 0 view .LVU2892
 8248 001a 44BF     		itt	mi
 8249 001c 40F68813 		movwmi	r3, #2440
 8250 0020 A4F84C30 		strhmi	r3, [r4, #76]	@ movhi
2342:bluetooth_rxtx.c **** 			// cs_threshold_req = -80;
 8251              		.loc 1 2342 3 is_stmt 1 view .LVU2893
2342:bluetooth_rxtx.c **** 			// cs_threshold_req = -80;
 8252              		.loc 1 2342 6 is_stmt 0 view .LVU2894
 8253 0024 636C     		ldr	r3, [r4, #68]
 8254 0026 4BB9     		cbnz	r3, .L691
2344:bluetooth_rxtx.c **** 			data_cb = cb_le_promisc;
 8255              		.loc 1 2344 4 is_stmt 1 view .LVU2895
 8256 0028 B4F84C00 		ldrh	r0, [r4, #76]
 8257 002c 80B2     		uxth	r0, r0
 8258 002e FFF7FEFF 		bl	cs_threshold_calc_and_set
 8259              	.LVL749:
2345:bluetooth_rxtx.c **** 			bt_generic_le(MODE_BT_PROMISC_LE);
 8260              		.loc 1 2345 4 view .LVU2896
2345:bluetooth_rxtx.c **** 			bt_generic_le(MODE_BT_PROMISC_LE);
 8261              		.loc 1 2345 12 is_stmt 0 view .LVU2897
 8262 0032 0D4B     		ldr	r3, .L698+8
2346:bluetooth_rxtx.c **** 		}
 8263              		.loc 1 2346 4 view .LVU2898
 8264 0034 0A20     		movs	r0, #10
2345:bluetooth_rxtx.c **** 			bt_generic_le(MODE_BT_PROMISC_LE);
 8265              		.loc 1 2345 12 view .LVU2899
 8266 0036 EB62     		str	r3, [r5, #44]
2346:bluetooth_rxtx.c **** 		}
 8267              		.loc 1 2346 4 is_stmt 1 view .LVU2900
 8268 0038 FFF7FEFF 		bl	bt_generic_le
 8269              	.LVL750:
 8270              	.L691:
2350:bluetooth_rxtx.c **** 			break;
 8271              		.loc 1 2350 3 view .LVU2901
2350:bluetooth_rxtx.c **** 			break;
 8272              		.loc 1 2350 22 is_stmt 0 view .LVU2902
 8273 003c AB7C     		ldrb	r3, [r5, #18]	@ zero_extendqisi2
2350:bluetooth_rxtx.c **** 			break;
 8274              		.loc 1 2350 6 view .LVU2903
 8275 003e 0A2B     		cmp	r3, #10
2350:bluetooth_rxtx.c **** 			break;
ARM GAS  /tmp/ccwF1FQu.s 			page 233


 8276              		.loc 1 2350 22 view .LVU2904
 8277 0040 DFB2     		uxtb	r7, r3
2350:bluetooth_rxtx.c **** 			break;
 8278              		.loc 1 2350 6 view .LVU2905
 8279 0042 E4D1     		bne	.L688
2353:bluetooth_rxtx.c **** 		packet_cb = promisc_follow_cb;
 8280              		.loc 1 2353 3 is_stmt 1 view .LVU2906
 8281 0044 0422     		movs	r2, #4
 8282 0046 2146     		mov	r1, r4
 8283 0048 0020     		movs	r0, #0
 8284 004a FFF7FEFF 		bl	le_promisc_state
 8285              	.LVL751:
2354:bluetooth_rxtx.c **** 		le.crc_verify = 0;
 8286              		.loc 1 2354 3 view .LVU2907
2354:bluetooth_rxtx.c **** 		le.crc_verify = 0;
 8287              		.loc 1 2354 13 is_stmt 0 view .LVU2908
 8288 004e 074B     		ldr	r3, .L698+12
2356:bluetooth_rxtx.c **** 	}
 8289              		.loc 1 2356 3 view .LVU2909
 8290 0050 3846     		mov	r0, r7
2354:bluetooth_rxtx.c **** 		le.crc_verify = 0;
 8291              		.loc 1 2354 13 view .LVU2910
 8292 0052 AB61     		str	r3, [r5, #24]
2355:bluetooth_rxtx.c **** 		bt_le_sync(MODE_BT_PROMISC_LE);
 8293              		.loc 1 2355 3 is_stmt 1 view .LVU2911
2355:bluetooth_rxtx.c **** 		bt_le_sync(MODE_BT_PROMISC_LE);
 8294              		.loc 1 2355 17 is_stmt 0 view .LVU2912
 8295 0054 0023     		movs	r3, #0
 8296 0056 2361     		str	r3, [r4, #16]
2356:bluetooth_rxtx.c **** 	}
 8297              		.loc 1 2356 3 is_stmt 1 view .LVU2913
 8298 0058 FFF7FEFF 		bl	bt_le_sync
 8299              	.LVL752:
 8300 005c D4E7     		b	.L689
 8301              	.L699:
 8302 005e 00BF     		.align	2
 8303              	.L698:
 8304 0060 00000000 		.word	.LANCHOR1
 8305 0064 00000000 		.word	.LANCHOR0
 8306 0068 00000000 		.word	cb_le_promisc
 8307 006c 00000000 		.word	promisc_follow_cb
 8308              		.cfi_endproc
 8309              	.LFE33:
 8311              		.section	.text.bt_slave_le,"ax",%progbits
 8312              		.align	1
 8313              		.global	bt_slave_le
 8314              		.syntax unified
 8315              		.thumb
 8316              		.thumb_func
 8317              		.fpu softvfp
 8319              	bt_slave_le:
 8320              	.LFB34:
2359:bluetooth_rxtx.c **** 
2360:bluetooth_rxtx.c **** #ifdef TX_ENABLE
2361:bluetooth_rxtx.c **** void bt_slave_le() {
 8321              		.loc 1 2361 20 view -0
 8322              		.cfi_startproc
ARM GAS  /tmp/ccwF1FQu.s 			page 234


 8323              		@ args = 0, pretend = 0, frame = 32
 8324              		@ frame_needed = 0, uses_anonymous_args = 0
 8325 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 8326              		.cfi_def_cfa_offset 20
 8327              		.cfi_offset 4, -20
 8328              		.cfi_offset 5, -16
 8329              		.cfi_offset 6, -12
 8330              		.cfi_offset 7, -8
 8331              		.cfi_offset 14, -4
 8332 0002 89B0     		sub	sp, sp, #36
 8333              		.cfi_def_cfa_offset 56
2362:bluetooth_rxtx.c **** 	u32 calc_crc;
 8334              		.loc 1 2362 2 view .LVU2915
2363:bluetooth_rxtx.c **** 	int i;
 8335              		.loc 1 2363 2 view .LVU2916
2364:bluetooth_rxtx.c **** 	uint8_t adv_ind[32] = { 0x00, };
 8336              		.loc 1 2364 2 view .LVU2917
 8337              		.loc 1 2364 10 is_stmt 0 view .LVU2918
 8338 0004 0025     		movs	r5, #0
2365:bluetooth_rxtx.c **** 	uint8_t adv_ind_len;
2366:bluetooth_rxtx.c **** 
2367:bluetooth_rxtx.c **** 	if (le_adv_len > LE_ADV_MAX_LEN) {
 8339              		.loc 1 2367 17 view .LVU2919
 8340 0006 314F     		ldr	r7, .L707
2364:bluetooth_rxtx.c **** 	uint8_t adv_ind[32] = { 0x00, };
 8341              		.loc 1 2364 10 view .LVU2920
 8342 0008 1C22     		movs	r2, #28
 8343 000a 2946     		mov	r1, r5
 8344 000c 01A8     		add	r0, sp, #4
 8345 000e 0095     		str	r5, [sp]
 8346 0010 FFF7FEFF 		bl	memset
 8347              	.LVL753:
2365:bluetooth_rxtx.c **** 	uint8_t adv_ind_len;
 8348              		.loc 1 2365 2 is_stmt 1 view .LVU2921
 8349              		.loc 1 2367 2 view .LVU2922
 8350              		.loc 1 2367 17 is_stmt 0 view .LVU2923
 8351 0014 BA6D     		ldr	r2, [r7, #88]
 8352 0016 2E4C     		ldr	r4, .L707+4
 8353              		.loc 1 2367 5 view .LVU2924
 8354 0018 FF2A     		cmp	r2, #255
 8355 001a 02D9     		bls	.L701
2368:bluetooth_rxtx.c **** 		requested_mode = MODE_IDLE;
 8356              		.loc 1 2368 3 is_stmt 1 view .LVU2925
 8357              		.loc 1 2368 18 is_stmt 0 view .LVU2926
 8358 001c A574     		strb	r5, [r4, #18]
2369:bluetooth_rxtx.c **** 		return;
 8359              		.loc 1 2369 3 is_stmt 1 view .LVU2927
 8360              	.L700:
2370:bluetooth_rxtx.c **** 	}
2371:bluetooth_rxtx.c **** 
2372:bluetooth_rxtx.c **** 	adv_ind_len = 6 + le_adv_len;
2373:bluetooth_rxtx.c **** 	adv_ind[1] = adv_ind_len;
2374:bluetooth_rxtx.c **** 
2375:bluetooth_rxtx.c **** 	// copy the user-specified mac address
2376:bluetooth_rxtx.c **** 	for (i = 0; i < 6; ++i)
2377:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
2378:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccwF1FQu.s 			page 235


2379:bluetooth_rxtx.c **** 	// copy in the adv data
2380:bluetooth_rxtx.c **** 	memcpy(adv_ind + 2 + 6, le_adv_data, le_adv_len);
2381:bluetooth_rxtx.c **** 
2382:bluetooth_rxtx.c **** 	// total: 2 + 6 + le_adv_len
2383:bluetooth_rxtx.c **** 	adv_ind_len += 2;
2384:bluetooth_rxtx.c **** 
2385:bluetooth_rxtx.c **** 	calc_crc = btle_calc_crc(le.crc_init_reversed, adv_ind, adv_ind_len);
2386:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len + 0] = (calc_crc >>  0) & 0xff;
2387:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len + 1] = (calc_crc >>  8) & 0xff;
2388:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len + 2] = (calc_crc >> 16) & 0xff;
2389:bluetooth_rxtx.c **** 
2390:bluetooth_rxtx.c **** 	clkn_start();
2391:bluetooth_rxtx.c **** 
2392:bluetooth_rxtx.c **** 	// enable USB interrupts due to busy waits
2393:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_USB;
2394:bluetooth_rxtx.c **** 
2395:bluetooth_rxtx.c **** 	// spam advertising packets
2396:bluetooth_rxtx.c **** 	while (requested_mode == MODE_BT_SLAVE_LE) {
2397:bluetooth_rxtx.c **** 		le_transmit(0x8e89bed6, adv_ind_len+3, adv_ind);
2398:bluetooth_rxtx.c **** 		msleep(100);
2399:bluetooth_rxtx.c **** 	}
2400:bluetooth_rxtx.c **** 
2401:bluetooth_rxtx.c **** 	// disable USB interrupts
2402:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_USB;
2403:bluetooth_rxtx.c **** }
 8361              		.loc 1 2403 1 is_stmt 0 view .LVU2928
 8362 001e 09B0     		add	sp, sp, #36
 8363              		.cfi_remember_state
 8364              		.cfi_def_cfa_offset 20
 8365              		@ sp needed
 8366 0020 F0BD     		pop	{r4, r5, r6, r7, pc}
 8367              	.L701:
 8368              		.cfi_restore_state
2372:bluetooth_rxtx.c **** 	adv_ind[1] = adv_ind_len;
 8369              		.loc 1 2372 2 is_stmt 1 view .LVU2929
2372:bluetooth_rxtx.c **** 	adv_ind[1] = adv_ind_len;
 8370              		.loc 1 2372 18 is_stmt 0 view .LVU2930
 8371 0022 D6B2     		uxtb	r6, r2
 8372              	.LVL754:
2373:bluetooth_rxtx.c **** 
 8373              		.loc 1 2373 2 is_stmt 1 view .LVU2931
2372:bluetooth_rxtx.c **** 	adv_ind[1] = adv_ind_len;
 8374              		.loc 1 2372 14 is_stmt 0 view .LVU2932
 8375 0024 B31D     		adds	r3, r6, #6
2373:bluetooth_rxtx.c **** 
 8376              		.loc 1 2373 13 view .LVU2933
 8377 0026 8DF80130 		strb	r3, [sp, #1]
2376:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 8378              		.loc 1 2376 2 is_stmt 1 view .LVU2934
 8379              	.LVL755:
2376:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 8380              		.loc 1 2376 14 view .LVU2935
2377:bluetooth_rxtx.c **** 
 8381              		.loc 1 2377 3 view .LVU2936
2377:bluetooth_rxtx.c **** 
 8382              		.loc 1 2377 16 is_stmt 0 view .LVU2937
 8383 002a 94F82530 		ldrb	r3, [r4, #37]	@ zero_extendqisi2
ARM GAS  /tmp/ccwF1FQu.s 			page 236


2380:bluetooth_rxtx.c **** 
 8384              		.loc 1 2380 2 view .LVU2938
 8385 002e 07F15C01 		add	r1, r7, #92
2377:bluetooth_rxtx.c **** 
 8386              		.loc 1 2377 16 view .LVU2939
 8387 0032 8DF80230 		strb	r3, [sp, #2]
2376:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 8388              		.loc 1 2376 21 is_stmt 1 view .LVU2940
 8389              	.LVL756:
2376:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 8390              		.loc 1 2376 14 view .LVU2941
2377:bluetooth_rxtx.c **** 
 8391              		.loc 1 2377 3 view .LVU2942
2377:bluetooth_rxtx.c **** 
 8392              		.loc 1 2377 16 is_stmt 0 view .LVU2943
 8393 0036 94F82430 		ldrb	r3, [r4, #36]	@ zero_extendqisi2
2380:bluetooth_rxtx.c **** 
 8394              		.loc 1 2380 2 view .LVU2944
 8395 003a 02A8     		add	r0, sp, #8
2377:bluetooth_rxtx.c **** 
 8396              		.loc 1 2377 16 view .LVU2945
 8397 003c 8DF80330 		strb	r3, [sp, #3]
2376:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 8398              		.loc 1 2376 21 is_stmt 1 view .LVU2946
 8399              	.LVL757:
2376:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 8400              		.loc 1 2376 14 view .LVU2947
2377:bluetooth_rxtx.c **** 
 8401              		.loc 1 2377 3 view .LVU2948
2377:bluetooth_rxtx.c **** 
 8402              		.loc 1 2377 16 is_stmt 0 view .LVU2949
 8403 0040 94F82330 		ldrb	r3, [r4, #35]	@ zero_extendqisi2
 8404 0044 8DF80430 		strb	r3, [sp, #4]
2376:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 8405              		.loc 1 2376 21 is_stmt 1 view .LVU2950
 8406              	.LVL758:
2376:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 8407              		.loc 1 2376 14 view .LVU2951
2377:bluetooth_rxtx.c **** 
 8408              		.loc 1 2377 3 view .LVU2952
2377:bluetooth_rxtx.c **** 
 8409              		.loc 1 2377 16 is_stmt 0 view .LVU2953
 8410 0048 94F82230 		ldrb	r3, [r4, #34]	@ zero_extendqisi2
 8411 004c 8DF80530 		strb	r3, [sp, #5]
2376:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 8412              		.loc 1 2376 21 is_stmt 1 view .LVU2954
 8413              	.LVL759:
2376:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 8414              		.loc 1 2376 14 view .LVU2955
2377:bluetooth_rxtx.c **** 
 8415              		.loc 1 2377 3 view .LVU2956
2377:bluetooth_rxtx.c **** 
 8416              		.loc 1 2377 16 is_stmt 0 view .LVU2957
 8417 0050 94F82130 		ldrb	r3, [r4, #33]	@ zero_extendqisi2
 8418 0054 8DF80630 		strb	r3, [sp, #6]
2376:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 8419              		.loc 1 2376 21 is_stmt 1 view .LVU2958
ARM GAS  /tmp/ccwF1FQu.s 			page 237


 8420              	.LVL760:
2376:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 8421              		.loc 1 2376 14 view .LVU2959
2377:bluetooth_rxtx.c **** 
 8422              		.loc 1 2377 3 view .LVU2960
2377:bluetooth_rxtx.c **** 
 8423              		.loc 1 2377 16 is_stmt 0 view .LVU2961
 8424 0058 94F82030 		ldrb	r3, [r4, #32]	@ zero_extendqisi2
 8425 005c 8DF80730 		strb	r3, [sp, #7]
2376:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 8426              		.loc 1 2376 21 is_stmt 1 view .LVU2962
 8427              	.LVL761:
2376:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 8428              		.loc 1 2376 14 view .LVU2963
2380:bluetooth_rxtx.c **** 
 8429              		.loc 1 2380 2 view .LVU2964
 8430 0060 FFF7FEFF 		bl	memcpy
 8431              	.LVL762:
2383:bluetooth_rxtx.c **** 
 8432              		.loc 1 2383 2 view .LVU2965
2385:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len + 0] = (calc_crc >>  0) & 0xff;
 8433              		.loc 1 2385 2 view .LVU2966
2383:bluetooth_rxtx.c **** 
 8434              		.loc 1 2383 14 is_stmt 0 view .LVU2967
 8435 0064 06F10802 		add	r2, r6, #8
2385:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len + 0] = (calc_crc >>  0) & 0xff;
 8436              		.loc 1 2385 13 view .LVU2968
 8437 0068 D5B2     		uxtb	r5, r2
 8438 006a 2A46     		mov	r2, r5
 8439 006c 6946     		mov	r1, sp
 8440 006e F868     		ldr	r0, [r7, #12]
 8441 0070 FFF7FEFF 		bl	btle_calc_crc
 8442              	.LVL763:
2386:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len + 1] = (calc_crc >>  8) & 0xff;
 8443              		.loc 1 2386 2 is_stmt 1 view .LVU2969
2386:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len + 1] = (calc_crc >>  8) & 0xff;
 8444              		.loc 1 2386 27 is_stmt 0 view .LVU2970
 8445 0074 08AB     		add	r3, sp, #32
 8446 0076 5A19     		adds	r2, r3, r5
 8447 0078 02F8200C 		strb	r0, [r2, #-32]
2387:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len + 2] = (calc_crc >> 16) & 0xff;
 8448              		.loc 1 2387 2 is_stmt 1 view .LVU2971
2387:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len + 2] = (calc_crc >> 16) & 0xff;
 8449              		.loc 1 2387 39 is_stmt 0 view .LVU2972
 8450 007c 030A     		lsrs	r3, r0, #8
2388:bluetooth_rxtx.c **** 
 8451              		.loc 1 2388 39 view .LVU2973
 8452 007e 000C     		lsrs	r0, r0, #16
 8453              	.LVL764:
2387:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len + 2] = (calc_crc >> 16) & 0xff;
 8454              		.loc 1 2387 27 view .LVU2974
 8455 0080 02F81F3C 		strb	r3, [r2, #-31]
2388:bluetooth_rxtx.c **** 
 8456              		.loc 1 2388 2 is_stmt 1 view .LVU2975
2388:bluetooth_rxtx.c **** 
 8457              		.loc 1 2388 27 is_stmt 0 view .LVU2976
 8458 0084 02F81E0C 		strb	r0, [r2, #-30]
ARM GAS  /tmp/ccwF1FQu.s 			page 238


2390:bluetooth_rxtx.c **** 
 8459              		.loc 1 2390 2 is_stmt 1 view .LVU2977
 8460 0088 FFF7FEFF 		bl	clkn_start
 8461              	.LVL765:
2393:bluetooth_rxtx.c **** 
 8462              		.loc 1 2393 2 view .LVU2978
2393:bluetooth_rxtx.c **** 
 8463              		.loc 1 2393 8 is_stmt 0 view .LVU2979
 8464 008c 4FF08072 		mov	r2, #16777216
 8465 0090 104B     		ldr	r3, .L707+8
2397:bluetooth_rxtx.c **** 		msleep(100);
 8466              		.loc 1 2397 3 view .LVU2980
 8467 0092 114F     		ldr	r7, .L707+12
 8468              	.LBB106:
 8469              	.LBB107:
 831:bluetooth_rxtx.c **** 	uint32_t stop_at = now + millis * 10000 / 3125; // millis -> clkn ticks
 8470              		.loc 1 831 23 view .LVU2981
 8471 0094 114D     		ldr	r5, .L707+16
 8472              	.LBE107:
 8473              	.LBE106:
2393:bluetooth_rxtx.c **** 
 8474              		.loc 1 2393 8 view .LVU2982
 8475 0096 1A60     		str	r2, [r3]
2396:bluetooth_rxtx.c **** 		le_transmit(0x8e89bed6, adv_ind_len+3, adv_ind);
 8476              		.loc 1 2396 2 is_stmt 1 view .LVU2983
 8477              	.L703:
2396:bluetooth_rxtx.c **** 		le_transmit(0x8e89bed6, adv_ind_len+3, adv_ind);
 8478              		.loc 1 2396 8 view .LVU2984
2396:bluetooth_rxtx.c **** 		le_transmit(0x8e89bed6, adv_ind_len+3, adv_ind);
 8479              		.loc 1 2396 24 is_stmt 0 view .LVU2985
 8480 0098 A37C     		ldrb	r3, [r4, #18]	@ zero_extendqisi2
2396:bluetooth_rxtx.c **** 		le_transmit(0x8e89bed6, adv_ind_len+3, adv_ind);
 8481              		.loc 1 2396 8 view .LVU2986
 8482 009a 0C2B     		cmp	r3, #12
 8483 009c 04D0     		beq	.L705
2402:bluetooth_rxtx.c **** }
 8484              		.loc 1 2402 2 is_stmt 1 view .LVU2987
2402:bluetooth_rxtx.c **** }
 8485              		.loc 1 2402 8 is_stmt 0 view .LVU2988
 8486 009e 4FF08072 		mov	r2, #16777216
 8487 00a2 0F4B     		ldr	r3, .L707+20
 8488 00a4 1A60     		str	r2, [r3]
 8489 00a6 BAE7     		b	.L700
 8490              	.L705:
2397:bluetooth_rxtx.c **** 		msleep(100);
 8491              		.loc 1 2397 3 is_stmt 1 view .LVU2989
 8492 00a8 06F10B01 		add	r1, r6, #11
 8493 00ac 6A46     		mov	r2, sp
 8494 00ae 3846     		mov	r0, r7
 8495 00b0 C9B2     		uxtb	r1, r1
 8496 00b2 FFF7FEFF 		bl	le_transmit
 8497              	.LVL766:
2398:bluetooth_rxtx.c **** 	}
 8498              		.loc 1 2398 3 view .LVU2990
 8499              	.LBB109:
 8500              	.LBI106:
 829:bluetooth_rxtx.c **** {
ARM GAS  /tmp/ccwF1FQu.s 			page 239


 8501              		.loc 1 829 13 view .LVU2991
 8502              	.LBB108:
 831:bluetooth_rxtx.c **** 	uint32_t stop_at = now + millis * 10000 / 3125; // millis -> clkn ticks
 8503              		.loc 1 831 2 view .LVU2992
 831:bluetooth_rxtx.c **** 	uint32_t stop_at = now + millis * 10000 / 3125; // millis -> clkn ticks
 8504              		.loc 1 831 23 is_stmt 0 view .LVU2993
 8505 00b6 2B68     		ldr	r3, [r5]
 8506              	.LVL767:
 832:bluetooth_rxtx.c **** 
 8507              		.loc 1 832 2 is_stmt 1 view .LVU2994
 831:bluetooth_rxtx.c **** 	uint32_t stop_at = now + millis * 10000 / 3125; // millis -> clkn ticks
 8508              		.loc 1 831 11 is_stmt 0 view .LVU2995
 8509 00b8 23F07F43 		bic	r3, r3, #-16777216
 8510              	.LVL768:
 832:bluetooth_rxtx.c **** 
 8511              		.loc 1 832 11 view .LVU2996
 8512 00bc 03F5A073 		add	r3, r3, #320
 8513              	.LVL769:
 835:bluetooth_rxtx.c **** 		stop_at -= ((uint32_t)1<<28);
 8514              		.loc 1 835 2 is_stmt 1 view .LVU2997
 8515              	.L704:
 839:bluetooth_rxtx.c **** 	}
 8516              		.loc 1 839 38 view .LVU2998
 839:bluetooth_rxtx.c **** 	}
 8517              		.loc 1 839 9 view .LVU2999
 839:bluetooth_rxtx.c **** 	}
 8518              		.loc 1 839 16 is_stmt 0 view .LVU3000
 8519 00c0 2A68     		ldr	r2, [r5]
 8520 00c2 22F07F42 		bic	r2, r2, #-16777216
 839:bluetooth_rxtx.c **** 	}
 8521              		.loc 1 839 9 view .LVU3001
 8522 00c6 9342     		cmp	r3, r2
 8523 00c8 FAD8     		bhi	.L704
 8524 00ca E5E7     		b	.L703
 8525              	.L708:
 8526              		.align	2
 8527              	.L707:
 8528 00cc 00000000 		.word	.LANCHOR0
 8529 00d0 00000000 		.word	.LANCHOR1
 8530 00d4 00E100E0 		.word	-536813312
 8531 00d8 D6BE898E 		.word	-1903575338
 8532 00dc 00000000 		.word	clkn
 8533 00e0 80E100E0 		.word	-536813184
 8534              	.LBE108:
 8535              	.LBE109:
 8536              		.cfi_endproc
 8537              	.LFE34:
 8539              		.section	.text.rx_generic_sync,"ax",%progbits
 8540              		.align	1
 8541              		.global	rx_generic_sync
 8542              		.syntax unified
 8543              		.thumb
 8544              		.thumb_func
 8545              		.fpu softvfp
 8547              	rx_generic_sync:
 8548              	.LFB35:
2404:bluetooth_rxtx.c **** #endif
ARM GAS  /tmp/ccwF1FQu.s 			page 240


2405:bluetooth_rxtx.c **** 
2406:bluetooth_rxtx.c **** void rx_generic_sync(void) {
 8549              		.loc 1 2406 28 is_stmt 1 view -0
 8550              		.cfi_startproc
 8551              		@ args = 0, pretend = 0, frame = 40
 8552              		@ frame_needed = 0, uses_anonymous_args = 0
 8553 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 8554              		.cfi_def_cfa_offset 20
 8555              		.cfi_offset 4, -20
 8556              		.cfi_offset 5, -16
 8557              		.cfi_offset 6, -12
 8558              		.cfi_offset 7, -8
 8559              		.cfi_offset 14, -4
 8560 0002 8BB0     		sub	sp, sp, #44
 8561              		.cfi_def_cfa_offset 64
2407:bluetooth_rxtx.c **** 	u8 len = 32;
 8562              		.loc 1 2407 2 view .LVU3003
 8563              	.LVL770:
2408:bluetooth_rxtx.c **** 	u8 buf[len+4];
 8564              		.loc 1 2408 2 view .LVU3004
2409:bluetooth_rxtx.c **** 	u16 reg_val;
 8565              		.loc 1 2409 2 view .LVU3005
2410:bluetooth_rxtx.c **** 
2411:bluetooth_rxtx.c **** 	/* Put syncword at start of buffer
2412:bluetooth_rxtx.c **** 	 * DGS: fix this later, we don't know number of syncword bytes, etc
2413:bluetooth_rxtx.c **** 	 */
2414:bluetooth_rxtx.c **** 	reg_val = cc2400_get(SYNCH);
 8566              		.loc 1 2414 2 view .LVU3006
 8567              		.loc 1 2414 12 is_stmt 0 view .LVU3007
 8568 0004 2D20     		movs	r0, #45
 8569 0006 FFF7FEFF 		bl	cc2400_get
 8570              	.LVL771:
2415:bluetooth_rxtx.c **** 	buf[0] = (reg_val >> 8) & 0xFF;
 8571              		.loc 1 2415 2 is_stmt 1 view .LVU3008
 8572              		.loc 1 2415 9 is_stmt 0 view .LVU3009
 8573 000a 030A     		lsrs	r3, r0, #8
2416:bluetooth_rxtx.c **** 	buf[1] = reg_val & 0xFF;
 8574              		.loc 1 2416 9 view .LVU3010
 8575 000c 8DF80500 		strb	r0, [sp, #5]
2417:bluetooth_rxtx.c **** 	reg_val = cc2400_get(SYNCL);
 8576              		.loc 1 2417 12 view .LVU3011
 8577 0010 2C20     		movs	r0, #44
 8578              	.LVL772:
2415:bluetooth_rxtx.c **** 	buf[0] = (reg_val >> 8) & 0xFF;
 8579              		.loc 1 2415 9 view .LVU3012
 8580 0012 8DF80430 		strb	r3, [sp, #4]
2416:bluetooth_rxtx.c **** 	buf[1] = reg_val & 0xFF;
 8581              		.loc 1 2416 2 is_stmt 1 view .LVU3013
 8582              		.loc 1 2417 2 view .LVU3014
 8583              		.loc 1 2417 12 is_stmt 0 view .LVU3015
 8584 0016 FFF7FEFF 		bl	cc2400_get
 8585              	.LVL773:
2418:bluetooth_rxtx.c **** 	buf[2] = (reg_val >> 8) & 0xFF;
 8586              		.loc 1 2418 2 is_stmt 1 view .LVU3016
 8587              		.loc 1 2418 9 is_stmt 0 view .LVU3017
 8588 001a 030A     		lsrs	r3, r0, #8
 8589 001c 8DF80630 		strb	r3, [sp, #6]
ARM GAS  /tmp/ccwF1FQu.s 			page 241


2419:bluetooth_rxtx.c **** 	buf[3] = reg_val & 0xFF;
 8590              		.loc 1 2419 2 is_stmt 1 view .LVU3018
 8591              		.loc 1 2419 9 is_stmt 0 view .LVU3019
 8592 0020 8DF80700 		strb	r0, [sp, #7]
2420:bluetooth_rxtx.c **** 
2421:bluetooth_rxtx.c **** 	usb_queue_init();
 8593              		.loc 1 2421 2 is_stmt 1 view .LVU3020
 8594 0024 FFF7FEFF 		bl	usb_queue_init
 8595              	.LVL774:
2422:bluetooth_rxtx.c **** 	clkn_start();
 8596              		.loc 1 2422 2 view .LVU3021
 8597 0028 FFF7FEFF 		bl	clkn_start
 8598              	.LVL775:
2423:bluetooth_rxtx.c **** 
2424:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 8599              		.loc 1 2424 2 view .LVU3022
 8600              	.L710:
 8601              		.loc 1 2424 45 discriminator 1 view .LVU3023
 8602              		.loc 1 2424 8 discriminator 1 view .LVU3024
 8603              		.loc 1 2424 11 is_stmt 0 discriminator 1 view .LVU3025
 8604 002c FFF7FEFF 		bl	cc2400_status
 8605              	.LVL776:
 8606              		.loc 1 2424 8 discriminator 1 view .LVU3026
 8607 0030 4106     		lsls	r1, r0, #25
 8608 0032 FBD5     		bpl	.L710
2425:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 8609              		.loc 1 2425 2 is_stmt 1 view .LVU3027
 8610 0034 6120     		movs	r0, #97
 8611 0036 FFF7FEFF 		bl	cc2400_strobe
 8612              	.LVL777:
2426:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 8613              		.loc 1 2426 2 view .LVU3028
 8614              	.L711:
 8615              		.loc 1 2426 38 discriminator 1 view .LVU3029
 8616              		.loc 1 2426 8 discriminator 1 view .LVU3030
 8617              		.loc 1 2426 11 is_stmt 0 discriminator 1 view .LVU3031
 8618 003a FFF7FEFF 		bl	cc2400_status
 8619              	.LVL778:
 8620              		.loc 1 2426 8 discriminator 1 view .LVU3032
 8621 003e 4207     		lsls	r2, r0, #29
 8622 0040 FBD5     		bpl	.L711
2427:bluetooth_rxtx.c **** 	RXLED_SET;
 8623              		.loc 1 2427 2 is_stmt 1 view .LVU3033
 8624 0042 1022     		movs	r2, #16
2428:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2429:bluetooth_rxtx.c **** 		PAEN_SET;
 8625              		.loc 1 2429 3 is_stmt 0 view .LVU3034
 8626 0044 8021     		movs	r1, #128
2427:bluetooth_rxtx.c **** 	RXLED_SET;
 8627              		.loc 1 2427 2 view .LVU3035
 8628 0046 134C     		ldr	r4, .L722
2430:bluetooth_rxtx.c **** 		HGM_SET;
2431:bluetooth_rxtx.c **** #endif
2432:bluetooth_rxtx.c **** 	while (1) {
2433:bluetooth_rxtx.c **** 		while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
2434:bluetooth_rxtx.c **** 		cc2400_strobe(SRX);
2435:bluetooth_rxtx.c **** 		USRLED_CLR;
ARM GAS  /tmp/ccwF1FQu.s 			page 242


 8629              		.loc 1 2435 3 view .LVU3036
 8630 0048 0225     		movs	r5, #2
2427:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
 8631              		.loc 1 2427 2 view .LVU3037
 8632 004a 2260     		str	r2, [r4]
2429:bluetooth_rxtx.c **** 		HGM_SET;
 8633              		.loc 1 2429 3 is_stmt 1 view .LVU3038
 8634 004c 124A     		ldr	r2, .L722+4
 8635              		.loc 1 2435 3 is_stmt 0 view .LVU3039
 8636 004e 134F     		ldr	r7, .L722+8
2429:bluetooth_rxtx.c **** 		HGM_SET;
 8637              		.loc 1 2429 3 view .LVU3040
 8638 0050 1160     		str	r1, [r2]
2430:bluetooth_rxtx.c **** 		HGM_SET;
 8639              		.loc 1 2430 3 is_stmt 1 view .LVU3041
 8640 0052 4FF48071 		mov	r1, #256
2436:bluetooth_rxtx.c **** 		while (!(cc2400_status() & SYNC_RECEIVED));
2437:bluetooth_rxtx.c **** 		USRLED_SET;
2438:bluetooth_rxtx.c **** 
2439:bluetooth_rxtx.c **** 		cc2400_fifo_read(len, buf+4);
2440:bluetooth_rxtx.c **** 		enqueue(BR_PACKET, buf);
2441:bluetooth_rxtx.c **** 		handle_usb(clkn);
 8641              		.loc 1 2441 3 is_stmt 0 view .LVU3042
 8642 0056 124E     		ldr	r6, .L722+12
2430:bluetooth_rxtx.c **** #endif
 8643              		.loc 1 2430 3 view .LVU3043
 8644 0058 1160     		str	r1, [r2]
 8645              	.L712:
2433:bluetooth_rxtx.c **** 		cc2400_strobe(SRX);
 8646              		.loc 1 2433 62 is_stmt 1 discriminator 1 view .LVU3044
2433:bluetooth_rxtx.c **** 		cc2400_strobe(SRX);
 8647              		.loc 1 2433 9 discriminator 1 view .LVU3045
2433:bluetooth_rxtx.c **** 		cc2400_strobe(SRX);
 8648              		.loc 1 2433 11 is_stmt 0 discriminator 1 view .LVU3046
 8649 005a 0E20     		movs	r0, #14
 8650 005c FFF7FEFF 		bl	cc2400_get
 8651              	.LVL779:
2433:bluetooth_rxtx.c **** 		cc2400_strobe(SRX);
 8652              		.loc 1 2433 9 discriminator 1 view .LVU3047
 8653 0060 00F01F00 		and	r0, r0, #31
 8654 0064 0F28     		cmp	r0, #15
 8655 0066 F8D1     		bne	.L712
2434:bluetooth_rxtx.c **** 		USRLED_CLR;
 8656              		.loc 1 2434 3 is_stmt 1 view .LVU3048
 8657 0068 6220     		movs	r0, #98
 8658 006a FFF7FEFF 		bl	cc2400_strobe
 8659              	.LVL780:
2435:bluetooth_rxtx.c **** 		while (!(cc2400_status() & SYNC_RECEIVED));
 8660              		.loc 1 2435 3 view .LVU3049
 8661 006e 3D60     		str	r5, [r7]
2436:bluetooth_rxtx.c **** 		USRLED_SET;
 8662              		.loc 1 2436 3 view .LVU3050
 8663              	.L713:
2436:bluetooth_rxtx.c **** 		USRLED_SET;
 8664              		.loc 1 2436 45 discriminator 1 view .LVU3051
2436:bluetooth_rxtx.c **** 		USRLED_SET;
 8665              		.loc 1 2436 9 discriminator 1 view .LVU3052
ARM GAS  /tmp/ccwF1FQu.s 			page 243


2436:bluetooth_rxtx.c **** 		USRLED_SET;
 8666              		.loc 1 2436 12 is_stmt 0 discriminator 1 view .LVU3053
 8667 0070 FFF7FEFF 		bl	cc2400_status
 8668              	.LVL781:
2436:bluetooth_rxtx.c **** 		USRLED_SET;
 8669              		.loc 1 2436 9 discriminator 1 view .LVU3054
 8670 0074 C306     		lsls	r3, r0, #27
 8671 0076 FBD5     		bpl	.L713
2437:bluetooth_rxtx.c **** 
 8672              		.loc 1 2437 3 is_stmt 1 view .LVU3055
2439:bluetooth_rxtx.c **** 		enqueue(BR_PACKET, buf);
 8673              		.loc 1 2439 3 is_stmt 0 view .LVU3056
 8674 0078 02A9     		add	r1, sp, #8
 8675 007a 2020     		movs	r0, #32
2437:bluetooth_rxtx.c **** 
 8676              		.loc 1 2437 3 view .LVU3057
 8677 007c 2560     		str	r5, [r4]
2439:bluetooth_rxtx.c **** 		enqueue(BR_PACKET, buf);
 8678              		.loc 1 2439 3 is_stmt 1 view .LVU3058
 8679 007e FFF7FEFF 		bl	cc2400_fifo_read
 8680              	.LVL782:
2440:bluetooth_rxtx.c **** 		handle_usb(clkn);
 8681              		.loc 1 2440 3 view .LVU3059
 8682 0082 01A9     		add	r1, sp, #4
 8683              	.LVL783:
2440:bluetooth_rxtx.c **** 		handle_usb(clkn);
 8684              		.loc 1 2440 3 is_stmt 0 view .LVU3060
 8685 0084 0020     		movs	r0, #0
 8686 0086 FFF7FEFF 		bl	enqueue
 8687              	.LVL784:
 8688              		.loc 1 2441 3 is_stmt 1 view .LVU3061
 8689 008a 3068     		ldr	r0, [r6]
 8690 008c FFF7FEFF 		bl	handle_usb
 8691              	.LVL785:
2432:bluetooth_rxtx.c **** 		while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 8692              		.loc 1 2432 8 view .LVU3062
2433:bluetooth_rxtx.c **** 		cc2400_strobe(SRX);
 8693              		.loc 1 2433 9 is_stmt 0 view .LVU3063
 8694 0090 E3E7     		b	.L712
 8695              	.L723:
 8696 0092 00BF     		.align	2
 8697              	.L722:
 8698 0094 38C00920 		.word	537509944
 8699 0098 58C00920 		.word	537509976
 8700 009c 3CC00920 		.word	537509948
 8701 00a0 00000000 		.word	clkn
 8702              		.cfi_endproc
 8703              	.LFE35:
 8705              		.section	.text.rx_generic,"ax",%progbits
 8706              		.align	1
 8707              		.global	rx_generic
 8708              		.syntax unified
 8709              		.thumb
 8710              		.thumb_func
 8711              		.fpu softvfp
 8713              	rx_generic:
 8714              	.LFB36:
ARM GAS  /tmp/ccwF1FQu.s 			page 244


2442:bluetooth_rxtx.c **** 	}
2443:bluetooth_rxtx.c **** }
2444:bluetooth_rxtx.c **** 
2445:bluetooth_rxtx.c **** void rx_generic(void) {
 8715              		.loc 1 2445 23 is_stmt 1 view -0
 8716              		.cfi_startproc
 8717              		@ args = 0, pretend = 0, frame = 0
 8718              		@ frame_needed = 0, uses_anonymous_args = 0
 8719 0000 08B5     		push	{r3, lr}
 8720              		.cfi_def_cfa_offset 8
 8721              		.cfi_offset 3, -8
 8722              		.cfi_offset 14, -4
2446:bluetooth_rxtx.c **** 	// Check for packet mode
2447:bluetooth_rxtx.c **** 	if(cc2400_get(GRMDM) && 0x0400) {
 8723              		.loc 1 2447 2 view .LVU3065
 8724              		.loc 1 2447 5 is_stmt 0 view .LVU3066
 8725 0002 2020     		movs	r0, #32
 8726 0004 FFF7FEFF 		bl	cc2400_get
 8727              	.LVL786:
 8728              		.loc 1 2447 4 view .LVU3067
 8729 0008 08B1     		cbz	r0, .L725
2448:bluetooth_rxtx.c **** 		rx_generic_sync();
 8730              		.loc 1 2448 3 is_stmt 1 view .LVU3068
 8731 000a FFF7FEFF 		bl	rx_generic_sync
 8732              	.LVL787:
 8733              	.L725:
2449:bluetooth_rxtx.c **** 	} else {
2450:bluetooth_rxtx.c **** 		modulation = MOD_NONE;
 8734              		.loc 1 2450 3 view .LVU3069
 8735              		.loc 1 2450 14 is_stmt 0 view .LVU3070
 8736 000e 0322     		movs	r2, #3
 8737 0010 024B     		ldr	r3, .L726
 8738 0012 1A70     		strb	r2, [r3]
2451:bluetooth_rxtx.c **** 		bt_stream_rx();
 8739              		.loc 1 2451 3 is_stmt 1 view .LVU3071
2452:bluetooth_rxtx.c **** 	}
2453:bluetooth_rxtx.c **** }
 8740              		.loc 1 2453 1 is_stmt 0 view .LVU3072
 8741 0014 BDE80840 		pop	{r3, lr}
 8742              		.cfi_restore 14
 8743              		.cfi_restore 3
 8744              		.cfi_def_cfa_offset 0
2451:bluetooth_rxtx.c **** 		bt_stream_rx();
 8745              		.loc 1 2451 3 view .LVU3073
 8746 0018 FFF7FEBF 		b	bt_stream_rx
 8747              	.LVL788:
 8748              	.L727:
 8749              		.align	2
 8750              	.L726:
 8751 001c 00000000 		.word	.LANCHOR1
 8752              		.cfi_endproc
 8753              	.LFE36:
 8755              		.section	.text.tx_generic,"ax",%progbits
 8756              		.align	1
 8757              		.global	tx_generic
 8758              		.syntax unified
 8759              		.thumb
ARM GAS  /tmp/ccwF1FQu.s 			page 245


 8760              		.thumb_func
 8761              		.fpu softvfp
 8763              	tx_generic:
 8764              	.LFB37:
2454:bluetooth_rxtx.c **** 
2455:bluetooth_rxtx.c **** #ifdef TX_ENABLE
2456:bluetooth_rxtx.c **** void tx_generic(void) {
 8765              		.loc 1 2456 23 is_stmt 1 view -0
 8766              		.cfi_startproc
 8767              		@ args = 0, pretend = 0, frame = 0
 8768              		@ frame_needed = 0, uses_anonymous_args = 0
 8769 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 8770              		.cfi_def_cfa_offset 24
 8771              		.cfi_offset 4, -24
 8772              		.cfi_offset 5, -20
 8773              		.cfi_offset 6, -16
 8774              		.cfi_offset 7, -12
 8775              		.cfi_offset 8, -8
 8776              		.cfi_offset 14, -4
2457:bluetooth_rxtx.c **** 	u16 synch, syncl;
 8777              		.loc 1 2457 2 view .LVU3075
2458:bluetooth_rxtx.c **** 	u8 prev_mode = mode;
 8778              		.loc 1 2458 2 view .LVU3076
2459:bluetooth_rxtx.c **** 
2460:bluetooth_rxtx.c **** 	mode = MODE_TX_GENERIC;
 8779              		.loc 1 2460 7 is_stmt 0 view .LVU3077
 8780 0004 1023     		movs	r3, #16
2458:bluetooth_rxtx.c **** 	u8 prev_mode = mode;
 8781              		.loc 1 2458 5 view .LVU3078
 8782 0006 354D     		ldr	r5, .L741
2461:bluetooth_rxtx.c **** 
2462:bluetooth_rxtx.c **** 	// Save existing syncword
2463:bluetooth_rxtx.c **** 	synch = cc2400_get(SYNCH);
 8783              		.loc 1 2463 10 view .LVU3079
 8784 0008 2D20     		movs	r0, #45
2458:bluetooth_rxtx.c **** 
 8785              		.loc 1 2458 5 view .LVU3080
 8786 000a 6E7C     		ldrb	r6, [r5, #17]	@ zero_extendqisi2
2460:bluetooth_rxtx.c **** 
 8787              		.loc 1 2460 7 view .LVU3081
 8788 000c 6B74     		strb	r3, [r5, #17]
 8789              		.loc 1 2463 10 view .LVU3082
 8790 000e FFF7FEFF 		bl	cc2400_get
 8791              	.LVL789:
 8792 0012 8046     		mov	r8, r0
2464:bluetooth_rxtx.c **** 	syncl = cc2400_get(SYNCL);
 8793              		.loc 1 2464 10 view .LVU3083
 8794 0014 2C20     		movs	r0, #44
 8795 0016 FFF7FEFF 		bl	cc2400_get
 8796              	.LVL790:
2465:bluetooth_rxtx.c **** 
2466:bluetooth_rxtx.c **** 	cc2400_set(SYNCH, tx_pkt.synch);
 8797              		.loc 1 2466 2 view .LVU3084
 8798 001a 314C     		ldr	r4, .L741+4
2464:bluetooth_rxtx.c **** 	syncl = cc2400_get(SYNCL);
 8799              		.loc 1 2464 10 view .LVU3085
 8800 001c 0746     		mov	r7, r0
ARM GAS  /tmp/ccwF1FQu.s 			page 246


 8801              		.loc 1 2466 2 view .LVU3086
 8802 001e 2188     		ldrh	r1, [r4]
 8803 0020 2D20     		movs	r0, #45
 8804 0022 FFF7FEFF 		bl	cc2400_set
 8805              	.LVL791:
2467:bluetooth_rxtx.c **** 	cc2400_set(SYNCL, tx_pkt.syncl);
 8806              		.loc 1 2467 2 view .LVU3087
 8807 0026 2C20     		movs	r0, #44
 8808 0028 6188     		ldrh	r1, [r4, #2]
 8809 002a FFF7FEFF 		bl	cc2400_set
 8810              	.LVL792:
2468:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0057);
 8811              		.loc 1 2468 2 view .LVU3088
 8812 002e 5721     		movs	r1, #87
 8813 0030 0320     		movs	r0, #3
 8814 0032 FFF7FEFF 		bl	cc2400_set
 8815              	.LVL793:
2469:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b);
 8816              		.loc 1 2469 2 view .LVU3089
 8817 0036 41F24B31 		movw	r1, #4939
 8818 003a 1420     		movs	r0, #20
 8819 003c FFF7FEFF 		bl	cc2400_set
 8820              	.LVL794:
2470:bluetooth_rxtx.c **** 	cc2400_set(GRMDM, 0x0f61);
 8821              		.loc 1 2470 2 view .LVU3090
 8822 0040 40F66171 		movw	r1, #3937
 8823 0044 2020     		movs	r0, #32
 8824 0046 FFF7FEFF 		bl	cc2400_set
 8825              	.LVL795:
2471:bluetooth_rxtx.c **** 	cc2400_set(FSDIV, tx_pkt.channel);
 8826              		.loc 1 2471 2 view .LVU3091
 8827 004a 0220     		movs	r0, #2
 8828 004c A188     		ldrh	r1, [r4, #4]
 8829 004e FFF7FEFF 		bl	cc2400_set
 8830              	.LVL796:
2472:bluetooth_rxtx.c **** 	cc2400_set(FREND, tx_pkt.pa_level);
 8831              		.loc 1 2472 2 view .LVU3092
 8832 0052 0520     		movs	r0, #5
 8833 0054 E179     		ldrb	r1, [r4, #7]	@ zero_extendqisi2
2458:bluetooth_rxtx.c **** 
 8834              		.loc 1 2458 5 view .LVU3093
 8835 0056 F6B2     		uxtb	r6, r6
 8836              	.LVL797:
2460:bluetooth_rxtx.c **** 
 8837              		.loc 1 2460 2 is_stmt 1 view .LVU3094
2463:bluetooth_rxtx.c **** 	syncl = cc2400_get(SYNCL);
 8838              		.loc 1 2463 2 view .LVU3095
2464:bluetooth_rxtx.c **** 
 8839              		.loc 1 2464 2 view .LVU3096
2466:bluetooth_rxtx.c **** 	cc2400_set(SYNCL, tx_pkt.syncl);
 8840              		.loc 1 2466 2 view .LVU3097
2467:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0057);
 8841              		.loc 1 2467 2 view .LVU3098
2468:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b);
 8842              		.loc 1 2468 2 view .LVU3099
2469:bluetooth_rxtx.c **** 	cc2400_set(GRMDM, 0x0f61);
 8843              		.loc 1 2469 2 view .LVU3100
ARM GAS  /tmp/ccwF1FQu.s 			page 247


2470:bluetooth_rxtx.c **** 	cc2400_set(FSDIV, tx_pkt.channel);
 8844              		.loc 1 2470 2 view .LVU3101
2471:bluetooth_rxtx.c **** 	cc2400_set(FREND, tx_pkt.pa_level);
 8845              		.loc 1 2471 2 view .LVU3102
 8846              		.loc 1 2472 2 view .LVU3103
 8847 0058 FFF7FEFF 		bl	cc2400_set
 8848              	.LVL798:
2473:bluetooth_rxtx.c **** 
2474:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 8849              		.loc 1 2474 2 view .LVU3104
 8850              	.L729:
 8851              		.loc 1 2474 45 discriminator 1 view .LVU3105
 8852              		.loc 1 2474 8 discriminator 1 view .LVU3106
 8853              		.loc 1 2474 11 is_stmt 0 discriminator 1 view .LVU3107
 8854 005c FFF7FEFF 		bl	cc2400_status
 8855              	.LVL799:
 8856              		.loc 1 2474 8 discriminator 1 view .LVU3108
 8857 0060 4106     		lsls	r1, r0, #25
 8858 0062 FBD5     		bpl	.L729
2475:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 8859              		.loc 1 2475 2 is_stmt 1 view .LVU3109
 8860 0064 6120     		movs	r0, #97
 8861 0066 FFF7FEFF 		bl	cc2400_strobe
 8862              	.LVL800:
2476:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 8863              		.loc 1 2476 2 view .LVU3110
 8864              	.L730:
 8865              		.loc 1 2476 38 discriminator 1 view .LVU3111
 8866              		.loc 1 2476 8 discriminator 1 view .LVU3112
 8867              		.loc 1 2476 11 is_stmt 0 discriminator 1 view .LVU3113
 8868 006a FFF7FEFF 		bl	cc2400_status
 8869              	.LVL801:
 8870              		.loc 1 2476 8 discriminator 1 view .LVU3114
 8871 006e 4207     		lsls	r2, r0, #29
 8872 0070 FBD5     		bpl	.L730
2477:bluetooth_rxtx.c **** 	TXLED_SET;
 8873              		.loc 1 2477 2 is_stmt 1 view .LVU3115
 8874 0072 4FF48072 		mov	r2, #256
 8875 0076 1B4B     		ldr	r3, .L741+8
 8876 0078 1A60     		str	r2, [r3]
2478:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2479:bluetooth_rxtx.c **** 		PAEN_SET;
 8877              		.loc 1 2479 3 view .LVU3116
 8878 007a 8022     		movs	r2, #128
 8879 007c 1A62     		str	r2, [r3, #32]
2480:bluetooth_rxtx.c **** #endif
2481:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 8880              		.loc 1 2481 2 view .LVU3117
 8881              	.L731:
 8882              		.loc 1 2481 61 discriminator 1 view .LVU3118
 8883              		.loc 1 2481 8 discriminator 1 view .LVU3119
 8884              		.loc 1 2481 10 is_stmt 0 discriminator 1 view .LVU3120
 8885 007e 0E20     		movs	r0, #14
 8886 0080 FFF7FEFF 		bl	cc2400_get
 8887              	.LVL802:
 8888              		.loc 1 2481 8 discriminator 1 view .LVU3121
 8889 0084 00F01F00 		and	r0, r0, #31
ARM GAS  /tmp/ccwF1FQu.s 			page 248


 8890 0088 0F28     		cmp	r0, #15
 8891 008a F8D1     		bne	.L731
2482:bluetooth_rxtx.c **** 
2483:bluetooth_rxtx.c **** 	cc2400_fifo_write(tx_pkt.length, tx_pkt.data);
 8892              		.loc 1 2483 2 is_stmt 1 view .LVU3122
 8893 008c A079     		ldrb	r0, [r4, #6]	@ zero_extendqisi2
 8894 008e 1649     		ldr	r1, .L741+12
 8895 0090 FFF7FEFF 		bl	cc2400_fifo_write
 8896              	.LVL803:
2484:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 8897              		.loc 1 2484 2 view .LVU3123
 8898 0094 6320     		movs	r0, #99
 8899 0096 FFF7FEFF 		bl	cc2400_strobe
 8900              	.LVL804:
2485:bluetooth_rxtx.c **** 
2486:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 8901              		.loc 1 2486 2 view .LVU3124
 8902              	.L732:
 8903              		.loc 1 2486 61 discriminator 1 view .LVU3125
 8904              		.loc 1 2486 8 discriminator 1 view .LVU3126
 8905              		.loc 1 2486 10 is_stmt 0 discriminator 1 view .LVU3127
 8906 009a 0E20     		movs	r0, #14
 8907 009c FFF7FEFF 		bl	cc2400_get
 8908              	.LVL805:
 8909              		.loc 1 2486 8 discriminator 1 view .LVU3128
 8910 00a0 00F01F00 		and	r0, r0, #31
 8911 00a4 0F28     		cmp	r0, #15
 8912 00a6 F8D1     		bne	.L732
2487:bluetooth_rxtx.c **** 	TXLED_CLR;
 8913              		.loc 1 2487 2 is_stmt 1 view .LVU3129
 8914 00a8 4FF48072 		mov	r2, #256
 8915 00ac 0F4B     		ldr	r3, .L741+16
2488:bluetooth_rxtx.c **** 
2489:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 8916              		.loc 1 2489 2 is_stmt 0 view .LVU3130
 8917 00ae 6420     		movs	r0, #100
2487:bluetooth_rxtx.c **** 	TXLED_CLR;
 8918              		.loc 1 2487 2 view .LVU3131
 8919 00b0 1A60     		str	r2, [r3]
 8920              		.loc 1 2489 2 is_stmt 1 view .LVU3132
 8921 00b2 FFF7FEFF 		bl	cc2400_strobe
 8922              	.LVL806:
2490:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 8923              		.loc 1 2490 2 view .LVU3133
 8924              	.L733:
 8925              		.loc 1 2490 37 discriminator 1 view .LVU3134
 8926              		.loc 1 2490 8 discriminator 1 view .LVU3135
 8927              		.loc 1 2490 10 is_stmt 0 discriminator 1 view .LVU3136
 8928 00b6 FFF7FEFF 		bl	cc2400_status
 8929              	.LVL807:
 8930              		.loc 1 2490 8 discriminator 1 view .LVU3137
 8931 00ba 4307     		lsls	r3, r0, #29
 8932 00bc FBD4     		bmi	.L733
2491:bluetooth_rxtx.c **** 
2492:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2493:bluetooth_rxtx.c **** 	PAEN_CLR;
 8933              		.loc 1 2493 2 is_stmt 1 view .LVU3138
ARM GAS  /tmp/ccwF1FQu.s 			page 249


 8934 00be 8022     		movs	r2, #128
 8935 00c0 0B4B     		ldr	r3, .L741+20
2494:bluetooth_rxtx.c **** #endif
2495:bluetooth_rxtx.c **** 
2496:bluetooth_rxtx.c **** 	// Restore state
2497:bluetooth_rxtx.c **** 	cc2400_set(SYNCH, synch);
 8936              		.loc 1 2497 2 is_stmt 0 view .LVU3139
 8937 00c2 4146     		mov	r1, r8
 8938 00c4 2D20     		movs	r0, #45
2493:bluetooth_rxtx.c **** #endif
 8939              		.loc 1 2493 2 view .LVU3140
 8940 00c6 1A60     		str	r2, [r3]
 8941              		.loc 1 2497 2 is_stmt 1 view .LVU3141
 8942 00c8 FFF7FEFF 		bl	cc2400_set
 8943              	.LVL808:
2498:bluetooth_rxtx.c **** 	cc2400_set(SYNCL, syncl);
 8944              		.loc 1 2498 2 view .LVU3142
 8945 00cc 3946     		mov	r1, r7
 8946 00ce 2C20     		movs	r0, #44
 8947 00d0 FFF7FEFF 		bl	cc2400_set
 8948              	.LVL809:
2499:bluetooth_rxtx.c **** 	requested_mode = prev_mode;
 8949              		.loc 1 2499 2 view .LVU3143
 8950              		.loc 1 2499 17 is_stmt 0 view .LVU3144
 8951 00d4 AE74     		strb	r6, [r5, #18]
2500:bluetooth_rxtx.c **** }
 8952              		.loc 1 2500 1 view .LVU3145
 8953 00d6 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 8954              	.LVL810:
 8955              	.L742:
 8956              		.loc 1 2500 1 view .LVU3146
 8957 00da 00BF     		.align	2
 8958              	.L741:
 8959 00dc 00000000 		.word	.LANCHOR1
 8960 00e0 00000000 		.word	tx_pkt
 8961 00e4 38C00920 		.word	537509944
 8962 00e8 08000000 		.word	tx_pkt+8
 8963 00ec 3CC00920 		.word	537509948
 8964 00f0 5CC00920 		.word	537509980
 8965              		.cfi_endproc
 8966              	.LFE37:
 8968              		.section	.text.specan,"ax",%progbits
 8969              		.align	1
 8970              		.global	specan
 8971              		.syntax unified
 8972              		.thumb
 8973              		.thumb_func
 8974              		.fpu softvfp
 8976              	specan:
 8977              	.LFB38:
2501:bluetooth_rxtx.c **** #endif
2502:bluetooth_rxtx.c **** 
2503:bluetooth_rxtx.c **** /* spectrum analysis */
2504:bluetooth_rxtx.c **** void specan()
2505:bluetooth_rxtx.c **** {
 8978              		.loc 1 2505 1 is_stmt 1 view -0
 8979              		.cfi_startproc
ARM GAS  /tmp/ccwF1FQu.s 			page 250


 8980              		@ args = 0, pretend = 0, frame = 56
 8981              		@ frame_needed = 0, uses_anonymous_args = 0
 8982 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 8983              		.cfi_def_cfa_offset 32
 8984              		.cfi_offset 4, -32
 8985              		.cfi_offset 5, -28
 8986              		.cfi_offset 6, -24
 8987              		.cfi_offset 7, -20
 8988              		.cfi_offset 8, -16
 8989              		.cfi_offset 9, -12
 8990              		.cfi_offset 10, -8
 8991              		.cfi_offset 14, -4
 8992 0004 8EB0     		sub	sp, sp, #56
 8993              		.cfi_def_cfa_offset 88
2506:bluetooth_rxtx.c **** 	u16 f;
 8994              		.loc 1 2506 2 view .LVU3148
2507:bluetooth_rxtx.c **** 	u8 i = 0;
 8995              		.loc 1 2507 2 view .LVU3149
 8996              	.LVL811:
2508:bluetooth_rxtx.c **** 	u8 buf[DMA_SIZE];
 8997              		.loc 1 2508 2 view .LVU3150
2509:bluetooth_rxtx.c **** 
2510:bluetooth_rxtx.c **** 	RXLED_SET;
 8998              		.loc 1 2510 2 view .LVU3151
 8999 0006 1022     		movs	r2, #16
 9000 0008 3C4B     		ldr	r3, .L761
 9001 000a 1A60     		str	r2, [r3]
2511:bluetooth_rxtx.c **** 
2512:bluetooth_rxtx.c **** 	usb_queue_init();
 9002              		.loc 1 2512 2 view .LVU3152
 9003 000c FFF7FEFF 		bl	usb_queue_init
 9004              	.LVL812:
2513:bluetooth_rxtx.c **** 	clkn_start();
 9005              		.loc 1 2513 2 view .LVU3153
 9006 0010 FFF7FEFF 		bl	clkn_start
 9007              	.LVL813:
2514:bluetooth_rxtx.c **** 
2515:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2516:bluetooth_rxtx.c **** 	PAEN_SET;
 9008              		.loc 1 2516 2 view .LVU3154
 9009 0014 8022     		movs	r2, #128
 9010 0016 3A4B     		ldr	r3, .L761+4
2517:bluetooth_rxtx.c **** 	//HGM_SET;
2518:bluetooth_rxtx.c **** #endif
2519:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 9011              		.loc 1 2519 2 is_stmt 0 view .LVU3155
 9012 0018 42F62231 		movw	r1, #11042
2516:bluetooth_rxtx.c **** 	//HGM_SET;
 9013              		.loc 1 2516 2 view .LVU3156
 9014 001c 1A60     		str	r2, [r3]
 9015              		.loc 1 2519 2 is_stmt 1 view .LVU3157
 9016 001e 1220     		movs	r0, #18
 9017 0020 FFF7FEFF 		bl	cc2400_set
 9018              	.LVL814:
2520:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 9019              		.loc 1 2520 2 view .LVU3158
 9020 0024 41F24B31 		movw	r1, #4939
ARM GAS  /tmp/ccwF1FQu.s 			page 251


 9021 0028 1420     		movs	r0, #20
 9022 002a FFF7FEFF 		bl	cc2400_set
 9023              	.LVL815:
2521:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 9024              		.loc 1 2521 2 view .LVU3159
 9025 002e 40F20111 		movw	r1, #257
 9026 0032 2020     		movs	r0, #32
 9027 0034 FFF7FEFF 		bl	cc2400_set
 9028              	.LVL816:
2522:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0029); // 160 kHz frequency deviation
 9029              		.loc 1 2522 2 view .LVU3160
 9030 0038 2921     		movs	r1, #41
 9031 003a 0320     		movs	r0, #3
 9032 003c FFF7FEFF 		bl	cc2400_set
 9033              	.LVL817:
2523:bluetooth_rxtx.c **** 	//FIXME maybe set RSSI.RSSI_FILT
2524:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 9034              		.loc 1 2524 2 view .LVU3161
 9035              	.L744:
 9036              		.loc 1 2524 45 discriminator 1 view .LVU3162
 9037              		.loc 1 2524 8 discriminator 1 view .LVU3163
 9038              		.loc 1 2524 11 is_stmt 0 discriminator 1 view .LVU3164
 9039 0040 FFF7FEFF 		bl	cc2400_status
 9040              	.LVL818:
 9041              		.loc 1 2524 8 discriminator 1 view .LVU3165
 9042 0044 4106     		lsls	r1, r0, #25
 9043 0046 FBD5     		bpl	.L744
 9044              	.L745:
2525:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 9045              		.loc 1 2525 37 is_stmt 1 discriminator 1 view .LVU3166
 9046              		.loc 1 2525 8 discriminator 1 view .LVU3167
 9047              		.loc 1 2525 10 is_stmt 0 discriminator 1 view .LVU3168
 9048 0048 FFF7FEFF 		bl	cc2400_status
 9049              	.LVL819:
 9050              		.loc 1 2525 8 discriminator 1 view .LVU3169
 9051 004c 10F00404 		ands	r4, r0, #4
 9052 0050 FAD1     		bne	.L745
2526:bluetooth_rxtx.c **** 
2527:bluetooth_rxtx.c **** 	while (requested_mode == MODE_SPECAN) {
 9053              		.loc 1 2527 24 view .LVU3170
 9054 0052 DFF8B490 		ldr	r9, .L761+12
2528:bluetooth_rxtx.c **** 		for (f = low_freq; f < high_freq + 1; f++) {
 9055              		.loc 1 2528 10 view .LVU3171
 9056 0056 DFF8B480 		ldr	r8, .L761+16
 9057              	.LVL820:
 9058              	.L746:
2527:bluetooth_rxtx.c **** 		for (f = low_freq; f < high_freq + 1; f++) {
 9059              		.loc 1 2527 8 is_stmt 1 view .LVU3172
2527:bluetooth_rxtx.c **** 		for (f = low_freq; f < high_freq + 1; f++) {
 9060              		.loc 1 2527 24 is_stmt 0 view .LVU3173
 9061 005a 99F81230 		ldrb	r3, [r9, #18]	@ zero_extendqisi2
2527:bluetooth_rxtx.c **** 		for (f = low_freq; f < high_freq + 1; f++) {
 9062              		.loc 1 2527 8 view .LVU3174
 9063 005e 042B     		cmp	r3, #4
 9064 0060 05D0     		beq	.L753
2529:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
2530:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
ARM GAS  /tmp/ccwF1FQu.s 			page 252


2531:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
2532:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
2533:bluetooth_rxtx.c **** 
2534:bluetooth_rxtx.c **** 			/* give the CC2400 time to acquire RSSI reading */
2535:bluetooth_rxtx.c **** 			volatile u32 j = 500; while (--j); //FIXME crude delay
2536:bluetooth_rxtx.c **** 			buf[3 * i] = (f >> 8) & 0xFF;
2537:bluetooth_rxtx.c **** 			buf[(3 * i) + 1] = f  & 0xFF;
2538:bluetooth_rxtx.c **** 			buf[(3 * i) + 2] = cc2400_get(RSSI) >> 8;
2539:bluetooth_rxtx.c **** 			i++;
2540:bluetooth_rxtx.c **** 			if (i == 16) {
2541:bluetooth_rxtx.c **** 				enqueue(SPECAN, buf);
2542:bluetooth_rxtx.c **** 				i = 0;
2543:bluetooth_rxtx.c **** 
2544:bluetooth_rxtx.c **** 				handle_usb(clkn);
2545:bluetooth_rxtx.c **** 			}
2546:bluetooth_rxtx.c **** 
2547:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
2548:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
2549:bluetooth_rxtx.c **** 		}
2550:bluetooth_rxtx.c **** 	}
2551:bluetooth_rxtx.c **** 	RXLED_CLR;
 9065              		.loc 1 2551 2 is_stmt 1 view .LVU3175
 9066 0062 1022     		movs	r2, #16
 9067 0064 274B     		ldr	r3, .L761+8
 9068 0066 1A60     		str	r2, [r3]
2552:bluetooth_rxtx.c **** }
 9069              		.loc 1 2552 1 is_stmt 0 view .LVU3176
 9070 0068 0EB0     		add	sp, sp, #56
 9071              		.cfi_remember_state
 9072              		.cfi_def_cfa_offset 32
 9073              		@ sp needed
 9074 006a BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 9075              	.LVL821:
 9076              	.L753:
 9077              		.cfi_restore_state
2528:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 9078              		.loc 1 2528 3 is_stmt 1 view .LVU3177
2528:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 9079              		.loc 1 2528 10 is_stmt 0 view .LVU3178
 9080 006e B8F85270 		ldrh	r7, [r8, #82]
 9081              	.LBB110:
2544:bluetooth_rxtx.c **** 			}
 9082              		.loc 1 2544 5 view .LVU3179
 9083 0072 DFF89CA0 		ldr	r10, .L761+20
 9084              	.LBE110:
2528:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 9085              		.loc 1 2528 10 view .LVU3180
 9086 0076 BFB2     		uxth	r7, r7
 9087              	.LVL822:
 9088              	.L747:
2528:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 9089              		.loc 1 2528 22 is_stmt 1 discriminator 1 view .LVU3181
2528:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 9090              		.loc 1 2528 24 is_stmt 0 discriminator 1 view .LVU3182
 9091 0078 B8F85430 		ldrh	r3, [r8, #84]
 9092 007c 9BB2     		uxth	r3, r3
2528:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
ARM GAS  /tmp/ccwF1FQu.s 			page 253


 9093              		.loc 1 2528 3 discriminator 1 view .LVU3183
 9094 007e BB42     		cmp	r3, r7
 9095 0080 EBD3     		bcc	.L746
 9096              	.LBB111:
2529:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
 9097              		.loc 1 2529 4 is_stmt 1 view .LVU3184
 9098 0082 791E     		subs	r1, r7, #1
 9099 0084 0220     		movs	r0, #2
 9100 0086 89B2     		uxth	r1, r1
 9101 0088 FFF7FEFF 		bl	cc2400_set
 9102              	.LVL823:
2530:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 9103              		.loc 1 2530 4 view .LVU3185
 9104 008c 6120     		movs	r0, #97
 9105 008e FFF7FEFF 		bl	cc2400_strobe
 9106              	.LVL824:
2531:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 9107              		.loc 1 2531 4 view .LVU3186
 9108              	.L748:
2531:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 9109              		.loc 1 2531 40 discriminator 1 view .LVU3187
2531:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 9110              		.loc 1 2531 10 discriminator 1 view .LVU3188
2531:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 9111              		.loc 1 2531 13 is_stmt 0 discriminator 1 view .LVU3189
 9112 0092 FFF7FEFF 		bl	cc2400_status
 9113              	.LVL825:
2531:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 9114              		.loc 1 2531 10 discriminator 1 view .LVU3190
 9115 0096 4207     		lsls	r2, r0, #29
 9116 0098 FBD5     		bpl	.L748
2532:bluetooth_rxtx.c **** 
 9117              		.loc 1 2532 4 is_stmt 1 view .LVU3191
 9118 009a 6220     		movs	r0, #98
 9119 009c FFF7FEFF 		bl	cc2400_strobe
 9120              	.LVL826:
2535:bluetooth_rxtx.c **** 			buf[3 * i] = (f >> 8) & 0xFF;
 9121              		.loc 1 2535 4 view .LVU3192
2535:bluetooth_rxtx.c **** 			buf[3 * i] = (f >> 8) & 0xFF;
 9122              		.loc 1 2535 17 is_stmt 0 view .LVU3193
 9123 00a0 4FF4FA73 		mov	r3, #500
 9124 00a4 0093     		str	r3, [sp]
2535:bluetooth_rxtx.c **** 			buf[3 * i] = (f >> 8) & 0xFF;
 9125              		.loc 1 2535 26 is_stmt 1 view .LVU3194
 9126              	.L749:
2535:bluetooth_rxtx.c **** 			buf[3 * i] = (f >> 8) & 0xFF;
 9127              		.loc 1 2535 37 discriminator 2 view .LVU3195
2535:bluetooth_rxtx.c **** 			buf[3 * i] = (f >> 8) & 0xFF;
 9128              		.loc 1 2535 32 discriminator 2 view .LVU3196
2535:bluetooth_rxtx.c **** 			buf[3 * i] = (f >> 8) & 0xFF;
 9129              		.loc 1 2535 33 is_stmt 0 discriminator 2 view .LVU3197
 9130 00a6 009D     		ldr	r5, [sp]
 9131 00a8 013D     		subs	r5, r5, #1
2535:bluetooth_rxtx.c **** 			buf[3 * i] = (f >> 8) & 0xFF;
 9132              		.loc 1 2535 32 discriminator 2 view .LVU3198
 9133 00aa 0095     		str	r5, [sp]
 9134 00ac 002D     		cmp	r5, #0
ARM GAS  /tmp/ccwF1FQu.s 			page 254


 9135 00ae FAD1     		bne	.L749
2536:bluetooth_rxtx.c **** 			buf[(3 * i) + 1] = f  & 0xFF;
 9136              		.loc 1 2536 4 is_stmt 1 view .LVU3199
2536:bluetooth_rxtx.c **** 			buf[(3 * i) + 1] = f  & 0xFF;
 9137              		.loc 1 2536 10 is_stmt 0 view .LVU3200
 9138 00b0 04EB4406 		add	r6, r4, r4, lsl #1
2536:bluetooth_rxtx.c **** 			buf[(3 * i) + 1] = f  & 0xFF;
 9139              		.loc 1 2536 15 view .LVU3201
 9140 00b4 0EAB     		add	r3, sp, #56
 9141 00b6 1E44     		add	r6, r6, r3
2538:bluetooth_rxtx.c **** 			i++;
 9142              		.loc 1 2538 23 view .LVU3202
 9143 00b8 0620     		movs	r0, #6
2536:bluetooth_rxtx.c **** 			buf[(3 * i) + 1] = f  & 0xFF;
 9144              		.loc 1 2536 15 view .LVU3203
 9145 00ba 3B0A     		lsrs	r3, r7, #8
 9146 00bc 06F8343C 		strb	r3, [r6, #-52]
2537:bluetooth_rxtx.c **** 			buf[(3 * i) + 2] = cc2400_get(RSSI) >> 8;
 9147              		.loc 1 2537 4 is_stmt 1 view .LVU3204
2537:bluetooth_rxtx.c **** 			buf[(3 * i) + 2] = cc2400_get(RSSI) >> 8;
 9148              		.loc 1 2537 21 is_stmt 0 view .LVU3205
 9149 00c0 06F8337C 		strb	r7, [r6, #-51]
2538:bluetooth_rxtx.c **** 			i++;
 9150              		.loc 1 2538 4 is_stmt 1 view .LVU3206
2538:bluetooth_rxtx.c **** 			i++;
 9151              		.loc 1 2538 23 is_stmt 0 view .LVU3207
 9152 00c4 FFF7FEFF 		bl	cc2400_get
 9153              	.LVL827:
2539:bluetooth_rxtx.c **** 			if (i == 16) {
 9154              		.loc 1 2539 5 view .LVU3208
 9155 00c8 0134     		adds	r4, r4, #1
 9156              	.LVL828:
2539:bluetooth_rxtx.c **** 			if (i == 16) {
 9157              		.loc 1 2539 5 view .LVU3209
 9158 00ca E4B2     		uxtb	r4, r4
2538:bluetooth_rxtx.c **** 			i++;
 9159              		.loc 1 2538 21 view .LVU3210
 9160 00cc 000A     		lsrs	r0, r0, #8
2540:bluetooth_rxtx.c **** 				enqueue(SPECAN, buf);
 9161              		.loc 1 2540 7 view .LVU3211
 9162 00ce 102C     		cmp	r4, #16
2538:bluetooth_rxtx.c **** 			i++;
 9163              		.loc 1 2538 21 view .LVU3212
 9164 00d0 06F8320C 		strb	r0, [r6, #-50]
2539:bluetooth_rxtx.c **** 			if (i == 16) {
 9165              		.loc 1 2539 4 is_stmt 1 view .LVU3213
 9166              	.LVL829:
2540:bluetooth_rxtx.c **** 				enqueue(SPECAN, buf);
 9167              		.loc 1 2540 4 view .LVU3214
2540:bluetooth_rxtx.c **** 				enqueue(SPECAN, buf);
 9168              		.loc 1 2540 7 is_stmt 0 view .LVU3215
 9169 00d4 08D1     		bne	.L750
2541:bluetooth_rxtx.c **** 				i = 0;
 9170              		.loc 1 2541 5 is_stmt 1 view .LVU3216
 9171 00d6 01A9     		add	r1, sp, #4
 9172 00d8 0420     		movs	r0, #4
 9173 00da FFF7FEFF 		bl	enqueue
ARM GAS  /tmp/ccwF1FQu.s 			page 255


 9174              	.LVL830:
2542:bluetooth_rxtx.c **** 
 9175              		.loc 1 2542 5 view .LVU3217
2544:bluetooth_rxtx.c **** 			}
 9176              		.loc 1 2544 5 view .LVU3218
 9177 00de DAF80000 		ldr	r0, [r10]
 9178 00e2 FFF7FEFF 		bl	handle_usb
 9179              	.LVL831:
2542:bluetooth_rxtx.c **** 
 9180              		.loc 1 2542 7 is_stmt 0 view .LVU3219
 9181 00e6 2C46     		mov	r4, r5
 9182              	.LVL832:
 9183              	.L750:
2547:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
 9184              		.loc 1 2547 4 is_stmt 1 view .LVU3220
 9185 00e8 6420     		movs	r0, #100
 9186 00ea FFF7FEFF 		bl	cc2400_strobe
 9187              	.LVL833:
2548:bluetooth_rxtx.c **** 		}
 9188              		.loc 1 2548 4 view .LVU3221
 9189              	.L751:
2548:bluetooth_rxtx.c **** 		}
 9190              		.loc 1 2548 39 discriminator 1 view .LVU3222
2548:bluetooth_rxtx.c **** 		}
 9191              		.loc 1 2548 10 discriminator 1 view .LVU3223
2548:bluetooth_rxtx.c **** 		}
 9192              		.loc 1 2548 12 is_stmt 0 discriminator 1 view .LVU3224
 9193 00ee FFF7FEFF 		bl	cc2400_status
 9194              	.LVL834:
2548:bluetooth_rxtx.c **** 		}
 9195              		.loc 1 2548 10 discriminator 1 view .LVU3225
 9196 00f2 4307     		lsls	r3, r0, #29
 9197 00f4 FBD4     		bmi	.L751
 9198              	.LBE111:
2528:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 9199              		.loc 1 2528 41 is_stmt 1 discriminator 2 view .LVU3226
2528:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 9200              		.loc 1 2528 42 is_stmt 0 discriminator 2 view .LVU3227
 9201 00f6 0137     		adds	r7, r7, #1
 9202              	.LVL835:
2528:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 9203              		.loc 1 2528 42 discriminator 2 view .LVU3228
 9204 00f8 BFB2     		uxth	r7, r7
 9205              	.LVL836:
2528:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 9206              		.loc 1 2528 42 discriminator 2 view .LVU3229
 9207 00fa BDE7     		b	.L747
 9208              	.L762:
 9209              		.align	2
 9210              	.L761:
 9211 00fc 38C00920 		.word	537509944
 9212 0100 58C00920 		.word	537509976
 9213 0104 3CC00920 		.word	537509948
 9214 0108 00000000 		.word	.LANCHOR1
 9215 010c 00000000 		.word	.LANCHOR0
 9216 0110 00000000 		.word	clkn
 9217              		.cfi_endproc
ARM GAS  /tmp/ccwF1FQu.s 			page 256


 9218              	.LFE38:
 9220              		.section	.text.led_specan,"ax",%progbits
 9221              		.align	1
 9222              		.global	led_specan
 9223              		.syntax unified
 9224              		.thumb
 9225              		.thumb_func
 9226              		.fpu softvfp
 9228              	led_specan:
 9229              	.LFB39:
2553:bluetooth_rxtx.c **** 
2554:bluetooth_rxtx.c **** /* LED based spectrum analysis */
2555:bluetooth_rxtx.c **** void led_specan()
2556:bluetooth_rxtx.c **** {
 9230              		.loc 1 2556 1 is_stmt 1 view -0
 9231              		.cfi_startproc
 9232              		@ args = 0, pretend = 0, frame = 16
 9233              		@ frame_needed = 0, uses_anonymous_args = 0
 9234 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 9235              		.cfi_def_cfa_offset 20
 9236              		.cfi_offset 4, -20
 9237              		.cfi_offset 5, -16
 9238              		.cfi_offset 6, -12
 9239              		.cfi_offset 7, -8
 9240              		.cfi_offset 14, -4
 9241 0002 85B0     		sub	sp, sp, #20
 9242              		.cfi_def_cfa_offset 40
2557:bluetooth_rxtx.c **** 	int8_t lvl;
 9243              		.loc 1 2557 2 view .LVU3231
2558:bluetooth_rxtx.c **** 	u8 i = 0;
 9244              		.loc 1 2558 2 view .LVU3232
 9245              	.LVL837:
2559:bluetooth_rxtx.c **** 	u16 channels[3] = {2412, 2437, 2462};
 9246              		.loc 1 2559 2 view .LVU3233
 9247              		.loc 1 2559 6 is_stmt 0 view .LVU3234
 9248 0004 424B     		ldr	r3, .L786
2560:bluetooth_rxtx.c **** 	//void (*set[3]) = {TXLED_SET, RXLED_SET, USRLED_SET};
2561:bluetooth_rxtx.c **** 	//void (*clr[3]) = {TXLED_CLR, RXLED_CLR, USRLED_CLR};
2562:bluetooth_rxtx.c **** 
2563:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2564:bluetooth_rxtx.c **** 	PAEN_SET;
 9249              		.loc 1 2564 2 view .LVU3235
 9250 0006 8022     		movs	r2, #128
2559:bluetooth_rxtx.c **** 	u16 channels[3] = {2412, 2437, 2462};
 9251              		.loc 1 2559 6 view .LVU3236
 9252 0008 0293     		str	r3, [sp, #8]
 9253 000a 40F69E13 		movw	r3, #2462
 9254 000e ADF80C30 		strh	r3, [sp, #12]	@ movhi
 9255              		.loc 1 2564 2 is_stmt 1 view .LVU3237
 9256 0012 404B     		ldr	r3, .L786+4
2565:bluetooth_rxtx.c **** 	//HGM_SET;
2566:bluetooth_rxtx.c **** #endif
2567:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 9257              		.loc 1 2567 2 is_stmt 0 view .LVU3238
 9258 0014 42F62231 		movw	r1, #11042
2564:bluetooth_rxtx.c **** 	//HGM_SET;
 9259              		.loc 1 2564 2 view .LVU3239
ARM GAS  /tmp/ccwF1FQu.s 			page 257


 9260 0018 1A60     		str	r2, [r3]
 9261              		.loc 1 2567 2 is_stmt 1 view .LVU3240
 9262 001a 1220     		movs	r0, #18
 9263 001c FFF7FEFF 		bl	cc2400_set
 9264              	.LVL838:
2568:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 9265              		.loc 1 2568 2 view .LVU3241
 9266 0020 41F24B31 		movw	r1, #4939
 9267 0024 1420     		movs	r0, #20
 9268 0026 FFF7FEFF 		bl	cc2400_set
 9269              	.LVL839:
2569:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 9270              		.loc 1 2569 2 view .LVU3242
 9271 002a 40F20111 		movw	r1, #257
 9272 002e 2020     		movs	r0, #32
 9273 0030 FFF7FEFF 		bl	cc2400_set
 9274              	.LVL840:
2570:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0029); // 160 kHz frequency deviation
 9275              		.loc 1 2570 2 view .LVU3243
 9276 0034 2921     		movs	r1, #41
 9277 0036 0320     		movs	r0, #3
 9278 0038 FFF7FEFF 		bl	cc2400_set
 9279              	.LVL841:
2571:bluetooth_rxtx.c **** 	cc2400_set(RSSI,    0x00F1); // RSSI Sample over 2 symbols
 9280              		.loc 1 2571 2 view .LVU3244
 9281 003c F121     		movs	r1, #241
 9282 003e 0620     		movs	r0, #6
 9283 0040 FFF7FEFF 		bl	cc2400_set
 9284              	.LVL842:
2572:bluetooth_rxtx.c **** 
2573:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 9285              		.loc 1 2573 2 view .LVU3245
 9286              	.L764:
 9287              		.loc 1 2573 45 discriminator 1 view .LVU3246
 9288              		.loc 1 2573 8 discriminator 1 view .LVU3247
 9289              		.loc 1 2573 11 is_stmt 0 discriminator 1 view .LVU3248
 9290 0044 FFF7FEFF 		bl	cc2400_status
 9291              	.LVL843:
 9292              		.loc 1 2573 8 discriminator 1 view .LVU3249
 9293 0048 4106     		lsls	r1, r0, #25
 9294 004a FBD5     		bpl	.L764
 9295              	.L765:
2574:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 9296              		.loc 1 2574 37 is_stmt 1 discriminator 1 view .LVU3250
 9297              		.loc 1 2574 8 discriminator 1 view .LVU3251
 9298              		.loc 1 2574 10 is_stmt 0 discriminator 1 view .LVU3252
 9299 004c FFF7FEFF 		bl	cc2400_status
 9300              	.LVL844:
 9301              		.loc 1 2574 8 discriminator 1 view .LVU3253
 9302 0050 10F00404 		ands	r4, r0, #4
 9303 0054 FAD1     		bne	.L765
2575:bluetooth_rxtx.c **** 
2576:bluetooth_rxtx.c **** 	while (requested_mode == MODE_LED_SPECAN) {
 9304              		.loc 1 2576 24 view .LVU3254
 9305 0056 304F     		ldr	r7, .L786+8
 9306              	.LBB112:
2577:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channels[i] - 1);
ARM GAS  /tmp/ccwF1FQu.s 			page 258


2578:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
2579:bluetooth_rxtx.c **** 		while (!(cc2400_status() & FS_LOCK));
2580:bluetooth_rxtx.c **** 		cc2400_strobe(SRX);
2581:bluetooth_rxtx.c **** 
2582:bluetooth_rxtx.c **** 		/* give the CC2400 time to acquire RSSI reading */
2583:bluetooth_rxtx.c **** 		volatile u32 j = 500; while (--j); //FIXME crude delay
2584:bluetooth_rxtx.c **** 		lvl = (int8_t)((cc2400_get(RSSI) >> 8) & 0xff);
2585:bluetooth_rxtx.c **** 		if (lvl > rssi_threshold) {
2586:bluetooth_rxtx.c **** 			switch (i) {
2587:bluetooth_rxtx.c **** 				case 0:
2588:bluetooth_rxtx.c **** 					TXLED_SET;
2589:bluetooth_rxtx.c **** 					break;
2590:bluetooth_rxtx.c **** 				case 1:
2591:bluetooth_rxtx.c **** 					RXLED_SET;
2592:bluetooth_rxtx.c **** 					break;
2593:bluetooth_rxtx.c **** 				case 2:
2594:bluetooth_rxtx.c **** 					USRLED_SET;
2595:bluetooth_rxtx.c **** 					break;
2596:bluetooth_rxtx.c **** 			}
2597:bluetooth_rxtx.c **** 		}
2598:bluetooth_rxtx.c **** 		else {
2599:bluetooth_rxtx.c **** 			switch (i) {
2600:bluetooth_rxtx.c **** 				case 0:
2601:bluetooth_rxtx.c **** 					TXLED_CLR;
2602:bluetooth_rxtx.c **** 					break;
2603:bluetooth_rxtx.c **** 				case 1:
2604:bluetooth_rxtx.c **** 					RXLED_CLR;
 9307              		.loc 1 2604 6 view .LVU3255
 9308 0058 304D     		ldr	r5, .L786+12
2591:bluetooth_rxtx.c **** 					break;
 9309              		.loc 1 2591 6 view .LVU3256
 9310 005a 314E     		ldr	r6, .L786+16
 9311              	.LVL845:
 9312              	.L766:
2591:bluetooth_rxtx.c **** 					break;
 9313              		.loc 1 2591 6 view .LVU3257
 9314              	.LBE112:
2576:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channels[i] - 1);
 9315              		.loc 1 2576 8 is_stmt 1 view .LVU3258
2576:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channels[i] - 1);
 9316              		.loc 1 2576 24 is_stmt 0 view .LVU3259
 9317 005c BB7C     		ldrb	r3, [r7, #18]	@ zero_extendqisi2
2576:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channels[i] - 1);
 9318              		.loc 1 2576 8 view .LVU3260
 9319 005e 072B     		cmp	r3, #7
 9320 0060 01D0     		beq	.L776
2605:bluetooth_rxtx.c **** 					break;
2606:bluetooth_rxtx.c **** 				case 2:
2607:bluetooth_rxtx.c **** 					USRLED_CLR;
2608:bluetooth_rxtx.c **** 					break;
2609:bluetooth_rxtx.c **** 			}
2610:bluetooth_rxtx.c **** 		}
2611:bluetooth_rxtx.c **** 
2612:bluetooth_rxtx.c **** 		i = (i+1) % 3;
2613:bluetooth_rxtx.c **** 
2614:bluetooth_rxtx.c **** 		handle_usb(clkn);
2615:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccwF1FQu.s 			page 259


2616:bluetooth_rxtx.c **** 		cc2400_strobe(SRFOFF);
2617:bluetooth_rxtx.c **** 		while ((cc2400_status() & FS_LOCK));
2618:bluetooth_rxtx.c **** 	}
2619:bluetooth_rxtx.c **** }
 9321              		.loc 1 2619 1 view .LVU3261
 9322 0062 05B0     		add	sp, sp, #20
 9323              		.cfi_remember_state
 9324              		.cfi_def_cfa_offset 20
 9325              		@ sp needed
 9326 0064 F0BD     		pop	{r4, r5, r6, r7, pc}
 9327              	.LVL846:
 9328              	.L776:
 9329              		.cfi_restore_state
 9330              	.LBB113:
2577:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
 9331              		.loc 1 2577 3 is_stmt 1 view .LVU3262
2577:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
 9332              		.loc 1 2577 29 is_stmt 0 view .LVU3263
 9333 0066 04AB     		add	r3, sp, #16
 9334 0068 03EB4403 		add	r3, r3, r4, lsl #1
2577:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
 9335              		.loc 1 2577 3 view .LVU3264
 9336 006c 33F8081C 		ldrh	r1, [r3, #-8]
 9337 0070 0220     		movs	r0, #2
 9338 0072 0139     		subs	r1, r1, #1
 9339 0074 89B2     		uxth	r1, r1
 9340 0076 FFF7FEFF 		bl	cc2400_set
 9341              	.LVL847:
2578:bluetooth_rxtx.c **** 		while (!(cc2400_status() & FS_LOCK));
 9342              		.loc 1 2578 3 is_stmt 1 view .LVU3265
 9343 007a 6120     		movs	r0, #97
 9344 007c FFF7FEFF 		bl	cc2400_strobe
 9345              	.LVL848:
2579:bluetooth_rxtx.c **** 		cc2400_strobe(SRX);
 9346              		.loc 1 2579 3 view .LVU3266
 9347              	.L767:
2579:bluetooth_rxtx.c **** 		cc2400_strobe(SRX);
 9348              		.loc 1 2579 39 discriminator 1 view .LVU3267
2579:bluetooth_rxtx.c **** 		cc2400_strobe(SRX);
 9349              		.loc 1 2579 9 discriminator 1 view .LVU3268
2579:bluetooth_rxtx.c **** 		cc2400_strobe(SRX);
 9350              		.loc 1 2579 12 is_stmt 0 discriminator 1 view .LVU3269
 9351 0080 FFF7FEFF 		bl	cc2400_status
 9352              	.LVL849:
2579:bluetooth_rxtx.c **** 		cc2400_strobe(SRX);
 9353              		.loc 1 2579 9 discriminator 1 view .LVU3270
 9354 0084 4207     		lsls	r2, r0, #29
 9355 0086 FBD5     		bpl	.L767
2580:bluetooth_rxtx.c **** 
 9356              		.loc 1 2580 3 is_stmt 1 view .LVU3271
 9357 0088 6220     		movs	r0, #98
 9358 008a FFF7FEFF 		bl	cc2400_strobe
 9359              	.LVL850:
2583:bluetooth_rxtx.c **** 		lvl = (int8_t)((cc2400_get(RSSI) >> 8) & 0xff);
 9360              		.loc 1 2583 3 view .LVU3272
2583:bluetooth_rxtx.c **** 		lvl = (int8_t)((cc2400_get(RSSI) >> 8) & 0xff);
 9361              		.loc 1 2583 16 is_stmt 0 view .LVU3273
ARM GAS  /tmp/ccwF1FQu.s 			page 260


 9362 008e 4FF4FA73 		mov	r3, #500
 9363 0092 0193     		str	r3, [sp, #4]
2583:bluetooth_rxtx.c **** 		lvl = (int8_t)((cc2400_get(RSSI) >> 8) & 0xff);
 9364              		.loc 1 2583 25 is_stmt 1 view .LVU3274
 9365              	.L768:
2583:bluetooth_rxtx.c **** 		lvl = (int8_t)((cc2400_get(RSSI) >> 8) & 0xff);
 9366              		.loc 1 2583 36 discriminator 2 view .LVU3275
2583:bluetooth_rxtx.c **** 		lvl = (int8_t)((cc2400_get(RSSI) >> 8) & 0xff);
 9367              		.loc 1 2583 31 discriminator 2 view .LVU3276
2583:bluetooth_rxtx.c **** 		lvl = (int8_t)((cc2400_get(RSSI) >> 8) & 0xff);
 9368              		.loc 1 2583 32 is_stmt 0 discriminator 2 view .LVU3277
 9369 0094 019B     		ldr	r3, [sp, #4]
 9370 0096 013B     		subs	r3, r3, #1
2583:bluetooth_rxtx.c **** 		lvl = (int8_t)((cc2400_get(RSSI) >> 8) & 0xff);
 9371              		.loc 1 2583 31 discriminator 2 view .LVU3278
 9372 0098 0193     		str	r3, [sp, #4]
 9373 009a 002B     		cmp	r3, #0
 9374 009c FAD1     		bne	.L768
2584:bluetooth_rxtx.c **** 		if (lvl > rssi_threshold) {
 9375              		.loc 1 2584 3 is_stmt 1 view .LVU3279
2584:bluetooth_rxtx.c **** 		if (lvl > rssi_threshold) {
 9376              		.loc 1 2584 19 is_stmt 0 view .LVU3280
 9377 009e 0620     		movs	r0, #6
 9378 00a0 FFF7FEFF 		bl	cc2400_get
 9379              	.LVL851:
2585:bluetooth_rxtx.c **** 			switch (i) {
 9380              		.loc 1 2585 3 is_stmt 1 view .LVU3281
2585:bluetooth_rxtx.c **** 			switch (i) {
 9381              		.loc 1 2585 11 is_stmt 0 view .LVU3282
 9382 00a4 1F4B     		ldr	r3, .L786+20
2585:bluetooth_rxtx.c **** 			switch (i) {
 9383              		.loc 1 2585 6 view .LVU3283
 9384 00a6 40F30720 		sbfx	r0, r0, #8, #8
 9385              	.LVL852:
2585:bluetooth_rxtx.c **** 			switch (i) {
 9386              		.loc 1 2585 11 view .LVU3284
 9387 00aa 93F85630 		ldrb	r3, [r3, #86]	@ zero_extendqisi2
 9388 00ae 5BB2     		sxtb	r3, r3
2585:bluetooth_rxtx.c **** 			switch (i) {
 9389              		.loc 1 2585 6 view .LVU3285
 9390 00b0 9842     		cmp	r0, r3
 9391 00b2 1FDD     		ble	.L769
2586:bluetooth_rxtx.c **** 				case 0:
 9392              		.loc 1 2586 4 is_stmt 1 view .LVU3286
 9393 00b4 012C     		cmp	r4, #1
 9394 00b6 19D0     		beq	.L770
 9395 00b8 022C     		cmp	r4, #2
 9396 00ba 19D0     		beq	.L771
 9397 00bc 14B9     		cbnz	r4, .L772
2588:bluetooth_rxtx.c **** 					break;
 9398              		.loc 1 2588 6 view .LVU3287
 9399 00be 4FF48073 		mov	r3, #256
 9400              	.L785:
2591:bluetooth_rxtx.c **** 					break;
 9401              		.loc 1 2591 6 is_stmt 0 view .LVU3288
 9402 00c2 3360     		str	r3, [r6]
2592:bluetooth_rxtx.c **** 				case 2:
ARM GAS  /tmp/ccwF1FQu.s 			page 261


 9403              		.loc 1 2592 6 is_stmt 1 view .LVU3289
 9404              	.L772:
2612:bluetooth_rxtx.c **** 
 9405              		.loc 1 2612 3 view .LVU3290
2612:bluetooth_rxtx.c **** 
 9406              		.loc 1 2612 13 is_stmt 0 view .LVU3291
 9407 00c4 0323     		movs	r3, #3
2612:bluetooth_rxtx.c **** 
 9408              		.loc 1 2612 9 view .LVU3292
 9409 00c6 0134     		adds	r4, r4, #1
 9410              	.LVL853:
2612:bluetooth_rxtx.c **** 
 9411              		.loc 1 2612 13 view .LVU3293
 9412 00c8 B4FBF3F3 		udiv	r3, r4, r3
 9413 00cc 03EB4303 		add	r3, r3, r3, lsl #1
 9414 00d0 E41A     		subs	r4, r4, r3
2614:bluetooth_rxtx.c **** 
 9415              		.loc 1 2614 3 view .LVU3294
 9416 00d2 154B     		ldr	r3, .L786+24
2612:bluetooth_rxtx.c **** 
 9417              		.loc 1 2612 5 view .LVU3295
 9418 00d4 E4B2     		uxtb	r4, r4
 9419              	.LVL854:
2614:bluetooth_rxtx.c **** 
 9420              		.loc 1 2614 3 is_stmt 1 view .LVU3296
 9421 00d6 1868     		ldr	r0, [r3]
 9422 00d8 FFF7FEFF 		bl	handle_usb
 9423              	.LVL855:
2616:bluetooth_rxtx.c **** 		while ((cc2400_status() & FS_LOCK));
 9424              		.loc 1 2616 3 view .LVU3297
 9425 00dc 6420     		movs	r0, #100
 9426 00de FFF7FEFF 		bl	cc2400_strobe
 9427              	.LVL856:
2617:bluetooth_rxtx.c **** 	}
 9428              		.loc 1 2617 3 view .LVU3298
 9429              	.L775:
2617:bluetooth_rxtx.c **** 	}
 9430              		.loc 1 2617 38 discriminator 1 view .LVU3299
2617:bluetooth_rxtx.c **** 	}
 9431              		.loc 1 2617 9 discriminator 1 view .LVU3300
2617:bluetooth_rxtx.c **** 	}
 9432              		.loc 1 2617 11 is_stmt 0 discriminator 1 view .LVU3301
 9433 00e2 FFF7FEFF 		bl	cc2400_status
 9434              	.LVL857:
2617:bluetooth_rxtx.c **** 	}
 9435              		.loc 1 2617 9 discriminator 1 view .LVU3302
 9436 00e6 4307     		lsls	r3, r0, #29
 9437 00e8 FBD4     		bmi	.L775
 9438 00ea B7E7     		b	.L766
 9439              	.L770:
2591:bluetooth_rxtx.c **** 					break;
 9440              		.loc 1 2591 6 is_stmt 1 view .LVU3303
 9441 00ec 1023     		movs	r3, #16
 9442 00ee E8E7     		b	.L785
 9443              	.L771:
2594:bluetooth_rxtx.c **** 					break;
 9444              		.loc 1 2594 6 view .LVU3304
ARM GAS  /tmp/ccwF1FQu.s 			page 262


 9445 00f0 3460     		str	r4, [r6]
2595:bluetooth_rxtx.c **** 			}
 9446              		.loc 1 2595 6 view .LVU3305
 9447 00f2 E7E7     		b	.L772
 9448              	.L769:
2599:bluetooth_rxtx.c **** 				case 0:
 9449              		.loc 1 2599 4 view .LVU3306
 9450 00f4 012C     		cmp	r4, #1
 9451 00f6 07D0     		beq	.L773
 9452 00f8 022C     		cmp	r4, #2
 9453 00fa 07D0     		beq	.L774
 9454 00fc 002C     		cmp	r4, #0
 9455 00fe E1D1     		bne	.L772
2601:bluetooth_rxtx.c **** 					break;
 9456              		.loc 1 2601 6 view .LVU3307
 9457 0100 4FF48073 		mov	r3, #256
 9458              	.L784:
2604:bluetooth_rxtx.c **** 					break;
 9459              		.loc 1 2604 6 is_stmt 0 view .LVU3308
 9460 0104 2B60     		str	r3, [r5]
2605:bluetooth_rxtx.c **** 				case 2:
 9461              		.loc 1 2605 6 is_stmt 1 view .LVU3309
 9462 0106 DDE7     		b	.L772
 9463              	.L773:
2604:bluetooth_rxtx.c **** 					break;
 9464              		.loc 1 2604 6 view .LVU3310
 9465 0108 1023     		movs	r3, #16
 9466 010a FBE7     		b	.L784
 9467              	.L774:
2607:bluetooth_rxtx.c **** 					break;
 9468              		.loc 1 2607 6 view .LVU3311
 9469 010c 2C60     		str	r4, [r5]
2608:bluetooth_rxtx.c **** 			}
 9470              		.loc 1 2608 6 view .LVU3312
 9471 010e D9E7     		b	.L772
 9472              	.L787:
 9473              		.align	2
 9474              	.L786:
 9475 0110 6C098509 		.word	159713644
 9476 0114 58C00920 		.word	537509976
 9477 0118 00000000 		.word	.LANCHOR1
 9478 011c 3CC00920 		.word	537509948
 9479 0120 38C00920 		.word	537509944
 9480 0124 00000000 		.word	.LANCHOR0
 9481 0128 00000000 		.word	clkn
 9482              	.LBE113:
 9483              		.cfi_endproc
 9484              	.LFE39:
 9486              		.section	.rodata.str1.1
 9487              	.LC4:
 9488 000b 0A0A2A2A 		.ascii	"\012\012****UBERTOOTH BOOT****\012%s\012\000"
 9488      2A2A5542 
 9488      4552544F 
 9488      4F544820 
 9488      424F4F54 
 9489              		.section	.text.startup.main,"ax",%progbits
 9490              		.align	1
ARM GAS  /tmp/ccwF1FQu.s 			page 263


 9491              		.global	main
 9492              		.syntax unified
 9493              		.thumb
 9494              		.thumb_func
 9495              		.fpu softvfp
 9497              	main:
 9498              	.LFB40:
2620:bluetooth_rxtx.c **** 
2621:bluetooth_rxtx.c **** int main()
2622:bluetooth_rxtx.c **** {
 9499              		.loc 1 2622 1 view -0
 9500              		.cfi_startproc
 9501              		@ Volatile: function does not return.
 9502              		@ args = 0, pretend = 0, frame = 0
 9503              		@ frame_needed = 0, uses_anonymous_args = 0
 9504 0000 08B5     		push	{r3, lr}
 9505              		.cfi_def_cfa_offset 8
 9506              		.cfi_offset 3, -8
 9507              		.cfi_offset 14, -4
2623:bluetooth_rxtx.c **** 	// enable all fault handlers (see fault.c)
2624:bluetooth_rxtx.c **** 	SCB_SHCSR = (1 << 18) | (1 << 17) | (1 << 16);
 9508              		.loc 1 2624 2 view .LVU3314
 9509              		.loc 1 2624 12 is_stmt 0 view .LVU3315
 9510 0002 4FF4E022 		mov	r2, #458752
 9511 0006 3E4B     		ldr	r3, .L811
2625:bluetooth_rxtx.c **** 
2626:bluetooth_rxtx.c **** 	ubertooth_init();
2627:bluetooth_rxtx.c **** 	clkn_init();
2628:bluetooth_rxtx.c **** 	ubertooth_usb_init(vendor_request_handler);
2629:bluetooth_rxtx.c **** 	cc2400_idle();
2630:bluetooth_rxtx.c **** 	dma_poweron();
2631:bluetooth_rxtx.c **** 
2632:bluetooth_rxtx.c **** 	debug_uart_init(0);
2633:bluetooth_rxtx.c **** 	debug_printf("\n\n****UBERTOOTH BOOT****\n%s\n", compile_info);
2634:bluetooth_rxtx.c **** 
2635:bluetooth_rxtx.c **** 	while (1) {
2636:bluetooth_rxtx.c **** 		handle_usb(clkn);
2637:bluetooth_rxtx.c **** 		if(requested_mode != mode) {
 9512              		.loc 1 2637 21 view .LVU3316
 9513 0008 3E4D     		ldr	r5, .L811+4
2624:bluetooth_rxtx.c **** 
 9514              		.loc 1 2624 12 view .LVU3317
 9515 000a 1A60     		str	r2, [r3]
2626:bluetooth_rxtx.c **** 	clkn_init();
 9516              		.loc 1 2626 2 is_stmt 1 view .LVU3318
 9517 000c FFF7FEFF 		bl	ubertooth_init
 9518              	.LVL858:
2627:bluetooth_rxtx.c **** 	ubertooth_usb_init(vendor_request_handler);
 9519              		.loc 1 2627 2 view .LVU3319
 9520 0010 FFF7FEFF 		bl	clkn_init
 9521              	.LVL859:
2628:bluetooth_rxtx.c **** 	cc2400_idle();
 9522              		.loc 1 2628 2 view .LVU3320
 9523 0014 3C48     		ldr	r0, .L811+8
 9524 0016 FFF7FEFF 		bl	ubertooth_usb_init
 9525              	.LVL860:
2629:bluetooth_rxtx.c **** 	dma_poweron();
ARM GAS  /tmp/ccwF1FQu.s 			page 264


 9526              		.loc 1 2629 2 view .LVU3321
 9527 001a FFF7FEFF 		bl	cc2400_idle
 9528              	.LVL861:
2630:bluetooth_rxtx.c **** 
 9529              		.loc 1 2630 2 view .LVU3322
 9530 001e FFF7FEFF 		bl	dma_poweron
 9531              	.LVL862:
2632:bluetooth_rxtx.c **** 	debug_printf("\n\n****UBERTOOTH BOOT****\n%s\n", compile_info);
 9532              		.loc 1 2632 2 view .LVU3323
 9533 0022 0020     		movs	r0, #0
 9534 0024 FFF7FEFF 		bl	debug_uart_init
 9535              	.LVL863:
2633:bluetooth_rxtx.c **** 
 9536              		.loc 1 2633 2 view .LVU3324
 9537 0028 3849     		ldr	r1, .L811+12
 9538 002a 3948     		ldr	r0, .L811+16
 9539 002c FFF7FEFF 		bl	debug_printf
 9540              	.LVL864:
 9541 0030 2C46     		mov	r4, r5
2636:bluetooth_rxtx.c **** 		if(requested_mode != mode) {
 9542              		.loc 1 2636 3 is_stmt 0 view .LVU3325
 9543 0032 384E     		ldr	r6, .L811+20
 9544              	.L789:
2635:bluetooth_rxtx.c **** 		handle_usb(clkn);
 9545              		.loc 1 2635 2 is_stmt 1 view .LVU3326
2636:bluetooth_rxtx.c **** 		if(requested_mode != mode) {
 9546              		.loc 1 2636 3 view .LVU3327
 9547 0034 3068     		ldr	r0, [r6]
 9548 0036 FFF7FEFF 		bl	handle_usb
 9549              	.LVL865:
 9550              		.loc 1 2637 3 view .LVU3328
 9551              		.loc 1 2637 21 is_stmt 0 view .LVU3329
 9552 003a AA7C     		ldrb	r2, [r5, #18]	@ zero_extendqisi2
 9553 003c 6B7C     		ldrb	r3, [r5, #17]	@ zero_extendqisi2
 9554              		.loc 1 2637 5 view .LVU3330
 9555 003e 9A42     		cmp	r2, r3
 9556 0040 F8D0     		beq	.L789
2638:bluetooth_rxtx.c **** 			switch (requested_mode) {
 9557              		.loc 1 2638 4 is_stmt 1 view .LVU3331
 9558 0042 AB7C     		ldrb	r3, [r5, #18]	@ zero_extendqisi2
 9559 0044 112B     		cmp	r3, #17
 9560 0046 F5D8     		bhi	.L789
 9561 0048 DFE803F0 		tbb	[pc, r3]
 9562              	.L792:
 9563 004c 56       		.byte	(.L809-.L792)/2
 9564 004d 14       		.byte	(.L808-.L792)/2
 9565 004e 16       		.byte	(.L807-.L792)/2
 9566 004f 28       		.byte	(.L806-.L792)/2
 9567 0050 3D       		.byte	(.L805-.L792)/2
 9568 0051 2F       		.byte	(.L804-.L792)/2
 9569 0052 37       		.byte	(.L803-.L792)/2
 9570 0053 40       		.byte	(.L802-.L792)/2
 9571 0054 1B       		.byte	(.L801-.L792)/2
 9572 0055 1D       		.byte	(.L800-.L792)/2
 9573 0056 22       		.byte	(.L799-.L792)/2
 9574 0057 09       		.byte	(.L798-.L792)/2
 9575 0058 25       		.byte	(.L797-.L792)/2
ARM GAS  /tmp/ccwF1FQu.s 			page 265


 9576 0059 43       		.byte	(.L796-.L792)/2
 9577 005a 0F       		.byte	(.L795-.L792)/2
 9578 005b 49       		.byte	(.L794-.L792)/2
 9579 005c 4E       		.byte	(.L793-.L792)/2
 9580 005d 51       		.byte	(.L791-.L792)/2
 9581              		.p2align 1
 9582              	.L798:
2639:bluetooth_rxtx.c **** 				case MODE_RESET:
2640:bluetooth_rxtx.c **** 					/* Allow time for the USB command to return correctly */
2641:bluetooth_rxtx.c **** 					wait(1);
 9583              		.loc 1 2641 6 view .LVU3332
 9584 005e 0120     		movs	r0, #1
 9585 0060 FFF7FEFF 		bl	wait
 9586              	.LVL866:
2642:bluetooth_rxtx.c **** 					reset();
 9587              		.loc 1 2642 6 view .LVU3333
 9588 0064 FFF7FEFF 		bl	reset
 9589              	.LVL867:
2643:bluetooth_rxtx.c **** 					break;
 9590              		.loc 1 2643 6 view .LVU3334
 9591 0068 E4E7     		b	.L789
 9592              	.L795:
2644:bluetooth_rxtx.c **** 				case MODE_AFH:
2645:bluetooth_rxtx.c **** 					mode = MODE_AFH;
 9593              		.loc 1 2645 6 view .LVU3335
 9594              		.loc 1 2645 11 is_stmt 0 view .LVU3336
 9595 006a 0E23     		movs	r3, #14
 9596              	.L810:
2646:bluetooth_rxtx.c **** 					bt_stream_rx();
2647:bluetooth_rxtx.c **** 					break;
2648:bluetooth_rxtx.c **** 				case MODE_RX_SYMBOLS:
2649:bluetooth_rxtx.c **** 					mode = MODE_RX_SYMBOLS;
 9597              		.loc 1 2649 11 view .LVU3337
 9598 006c 6374     		strb	r3, [r4, #17]
2650:bluetooth_rxtx.c **** 					bt_stream_rx();
 9599              		.loc 1 2650 6 is_stmt 1 view .LVU3338
 9600 006e FFF7FEFF 		bl	bt_stream_rx
 9601              	.LVL868:
2651:bluetooth_rxtx.c **** 					break;
 9602              		.loc 1 2651 6 view .LVU3339
 9603 0072 DFE7     		b	.L789
 9604              	.L808:
2649:bluetooth_rxtx.c **** 					bt_stream_rx();
 9605              		.loc 1 2649 6 view .LVU3340
2649:bluetooth_rxtx.c **** 					bt_stream_rx();
 9606              		.loc 1 2649 11 is_stmt 0 view .LVU3341
 9607 0074 0123     		movs	r3, #1
 9608 0076 F9E7     		b	.L810
 9609              	.L807:
2652:bluetooth_rxtx.c **** #ifdef TX_ENABLE
2653:bluetooth_rxtx.c **** 				case MODE_TX_SYMBOLS:
2654:bluetooth_rxtx.c **** 					mode = MODE_TX_SYMBOLS;
 9610              		.loc 1 2654 6 is_stmt 1 view .LVU3342
 9611              		.loc 1 2654 11 is_stmt 0 view .LVU3343
 9612 0078 0223     		movs	r3, #2
 9613 007a 6374     		strb	r3, [r4, #17]
2655:bluetooth_rxtx.c **** 					br_transmit();
ARM GAS  /tmp/ccwF1FQu.s 			page 266


 9614              		.loc 1 2655 6 is_stmt 1 view .LVU3344
 9615 007c FFF7FEFF 		bl	br_transmit
 9616              	.LVL869:
2656:bluetooth_rxtx.c **** 					break;
 9617              		.loc 1 2656 6 view .LVU3345
 9618 0080 D8E7     		b	.L789
 9619              	.L801:
2657:bluetooth_rxtx.c **** #endif
2658:bluetooth_rxtx.c **** 				case MODE_BT_FOLLOW:
2659:bluetooth_rxtx.c **** 					mode = MODE_BT_FOLLOW;
 9620              		.loc 1 2659 6 view .LVU3346
 9621              		.loc 1 2659 11 is_stmt 0 view .LVU3347
 9622 0082 0823     		movs	r3, #8
 9623 0084 F2E7     		b	.L810
 9624              	.L800:
2660:bluetooth_rxtx.c **** 					bt_stream_rx();
2661:bluetooth_rxtx.c **** 					break;
2662:bluetooth_rxtx.c **** 				case MODE_BT_FOLLOW_LE:
2663:bluetooth_rxtx.c **** 					mode = MODE_BT_FOLLOW_LE;
 9625              		.loc 1 2663 6 is_stmt 1 view .LVU3348
 9626              		.loc 1 2663 11 is_stmt 0 view .LVU3349
 9627 0086 0923     		movs	r3, #9
 9628 0088 6374     		strb	r3, [r4, #17]
2664:bluetooth_rxtx.c **** 					bt_follow_le();
 9629              		.loc 1 2664 6 is_stmt 1 view .LVU3350
 9630              	.LBB114:
 9631              	.LBI114:
2097:bluetooth_rxtx.c **** 	le_phy_main();
 9632              		.loc 1 2097 6 view .LVU3351
 9633              	.LBB115:
2098:bluetooth_rxtx.c **** 
 9634              		.loc 1 2098 2 view .LVU3352
 9635 008a FFF7FEFF 		bl	le_phy_main
 9636              	.LVL870:
2105:bluetooth_rxtx.c **** 
 9637              		.loc 1 2105 1 is_stmt 0 view .LVU3353
 9638 008e D1E7     		b	.L789
 9639              	.L799:
 9640              	.LBE115:
 9641              	.LBE114:
2665:bluetooth_rxtx.c **** 					break;
2666:bluetooth_rxtx.c **** 				case MODE_BT_PROMISC_LE:
2667:bluetooth_rxtx.c **** 					bt_promisc_le();
 9642              		.loc 1 2667 6 is_stmt 1 view .LVU3354
 9643 0090 FFF7FEFF 		bl	bt_promisc_le
 9644              	.LVL871:
2668:bluetooth_rxtx.c **** 					break;
 9645              		.loc 1 2668 6 view .LVU3355
 9646 0094 CEE7     		b	.L789
 9647              	.L797:
2669:bluetooth_rxtx.c **** #ifdef TX_ENABLE
2670:bluetooth_rxtx.c **** 				case MODE_BT_SLAVE_LE:
2671:bluetooth_rxtx.c **** 					bt_slave_le();
 9648              		.loc 1 2671 6 view .LVU3356
 9649 0096 FFF7FEFF 		bl	bt_slave_le
 9650              	.LVL872:
2672:bluetooth_rxtx.c **** 					break;
ARM GAS  /tmp/ccwF1FQu.s 			page 267


 9651              		.loc 1 2672 6 view .LVU3357
 9652 009a CBE7     		b	.L789
 9653              	.L806:
2673:bluetooth_rxtx.c **** 				case MODE_TX_TEST:
2674:bluetooth_rxtx.c **** 					mode = MODE_TX_TEST;
 9654              		.loc 1 2674 6 view .LVU3358
 9655              		.loc 1 2674 11 is_stmt 0 view .LVU3359
 9656 009c 0323     		movs	r3, #3
2675:bluetooth_rxtx.c **** 					cc2400_txtest(&modulation, &channel);
 9657              		.loc 1 2675 6 view .LVU3360
 9658 009e 2846     		mov	r0, r5
 9659 00a0 1D49     		ldr	r1, .L811+24
2674:bluetooth_rxtx.c **** 					cc2400_txtest(&modulation, &channel);
 9660              		.loc 1 2674 11 view .LVU3361
 9661 00a2 6374     		strb	r3, [r4, #17]
 9662              		.loc 1 2675 6 is_stmt 1 view .LVU3362
 9663 00a4 FFF7FEFF 		bl	cc2400_txtest
 9664              	.LVL873:
2676:bluetooth_rxtx.c **** 					break;
 9665              		.loc 1 2676 6 view .LVU3363
 9666 00a8 C4E7     		b	.L789
 9667              	.L804:
2677:bluetooth_rxtx.c **** 				case MODE_RANGE_TEST:
2678:bluetooth_rxtx.c **** 					mode = MODE_RANGE_TEST;
 9668              		.loc 1 2678 6 view .LVU3364
 9669              		.loc 1 2678 11 is_stmt 0 view .LVU3365
 9670 00aa 0523     		movs	r3, #5
2679:bluetooth_rxtx.c **** 					cc2400_rangetest(&channel);
 9671              		.loc 1 2679 6 view .LVU3366
 9672 00ac 1A48     		ldr	r0, .L811+24
2678:bluetooth_rxtx.c **** 					cc2400_rangetest(&channel);
 9673              		.loc 1 2678 11 view .LVU3367
 9674 00ae 6374     		strb	r3, [r4, #17]
 9675              		.loc 1 2679 6 is_stmt 1 view .LVU3368
 9676 00b0 FFF7FEFF 		bl	cc2400_rangetest
 9677              	.LVL874:
2680:bluetooth_rxtx.c **** 					requested_mode = MODE_IDLE;
 9678              		.loc 1 2680 6 view .LVU3369
 9679              		.loc 1 2680 21 is_stmt 0 view .LVU3370
 9680 00b4 0023     		movs	r3, #0
 9681 00b6 A374     		strb	r3, [r4, #18]
2681:bluetooth_rxtx.c **** 					break;
 9682              		.loc 1 2681 6 is_stmt 1 view .LVU3371
 9683 00b8 BCE7     		b	.L789
 9684              	.L803:
2682:bluetooth_rxtx.c **** 				case MODE_REPEATER:
2683:bluetooth_rxtx.c **** 					mode = MODE_REPEATER;
 9685              		.loc 1 2683 6 view .LVU3372
 9686              		.loc 1 2683 11 is_stmt 0 view .LVU3373
 9687 00ba 0623     		movs	r3, #6
2684:bluetooth_rxtx.c **** 					cc2400_repeater(&channel);
 9688              		.loc 1 2684 6 view .LVU3374
 9689 00bc 1648     		ldr	r0, .L811+24
2683:bluetooth_rxtx.c **** 					cc2400_repeater(&channel);
 9690              		.loc 1 2683 11 view .LVU3375
 9691 00be 6374     		strb	r3, [r4, #17]
 9692              		.loc 1 2684 6 is_stmt 1 view .LVU3376
ARM GAS  /tmp/ccwF1FQu.s 			page 268


 9693 00c0 FFF7FEFF 		bl	cc2400_repeater
 9694              	.LVL875:
2685:bluetooth_rxtx.c **** 					break;
 9695              		.loc 1 2685 6 view .LVU3377
 9696 00c4 B6E7     		b	.L789
 9697              	.L805:
2686:bluetooth_rxtx.c **** #endif
2687:bluetooth_rxtx.c **** 				case MODE_SPECAN:
2688:bluetooth_rxtx.c **** 					specan();
 9698              		.loc 1 2688 6 view .LVU3378
 9699 00c6 FFF7FEFF 		bl	specan
 9700              	.LVL876:
2689:bluetooth_rxtx.c **** 					break;
 9701              		.loc 1 2689 6 view .LVU3379
 9702 00ca B3E7     		b	.L789
 9703              	.L802:
2690:bluetooth_rxtx.c **** 				case MODE_LED_SPECAN:
2691:bluetooth_rxtx.c **** 					led_specan();
 9704              		.loc 1 2691 6 view .LVU3380
 9705 00cc FFF7FEFF 		bl	led_specan
 9706              	.LVL877:
2692:bluetooth_rxtx.c **** 					break;
 9707              		.loc 1 2692 6 view .LVU3381
 9708 00d0 B0E7     		b	.L789
 9709              	.L796:
2693:bluetooth_rxtx.c **** 				case MODE_EGO:
2694:bluetooth_rxtx.c **** 					mode = MODE_EGO;
 9710              		.loc 1 2694 6 view .LVU3382
 9711              		.loc 1 2694 11 is_stmt 0 view .LVU3383
 9712 00d2 0D23     		movs	r3, #13
 9713 00d4 6374     		strb	r3, [r4, #17]
2695:bluetooth_rxtx.c **** 					ego_main(ego_mode);
 9714              		.loc 1 2695 6 is_stmt 1 view .LVU3384
 9715 00d6 207D     		ldrb	r0, [r4, #20]	@ zero_extendqisi2
 9716 00d8 FFF7FEFF 		bl	ego_main
 9717              	.LVL878:
2696:bluetooth_rxtx.c **** 					break;
 9718              		.loc 1 2696 6 view .LVU3385
 9719 00dc AAE7     		b	.L789
 9720              	.L794:
2697:bluetooth_rxtx.c **** 				case MODE_RX_GENERIC:
2698:bluetooth_rxtx.c **** 					mode = MODE_RX_GENERIC;
 9721              		.loc 1 2698 6 view .LVU3386
 9722              		.loc 1 2698 11 is_stmt 0 view .LVU3387
 9723 00de 0F23     		movs	r3, #15
 9724 00e0 6374     		strb	r3, [r4, #17]
2699:bluetooth_rxtx.c **** 					rx_generic();
 9725              		.loc 1 2699 6 is_stmt 1 view .LVU3388
 9726 00e2 FFF7FEFF 		bl	rx_generic
 9727              	.LVL879:
2700:bluetooth_rxtx.c **** 					break;
 9728              		.loc 1 2700 6 view .LVU3389
 9729 00e6 A5E7     		b	.L789
 9730              	.L793:
2701:bluetooth_rxtx.c **** #ifdef TX_ENABLE
2702:bluetooth_rxtx.c **** 				case MODE_TX_GENERIC:
2703:bluetooth_rxtx.c **** 					tx_generic();
ARM GAS  /tmp/ccwF1FQu.s 			page 269


 9731              		.loc 1 2703 6 view .LVU3390
 9732 00e8 FFF7FEFF 		bl	tx_generic
 9733              	.LVL880:
2704:bluetooth_rxtx.c **** 					break;
 9734              		.loc 1 2704 6 view .LVU3391
 9735 00ec A2E7     		b	.L789
 9736              	.L791:
2705:bluetooth_rxtx.c **** #endif
2706:bluetooth_rxtx.c **** 				case MODE_XMAS:
2707:bluetooth_rxtx.c **** 					mode = MODE_XMAS;
 9737              		.loc 1 2707 6 view .LVU3392
 9738              		.loc 1 2707 11 is_stmt 0 view .LVU3393
 9739 00ee 1123     		movs	r3, #17
 9740 00f0 6374     		strb	r3, [r4, #17]
2708:bluetooth_rxtx.c **** 					xmas_main();
 9741              		.loc 1 2708 6 is_stmt 1 view .LVU3394
 9742 00f2 FFF7FEFF 		bl	xmas_main
 9743              	.LVL881:
2709:bluetooth_rxtx.c **** 					break;
 9744              		.loc 1 2709 6 view .LVU3395
 9745 00f6 9DE7     		b	.L789
 9746              	.L809:
2710:bluetooth_rxtx.c **** 				case MODE_IDLE:
2711:bluetooth_rxtx.c **** 					cc2400_idle();
 9747              		.loc 1 2711 6 view .LVU3396
 9748 00f8 FFF7FEFF 		bl	cc2400_idle
 9749              	.LVL882:
2712:bluetooth_rxtx.c **** 					break;
 9750              		.loc 1 2712 6 view .LVU3397
 9751 00fc 9AE7     		b	.L789
 9752              	.L812:
 9753 00fe 00BF     		.align	2
 9754              	.L811:
 9755 0100 24ED00E0 		.word	-536810204
 9756 0104 00000000 		.word	.LANCHOR1
 9757 0108 00000000 		.word	vendor_request_handler
 9758 010c A7000000 		.word	.LANCHOR2+167
 9759 0110 0B000000 		.word	.LC4
 9760 0114 00000000 		.word	clkn
 9761 0118 4C000000 		.word	.LANCHOR0+76
 9762              		.cfi_endproc
 9763              	.LFE40:
 9765              		.comm	unpacked,800,1
 9766              		.global	packet_cb
 9767              		.global	data_cb
 9768              		.global	le_jam_count
 9769              		.comm	le_promisc,264,4
 9770              		.global	le
 9771              		.global	le_adv_len
 9772              		.global	le_adv_data
 9773              		.global	slave_mac_address
 9774              		.comm	tx_pkt,58,2
 9775              		.global	rssi_threshold
 9776              		.global	high_freq
 9777              		.global	low_freq
 9778              		.global	modulation
 9779              		.global	ego_mode
ARM GAS  /tmp/ccwF1FQu.s 			page 270


 9780              		.global	jam_mode
 9781              		.global	requested_mode
 9782              		.global	mode
 9783              		.global	status
 9784              		.global	dma_discard
 9785              		.global	idle_buf_channel
 9786              		.global	idle_buf_clk100ns
 9787              		.global	idle_buf_clkn_high
 9788              		.global	cancel_follow
 9789              		.global	le_adv_channel
 9790              		.global	requested_channel
 9791              		.global	hop_timeout
 9792              		.global	hop_direct_channel
 9793              		.global	channel
 9794              		.global	do_hop
 9795              		.global	hop_mode
 9796              		.global	compile_info
 9797              		.comm	rr,5,1
 9798              		.comm	used_channels,1,1
 9799              		.comm	afh_map,10,1
 9800              		.comm	afh_enabled,1,1
 9801              		.comm	syncword,8,8
 9802              		.comm	target,16,8
 9803              		.comm	clkn_next_drift_fix,4,4
 9804              		.comm	clkn_last_drift_fix,4,4
 9805              		.comm	clk_drift_correction,2,2
 9806              		.comm	clk_drift_ppm,2,2
 9807              		.comm	clk100ns_offset,2,2
 9808              		.comm	clkn_offset,4,4
 9809              		.comm	last_hop,4,4
 9810              		.comm	clkn,4,4
 9811              		.comm	rx_err,4,4
 9812              		.comm	rx_tc,4,4
 9813              		.comm	idle_rxbuf,4,4
 9814              		.comm	active_rxbuf,4,4
 9815              		.comm	rxbuf2,50,1
 9816              		.comm	rxbuf1,50,1
 9817              		.comm	cs_trigger,1,1
 9818              		.comm	cs_threshold_cur,1,1
 9819              		.comm	cs_threshold_req,1,1
 9820              		.comm	cs_no_squelch,1,1
 9821              		.comm	rssi_count,1,1
 9822              		.comm	rssi_min,1,1
 9823              		.comm	rssi_max,1,1
 9824              		.section	.rodata
 9825              		.align	2
 9826              		.set	.LANCHOR2,. + 0
 9829              	whitening_index:
 9830 0000 463E786F 		.ascii	"F>xoM.\017eB'\037\032PS}Y\012#\0106z\021!\000:s\006"
 9830      4D2E0F65 
 9830      42271F1A 
 9830      50537D59 
 9830      0A230836 
 9831 001b 5E563134 		.ascii	"^V14\024(\033TZ?p/f"
 9831      14281B54 
 9831      5A3F702F 
 9831      66
ARM GAS  /tmp/ccwF1FQu.s 			page 271


 9834              	whitening:
 9835 0028 01010101 		.ascii	"\001\001\001\001\000\001\000\001\000\001\000\000\000"
 9835      00010001 
 9835      00010000 
 9835      00
 9836 0035 00010001 		.ascii	"\000\001\000\001\001\000\001\001\001\001\000\000\001"
 9836      01000101 
 9836      01010000 
 9836      01
 9837 0042 01010000 		.ascii	"\001\001\000\000\001\000\001\000\001\001\000\000\001"
 9837      01000100 
 9837      01010000 
 9837      01
 9838 004f 01000000 		.ascii	"\001\000\000\000\000\000\001\001\000\001\001\000\001"
 9838      00000101 
 9838      00010100 
 9838      01
 9839 005c 00010101 		.ascii	"\000\001\001\001\000\001\000\000\000\001\001\000\000"
 9839      00010000 
 9839      00010100 
 9839      00
 9840 0069 01000000 		.ascii	"\001\000\000\000\001\000\000\000\000\000\000\001\000"
 9840      01000000 
 9840      00000001 
 9840      00
 9841 0076 00010000 		.ascii	"\000\001\000\000\001\001\000\001\000\000\001\001\001"
 9841      01010001 
 9841      00000101 
 9841      01
 9842 0083 01000101 		.ascii	"\001\000\001\001\001\000\000\000\000\001\001\001\001"
 9842      01000000 
 9842      00010101 
 9842      01
 9843 0090 01010100 		.ascii	"\001\001\001\000\000\000\001\001\001\000\001\001\000"
 9843      00000101 
 9843      01000101 
 9843      00
 9844 009d 00000100 		.ascii	"\000\000\001\000\001\000\000\001\000\001"
 9844      01000001 
 9844      0001
 9847              	compile_info:
 9848 00a7 75626572 		.ascii	"ubertooth 2020-12-R1 (bwb@bwb-desktop) Sun 02 Jan 2"
 9848      746F6F74 
 9848      68203230 
 9848      32302D31 
 9848      322D5231 
 9849 00da 30323220 		.ascii	"022 08:23:01 PM EST\000"
 9849      30383A32 
 9849      333A3031 
 9849      20504D20 
 9849      45535400 
 9850 00ee 0000     		.space	2
 9853              	whitening_word:
 9854 00f0 40B2BCC3 		.word	-1011043776
 9855 00f4 1F374A5F 		.word	1598699295
 9856 00f8 85F69C9A 		.word	-1700989307
 9857 00fc C1D6C544 		.word	1153816257
ARM GAS  /tmp/ccwF1FQu.s 			page 272


 9858 0100 2059DEE1 		.word	-505521888
 9859 0104 8F1BA5AF 		.word	-1348134001
 9860 0108 427B4ECD 		.word	-850494654
 9861 010c 60EB6222 		.word	576908128
 9862 0110 902CEFF0 		.word	-252760944
 9863 0114 C78DD257 		.word	1473416647
 9864 0118 A13DA766 		.word	1722236321
 9865 011c B0753111 		.word	288454064
 9866 0120 8940B2BC 		.word	-1129168759
 9867 0124 C31F374A 		.word	1245126595
 9868 0128 5F85F69C 		.word	-1661565601
 9869 012c 9AC1D6C5 		.word	-975781478
 9870 0130 442059DE 		.word	-564584380
 9871 0134 E18F1BA5 		.word	-1524920351
 9872 0138 AF427B4E 		.word	1316700847
 9873 013c CD60EB62 		.word	1659592909
 9874 0140 22902CEF 		.word	-282292190
 9875 0144 F0C78DD2 		.word	-762460176
 9876 0148 57A13DA7 		.word	-1489133225
 9877 014c 66B07531 		.word	829796454
 9878 0150 D257A13D 		.word	1033983954
 9879 0154 A766B075 		.word	1974494887
 9880 0158 31114896 		.word	-1773661903
 9881 015c 77F8E346 		.word	1189345399
 9882 0160 E9ABD09E 		.word	-1630491671
 9883 0164 5333D8BA 		.word	-1160236205
 9884 0168 980824CB 		.word	-886830952
 9885 016c 3BFC71A3 		.word	-1552810949
 9886 0170 F45568CF 		.word	-815245836
 9887 0174 A9196C5D 		.word	1567365545
 9888 0178 4C0492E5 		.word	-443415476
 9889 017c 1DFEB851 		.word	1371078173
 9890 0180 1BA5AF42 		.word	1118807323
 9891 0184 7B4ECD60 		.word	1624067707
 9892 0188 EB622290 		.word	-1876794645
 9893 018c 2CEFF0C7 		.word	-940511444
 9894 0190 8DD257A1 		.word	-1588079987
 9895 0194 3DA766B0 		.word	-1335449795
 9896 0198 75311148 		.word	1209086325
 9897 019c 9677F8E3 		.word	-470255722
 9898 01a0 46E9ABD0 		.word	-794039994
 9899 01a4 9E5333D8 		.word	-667724898
 9900 01a8 BA980824 		.word	604543162
 9901 01ac CB3BFC71 		.word	1912355787
 9902 01b0 6479873F 		.word	1065843044
 9903 01b4 6E94BE0A 		.word	180261998
 9904 01b8 ED393583 		.word	-2093663763
 9905 01bc AD8B8940 		.word	1082756013
 9906 01c0 B2BCC31F 		.word	532921522
 9907 01c4 374A5F85 		.word	-2057352649
 9908 01c8 F69C9AC1 		.word	-1046831882
 9909 01cc D6C54420 		.word	541378006
 9910 01d0 59DEE18F 		.word	-1881022887
 9911 01d4 1BA5AF42 		.word	1118807323
 9912 01d8 7B4ECD60 		.word	1624067707
 9913 01dc EB622290 		.word	-1876794645
 9914 01e0 AD8B8940 		.word	1082756013
ARM GAS  /tmp/ccwF1FQu.s 			page 273


 9915 01e4 B2BCC31F 		.word	532921522
 9916 01e8 374A5F85 		.word	-2057352649
 9917 01ec F69C9AC1 		.word	-1046831882
 9918 01f0 D6C54420 		.word	541378006
 9919 01f4 59DEE18F 		.word	-1881022887
 9920 01f8 1BA5AF42 		.word	1118807323
 9921 01fc 7B4ECD60 		.word	1624067707
 9922 0200 EB622290 		.word	-1876794645
 9923 0204 2CEFF0C7 		.word	-940511444
 9924 0208 8DD257A1 		.word	-1588079987
 9925 020c 3DA766B0 		.word	-1335449795
 9926 0210 F69C9AC1 		.word	-1046831882
 9927 0214 D6C54420 		.word	541378006
 9928 0218 59DEE18F 		.word	-1881022887
 9929 021c 1BA5AF42 		.word	1118807323
 9930 0220 7B4ECD60 		.word	1624067707
 9931 0224 EB622290 		.word	-1876794645
 9932 0228 2CEFF0C7 		.word	-940511444
 9933 022c 8DD257A1 		.word	-1588079987
 9934 0230 3DA766B0 		.word	-1335449795
 9935 0234 75311148 		.word	1209086325
 9936 0238 9677F8E3 		.word	-470255722
 9937 023c 46E9ABD0 		.word	-794039994
 9938 0240 3F6E94BE 		.word	-1097568705
 9939 0244 0AED3935 		.word	892988682
 9940 0248 83AD8B89 		.word	-1987334781
 9941 024c 40B2BCC3 		.word	-1011043776
 9942 0250 1F374A5F 		.word	1598699295
 9943 0254 85F69C9A 		.word	-1700989307
 9944 0258 C1D6C544 		.word	1153816257
 9945 025c 2059DEE1 		.word	-505521888
 9946 0260 8F1BA5AF 		.word	-1348134001
 9947 0264 427B4ECD 		.word	-850494654
 9948 0268 60EB6222 		.word	576908128
 9949 026c 902CEFF0 		.word	-252760944
 9950 0270 0824CB3B 		.word	1003168776
 9951 0274 FC71A3F4 		.word	-190615044
 9952 0278 5568CFA9 		.word	-1446025131
 9953 027c 196C5D4C 		.word	1281190937
 9954 0280 0492E51D 		.word	501584388
 9955 0284 FEB851FA 		.word	-95307522
 9956 0288 2AB4E7D4 		.word	-723012566
 9957 028c 0CB62E26 		.word	640595468
 9958 0290 02C9F20E 		.word	250792194
 9959 0294 7FDC287D 		.word	2099829887
 9960 0298 15DA736A 		.word	1785977365
 9961 029c 065B1713 		.word	320297734
 9962 02a0 C1D6C544 		.word	1153816257
 9963 02a4 2059DEE1 		.word	-505521888
 9964 02a8 8F1BA5AF 		.word	-1348134001
 9965 02ac 427B4ECD 		.word	-850494654
 9966 02b0 60EB6222 		.word	576908128
 9967 02b4 902CEFF0 		.word	-252760944
 9968 02b8 C78DD257 		.word	1473416647
 9969 02bc A13DA766 		.word	1722236321
 9970 02c0 B0753111 		.word	288454064
 9971 02c4 489677F8 		.word	-126380472
ARM GAS  /tmp/ccwF1FQu.s 			page 274


 9972 02c8 E346E9AB 		.word	-1410775325
 9973 02cc D09E5333 		.word	861118160
 9974 02d0 9AC1D6C5 		.word	-975781478
 9975 02d4 442059DE 		.word	-564584380
 9976 02d8 E18F1BA5 		.word	-1524920351
 9977 02dc AF427B4E 		.word	1316700847
 9978 02e0 CD60EB62 		.word	1659592909
 9979 02e4 22902CEF 		.word	-282292190
 9980 02e8 F0C78DD2 		.word	-762460176
 9981 02ec 57A13DA7 		.word	-1489133225
 9982 02f0 66B07531 		.word	829796454
 9983 02f4 11489677 		.word	2006337553
 9984 02f8 F8E346E9 		.word	-381230088
 9985 02fc ABD09E53 		.word	1402917035
 9986 0300 5333D8BA 		.word	-1160236205
 9987 0304 980824CB 		.word	-886830952
 9988 0308 3BFC71A3 		.word	-1552810949
 9989 030c F45568CF 		.word	-815245836
 9990 0310 A9196C5D 		.word	1567365545
 9991 0314 4C0492E5 		.word	-443415476
 9992 0318 1DFEB851 		.word	1371078173
 9993 031c FA2AB4E7 		.word	-407622918
 9994 0320 D40CB62E 		.word	783682772
 9995 0324 2602C9F2 		.word	-221707738
 9996 0328 0E7FDC28 		.word	685539086
 9997 032c 7D15DA73 		.word	1943672189
 9998 0330 2CEFF0C7 		.word	-940511444
 9999 0334 8DD257A1 		.word	-1588079987
 10000 0338 3DA766B0 		.word	-1335449795
 10001 033c 75311148 		.word	1209086325
 10002 0340 9677F8E3 		.word	-470255722
 10003 0344 46E9ABD0 		.word	-794039994
 10004 0348 9E5333D8 		.word	-667724898
 10005 034c BA980824 		.word	604543162
 10006 0350 CB3BFC71 		.word	1912355787
 10007 0354 A3F45568 		.word	1750463651
 10008 0358 CFA9196C 		.word	1813621199
 10009 035c 5D4C0492 		.word	-1845212067
 10010 0360 E51DFEB8 		.word	-1191305755
 10011 0364 51FA2AB4 		.word	-1272251823
 10012 0368 E7D40CB6 		.word	-1240673049
 10013 036c 2E2602C9 		.word	-922606034
 10014 0370 F20E7FDC 		.word	-595652878
 10015 0374 287D15DA 		.word	-636125912
 10016 0378 736A065B 		.word	1527147123
 10017 037c 17138164 		.word	1686180631
 10018 0380 79873F6E 		.word	1849657209
 10019 0384 94BE0AED 		.word	-318062956
 10020 0388 393583AD 		.word	-1383910087
 10021 038c 8B8940B2 		.word	-1304393333
 10022 0390 BE0AED39 		.word	971836094
 10023 0394 3583AD8B 		.word	-1951562955
 10024 0398 8940B2BC 		.word	-1129168759
 10025 039c C31F374A 		.word	1245126595
 10026 03a0 5F85F69C 		.word	-1661565601
 10027 03a4 9AC1D6C5 		.word	-975781478
 10028 03a8 442059DE 		.word	-564584380
ARM GAS  /tmp/ccwF1FQu.s 			page 275


 10029 03ac E18F1BA5 		.word	-1524920351
 10030 03b0 AF427B4E 		.word	1316700847
 10031 03b4 CD60EB62 		.word	1659592909
 10032 03b8 22902CEF 		.word	-282292190
 10033 03bc F0C78DD2 		.word	-762460176
 10034 03c0 77F8E346 		.word	1189345399
 10035 03c4 E9ABD09E 		.word	-1630491671
 10036 03c8 5333D8BA 		.word	-1160236205
 10037 03cc 980824CB 		.word	-886830952
 10038 03d0 3BFC71A3 		.word	-1552810949
 10039 03d4 F45568CF 		.word	-815245836
 10040 03d8 A9196C5D 		.word	1567365545
 10041 03dc 4C0492E5 		.word	-443415476
 10042 03e0 1DFEB851 		.word	1371078173
 10043 03e4 FA2AB4E7 		.word	-407622918
 10044 03e8 D40CB62E 		.word	783682772
 10045 03ec 2602C9F2 		.word	-221707738
 10046 03f0 D09E5333 		.word	861118160
 10047 03f4 D8BA9808 		.word	144227032
 10048 03f8 24CB3BFC 		.word	-63190236
 10049 03fc 71A3F455 		.word	1442095985
 10050 0400 68CFA919 		.word	430559080
 10051 0404 6C5D4C04 		.word	72113516
 10052 0408 92E51DFE 		.word	-31595118
 10053 040c B851FA2A 		.word	721047992
 10054 0410 B4E7D40C 		.word	215279540
 10055 0414 B62E2602 		.word	36056758
 10056 0418 C9F20E7F 		.word	2131686089
 10057 041c DC287D15 		.word	360523996
 10058 0420 196C5D4C 		.word	1281190937
 10059 0424 0492E51D 		.word	501584388
 10060 0428 FEB851FA 		.word	-95307522
 10061 042c 2AB4E7D4 		.word	-723012566
 10062 0430 0CB62E26 		.word	640595468
 10063 0434 02C9F20E 		.word	250792194
 10064 0438 7FDC287D 		.word	2099829887
 10065 043c 15DA736A 		.word	1785977365
 10066 0440 065B1713 		.word	320297734
 10067 0444 81647987 		.word	-2022087551
 10068 0448 3F6E94BE 		.word	-1097568705
 10069 044c 0AED3935 		.word	892988682
 10070 0450 427B4ECD 		.word	-850494654
 10071 0454 60EB6222 		.word	576908128
 10072 0458 902CEFF0 		.word	-252760944
 10073 045c C78DD257 		.word	1473416647
 10074 0460 A13DA766 		.word	1722236321
 10075 0464 B0753111 		.word	288454064
 10076 0468 489677F8 		.word	-126380472
 10077 046c E346E9AB 		.word	-1410775325
 10078 0470 D09E5333 		.word	861118160
 10079 0474 D8BA9808 		.word	144227032
 10080 0478 24CB3BFC 		.word	-63190236
 10081 047c 71A3F455 		.word	1442095985
 10082 0480 8B8940B2 		.word	-1304393333
 10083 0484 BCC31F37 		.word	924828604
 10084 0488 4A5F85F6 		.word	-159031478
 10085 048c 9C9AC1D6 		.word	-691955044
ARM GAS  /tmp/ccwF1FQu.s 			page 276


 10086 0490 C5442059 		.word	1495286981
 10087 0494 DEE18F1B 		.word	462414302
 10088 0498 A5AF427B 		.word	2067967909
 10089 049c 4ECD60EB 		.word	-345977522
 10090 04a0 6222902C 		.word	747643490
 10091 04a4 EFF0C78D 		.word	-1916276497
 10092 04a8 D257A13D 		.word	1033983954
 10093 04ac A766B075 		.word	1974494887
 10094 04b0 F45568CF 		.word	-815245836
 10095 04b4 A9196C5D 		.word	1567365545
 10096 04b8 4C0492E5 		.word	-443415476
 10097 04bc 1DFEB851 		.word	1371078173
 10098 04c0 FA2AB4E7 		.word	-407622918
 10099 04c4 D40CB62E 		.word	783682772
 10100 04c8 2602C9F2 		.word	-221707738
 10101 04cc 0E7FDC28 		.word	685539086
 10102 04d0 7D15DA73 		.word	1943672189
 10103 04d4 6A065B17 		.word	391841386
 10104 04d8 13816479 		.word	2036629779
 10105 04dc 873F6E94 		.word	-1804714105
 10106 04e0 3DA766B0 		.word	-1335449795
 10107 04e4 75311148 		.word	1209086325
 10108 04e8 9677F8E3 		.word	-470255722
 10109 04ec 46E9ABD0 		.word	-794039994
 10110 04f0 9E5333D8 		.word	-667724898
 10111 04f4 BA980824 		.word	604543162
 10112 04f8 CB3BFC71 		.word	1912355787
 10113 04fc A3F45568 		.word	1750463651
 10114 0500 CFA9196C 		.word	1813621199
 10115 0504 5D4C0492 		.word	-1845212067
 10116 0508 E51DFEB8 		.word	-1191305755
 10117 050c 51FA2AB4 		.word	-1272251823
 10118 0510 66B07531 		.word	829796454
 10119 0514 11489677 		.word	2006337553
 10120 0518 F8E346E9 		.word	-381230088
 10121 051c ABD09E53 		.word	1402917035
 10122 0520 33D8BA98 		.word	-1732585421
 10123 0524 0824CB3B 		.word	1003168776
 10124 0528 FC71A3F4 		.word	-190615044
 10125 052c 5568CFA9 		.word	-1446025131
 10126 0530 196C5D4C 		.word	1281190937
 10127 0534 0492E51D 		.word	501584388
 10128 0538 FEB851FA 		.word	-95307522
 10129 053c 2AB4E7D4 		.word	-723012566
 10130 0540 AF427B4E 		.word	1316700847
 10131 0544 CD60EB62 		.word	1659592909
 10132 0548 22902CEF 		.word	-282292190
 10133 054c F0C78DD2 		.word	-762460176
 10134 0550 57A13DA7 		.word	-1489133225
 10135 0554 66B07531 		.word	829796454
 10136 0558 11489677 		.word	2006337553
 10137 055c F8E346E9 		.word	-381230088
 10138 0560 ABD09E53 		.word	1402917035
 10139 0564 33D8BA98 		.word	-1732585421
 10140 0568 0824CB3B 		.word	1003168776
 10141 056c FC71A3F4 		.word	-190615044
 10142 0570 980824CB 		.word	-886830952
ARM GAS  /tmp/ccwF1FQu.s 			page 277


 10143 0574 3BFC71A3 		.word	-1552810949
 10144 0578 F45568CF 		.word	-815245836
 10145 057c A9196C5D 		.word	1567365545
 10146 0580 4C0492E5 		.word	-443415476
 10147 0584 1DFEB851 		.word	1371078173
 10148 0588 FA2AB4E7 		.word	-407622918
 10149 058c D40CB62E 		.word	783682772
 10150 0590 2602C9F2 		.word	-221707738
 10151 0594 0E7FDC28 		.word	685539086
 10152 0598 7D15DA73 		.word	1943672189
 10153 059c 6A065B17 		.word	391841386
 10154 05a0 51FA2AB4 		.word	-1272251823
 10155 05a4 E7D40CB6 		.word	-1240673049
 10156 05a8 2E2602C9 		.word	-922606034
 10157 05ac F20E7FDC 		.word	-595652878
 10158 05b0 287D15DA 		.word	-636125912
 10159 05b4 736A065B 		.word	1527147123
 10160 05b8 17138164 		.word	1686180631
 10161 05bc 79873F6E 		.word	1849657209
 10162 05c0 94BE0AED 		.word	-318062956
 10163 05c4 393583AD 		.word	-1383910087
 10164 05c8 8B8940B2 		.word	-1304393333
 10165 05cc BCC31F37 		.word	924828604
 10166 05d0 0AED3935 		.word	892988682
 10167 05d4 83AD8B89 		.word	-1987334781
 10168 05d8 40B2BCC3 		.word	-1011043776
 10169 05dc 1F374A5F 		.word	1598699295
 10170 05e0 85F69C9A 		.word	-1700989307
 10171 05e4 C1D6C544 		.word	1153816257
 10172 05e8 2059DEE1 		.word	-505521888
 10173 05ec 8F1BA5AF 		.word	-1348134001
 10174 05f0 427B4ECD 		.word	-850494654
 10175 05f4 60EB6222 		.word	576908128
 10176 05f8 902CEFF0 		.word	-252760944
 10177 05fc C78DD257 		.word	1473416647
 10178 0600 C31F374A 		.word	1245126595
 10179 0604 5F85F69C 		.word	-1661565601
 10180 0608 9AC1D6C5 		.word	-975781478
 10181 060c 442059DE 		.word	-564584380
 10182 0610 E18F1BA5 		.word	-1524920351
 10183 0614 AF427B4E 		.word	1316700847
 10184 0618 CD60EB62 		.word	1659592909
 10185 061c 22902CEF 		.word	-282292190
 10186 0620 F0C78DD2 		.word	-762460176
 10187 0624 57A13DA7 		.word	-1489133225
 10188 0628 66B07531 		.word	829796454
 10189 062c 11489677 		.word	2006337553
 10190 0630 BCC31F37 		.word	924828604
 10191 0634 4A5F85F6 		.word	-159031478
 10192 0638 9C9AC1D6 		.word	-691955044
 10193 063c C5442059 		.word	1495286981
 10194 0640 DEE18F1B 		.word	462414302
 10195 0644 A5AF427B 		.word	2067967909
 10196 0648 4ECD60EB 		.word	-345977522
 10197 064c 6222902C 		.word	747643490
 10198 0650 EFF0C78D 		.word	-1916276497
 10199 0654 D257A13D 		.word	1033983954
ARM GAS  /tmp/ccwF1FQu.s 			page 278


 10200 0658 A766B075 		.word	1974494887
 10201 065c 31114896 		.word	-1773661903
 10202 0660 75311148 		.word	1209086325
 10203 0664 9677F8E3 		.word	-470255722
 10204 0668 46E9ABD0 		.word	-794039994
 10205 066c 9E5333D8 		.word	-667724898
 10206 0670 BA980824 		.word	604543162
 10207 0674 CB3BFC71 		.word	1912355787
 10208 0678 A3F45568 		.word	1750463651
 10209 067c CFA9196C 		.word	1813621199
 10210 0680 5D4C0492 		.word	-1845212067
 10211 0684 E51DFEB8 		.word	-1191305755
 10212 0688 51FA2AB4 		.word	-1272251823
 10213 068c E7D40CB6 		.word	-1240673049
 10214 0690 2E2602C9 		.word	-922606034
 10215 0694 F20E7FDC 		.word	-595652878
 10216 0698 287D15DA 		.word	-636125912
 10217 069c 736A065B 		.word	1527147123
 10218 06a0 17138164 		.word	1686180631
 10219 06a4 79873F6E 		.word	1849657209
 10220 06a8 94BE0AED 		.word	-318062956
 10221 06ac 393583AD 		.word	-1383910087
 10222 06b0 8B8940B2 		.word	-1304393333
 10223 06b4 BCC31F37 		.word	924828604
 10224 06b8 4A5F85F6 		.word	-159031478
 10225 06bc 9C9AC1D6 		.word	-691955044
 10226 06c0 E7D40CB6 		.word	-1240673049
 10227 06c4 2E2602C9 		.word	-922606034
 10228 06c8 F20E7FDC 		.word	-595652878
 10229 06cc 287D15DA 		.word	-636125912
 10230 06d0 736A065B 		.word	1527147123
 10231 06d4 17138164 		.word	1686180631
 10232 06d8 79873F6E 		.word	1849657209
 10233 06dc 94BE0AED 		.word	-318062956
 10234 06e0 393583AD 		.word	-1383910087
 10235 06e4 8B8940B2 		.word	-1304393333
 10236 06e8 BCC31F37 		.word	924828604
 10237 06ec 4A5F85F6 		.word	-159031478
 10238 06f0 60EB6222 		.word	576908128
 10239 06f4 902CEFF0 		.word	-252760944
 10240 06f8 C78DD257 		.word	1473416647
 10241 06fc A13DA766 		.word	1722236321
 10242 0700 B0753111 		.word	288454064
 10243 0704 489677F8 		.word	-126380472
 10244 0708 E346E9AB 		.word	-1410775325
 10245 070c D09E5333 		.word	861118160
 10246 0710 D8BA9808 		.word	144227032
 10247 0714 24CB3BFC 		.word	-63190236
 10248 0718 71A3F455 		.word	1442095985
 10249 071c 68CFA919 		.word	430559080
 10250 0720 A9196C5D 		.word	1567365545
 10251 0724 4C0492E5 		.word	-443415476
 10252 0728 1DFEB851 		.word	1371078173
 10253 072c FA2AB4E7 		.word	-407622918
 10254 0730 D40CB62E 		.word	783682772
 10255 0734 2602C9F2 		.word	-221707738
 10256 0738 0E7FDC28 		.word	685539086
ARM GAS  /tmp/ccwF1FQu.s 			page 279


 10257 073c 7D15DA73 		.word	1943672189
 10258 0740 6A065B17 		.word	391841386
 10259 0744 13816479 		.word	2036629779
 10260 0748 873F6E94 		.word	-1804714105
 10261 074c BE0AED39 		.word	971836094
 10262 0750 F20E7FDC 		.word	-595652878
 10263 0754 287D15DA 		.word	-636125912
 10264 0758 736A065B 		.word	1527147123
 10265 075c 17138164 		.word	1686180631
 10266 0760 79873F6E 		.word	1849657209
 10267 0764 94BE0AED 		.word	-318062956
 10268 0768 393583AD 		.word	-1383910087
 10269 076c 8B8940B2 		.word	-1304393333
 10270 0770 BCC31F37 		.word	924828604
 10271 0774 4A5F85F6 		.word	-159031478
 10272 0778 9C9AC1D6 		.word	-691955044
 10273 077c C5442059 		.word	1495286981
 10274 0780 3BFC71A3 		.word	-1552810949
 10275 0784 F45568CF 		.word	-815245836
 10276 0788 A9196C5D 		.word	1567365545
 10277 078c 4C0492E5 		.word	-443415476
 10278 0790 1DFEB851 		.word	1371078173
 10279 0794 FA2AB4E7 		.word	-407622918
 10280 0798 D40CB62E 		.word	783682772
 10281 079c 2602C9F2 		.word	-221707738
 10282 07a0 0E7FDC28 		.word	685539086
 10283 07a4 7D15DA73 		.word	1943672189
 10284 07a8 6A065B17 		.word	391841386
 10285 07ac 13816479 		.word	2036629779
 10286 07b0 442059DE 		.word	-564584380
 10287 07b4 E18F1BA5 		.word	-1524920351
 10288 07b8 AF427B4E 		.word	1316700847
 10289 07bc CD60EB62 		.word	1659592909
 10290 07c0 22902CEF 		.word	-282292190
 10291 07c4 F0C78DD2 		.word	-762460176
 10292 07c8 57A13DA7 		.word	-1489133225
 10293 07cc 66B07531 		.word	829796454
 10294 07d0 11489677 		.word	2006337553
 10295 07d4 F8E346E9 		.word	-381230088
 10296 07d8 ABD09E53 		.word	1402917035
 10297 07dc 33D8BA98 		.word	-1732585421
 10298 07e0 8DD257A1 		.word	-1588079987
 10299 07e4 3DA766B0 		.word	-1335449795
 10300 07e8 75311148 		.word	1209086325
 10301 07ec 9677F8E3 		.word	-470255722
 10302 07f0 46E9ABD0 		.word	-794039994
 10303 07f4 9E5333D8 		.word	-667724898
 10304 07f8 BA980824 		.word	604543162
 10305 07fc CB3BFC71 		.word	1912355787
 10306 0800 A3F45568 		.word	1750463651
 10307 0804 CFA9196C 		.word	1813621199
 10308 0808 5D4C0492 		.word	-1845212067
 10309 080c E51DFEB8 		.word	-1191305755
 10310 0810 D6C54420 		.word	541378006
 10311 0814 59DEE18F 		.word	-1881022887
 10312 0818 1BA5AF42 		.word	1118807323
 10313 081c 7B4ECD60 		.word	1624067707
ARM GAS  /tmp/ccwF1FQu.s 			page 280


 10314 0820 EB622290 		.word	-1876794645
 10315 0824 2CEFF0C7 		.word	-940511444
 10316 0828 8DD257A1 		.word	-1588079987
 10317 082c 3DA766B0 		.word	-1335449795
 10318 0830 75311148 		.word	1209086325
 10319 0834 9677F8E3 		.word	-470255722
 10320 0838 46E9ABD0 		.word	-794039994
 10321 083c 9E5333D8 		.word	-667724898
 10322 0840 1F374A5F 		.word	1598699295
 10323 0844 85F69C9A 		.word	-1700989307
 10324 0848 C1D6C544 		.word	1153816257
 10325 084c 2059DEE1 		.word	-505521888
 10326 0850 8F1BA5AF 		.word	-1348134001
 10327 0854 427B4ECD 		.word	-850494654
 10328 0858 60EB6222 		.word	576908128
 10329 085c 902CEFF0 		.word	-252760944
 10330 0860 C78DD257 		.word	1473416647
 10331 0864 A13DA766 		.word	1722236321
 10332 0868 B0753111 		.word	288454064
 10333 086c 489677F8 		.word	-126380472
 10336              	hop_interval_lut:
 10337 0870 00011319 		.ascii	"\000\001\023\031\034\017\037\020\016!\032\033\"\024"
 10337      1C0F1F10 
 10337      0E211A1B 
 10337      2214
 10338 087e 08050718 		.ascii	"\010\005\007\030#\002\015\036 \035\021\003\012\013\004"
 10338      23020D1E 
 10338      201D1103 
 10338      0A0B04
 10339 088d 17150616 		.ascii	"\027\025\006\026\011\014\022$"
 10339      090C1224 
 10340              	.LC0:
 10341 0895 01000000 		.ascii	"\001\000\000\000\000\000\000\000\000\000\000\000\000"
 10341      00000000 
 10341      00000000 
 10341      00
 10342 08a2 000000   		.ascii	"\000\000\000"
 10343 08a5 01000001 		.ascii	"\001\000\000\001\000\000\000\000\000\000\000\000\000"
 10343      00000000 
 10343      00000000 
 10343      00
 10344 08b2 000000   		.ascii	"\000\000\000"
 10345 08b5 01000100 		.ascii	"\001\000\001\000\000\000\000\000\000\000\000\000\000"
 10345      00000000 
 10345      00000000 
 10345      00
 10346 08c2 000000   		.ascii	"\000\000\000"
 10347 08c5 01000101 		.ascii	"\001\000\001\001\000\000\000\000\000\000\000\000\000"
 10347      00000000 
 10347      00000000 
 10347      00
 10348 08d2 000000   		.ascii	"\000\000\000"
 10349 08d5 000000   		.space	3
 10350              	.LC1:
 10351 08d8 01000000 		.word	1
 10352 08dc 01000000 		.word	1
 10353 08e0 01000000 		.word	1
ARM GAS  /tmp/ccwF1FQu.s 			page 281


 10354 08e4 01000000 		.word	1
 10355              		.data
 10356              		.align	2
 10357              		.set	.LANCHOR0,. + 0
 10360              	le:
 10361 0000 D6BE898E 		.word	-1903575338
 10362 0004 7D6B     		.short	27517
 10363 0006 7191     		.short	-28303
 10364 0008 55555500 		.word	5592405
 10365 000c AAAAAA00 		.word	11184810
 10366 0010 00000000 		.word	0
 10367 0014 00       		.byte	0
 10368 0015 000000   		.space	3
 10369 0018 00000000 		.word	0
 10370 001c 00000000 		.space	24
 10370      00000000 
 10370      00000000 
 10370      00000000 
 10370      00000000 
 10371 0034 01000000 		.word	1
 10372 0038 00000000 		.space	12
 10372      00000000 
 10372      00000000 
 10373 0044 00000000 		.word	0
 10374 0048 00000000 		.word	0
 10377              	channel:
 10378 004c 8909     		.short	2441
 10381              	hop_timeout:
 10382 004e 9E00     		.short	158
 10385              	le_adv_channel:
 10386 0050 6209     		.short	2402
 10389              	low_freq:
 10390 0052 6009     		.short	2400
 10393              	high_freq:
 10394 0054 B309     		.short	2483
 10397              	rssi_threshold:
 10398 0056 E2       		.byte	-30
 10399 0057 00       		.space	1
 10402              	le_adv_len:
 10403 0058 03000000 		.word	3
 10406              	le_adv_data:
 10407 005c 02010500 		.ascii	"\002\001\005\000"
 10408 0060 00000000 		.space	251
 10408      00000000 
 10408      00000000 
 10408      00000000 
 10408      00000000 
 10409              		.bss
 10410              		.align	2
 10411              		.set	.LANCHOR1,. + 0
 10414              	modulation:
 10415 0000 00       		.space	1
 10418              	status:
 10419 0001 00       		.space	1
 10422              	idle_buf_clkn_high:
 10423 0002 00       		.space	1
 10424 0003 00       		.space	1
ARM GAS  /tmp/ccwF1FQu.s 			page 282


 10427              	idle_buf_clk100ns:
 10428 0004 00000000 		.space	4
 10431              	idle_buf_channel:
 10432 0008 0000     		.space	2
 10435              	hop_mode:
 10436 000a 00       		.space	1
 10439              	do_hop:
 10440 000b 00       		.space	1
 10443              	hop_direct_channel:
 10444 000c 0000     		.space	2
 10447              	requested_channel:
 10448 000e 0000     		.space	2
 10451              	dma_discard:
 10452 0010 00       		.space	1
 10455              	mode:
 10456 0011 00       		.space	1
 10459              	requested_mode:
 10460 0012 00       		.space	1
 10463              	jam_mode:
 10464 0013 00       		.space	1
 10467              	ego_mode:
 10468 0014 00       		.space	1
 10469 0015 000000   		.space	3
 10472              	packet_cb:
 10473 0018 00000000 		.space	4
 10476              	le_jam_count:
 10477 001c 00000000 		.space	4
 10480              	slave_mac_address:
 10481 0020 00000000 		.space	6
 10481      0000
 10482 0026 0000     		.space	2
 10485              	cancel_follow:
 10486 0028 00000000 		.space	4
 10489              	data_cb:
 10490 002c 00000000 		.space	4
 10493              	restart_jamming.5034:
 10494 0030 00000000 		.space	4
 10497              	first_ts.5133:
 10498 0034 00000000 		.space	4
 10501              	prev_clk.5139:
 10502 0038 00000000 		.space	4
 10503              		.text
 10504              	.Letext0:
 10505              		.file 2 "/usr/lib/gcc/arm-none-eabi/9.2.1/include/stddef.h"
 10506              		.file 3 "/usr/include/newlib/sys/_types.h"
 10507              		.file 4 "/usr/include/newlib/sys/reent.h"
 10508              		.file 5 "/usr/include/newlib/sys/lock.h"
 10509              		.file 6 "/usr/lib/gcc/arm-none-eabi/9.2.1/include/stdint.h"
 10510              		.file 7 "../../host/libubertooth/src/ubertooth_interface.h"
 10511              		.file 8 "../common/ubertooth.h"
 10512              		.file 9 "ubertooth_rssi.h"
 10513              		.file 10 "ubertooth_cs.h"
 10514              		.file 11 "ubertooth_dma.h"
 10515              		.file 12 "ubertooth_clock.h"
 10516              		.file 13 "bluetooth.h"
 10517              		.file 14 "bluetooth_le.h"
 10518              		.file 15 "ego.h"
ARM GAS  /tmp/ccwF1FQu.s 			page 283


 10519              		.file 16 "debug_uart.h"
 10520              		.file 17 "cc2400_rangetest.h"
 10521              		.file 18 "ubertooth_usb.h"
 10522              		.file 19 "xmas.h"
 10523              		.file 20 "/usr/include/newlib/string.h"
 10524              		.file 21 "<built-in>"
ARM GAS  /tmp/ccwF1FQu.s 			page 284


DEFINED SYMBOLS
                            *ABS*:0000000000000000 bluetooth_rxtx.c
     /tmp/ccwF1FQu.s:16     .text.reverse8:0000000000000000 $t
     /tmp/ccwF1FQu.s:23     .text.reverse8:0000000000000000 reverse8
     /tmp/ccwF1FQu.s:82     .text.le_set_access_address:0000000000000000 $t
     /tmp/ccwF1FQu.s:88     .text.le_set_access_address:0000000000000000 le_set_access_address
     /tmp/ccwF1FQu.s:123    .text.le_set_access_address:0000000000000014 $d
     /tmp/ccwF1FQu.s:128    .text.cc2400_rx:0000000000000000 $t
     /tmp/ccwF1FQu.s:134    .text.cc2400_rx:0000000000000000 cc2400_rx
     /tmp/ccwF1FQu.s:263    .text.cc2400_rx:000000000000009c $d
     /tmp/ccwF1FQu.s:270    .text.cc2400_rx_sync:0000000000000000 $t
     /tmp/ccwF1FQu.s:276    .text.cc2400_rx_sync:0000000000000000 cc2400_rx_sync
     /tmp/ccwF1FQu.s:418    .text.cc2400_rx_sync:00000000000000a8 $d
     /tmp/ccwF1FQu.s:425    .text.enqueue:0000000000000000 $t
     /tmp/ccwF1FQu.s:431    .text.enqueue:0000000000000000 enqueue
     /tmp/ccwF1FQu.s:566    .text.enqueue:0000000000000080 $d
                            *COM*:0000000000000004 clkn
                            *COM*:0000000000000001 rssi_min
                            *COM*:0000000000000001 rssi_max
                            *COM*:0000000000000001 rssi_count
     /tmp/ccwF1FQu.s:576    .text.cc2400_idle:0000000000000000 $t
     /tmp/ccwF1FQu.s:582    .text.cc2400_idle:0000000000000000 cc2400_idle
     /tmp/ccwF1FQu.s:724    .text.cc2400_idle:000000000000009c $d
                            *COM*:0000000000000010 target
     /tmp/ccwF1FQu.s:732    .text.cb_follow_le:0000000000000000 $t
     /tmp/ccwF1FQu.s:739    .text.cb_follow_le:0000000000000000 cb_follow_le
     /tmp/ccwF1FQu.s:1006   .text.cb_follow_le:00000000000000f8 $d
                            *COM*:0000000000000320 unpacked
                            *COM*:0000000000000004 idle_rxbuf
     /tmp/ccwF1FQu.s:1016   .text.connection_follow_cb:0000000000000000 $t
     /tmp/ccwF1FQu.s:1023   .text.connection_follow_cb:0000000000000000 connection_follow_cb
     /tmp/ccwF1FQu.s:1379   .text.connection_follow_cb:000000000000015c $d
     /tmp/ccwF1FQu.s:1391   .text.vendor_request_handler:0000000000000000 $t
     /tmp/ccwF1FQu.s:1397   .text.vendor_request_handler:0000000000000000 vendor_request_handler
     /tmp/ccwF1FQu.s:1431   .text.vendor_request_handler:0000000000000014 $d
     /tmp/ccwF1FQu.s:1505   .text.vendor_request_handler:00000000000000a8 $t
     /tmp/ccwF1FQu.s:2240   .text.vendor_request_handler:0000000000000374 $d
                            *COM*:0000000000000005 rr
                            *COM*:0000000000000001 cs_threshold_req
     /tmp/ccwF1FQu.s:2259   .text.vendor_request_handler:00000000000003b0 $t
     /tmp/ccwF1FQu.s:3003   .text.vendor_request_handler:0000000000000630 $d
                            *COM*:0000000000000004 clkn_offset
                            *COM*:0000000000000002 clk100ns_offset
                            *COM*:000000000000000a afh_map
                            *COM*:0000000000000001 used_channels
                            *COM*:0000000000000001 afh_enabled
                            *COM*:0000000000000002 clk_drift_ppm
                            *COM*:0000000000000004 clkn_next_drift_fix
                            *COM*:0000000000000002 clk_drift_correction
                            *COM*:0000000000000004 clkn_last_drift_fix
                            *COM*:000000000000003a tx_pkt
     /tmp/ccwF1FQu.s:3020   .text.vendor_request_handler:0000000000000668 $t
     /tmp/ccwF1FQu.s:3228   .text.vendor_request_handler:000000000000070c $d
     /tmp/ccwF1FQu.s:3236   .text.enqueue_with_ts:0000000000000000 $t
     /tmp/ccwF1FQu.s:3243   .text.enqueue_with_ts:0000000000000000 enqueue_with_ts
     /tmp/ccwF1FQu.s:3332   .text.enqueue_with_ts:000000000000004c $d
     /tmp/ccwF1FQu.s:3338   .text.TIMER0_IRQHandler:0000000000000000 $t
ARM GAS  /tmp/ccwF1FQu.s 			page 285


     /tmp/ccwF1FQu.s:3345   .text.TIMER0_IRQHandler:0000000000000000 TIMER0_IRQHandler
     /tmp/ccwF1FQu.s:3606   .text.TIMER0_IRQHandler:000000000000010c $d
                            *COM*:0000000000000004 last_hop
     /tmp/ccwF1FQu.s:3623   .text.EINT3_IRQHandler:0000000000000000 $t
     /tmp/ccwF1FQu.s:3630   .text.EINT3_IRQHandler:0000000000000000 EINT3_IRQHandler
     /tmp/ccwF1FQu.s:3667   .text.EINT3_IRQHandler:0000000000000024 $d
                            *COM*:0000000000000001 cs_trigger
     /tmp/ccwF1FQu.s:3675   .text.legacy_DMA_IRQHandler:0000000000000000 $t
     /tmp/ccwF1FQu.s:3682   .text.legacy_DMA_IRQHandler:0000000000000000 legacy_DMA_IRQHandler
     /tmp/ccwF1FQu.s:3840   .text.legacy_DMA_IRQHandler:00000000000000a8 $d
                            *COM*:0000000000000004 active_rxbuf
                            *COM*:0000000000000004 rx_tc
                            *COM*:0000000000000004 rx_err
     /tmp/ccwF1FQu.s:3858   .text.DMA_IRQHandler:0000000000000000 $t
     /tmp/ccwF1FQu.s:3865   .text.DMA_IRQHandler:0000000000000000 DMA_IRQHandler
     /tmp/ccwF1FQu.s:3943   .text.DMA_IRQHandler:0000000000000048 $d
     /tmp/ccwF1FQu.s:3955   .text.le_transmit:0000000000000000 $t
     /tmp/ccwF1FQu.s:3962   .text.le_transmit:0000000000000000 le_transmit
     /tmp/ccwF1FQu.s:4311   .text.le_transmit:0000000000000188 $d
     /tmp/ccwF1FQu.s:4321   .text.le_jam:0000000000000000 $t
     /tmp/ccwF1FQu.s:4328   .text.le_jam:0000000000000000 le_jam
     /tmp/ccwF1FQu.s:4424   .text.le_jam:0000000000000074 $d
     /tmp/ccwF1FQu.s:4429   .text.hop:0000000000000000 $t
     /tmp/ccwF1FQu.s:4436   .text.hop:0000000000000000 hop
     /tmp/ccwF1FQu.s:4772   .text.hop:00000000000001b0 $d
     /tmp/ccwF1FQu.s:4783   .text.bt_stream_rx:0000000000000000 $t
     /tmp/ccwF1FQu.s:4790   .text.bt_stream_rx:0000000000000000 bt_stream_rx
     /tmp/ccwF1FQu.s:5061   .text.bt_stream_rx:000000000000013c $d
                            *COM*:0000000000000001 cs_no_squelch
                            *COM*:0000000000000001 cs_threshold_cur
     /tmp/ccwF1FQu.s:5077   .text.br_transmit:0000000000000000 $t
     /tmp/ccwF1FQu.s:5084   .text.br_transmit:0000000000000000 br_transmit
     /tmp/ccwF1FQu.s:5594   .text.br_transmit:0000000000000260 $d
     /tmp/ccwF1FQu.s:5607   .text.reset_le:0000000000000000 $t
     /tmp/ccwF1FQu.s:5614   .text.reset_le:0000000000000000 reset_le
     /tmp/ccwF1FQu.s:5690   .text.reset_le:000000000000003c $d
     /tmp/ccwF1FQu.s:5699   .text.reset_le_promisc:0000000000000000 $t
     /tmp/ccwF1FQu.s:5706   .text.reset_le_promisc:0000000000000000 reset_le_promisc
     /tmp/ccwF1FQu.s:5732   .text.reset_le_promisc:000000000000001c $d
                            *COM*:0000000000000108 le_promisc
     /tmp/ccwF1FQu.s:5737   .text.bt_generic_le:0000000000000000 $t
     /tmp/ccwF1FQu.s:5744   .text.bt_generic_le:0000000000000000 bt_generic_le
     /tmp/ccwF1FQu.s:6174   .text.bt_generic_le:00000000000001d0 $d
     /tmp/ccwF1FQu.s:6193   .text.bt_le_sync:0000000000000000 $t
     /tmp/ccwF1FQu.s:6200   .text.bt_le_sync:0000000000000000 bt_le_sync
     /tmp/ccwF1FQu.s:6840   .text.bt_le_sync:00000000000002bc $d
                            *COM*:0000000000000032 rxbuf1
     /tmp/ccwF1FQu.s:6865   .text.bt_le_sync:000000000000030c $t
     /tmp/ccwF1FQu.s:6990   .text.bt_le_sync:00000000000003a0 $d
     /tmp/ccwF1FQu.s:6996   .text.bt_follow_le:0000000000000000 $t
     /tmp/ccwF1FQu.s:7003   .text.bt_follow_le:0000000000000000 bt_follow_le
     /tmp/ccwF1FQu.s:7017   .text.le_promisc_state:0000000000000000 $t
     /tmp/ccwF1FQu.s:7024   .text.le_promisc_state:0000000000000000 le_promisc_state
     /tmp/ccwF1FQu.s:7088   .text.promisc_recover_hop_increment:0000000000000000 $t
     /tmp/ccwF1FQu.s:7095   .text.promisc_recover_hop_increment:0000000000000000 promisc_recover_hop_increment
     /tmp/ccwF1FQu.s:7314   .text.promisc_recover_hop_increment:00000000000000cc $d
     /tmp/ccwF1FQu.s:7325   .text.promisc_recover_hop_interval:0000000000000000 $t
ARM GAS  /tmp/ccwF1FQu.s 			page 286


     /tmp/ccwF1FQu.s:7332   .text.promisc_recover_hop_interval:0000000000000000 promisc_recover_hop_interval
     /tmp/ccwF1FQu.s:7478   .text.promisc_recover_hop_interval:0000000000000098 $d
     /tmp/ccwF1FQu.s:7489   .text.promisc_follow_cb:0000000000000000 $t
     /tmp/ccwF1FQu.s:7496   .text.promisc_follow_cb:0000000000000000 promisc_follow_cb
     /tmp/ccwF1FQu.s:7623   .text.promisc_follow_cb:0000000000000060 $d
     /tmp/ccwF1FQu.s:7631   .text.see_aa:0000000000000000 $t
     /tmp/ccwF1FQu.s:7638   .text.see_aa:0000000000000000 see_aa
     /tmp/ccwF1FQu.s:7740   .text.see_aa:0000000000000050 $d
     /tmp/ccwF1FQu.s:7748   .text.cb_le_promisc:0000000000000000 $t
     /tmp/ccwF1FQu.s:7755   .text.cb_le_promisc:0000000000000000 cb_le_promisc
     /tmp/ccwF1FQu.s:8185   .text.cb_le_promisc:00000000000001b4 $d
     /tmp/ccwF1FQu.s:8200   .text.bt_promisc_le:0000000000000000 $t
     /tmp/ccwF1FQu.s:8207   .text.bt_promisc_le:0000000000000000 bt_promisc_le
     /tmp/ccwF1FQu.s:8304   .text.bt_promisc_le:0000000000000060 $d
     /tmp/ccwF1FQu.s:8312   .text.bt_slave_le:0000000000000000 $t
     /tmp/ccwF1FQu.s:8319   .text.bt_slave_le:0000000000000000 bt_slave_le
     /tmp/ccwF1FQu.s:8528   .text.bt_slave_le:00000000000000cc $d
     /tmp/ccwF1FQu.s:8540   .text.rx_generic_sync:0000000000000000 $t
     /tmp/ccwF1FQu.s:8547   .text.rx_generic_sync:0000000000000000 rx_generic_sync
     /tmp/ccwF1FQu.s:8698   .text.rx_generic_sync:0000000000000094 $d
     /tmp/ccwF1FQu.s:8706   .text.rx_generic:0000000000000000 $t
     /tmp/ccwF1FQu.s:8713   .text.rx_generic:0000000000000000 rx_generic
     /tmp/ccwF1FQu.s:8751   .text.rx_generic:000000000000001c $d
     /tmp/ccwF1FQu.s:8756   .text.tx_generic:0000000000000000 $t
     /tmp/ccwF1FQu.s:8763   .text.tx_generic:0000000000000000 tx_generic
     /tmp/ccwF1FQu.s:8959   .text.tx_generic:00000000000000dc $d
     /tmp/ccwF1FQu.s:8969   .text.specan:0000000000000000 $t
     /tmp/ccwF1FQu.s:8976   .text.specan:0000000000000000 specan
     /tmp/ccwF1FQu.s:9211   .text.specan:00000000000000fc $d
     /tmp/ccwF1FQu.s:9221   .text.led_specan:0000000000000000 $t
     /tmp/ccwF1FQu.s:9228   .text.led_specan:0000000000000000 led_specan
     /tmp/ccwF1FQu.s:9475   .text.led_specan:0000000000000110 $d
     /tmp/ccwF1FQu.s:9490   .text.startup.main:0000000000000000 $t
     /tmp/ccwF1FQu.s:9497   .text.startup.main:0000000000000000 main
     /tmp/ccwF1FQu.s:9563   .text.startup.main:000000000000004c $d
     /tmp/ccwF1FQu.s:9581   .text.startup.main:000000000000005e $t
     /tmp/ccwF1FQu.s:9755   .text.startup.main:0000000000000100 $d
     /tmp/ccwF1FQu.s:10472  .bss:0000000000000018 packet_cb
     /tmp/ccwF1FQu.s:10489  .bss:000000000000002c data_cb
     /tmp/ccwF1FQu.s:10476  .bss:000000000000001c le_jam_count
     /tmp/ccwF1FQu.s:10360  .data:0000000000000000 le
     /tmp/ccwF1FQu.s:10402  .data:0000000000000058 le_adv_len
     /tmp/ccwF1FQu.s:10406  .data:000000000000005c le_adv_data
     /tmp/ccwF1FQu.s:10480  .bss:0000000000000020 slave_mac_address
     /tmp/ccwF1FQu.s:10397  .data:0000000000000056 rssi_threshold
     /tmp/ccwF1FQu.s:10393  .data:0000000000000054 high_freq
     /tmp/ccwF1FQu.s:10389  .data:0000000000000052 low_freq
     /tmp/ccwF1FQu.s:10414  .bss:0000000000000000 modulation
     /tmp/ccwF1FQu.s:10467  .bss:0000000000000014 ego_mode
     /tmp/ccwF1FQu.s:10463  .bss:0000000000000013 jam_mode
     /tmp/ccwF1FQu.s:10459  .bss:0000000000000012 requested_mode
     /tmp/ccwF1FQu.s:10455  .bss:0000000000000011 mode
     /tmp/ccwF1FQu.s:10418  .bss:0000000000000001 status
     /tmp/ccwF1FQu.s:10451  .bss:0000000000000010 dma_discard
     /tmp/ccwF1FQu.s:10431  .bss:0000000000000008 idle_buf_channel
     /tmp/ccwF1FQu.s:10427  .bss:0000000000000004 idle_buf_clk100ns
     /tmp/ccwF1FQu.s:10422  .bss:0000000000000002 idle_buf_clkn_high
ARM GAS  /tmp/ccwF1FQu.s 			page 287


     /tmp/ccwF1FQu.s:10485  .bss:0000000000000028 cancel_follow
     /tmp/ccwF1FQu.s:10385  .data:0000000000000050 le_adv_channel
     /tmp/ccwF1FQu.s:10447  .bss:000000000000000e requested_channel
     /tmp/ccwF1FQu.s:10381  .data:000000000000004e hop_timeout
     /tmp/ccwF1FQu.s:10443  .bss:000000000000000c hop_direct_channel
     /tmp/ccwF1FQu.s:10377  .data:000000000000004c channel
     /tmp/ccwF1FQu.s:10439  .bss:000000000000000b do_hop
     /tmp/ccwF1FQu.s:10435  .bss:000000000000000a hop_mode
     /tmp/ccwF1FQu.s:9847   .rodata:00000000000000a7 compile_info
                            *COM*:0000000000000008 syncword
                            *COM*:0000000000000032 rxbuf2
     /tmp/ccwF1FQu.s:9825   .rodata:0000000000000000 $d
     /tmp/ccwF1FQu.s:9829   .rodata:0000000000000000 whitening_index
     /tmp/ccwF1FQu.s:9834   .rodata:0000000000000028 whitening
     /tmp/ccwF1FQu.s:9853   .rodata:00000000000000f0 whitening_word
     /tmp/ccwF1FQu.s:10336  .rodata:0000000000000870 hop_interval_lut
     /tmp/ccwF1FQu.s:10356  .data:0000000000000000 $d
     /tmp/ccwF1FQu.s:10410  .bss:0000000000000000 $d
     /tmp/ccwF1FQu.s:10493  .bss:0000000000000030 restart_jamming.5034
     /tmp/ccwF1FQu.s:10497  .bss:0000000000000034 first_ts.5133
     /tmp/ccwF1FQu.s:10501  .bss:0000000000000038 prev_clk.5139

UNDEFINED SYMBOLS
rbit
cc2400_set
cs_threshold_calc_and_set
clkn_start
cc2400_status
cc2400_strobe
usb_enqueue
memcpy
rssi_get_avg
clkn_stop
dio_ssp_stop
cs_reset
rssi_reset
btle_channel_index
btle_crcgen_lut
memcmp
get_part_num
get_device_serial
cc2400_get
set_isp
strlen
precalc
bootloader_ctrl
usb_queue_init
dequeue
memset
rfcat_subcommand
le_DMA_IRQHandler
debug_dma_active
cc2400_fifo_write
next_hop
btle_next_hop
dio_ssp_init
dma_init_rx_symbols
ARM GAS  /tmp/ccwF1FQu.s 			page 288


dio_ssp_start
cs_trigger_enable
cs_trigger_disable
rssi_iir_update
handle_usb
rssi_add
dma_init_le
le_phy_main
btle_reverse_crc
btle_calc_crc
cc2400_fifo_read
ubertooth_init
clkn_init
ubertooth_usb_init
dma_poweron
debug_uart_init
debug_printf
wait
reset
cc2400_txtest
cc2400_rangetest
cc2400_repeater
ego_main
xmas_main
