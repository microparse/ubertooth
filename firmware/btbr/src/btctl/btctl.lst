ARM GAS  /tmp/ccimrUf7.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 2
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"btctl.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.rodata.str1.4,"aMS",%progbits,1
  16              		.align	2
  17              	.LC0:
  18 0000 496E7661 		.ascii	"Invalid\000"
  18      6C696400 
  19              		.align	2
  20              	.LC1:
  21 0008 544F444F 		.ascii	"TODO\000"
  21      00
  22 000d 000000   		.align	2
  23              	.LC2:
  24 0010 64656275 		.ascii	"debug req: %s\012\000"
  24      67207265 
  24      713A2025 
  24      730A00
  25 001f 00       		.align	2
  26              	.LC3:
  27 0020 5354414E 		.ascii	"STANDBY\000"
  27      44425900 
  28              		.align	2
  29              	.LC4:
  30 0028 53746174 		.ascii	"State %s -> %s\012\000"
  30      65202573 
  30      202D3E20 
  30      25730A00 
  31              		.align	2
  32              	.LC5:
  33 0038 4449457C 		.ascii	"DIE|msg_put: short buf\012\012\000"
  33      6D73675F 
  33      7075743A 
  33      2073686F 
  33      72742062 
  34 0051 000000   		.align	2
  35              	.LC6:
  36 0054 43616E6E 		.ascii	"Cannot change eir_msg now\012\000"
  36      6F742063 
  36      68616E67 
  36      65206569 
  36      725F6D73 
  37 006f 00       		.align	2
  38              	.LC7:
  39 0070 45495220 		.ascii	"EIR updated\012\000"
  39      75706461 
ARM GAS  /tmp/ccimrUf7.s 			page 2


  39      7465640A 
  39      00
  40 007d 000000   		.align	2
  41              	.LC8:
  42 0080 496E7661 		.ascii	"Invalid message type %d\012\000"
  42      6C696420 
  42      6D657373 
  42      61676520 
  42      74797065 
  43              		.section	.text.btctl_work,"ax",%progbits
  44              		.align	1
  45              		.p2align 2,,3
  46              		.global	btctl_work
  47              		.arch armv7-m
  48              		.syntax unified
  49              		.thumb
  50              		.thumb_func
  51              		.fpu softvfp
  53              	btctl_work:
  54              	.LFB48:
  55              		.file 1 "src/btctl/btctl.c"
   1:src/btctl/btctl.c **** /* Btctl interface
   2:src/btctl/btctl.c ****  *
   3:src/btctl/btctl.c ****  * Copyright 2020 Etienne Helluy-Lafont, Univ. Lille, CNRS.
   4:src/btctl/btctl.c ****  *
   5:src/btctl/btctl.c ****  * This file is part of Project Ubertooth.
   6:src/btctl/btctl.c ****  *
   7:src/btctl/btctl.c ****  * This program is free software; you can redistribute it and/or modify
   8:src/btctl/btctl.c ****  * it under the terms of the GNU General Public License as published by
   9:src/btctl/btctl.c ****  * the Free Software Foundation; either version 2, or (at your option)
  10:src/btctl/btctl.c ****  * any later version.
  11:src/btctl/btctl.c ****  *
  12:src/btctl/btctl.c ****  * This program is distributed in the hope that it will be useful,
  13:src/btctl/btctl.c ****  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  14:src/btctl/btctl.c ****  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  15:src/btctl/btctl.c ****  * GNU General Public License for more details.
  16:src/btctl/btctl.c ****  *
  17:src/btctl/btctl.c ****  * You should have received a copy of the GNU General Public License
  18:src/btctl/btctl.c ****  * along with this program; see the file COPYING.  If not, write to
  19:src/btctl/btctl.c ****  * the Free Software Foundation, Inc., 51 Franklin Street,
  20:src/btctl/btctl.c ****  * Boston, MA 02110-1301, USA.
  21:src/btctl/btctl.c ****  */
  22:src/btctl/btctl.c **** #include <stdlib.h>
  23:src/btctl/btctl.c **** #include <string.h>
  24:src/btctl/btctl.c **** #include <ubtbr/btctl_intf.h>
  25:src/btctl/btctl.c **** #include <ubtbr/btphy.h>
  26:src/btctl/btctl.c **** #include <ubtbr/system.h>
  27:src/btctl/btctl.c **** #include <ubtbr/rf.h>
  28:src/btctl/btctl.c **** #include <ubtbr/hop.h>
  29:src/btctl/btctl.c **** #include <ubtbr/inquiry_state.h>
  30:src/btctl/btctl.c **** #include <ubtbr/paging_state.h>
  31:src/btctl/btctl.c **** #include <ubtbr/master_state.h>
  32:src/btctl/btctl.c **** #include <ubtbr/inquiry_scan_state.h>
  33:src/btctl/btctl.c **** #include <ubtbr/page_scan_state.h>
  34:src/btctl/btctl.c **** #include <ubtbr/monitor_state.h>
  35:src/btctl/btctl.c **** 
  36:src/btctl/btctl.c **** btctl_t btctl;
ARM GAS  /tmp/ccimrUf7.s 			page 3


  37:src/btctl/btctl.c **** 
  38:src/btctl/btctl.c **** static void btctl_flush_acl_tx_queue(void)
  39:src/btctl/btctl.c **** {
  40:src/btctl/btctl.c **** 	msg_t *msg;
  41:src/btctl/btctl.c **** 
  42:src/btctl/btctl.c **** 	/* Flush the acl tx queue */
  43:src/btctl/btctl.c **** 	while ((msg = safe_dequeue(&btctl.acl_tx_q)) != NULL)
  44:src/btctl/btctl.c **** 	{
  45:src/btctl/btctl.c **** 		msg_free(msg);
  46:src/btctl/btctl.c **** 	}
  47:src/btctl/btctl.c **** }
  48:src/btctl/btctl.c **** 
  49:src/btctl/btctl.c **** static void btctl_handle_debug_req(msg_t *msg)
  50:src/btctl/btctl.c **** {
  51:src/btctl/btctl.c **** 	btctl_hdr_t *hdr = (btctl_hdr_t*)msg->data;
  52:src/btctl/btctl.c **** 
  53:src/btctl/btctl.c **** 	cprintf("debug req: %s\n", (char*)hdr->data);
  54:src/btctl/btctl.c **** }
  55:src/btctl/btctl.c **** 
  56:src/btctl/btctl.c **** static void btctl_handle_reset_req(msg_t *msg)
  57:src/btctl/btctl.c **** {
  58:src/btctl/btctl.c **** 	reset();
  59:src/btctl/btctl.c **** }
  60:src/btctl/btctl.c **** 
  61:src/btctl/btctl.c **** static void btctl_handle_idle_req(msg_t *msg)
  62:src/btctl/btctl.c **** {
  63:src/btctl/btctl.c **** 	uint32_t wait_clkn;
  64:src/btctl/btctl.c **** 
  65:src/btctl/btctl.c **** 	/* Cancel everything we can */
  66:src/btctl/btctl.c **** 	btctl_set_state(BTCTL_STATE_STANDBY, BTCTL_REASON_SUCCESS);
  67:src/btctl/btctl.c **** 
  68:src/btctl/btctl.c **** 	/* Let some time to tasks to complete (FIXME: wrap)*/
  69:src/btctl/btctl.c **** 	wait_clkn = MASTER_CLKN+30;
  70:src/btctl/btctl.c **** 
  71:src/btctl/btctl.c **** 	while (MASTER_CLKN < wait_clkn)
  72:src/btctl/btctl.c **** 		usb_work();
  73:src/btctl/btctl.c **** }
  74:src/btctl/btctl.c **** 
  75:src/btctl/btctl.c **** static void btctl_handle_set_freq_off_req(msg_t *msg)
  76:src/btctl/btctl.c **** {
  77:src/btctl/btctl.c **** 	btctl_hdr_t *hdr = (btctl_hdr_t*)msg->data;
  78:src/btctl/btctl.c **** 	btctl_set_reg_req_t *req = (btctl_set_reg_req_t*)hdr->data;
  79:src/btctl/btctl.c **** 
  80:src/btctl/btctl.c **** 	btphy_rf_set_freq_off(req->reg&0x3f);
  81:src/btctl/btctl.c **** }
  82:src/btctl/btctl.c **** 
  83:src/btctl/btctl.c **** static void btctl_handle_set_max_ac_errors_req(msg_t *msg)
  84:src/btctl/btctl.c **** {
  85:src/btctl/btctl.c **** 	btctl_hdr_t *hdr = (btctl_hdr_t*)msg->data;
  86:src/btctl/btctl.c **** 	btctl_set_reg_req_t *req = (btctl_set_reg_req_t*)hdr->data;
  87:src/btctl/btctl.c **** 
  88:src/btctl/btctl.c **** 	btphy_rf_set_max_ac_errors(req->reg&3);
  89:src/btctl/btctl.c **** }
  90:src/btctl/btctl.c **** 
  91:src/btctl/btctl.c **** static void btctl_handle_set_bdaddr_req(msg_t *msg)
  92:src/btctl/btctl.c **** {
  93:src/btctl/btctl.c **** 	btctl_hdr_t *hdr = (btctl_hdr_t*)msg->data;
ARM GAS  /tmp/ccimrUf7.s 			page 4


  94:src/btctl/btctl.c **** 	btctl_set_bdaddr_req_t *req = (btctl_set_bdaddr_req_t*)hdr->data;
  95:src/btctl/btctl.c **** 
  96:src/btctl/btctl.c **** 	btphy_set_bdaddr(req->bdaddr);
  97:src/btctl/btctl.c **** }
  98:src/btctl/btctl.c **** 
  99:src/btctl/btctl.c **** static void btctl_handle_inquiry_req(msg_t *msg)
 100:src/btctl/btctl.c **** {
 101:src/btctl/btctl.c **** 	inquiry_state_setup();
 102:src/btctl/btctl.c **** }
 103:src/btctl/btctl.c **** 
 104:src/btctl/btctl.c **** static void btctl_handle_paging_req(msg_t *msg)
 105:src/btctl/btctl.c **** {
 106:src/btctl/btctl.c **** 	btctl_hdr_t *hdr = (btctl_hdr_t*)msg->data;
 107:src/btctl/btctl.c **** 	btctl_paging_req_t *req = (btctl_paging_req_t*)hdr->data;
 108:src/btctl/btctl.c **** 	uint32_t lap = req->bdaddr & 0xffffff;
 109:src/btctl/btctl.c **** 	uint8_t uap = (req->bdaddr >> 24) & 0xff;
 110:src/btctl/btctl.c **** 
 111:src/btctl/btctl.c **** 	btctl_flush_acl_tx_queue();
 112:src/btctl/btctl.c **** 
 113:src/btctl/btctl.c **** 	/* Start paging */
 114:src/btctl/btctl.c **** 	paging_state_setup(lap, uap);
 115:src/btctl/btctl.c **** }
 116:src/btctl/btctl.c **** 
 117:src/btctl/btctl.c **** static void btctl_handle_monitor_req(msg_t *msg)
 118:src/btctl/btctl.c **** {
 119:src/btctl/btctl.c **** 	btctl_hdr_t *hdr = (btctl_hdr_t*)msg->data;
 120:src/btctl/btctl.c **** 	btctl_paging_req_t *req = (btctl_paging_req_t*)hdr->data;
 121:src/btctl/btctl.c **** 
 122:src/btctl/btctl.c **** 	/* Start paging monitor */
 123:src/btctl/btctl.c **** 	monitor1_state_setup(req->bdaddr);
 124:src/btctl/btctl.c **** }
 125:src/btctl/btctl.c **** 
 126:src/btctl/btctl.c **** static void btctl_handle_tx_acl_req(msg_t *msg)
 127:src/btctl/btctl.c **** {
 128:src/btctl/btctl.c **** 	btctl_acl_tx_enqueue(msg);
 129:src/btctl/btctl.c **** }
 130:src/btctl/btctl.c **** 
 131:src/btctl/btctl.c **** static void btctl_handle_inquiry_scan_req(msg_t *msg)
 132:src/btctl/btctl.c **** {
 133:src/btctl/btctl.c **** 	inquiry_scan_state_setup();
 134:src/btctl/btctl.c **** }
 135:src/btctl/btctl.c **** 
 136:src/btctl/btctl.c **** static void btctl_handle_page_scan_req(msg_t *msg)
 137:src/btctl/btctl.c **** {
 138:src/btctl/btctl.c **** 	btctl_flush_acl_tx_queue();
 139:src/btctl/btctl.c **** 	page_scan_state_setup();
 140:src/btctl/btctl.c **** }
 141:src/btctl/btctl.c **** 
 142:src/btctl/btctl.c **** static void btctl_handle_set_afh_req(msg_t *msg)
 143:src/btctl/btctl.c **** {
 144:src/btctl/btctl.c **** 	static uint8_t afh_buf[11];
 145:src/btctl/btctl.c **** 	uint32_t flags = irq_save_disable();
 146:src/btctl/btctl.c **** 	btctl_hdr_t *hdr = (btctl_hdr_t*)msg->data;
 147:src/btctl/btctl.c **** 	btctl_set_afh_req_t *req = (btctl_set_afh_req_t*)hdr->data;
 148:src/btctl/btctl.c **** 
 149:src/btctl/btctl.c **** 	afh_buf[0] = req->mode;
 150:src/btctl/btctl.c **** 	memcpy(afh_buf+1, req->map, 10);
ARM GAS  /tmp/ccimrUf7.s 			page 5


 151:src/btctl/btctl.c **** 	//hop_set_afh_map(req->map);
 152:src/btctl/btctl.c **** 	btphy_timer_add(req->instant, (btphy_timer_fn_t)hop_cfg_afh, afh_buf, 0);
 153:src/btctl/btctl.c **** 	irq_restore(flags);
 154:src/btctl/btctl.c **** }
 155:src/btctl/btctl.c **** 
 156:src/btctl/btctl.c **** static void btctl_handle_set_eir_req(msg_t *msg)
 157:src/btctl/btctl.c **** {
 158:src/btctl/btctl.c **** 	btctl_hdr_t *h = (btctl_hdr_t*)msg->data;
 159:src/btctl/btctl.c **** 
 160:src/btctl/btctl.c **** 	if (btctl.state != BTCTL_STATE_STANDBY)
 161:src/btctl/btctl.c **** 	{
 162:src/btctl/btctl.c **** 		cprintf("Cannot change eir_msg now\n");
 163:src/btctl/btctl.c **** 		msg_free(msg);
 164:src/btctl/btctl.c **** 		return;
 165:src/btctl/btctl.c **** 	}
 166:src/btctl/btctl.c **** 	if (btctl.eir_msg)
 167:src/btctl/btctl.c **** 	{
 168:src/btctl/btctl.c **** 		msg_free(btctl.eir_msg);
 169:src/btctl/btctl.c **** 	}
 170:src/btctl/btctl.c **** 	cprintf("EIR updated\n");
 171:src/btctl/btctl.c **** 	btctl.eir_msg = msg;
 172:src/btctl/btctl.c **** 	btctl.eir_pkt = (btctl_tx_pkt_t *)h->data;
 173:src/btctl/btctl.c **** }
 174:src/btctl/btctl.c **** 
 175:src/btctl/btctl.c **** static void btctl_handle_msg(msg_t *msg)
 176:src/btctl/btctl.c **** {
 177:src/btctl/btctl.c **** 	btctl_hdr_t *hdr = (btctl_hdr_t*)msg->data;
 178:src/btctl/btctl.c **** 
 179:src/btctl/btctl.c **** 	switch(hdr->type)
 180:src/btctl/btctl.c **** 	{
 181:src/btctl/btctl.c **** 	case BTCTL_DEBUG:
 182:src/btctl/btctl.c **** 		btctl_handle_debug_req(msg);
 183:src/btctl/btctl.c **** 		break;
 184:src/btctl/btctl.c **** 	case BTCTL_RESET_REQ:
 185:src/btctl/btctl.c **** 		btctl_handle_reset_req(msg);
 186:src/btctl/btctl.c **** 		break;
 187:src/btctl/btctl.c **** 	case BTCTL_IDLE_REQ:
 188:src/btctl/btctl.c **** 		btctl_handle_idle_req(msg);
 189:src/btctl/btctl.c **** 		break;
 190:src/btctl/btctl.c **** 	case BTCTL_SET_FREQ_OFF_REQ:
 191:src/btctl/btctl.c **** 		btctl_handle_set_freq_off_req(msg);
 192:src/btctl/btctl.c **** 		break;
 193:src/btctl/btctl.c **** 	case BTCTL_SET_MAX_AC_ERRORS_REQ:
 194:src/btctl/btctl.c **** 		btctl_handle_set_max_ac_errors_req(msg);
 195:src/btctl/btctl.c **** 		break;
 196:src/btctl/btctl.c **** 	case BTCTL_SET_BDADDR_REQ:
 197:src/btctl/btctl.c **** 		btctl_handle_set_bdaddr_req(msg);
 198:src/btctl/btctl.c **** 		break;
 199:src/btctl/btctl.c **** 	case BTCTL_INQUIRY_REQ:
 200:src/btctl/btctl.c **** 		btctl_handle_inquiry_req(msg);
 201:src/btctl/btctl.c **** 		break;
 202:src/btctl/btctl.c **** 	case BTCTL_PAGING_REQ:
 203:src/btctl/btctl.c **** 		btctl_handle_paging_req(msg);
 204:src/btctl/btctl.c **** 		break;
 205:src/btctl/btctl.c **** 	case BTCTL_TX_ACL_REQ:
 206:src/btctl/btctl.c **** 		btctl_handle_tx_acl_req(msg);
 207:src/btctl/btctl.c **** 		// don't free tx messages
ARM GAS  /tmp/ccimrUf7.s 			page 6


 208:src/btctl/btctl.c **** 		goto end_nofree;
 209:src/btctl/btctl.c **** 	case BTCTL_INQUIRY_SCAN_REQ:
 210:src/btctl/btctl.c **** 		btctl_handle_inquiry_scan_req(msg);
 211:src/btctl/btctl.c **** 		break;
 212:src/btctl/btctl.c **** 	case BTCTL_PAGE_SCAN_REQ:
 213:src/btctl/btctl.c **** 		btctl_handle_page_scan_req(msg);
 214:src/btctl/btctl.c **** 		break;
 215:src/btctl/btctl.c **** 	case BTCTL_MONITOR_REQ:
 216:src/btctl/btctl.c **** 		btctl_handle_monitor_req(msg);
 217:src/btctl/btctl.c **** 		break;
 218:src/btctl/btctl.c **** 	case BTCTL_SET_EIR_REQ:
 219:src/btctl/btctl.c **** 		btctl_handle_set_eir_req(msg);
 220:src/btctl/btctl.c **** 		// don't free the eir message
 221:src/btctl/btctl.c **** 		goto end_nofree;
 222:src/btctl/btctl.c **** 	case BTCTL_SET_AFH_REQ:
 223:src/btctl/btctl.c **** 		btctl_handle_set_afh_req(msg);
 224:src/btctl/btctl.c **** 		break;
 225:src/btctl/btctl.c **** 	default:
 226:src/btctl/btctl.c **** 		cprintf("Invalid message type %d\n", hdr->type);
 227:src/btctl/btctl.c **** 		break;
 228:src/btctl/btctl.c **** 	}
 229:src/btctl/btctl.c **** 	btctl_mem_free(msg);
 230:src/btctl/btctl.c **** end_nofree:
 231:src/btctl/btctl.c **** 	return;
 232:src/btctl/btctl.c **** }
 233:src/btctl/btctl.c **** 
 234:src/btctl/btctl.c **** int btctl_work(void)
 235:src/btctl/btctl.c **** {
  56              		.loc 1 235 1 view -0
  57              		.cfi_startproc
  58              		@ args = 0, pretend = 0, frame = 0
  59              		@ frame_needed = 0, uses_anonymous_args = 0
  60 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
  61              		.cfi_def_cfa_offset 24
  62              		.cfi_offset 4, -24
  63              		.cfi_offset 5, -20
  64              		.cfi_offset 6, -16
  65              		.cfi_offset 7, -12
  66              		.cfi_offset 8, -8
  67              		.cfi_offset 14, -4
 236:src/btctl/btctl.c **** 	msg_t *msg = btctl_rx_dequeue();
  68              		.loc 1 236 2 view .LVU1
  69              	.LBB267:
  70              	.LBI267:
  71              		.file 2 "include/ubtbr/btctl_intf.h"
   1:include/ubtbr/btctl_intf.h **** #ifndef __BTCTL_INTF_H
   2:include/ubtbr/btctl_intf.h **** #define __BTCTL_INTF_H
   3:include/ubtbr/btctl_intf.h **** #include <ubtbr/bb_msg.h>
   4:include/ubtbr/btctl_intf.h **** #include <ubtbr/queue.h>
   5:include/ubtbr/btctl_intf.h **** #include <ubtbr/system.h>
   6:include/ubtbr/btctl_intf.h **** #include <ubertooth_interface.h>
   7:include/ubtbr/btctl_intf.h **** 
   8:include/ubtbr/btctl_intf.h **** typedef struct btctl_s {
   9:include/ubtbr/btctl_intf.h **** 	btctl_state_t state;
  10:include/ubtbr/btctl_intf.h **** 	msg_queue_t rx_q;
  11:include/ubtbr/btctl_intf.h **** 	msg_queue_t tx_q;
  12:include/ubtbr/btctl_intf.h **** 	msg_queue_t acl_tx_q;
ARM GAS  /tmp/ccimrUf7.s 			page 7


  13:include/ubtbr/btctl_intf.h **** 	msg_t *eir_msg;
  14:include/ubtbr/btctl_intf.h **** 	btctl_tx_pkt_t *eir_pkt;
  15:include/ubtbr/btctl_intf.h **** } btctl_t;
  16:include/ubtbr/btctl_intf.h **** 
  17:include/ubtbr/btctl_intf.h **** extern btctl_t btctl;
  18:include/ubtbr/btctl_intf.h **** 
  19:include/ubtbr/btctl_intf.h **** void btctl_init(void);
  20:include/ubtbr/btctl_intf.h **** int btctl_work(void);
  21:include/ubtbr/btctl_intf.h **** 
  22:include/ubtbr/btctl_intf.h **** void btctl_set_state(btctl_state_t state, btctl_reason_t reason);
  23:include/ubtbr/btctl_intf.h **** 
  24:include/ubtbr/btctl_intf.h **** static inline btctl_state_t btctl_get_state(void)
  25:include/ubtbr/btctl_intf.h **** {
  26:include/ubtbr/btctl_intf.h **** 	return btctl.state;
  27:include/ubtbr/btctl_intf.h **** }
  28:include/ubtbr/btctl_intf.h **** 
  29:include/ubtbr/btctl_intf.h **** static inline btctl_tx_pkt_t *btctl_get_eir(void)
  30:include/ubtbr/btctl_intf.h **** {
  31:include/ubtbr/btctl_intf.h **** 	return btctl.eir_pkt;
  32:include/ubtbr/btctl_intf.h **** }
  33:include/ubtbr/btctl_intf.h **** 
  34:include/ubtbr/btctl_intf.h **** static inline msg_t *btctl_msg_alloc(unsigned type)
  35:include/ubtbr/btctl_intf.h **** {
  36:include/ubtbr/btctl_intf.h **** 	msg_t *msg;
  37:include/ubtbr/btctl_intf.h **** 	btctl_hdr_t *hdr;
  38:include/ubtbr/btctl_intf.h **** 
  39:include/ubtbr/btctl_intf.h **** 	/* maximum size ?*/
  40:include/ubtbr/btctl_intf.h **** 	msg = msg_alloc(sizeof(btctl_hdr_t)+sizeof(btctl_rx_pkt_t)+MAX_ACL_PACKET_SIZE);
  41:include/ubtbr/btctl_intf.h **** 	hdr = (btctl_hdr_t*) msg_put(msg, sizeof(*hdr));
  42:include/ubtbr/btctl_intf.h **** 	hdr->type = type;
  43:include/ubtbr/btctl_intf.h **** 
  44:include/ubtbr/btctl_intf.h **** 	return msg;
  45:include/ubtbr/btctl_intf.h **** }
  46:include/ubtbr/btctl_intf.h **** 
  47:include/ubtbr/btctl_intf.h **** static inline msg_t *safe_dequeue(msg_queue_t* q)
  48:include/ubtbr/btctl_intf.h **** {
  49:include/ubtbr/btctl_intf.h **** 	uint32_t flags = irq_save_disable();
  50:include/ubtbr/btctl_intf.h **** 	msg_t *msg;
  51:include/ubtbr/btctl_intf.h **** 
  52:include/ubtbr/btctl_intf.h **** 	msg = msg_dequeue(q);
  53:include/ubtbr/btctl_intf.h **** 	irq_restore(flags);
  54:include/ubtbr/btctl_intf.h **** 
  55:include/ubtbr/btctl_intf.h **** 	return msg;
  56:include/ubtbr/btctl_intf.h **** }
  57:include/ubtbr/btctl_intf.h **** 
  58:include/ubtbr/btctl_intf.h **** static inline int safe_enqueue(msg_queue_t *q, msg_t *msg)
  59:include/ubtbr/btctl_intf.h **** {
  60:include/ubtbr/btctl_intf.h **** 	uint32_t flags = irq_save_disable();
  61:include/ubtbr/btctl_intf.h **** 	int rc;
  62:include/ubtbr/btctl_intf.h **** 
  63:include/ubtbr/btctl_intf.h **** 	rc = msg_enqueue(q, msg);
  64:include/ubtbr/btctl_intf.h **** 	irq_restore(flags);
  65:include/ubtbr/btctl_intf.h **** 
  66:include/ubtbr/btctl_intf.h **** 	return rc;
  67:include/ubtbr/btctl_intf.h **** }
  68:include/ubtbr/btctl_intf.h **** 
  69:include/ubtbr/btctl_intf.h **** /* Called by usb driver to retreive next message to send to host */
ARM GAS  /tmp/ccimrUf7.s 			page 8


  70:include/ubtbr/btctl_intf.h **** static inline msg_t *btctl_tx_dequeue(void)
  71:include/ubtbr/btctl_intf.h **** {
  72:include/ubtbr/btctl_intf.h **** 	return safe_dequeue(&btctl.tx_q);
  73:include/ubtbr/btctl_intf.h **** }
  74:include/ubtbr/btctl_intf.h **** 
  75:include/ubtbr/btctl_intf.h **** /* Enqueue a message for host */
  76:include/ubtbr/btctl_intf.h **** static inline int btctl_tx_enqueue(msg_t *msg)
  77:include/ubtbr/btctl_intf.h **** {
  78:include/ubtbr/btctl_intf.h **** 	return safe_enqueue(&btctl.tx_q, msg);
  79:include/ubtbr/btctl_intf.h **** }
  80:include/ubtbr/btctl_intf.h **** 
  81:include/ubtbr/btctl_intf.h **** /* Dequeue a message from host */
  82:include/ubtbr/btctl_intf.h **** static inline msg_t *btctl_rx_dequeue(void)
  72              		.loc 2 82 22 view .LVU2
  73              	.LBB268:
  83:include/ubtbr/btctl_intf.h **** {
  84:include/ubtbr/btctl_intf.h **** 	return safe_dequeue(&btctl.rx_q);
  74              		.loc 2 84 2 view .LVU3
  75              	.LVL0:
  76              	.LBB269:
  77              	.LBI269:
  47:include/ubtbr/btctl_intf.h **** {
  78              		.loc 2 47 22 view .LVU4
  79              	.LBB270:
  49:include/ubtbr/btctl_intf.h **** 	msg_t *msg;
  80              		.loc 2 49 2 view .LVU5
  81              	.LBB271:
  82              	.LBI271:
  83              		.file 3 "include/ubtbr/system.h"
   1:include/ubtbr/system.h **** #ifndef __SYSTEM_H
   2:include/ubtbr/system.h **** #define __SYSTEM_H
   3:include/ubtbr/system.h **** #include <stdint.h>
   4:include/ubtbr/system.h **** 
   5:include/ubtbr/system.h **** static inline uint32_t irq_save_disable(void)
  84              		.loc 3 5 24 view .LVU6
  85              	.LBB272:
   6:include/ubtbr/system.h **** {
   7:include/ubtbr/system.h **** 	uint32_t primask;
  86              		.loc 3 7 2 view .LVU7
   8:include/ubtbr/system.h **** 
   9:include/ubtbr/system.h **** 	__asm__ __volatile__ (
  87              		.loc 3 9 2 view .LVU8
  88              		.syntax unified
  89              	@ 9 "include/ubtbr/system.h" 1
  90 0004 EFF31085 			mrs    r5, primask
  91 0008 72B6     		cpsid  i
  92              	
  93              	@ 0 "" 2
  94              	.LVL1:
  10:include/ubtbr/system.h **** 	"\tmrs    %0, primask\n"
  11:include/ubtbr/system.h **** 	"\tcpsid  i\n"
  12:include/ubtbr/system.h **** 	: "=r" (primask)
  13:include/ubtbr/system.h **** 	:
  14:include/ubtbr/system.h **** 	: "memory");
  15:include/ubtbr/system.h **** 
  16:include/ubtbr/system.h **** 	return primask;
  95              		.loc 3 16 2 view .LVU9
ARM GAS  /tmp/ccimrUf7.s 			page 9


  96              		.loc 3 16 2 is_stmt 0 view .LVU10
  97              		.thumb
  98              		.syntax unified
  99              	.LBE272:
 100              	.LBE271:
  50:include/ubtbr/btctl_intf.h **** 
 101              		.loc 2 50 2 is_stmt 1 view .LVU11
  52:include/ubtbr/btctl_intf.h **** 	irq_restore(flags);
 102              		.loc 2 52 2 view .LVU12
  52:include/ubtbr/btctl_intf.h **** 	irq_restore(flags);
 103              		.loc 2 52 8 is_stmt 0 view .LVU13
 104 000a 7E48     		ldr	r0, .L45
 105              	.LVL2:
  52:include/ubtbr/btctl_intf.h **** 	irq_restore(flags);
 106              		.loc 2 52 8 view .LVU14
 107 000c FFF7FEFF 		bl	msg_dequeue
 108              	.LVL3:
  52:include/ubtbr/btctl_intf.h **** 	irq_restore(flags);
 109              		.loc 2 52 8 view .LVU15
 110 0010 0446     		mov	r4, r0
 111              	.LVL4:
  53:include/ubtbr/btctl_intf.h **** 
 112              		.loc 2 53 2 is_stmt 1 view .LVU16
 113              	.LBB273:
 114              	.LBI273:
  17:include/ubtbr/system.h **** }
  18:include/ubtbr/system.h **** 
  19:include/ubtbr/system.h **** static inline void irq_restore(uint32_t primask)
 115              		.loc 3 19 20 view .LVU17
 116              	.LBB274:
  20:include/ubtbr/system.h **** {
  21:include/ubtbr/system.h **** 	__asm__ __volatile__ (
 117              		.loc 3 21 2 view .LVU18
 118              		.syntax unified
 119              	@ 21 "include/ubtbr/system.h" 1
 120 0012 85F31088 		msr primask, r5
 121              	@ 0 "" 2
 122              	.LVL5:
 123              		.loc 3 21 2 is_stmt 0 view .LVU19
 124              		.thumb
 125              		.syntax unified
 126              	.LBE274:
 127              	.LBE273:
  55:include/ubtbr/btctl_intf.h **** }
 128              		.loc 2 55 2 is_stmt 1 view .LVU20
  55:include/ubtbr/btctl_intf.h **** }
 129              		.loc 2 55 2 is_stmt 0 view .LVU21
 130              	.LBE270:
 131              	.LBE269:
 132              	.LBE268:
 133              	.LBE267:
 237:src/btctl/btctl.c **** 
 238:src/btctl/btctl.c **** 	if (msg == NULL)
 134              		.loc 1 238 2 is_stmt 1 view .LVU22
 135              		.loc 1 238 5 is_stmt 0 view .LVU23
 136 0016 30B3     		cbz	r0, .L1
 239:src/btctl/btctl.c **** 		return 0;
ARM GAS  /tmp/ccimrUf7.s 			page 10


 240:src/btctl/btctl.c **** 
 241:src/btctl/btctl.c **** 	btctl_handle_msg(msg);
 137              		.loc 1 241 2 is_stmt 1 view .LVU24
 138              	.LVL6:
 139              	.LBB275:
 140              	.LBI275:
 175:src/btctl/btctl.c **** {
 141              		.loc 1 175 13 view .LVU25
 142              	.LBB276:
 177:src/btctl/btctl.c **** 
 143              		.loc 1 177 2 view .LVU26
 179:src/btctl/btctl.c **** 	{
 144              		.loc 1 179 2 view .LVU27
 179:src/btctl/btctl.c **** 	{
 145              		.loc 1 179 12 is_stmt 0 view .LVU28
 146 0018 017B     		ldrb	r1, [r0, #12]	@ zero_extendqisi2
 147 001a 2029     		cmp	r1, #32
 148 001c 25D8     		bhi	.L3
 149 001e DFE801F0 		tbb	[pc, r1]
 150              	.L5:
 151 0022 AB       		.byte	(.L18-.L5)/2
 152 0023 24       		.byte	(.L3-.L5)/2
 153 0024 24       		.byte	(.L3-.L5)/2
 154 0025 24       		.byte	(.L3-.L5)/2
 155 0026 24       		.byte	(.L3-.L5)/2
 156 0027 24       		.byte	(.L3-.L5)/2
 157 0028 24       		.byte	(.L3-.L5)/2
 158 0029 24       		.byte	(.L3-.L5)/2
 159 002a 24       		.byte	(.L3-.L5)/2
 160 002b 24       		.byte	(.L3-.L5)/2
 161 002c 24       		.byte	(.L3-.L5)/2
 162 002d 24       		.byte	(.L3-.L5)/2
 163 002e 24       		.byte	(.L3-.L5)/2
 164 002f 24       		.byte	(.L3-.L5)/2
 165 0030 24       		.byte	(.L3-.L5)/2
 166 0031 24       		.byte	(.L3-.L5)/2
 167 0032 24       		.byte	(.L3-.L5)/2
 168 0033 24       		.byte	(.L3-.L5)/2
 169 0034 24       		.byte	(.L3-.L5)/2
 170 0035 24       		.byte	(.L3-.L5)/2
 171 0036 A8       		.byte	(.L17-.L5)/2
 172 0037 85       		.byte	(.L16-.L5)/2
 173 0038 7F       		.byte	(.L15-.L5)/2
 174 0039 78       		.byte	(.L14-.L5)/2
 175 003a 75       		.byte	(.L13-.L5)/2
 176 003b 5E       		.byte	(.L12-.L5)/2
 177 003c 58       		.byte	(.L11-.L5)/2
 178 003d 4D       		.byte	(.L10-.L5)/2
 179 003e 4A       		.byte	(.L9-.L5)/2
 180 003f B1       		.byte	(.L37-.L5)/2
 181 0040 11       		.byte	(.L7-.L5)/2
 182 0041 34       		.byte	(.L6-.L5)/2
 183 0042 2D       		.byte	(.L4-.L5)/2
 184 0043 00       		.p2align 1
 185              	.L7:
 219:src/btctl/btctl.c **** 		// don't free the eir message
 186              		.loc 1 219 3 is_stmt 1 view .LVU29
ARM GAS  /tmp/ccimrUf7.s 			page 11


 187              	.LVL7:
 188              	.LBB277:
 189              	.LBI277:
 156:src/btctl/btctl.c **** {
 190              		.loc 1 156 13 view .LVU30
 191              	.LBB278:
 158:src/btctl/btctl.c **** 
 192              		.loc 1 158 2 view .LVU31
 160:src/btctl/btctl.c **** 	{
 193              		.loc 1 160 2 view .LVU32
 160:src/btctl/btctl.c **** 	{
 194              		.loc 1 160 11 is_stmt 0 view .LVU33
 195 0044 704D     		ldr	r5, .L45+4
 196              	.LVL8:
 160:src/btctl/btctl.c **** 	{
 197              		.loc 1 160 5 view .LVU34
 198 0046 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
 199 0048 002B     		cmp	r3, #0
 200 004a 40F0CF80 		bne	.L42
 166:src/btctl/btctl.c **** 	{
 201              		.loc 1 166 2 is_stmt 1 view .LVU35
 166:src/btctl/btctl.c **** 	{
 202              		.loc 1 166 11 is_stmt 0 view .LVU36
 203 004e E86F     		ldr	r0, [r5, #124]
 204              	.LVL9:
 166:src/btctl/btctl.c **** 	{
 205              		.loc 1 166 5 view .LVU37
 206 0050 08B1     		cbz	r0, .L29
 168:src/btctl/btctl.c **** 	}
 207              		.loc 1 168 3 is_stmt 1 view .LVU38
 208              	.LVL10:
 209              	.LBB279:
 210              	.LBI279:
 211              		.file 4 "include/ubtbr/msg.h"
   1:include/ubtbr/msg.h **** #ifndef __DEF_MSG_H
   2:include/ubtbr/msg.h **** #define __DEF_MSG_H
   3:include/ubtbr/msg.h **** #include <stdint.h>
   4:include/ubtbr/msg.h **** 
   5:include/ubtbr/msg.h **** typedef struct msg_s {
   6:include/ubtbr/msg.h **** 	uint16_t len;
   7:include/ubtbr/msg.h **** 	uint16_t data_len;
   8:include/ubtbr/msg.h **** 	uint8_t *read;
   9:include/ubtbr/msg.h **** 	uint8_t *write;
  10:include/ubtbr/msg.h **** 	/* never move head */
  11:include/ubtbr/msg.h **** 	uint8_t data[0];
  12:include/ubtbr/msg.h **** } msg_t;
  13:include/ubtbr/msg.h **** 
  14:include/ubtbr/msg.h **** /* Allocate a msg_t wigh given room*/
  15:include/ubtbr/msg.h **** static inline msg_t *msg_alloc(unsigned size)
  16:include/ubtbr/msg.h **** {
  17:include/ubtbr/msg.h **** 	msg_t *msg = (msg_t*)btctl_mem_alloc(sizeof(msg_t)+size);
  18:include/ubtbr/msg.h **** 
  19:include/ubtbr/msg.h **** 	msg->write = msg->data;
  20:include/ubtbr/msg.h **** 	msg->read = msg->data;
  21:include/ubtbr/msg.h **** 	msg->data_len = size;
  22:include/ubtbr/msg.h **** 
  23:include/ubtbr/msg.h **** 	return msg;
ARM GAS  /tmp/ccimrUf7.s 			page 12


  24:include/ubtbr/msg.h **** }
  25:include/ubtbr/msg.h **** 
  26:include/ubtbr/msg.h **** static inline void msg_free(msg_t *msg)
 212              		.loc 4 26 20 view .LVU39
 213              	.LBB280:
  27:include/ubtbr/msg.h **** {
  28:include/ubtbr/msg.h **** 	btctl_mem_free(msg);
 214              		.loc 4 28 2 view .LVU40
 215 0052 FFF7FEFF 		bl	mem_pool_free
 216              	.LVL11:
 217              	.L29:
 218              		.loc 4 28 2 is_stmt 0 view .LVU41
 219              	.LBE280:
 220              	.LBE279:
 170:src/btctl/btctl.c **** 	btctl.eir_msg = msg;
 221              		.loc 1 170 2 is_stmt 1 view .LVU42
 222 0056 6D48     		ldr	r0, .L45+8
 223 0058 FFF7FEFF 		bl	cprintf
 224              	.LVL12:
 171:src/btctl/btctl.c **** 	btctl.eir_pkt = (btctl_tx_pkt_t *)h->data;
 225              		.loc 1 171 2 view .LVU43
 226              	.LBE278:
 227              	.LBE277:
 228              	.LBE276:
 229              	.LBE275:
 242:src/btctl/btctl.c **** 
 243:src/btctl/btctl.c **** 	return 1;
 230              		.loc 1 243 9 is_stmt 0 view .LVU44
 231 005c 0120     		movs	r0, #1
 232              	.LBB433:
 233              	.LBB425:
 234              	.LBB286:
 235              	.LBB283:
 172:src/btctl/btctl.c **** }
 236              		.loc 1 172 36 view .LVU45
 237 005e 04F11003 		add	r3, r4, #16
 172:src/btctl/btctl.c **** }
 238              		.loc 1 172 16 view .LVU46
 239 0062 C5E91F43 		strd	r4, r3, [r5, #124]
 240              	.LVL13:
 241              	.L1:
 172:src/btctl/btctl.c **** }
 242              		.loc 1 172 16 view .LVU47
 243              	.LBE283:
 244              	.LBE286:
 245              	.LBE425:
 246              	.LBE433:
 244:src/btctl/btctl.c **** }
 247              		.loc 1 244 1 view .LVU48
 248 0066 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 249              	.LVL14:
 250              	.L3:
 251              	.LBB434:
 252              	.LBB426:
 226:src/btctl/btctl.c **** 		break;
 253              		.loc 1 226 3 is_stmt 1 view .LVU49
 254 006a 6948     		ldr	r0, .L45+12
ARM GAS  /tmp/ccimrUf7.s 			page 13


 255              	.LVL15:
 226:src/btctl/btctl.c **** 		break;
 256              		.loc 1 226 3 is_stmt 0 view .LVU50
 257 006c FFF7FEFF 		bl	cprintf
 258              	.LVL16:
 227:src/btctl/btctl.c **** 	}
 259              		.loc 1 227 3 is_stmt 1 view .LVU51
 260              	.L19:
 229:src/btctl/btctl.c **** end_nofree:
 261              		.loc 1 229 2 view .LVU52
 262 0070 2046     		mov	r0, r4
 263 0072 FFF7FEFF 		bl	mem_pool_free
 264              	.LVL17:
 265              	.LBE426:
 266              	.LBE434:
 243:src/btctl/btctl.c **** }
 267              		.loc 1 243 9 is_stmt 0 view .LVU53
 268 0076 0120     		movs	r0, #1
 269              		.loc 1 244 1 view .LVU54
 270 0078 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 271              	.LVL18:
 272              	.L4:
 273              	.LBB435:
 274              	.LBB427:
 216:src/btctl/btctl.c **** 		break;
 275              		.loc 1 216 3 is_stmt 1 view .LVU55
 276              	.LBB287:
 277              	.LBI287:
 117:src/btctl/btctl.c **** {
 278              		.loc 1 117 13 view .LVU56
 279              	.LBB288:
 119:src/btctl/btctl.c **** 	btctl_paging_req_t *req = (btctl_paging_req_t*)hdr->data;
 280              		.loc 1 119 2 view .LVU57
 120:src/btctl/btctl.c **** 
 281              		.loc 1 120 2 view .LVU58
 123:src/btctl/btctl.c **** }
 282              		.loc 1 123 2 view .LVU59
 283 007c 00F11001 		add	r1, r0, #16
 284 0080 D1E90001 		ldrd	r0, [r1]
 285              	.LVL19:
 123:src/btctl/btctl.c **** }
 286              		.loc 1 123 2 is_stmt 0 view .LVU60
 287 0084 FFF7FEFF 		bl	monitor1_state_setup
 288              	.LVL20:
 124:src/btctl/btctl.c **** 
 289              		.loc 1 124 1 view .LVU61
 290 0088 F2E7     		b	.L19
 291              	.LVL21:
 292              	.L6:
 124:src/btctl/btctl.c **** 
 293              		.loc 1 124 1 view .LVU62
 294              	.LBE288:
 295              	.LBE287:
 223:src/btctl/btctl.c **** 		break;
 296              		.loc 1 223 3 is_stmt 1 view .LVU63
 297              	.LBB289:
 298              	.LBI289:
ARM GAS  /tmp/ccimrUf7.s 			page 14


 142:src/btctl/btctl.c **** {
 299              		.loc 1 142 13 view .LVU64
 300              	.LBB290:
 144:src/btctl/btctl.c **** 	uint32_t flags = irq_save_disable();
 301              		.loc 1 144 2 view .LVU65
 145:src/btctl/btctl.c **** 	btctl_hdr_t *hdr = (btctl_hdr_t*)msg->data;
 302              		.loc 1 145 2 view .LVU66
 303              	.LBB291:
 304              	.LBI291:
   5:include/ubtbr/system.h **** {
 305              		.loc 3 5 24 view .LVU67
 306              	.LBB292:
   7:include/ubtbr/system.h **** 
 307              		.loc 3 7 2 view .LVU68
   9:include/ubtbr/system.h **** 	"\tmrs    %0, primask\n"
 308              		.loc 3 9 2 view .LVU69
 309              		.syntax unified
 310              	@ 9 "include/ubtbr/system.h" 1
 311 008a EFF31086 			mrs    r6, primask
 312 008e 72B6     		cpsid  i
 313              	
 314              	@ 0 "" 2
 315              	.LVL22:
  16:include/ubtbr/system.h **** }
 316              		.loc 3 16 2 view .LVU70
  16:include/ubtbr/system.h **** }
 317              		.loc 3 16 2 is_stmt 0 view .LVU71
 318              		.thumb
 319              		.syntax unified
 320              	.LBE292:
 321              	.LBE291:
 146:src/btctl/btctl.c **** 	btctl_set_afh_req_t *req = (btctl_set_afh_req_t*)hdr->data;
 322              		.loc 1 146 2 is_stmt 1 view .LVU72
 147:src/btctl/btctl.c **** 
 323              		.loc 1 147 2 view .LVU73
 149:src/btctl/btctl.c **** 	memcpy(afh_buf+1, req->map, 10);
 324              		.loc 1 149 2 view .LVU74
 149:src/btctl/btctl.c **** 	memcpy(afh_buf+1, req->map, 10);
 325              		.loc 1 149 13 is_stmt 0 view .LVU75
 326 0090 604D     		ldr	r5, .L45+16
 327              	.LVL23:
 149:src/btctl/btctl.c **** 	memcpy(afh_buf+1, req->map, 10);
 328              		.loc 1 149 13 view .LVU76
 329 0092 037D     		ldrb	r3, [r0, #20]	@ zero_extendqisi2
 330 0094 2846     		mov	r0, r5
 331              	.LVL24:
 150:src/btctl/btctl.c **** 	//hop_set_afh_map(req->map);
 332              		.loc 1 150 2 view .LVU77
 333 0096 04F11501 		add	r1, r4, #21
 334 009a 0A22     		movs	r2, #10
 149:src/btctl/btctl.c **** 	memcpy(afh_buf+1, req->map, 10);
 335              		.loc 1 149 13 view .LVU78
 336 009c 00F8013B 		strb	r3, [r0], #1
 150:src/btctl/btctl.c **** 	//hop_set_afh_map(req->map);
 337              		.loc 1 150 2 is_stmt 1 view .LVU79
 338 00a0 FFF7FEFF 		bl	memcpy
 339              	.LVL25:
ARM GAS  /tmp/ccimrUf7.s 			page 15


 152:src/btctl/btctl.c **** 	irq_restore(flags);
 340              		.loc 1 152 2 view .LVU80
 341 00a4 2A46     		mov	r2, r5
 342 00a6 0023     		movs	r3, #0
 343 00a8 2069     		ldr	r0, [r4, #16]	@ unaligned
 344 00aa 5B49     		ldr	r1, .L45+20
 345 00ac FFF7FEFF 		bl	btphy_timer_add
 346              	.LVL26:
 153:src/btctl/btctl.c **** }
 347              		.loc 1 153 2 view .LVU81
 348              	.LBB293:
 349              	.LBI293:
  19:include/ubtbr/system.h **** {
 350              		.loc 3 19 20 view .LVU82
 351              	.LBB294:
 352              		.loc 3 21 2 view .LVU83
 353              		.syntax unified
 354              	@ 21 "include/ubtbr/system.h" 1
 355 00b0 86F31088 		msr primask, r6
 356              	@ 0 "" 2
 357              	.LVL27:
 358              		.loc 3 21 2 is_stmt 0 view .LVU84
 359              		.thumb
 360              		.syntax unified
 361              	.LBE294:
 362              	.LBE293:
 154:src/btctl/btctl.c **** 
 363              		.loc 1 154 1 view .LVU85
 364 00b4 DCE7     		b	.L19
 365              	.LVL28:
 366              	.L9:
 154:src/btctl/btctl.c **** 
 367              		.loc 1 154 1 view .LVU86
 368              	.LBE290:
 369              	.LBE289:
 210:src/btctl/btctl.c **** 		break;
 370              		.loc 1 210 3 is_stmt 1 view .LVU87
 371              	.LBB295:
 372              	.LBI295:
 131:src/btctl/btctl.c **** {
 373              		.loc 1 131 13 view .LVU88
 374              	.LBB296:
 133:src/btctl/btctl.c **** }
 375              		.loc 1 133 2 view .LVU89
 376 00b6 FFF7FEFF 		bl	inquiry_scan_state_setup
 377              	.LVL29:
 134:src/btctl/btctl.c **** 
 378              		.loc 1 134 1 is_stmt 0 view .LVU90
 379 00ba D9E7     		b	.L19
 380              	.LVL30:
 381              	.L10:
 134:src/btctl/btctl.c **** 
 382              		.loc 1 134 1 view .LVU91
 383              	.LBE296:
 384              	.LBE295:
 206:src/btctl/btctl.c **** 		// don't free tx messages
 385              		.loc 1 206 3 is_stmt 1 view .LVU92
ARM GAS  /tmp/ccimrUf7.s 			page 16


 386              	.LBB297:
 387              	.LBI297:
 126:src/btctl/btctl.c **** {
 388              		.loc 1 126 13 view .LVU93
 389              	.LBE297:
 390              	.LBE427:
 391              	.LBE435:
 128:src/btctl/btctl.c **** }
 392              		.loc 1 128 2 view .LVU94
 393              	.LBB436:
 394              	.LBB428:
 395              	.LBB306:
 396              	.LBB298:
 397              	.LBI298:
  85:include/ubtbr/btctl_intf.h **** }
  86:include/ubtbr/btctl_intf.h **** 
  87:include/ubtbr/btctl_intf.h **** /* Called by usb driver with last message received from host */
  88:include/ubtbr/btctl_intf.h **** static inline int btctl_rx_enqueue(msg_t *msg)
  89:include/ubtbr/btctl_intf.h **** {
  90:include/ubtbr/btctl_intf.h **** 	return safe_enqueue(&btctl.rx_q, msg);
  91:include/ubtbr/btctl_intf.h **** }
  92:include/ubtbr/btctl_intf.h **** 
  93:include/ubtbr/btctl_intf.h **** /* Called by connected task to retreive next packet to send */
  94:include/ubtbr/btctl_intf.h **** static inline msg_t *btctl_acl_tx_dequeue(void)
  95:include/ubtbr/btctl_intf.h **** {
  96:include/ubtbr/btctl_intf.h **** 	return safe_dequeue(&btctl.acl_tx_q);
  97:include/ubtbr/btctl_intf.h **** }
  98:include/ubtbr/btctl_intf.h **** 
  99:include/ubtbr/btctl_intf.h **** /* Enqueue a packet to send in connected state */
 100:include/ubtbr/btctl_intf.h **** static inline int btctl_acl_tx_enqueue(msg_t *msg)
 398              		.loc 2 100 19 view .LVU95
 399              	.LBB299:
 101:include/ubtbr/btctl_intf.h **** {
 102:include/ubtbr/btctl_intf.h **** 	return safe_enqueue(&btctl.acl_tx_q, msg);
 400              		.loc 2 102 2 view .LVU96
 401              	.LBB300:
 402              	.LBI300:
  58:include/ubtbr/btctl_intf.h **** {
 403              		.loc 2 58 19 view .LVU97
 404              	.LBB301:
  60:include/ubtbr/btctl_intf.h **** 	int rc;
 405              		.loc 2 60 2 view .LVU98
 406              	.LBB302:
 407              	.LBI302:
   5:include/ubtbr/system.h **** {
 408              		.loc 3 5 24 view .LVU99
 409              	.LBB303:
   7:include/ubtbr/system.h **** 
 410              		.loc 3 7 2 view .LVU100
   9:include/ubtbr/system.h **** 	"\tmrs    %0, primask\n"
 411              		.loc 3 9 2 view .LVU101
 412              		.syntax unified
 413              	@ 9 "include/ubtbr/system.h" 1
 414 00bc EFF31085 			mrs    r5, primask
 415 00c0 72B6     		cpsid  i
 416              	
 417              	@ 0 "" 2
ARM GAS  /tmp/ccimrUf7.s 			page 17


 418              	.LVL31:
  16:include/ubtbr/system.h **** }
 419              		.loc 3 16 2 view .LVU102
  16:include/ubtbr/system.h **** }
 420              		.loc 3 16 2 is_stmt 0 view .LVU103
 421              		.thumb
 422              		.syntax unified
 423              	.LBE303:
 424              	.LBE302:
  61:include/ubtbr/btctl_intf.h **** 
 425              		.loc 2 61 2 is_stmt 1 view .LVU104
  63:include/ubtbr/btctl_intf.h **** 	irq_restore(flags);
 426              		.loc 2 63 2 view .LVU105
  63:include/ubtbr/btctl_intf.h **** 	irq_restore(flags);
 427              		.loc 2 63 7 is_stmt 0 view .LVU106
 428 00c2 5648     		ldr	r0, .L45+24
 429              	.LVL32:
  63:include/ubtbr/btctl_intf.h **** 	irq_restore(flags);
 430              		.loc 2 63 7 view .LVU107
 431 00c4 2146     		mov	r1, r4
 432 00c6 FFF7FEFF 		bl	msg_enqueue
 433              	.LVL33:
  64:include/ubtbr/btctl_intf.h **** 
 434              		.loc 2 64 2 is_stmt 1 view .LVU108
 435              	.LBB304:
 436              	.LBI304:
  19:include/ubtbr/system.h **** {
 437              		.loc 3 19 20 view .LVU109
 438              	.LBB305:
 439              		.loc 3 21 2 view .LVU110
 440              		.syntax unified
 441              	@ 21 "include/ubtbr/system.h" 1
 442 00ca 85F31088 		msr primask, r5
 443              	@ 0 "" 2
 444              	.LVL34:
 445              		.loc 3 21 2 is_stmt 0 view .LVU111
 446              		.thumb
 447              		.syntax unified
 448              	.LBE305:
 449              	.LBE304:
  66:include/ubtbr/btctl_intf.h **** }
 450              		.loc 2 66 2 is_stmt 1 view .LVU112
  66:include/ubtbr/btctl_intf.h **** }
 451              		.loc 2 66 2 is_stmt 0 view .LVU113
 452              	.LBE301:
 453              	.LBE300:
 454              	.LBE299:
 455              	.LBE298:
 456              	.LBE306:
 208:src/btctl/btctl.c **** 	case BTCTL_INQUIRY_SCAN_REQ:
 457              		.loc 1 208 3 is_stmt 1 view .LVU114
 458              	.LBE428:
 459              	.LBE436:
 243:src/btctl/btctl.c **** }
 460              		.loc 1 243 9 is_stmt 0 view .LVU115
 461 00ce 0120     		movs	r0, #1
 462              	.LBB437:
ARM GAS  /tmp/ccimrUf7.s 			page 18


 463              	.LBB429:
 208:src/btctl/btctl.c **** 	case BTCTL_INQUIRY_SCAN_REQ:
 464              		.loc 1 208 3 view .LVU116
 465 00d0 C9E7     		b	.L1
 466              	.LVL35:
 467              	.L11:
 194:src/btctl/btctl.c **** 		break;
 468              		.loc 1 194 3 is_stmt 1 view .LVU117
 469              	.LBB307:
 470              	.LBI307:
  83:src/btctl/btctl.c **** {
 471              		.loc 1 83 13 view .LVU118
 472              	.LBB308:
  85:src/btctl/btctl.c **** 	btctl_set_reg_req_t *req = (btctl_set_reg_req_t*)hdr->data;
 473              		.loc 1 85 2 view .LVU119
  86:src/btctl/btctl.c **** 
 474              		.loc 1 86 2 view .LVU120
  88:src/btctl/btctl.c **** }
 475              		.loc 1 88 2 view .LVU121
 476 00d2 007C     		ldrb	r0, [r0, #16]	@ zero_extendqisi2
 477              	.LVL36:
  88:src/btctl/btctl.c **** }
 478              		.loc 1 88 2 is_stmt 0 view .LVU122
 479 00d4 00F00300 		and	r0, r0, #3
 480 00d8 FFF7FEFF 		bl	btphy_rf_set_max_ac_errors
 481              	.LVL37:
  89:src/btctl/btctl.c **** 
 482              		.loc 1 89 1 view .LVU123
 483 00dc C8E7     		b	.L19
 484              	.LVL38:
 485              	.L12:
  89:src/btctl/btctl.c **** 
 486              		.loc 1 89 1 view .LVU124
 487              	.LBE308:
 488              	.LBE307:
 203:src/btctl/btctl.c **** 		break;
 489              		.loc 1 203 3 is_stmt 1 view .LVU125
 490              	.LBB309:
 491              	.LBI309:
 104:src/btctl/btctl.c **** {
 492              		.loc 1 104 13 view .LVU126
 493              	.LBB310:
 106:src/btctl/btctl.c **** 	btctl_paging_req_t *req = (btctl_paging_req_t*)hdr->data;
 494              		.loc 1 106 2 view .LVU127
 107:src/btctl/btctl.c **** 	uint32_t lap = req->bdaddr & 0xffffff;
 495              		.loc 1 107 2 view .LVU128
 108:src/btctl/btctl.c **** 	uint8_t uap = (req->bdaddr >> 24) & 0xff;
 496              		.loc 1 108 2 view .LVU129
 108:src/btctl/btctl.c **** 	uint8_t uap = (req->bdaddr >> 24) & 0xff;
 497              		.loc 1 108 20 is_stmt 0 view .LVU130
 498 00de 0769     		ldr	r7, [r0, #16]
 499              	.LBB311:
 500              	.LBB312:
 501              	.LBB313:
 502              	.LBB314:
  52:include/ubtbr/btctl_intf.h **** 	irq_restore(flags);
 503              		.loc 2 52 8 view .LVU131
ARM GAS  /tmp/ccimrUf7.s 			page 19


 504 00e0 4E4E     		ldr	r6, .L45+24
 505              	.LBE314:
 506              	.LBE313:
 507              	.LBE312:
 508              	.LBE311:
 108:src/btctl/btctl.c **** 	uint8_t uap = (req->bdaddr >> 24) & 0xff;
 509              		.loc 1 108 11 view .LVU132
 510 00e2 27F07F48 		bic	r8, r7, #-16777216
 511              	.LVL39:
 109:src/btctl/btctl.c **** 
 512              		.loc 1 109 2 is_stmt 1 view .LVU133
 109:src/btctl/btctl.c **** 
 513              		.loc 1 109 10 is_stmt 0 view .LVU134
 514 00e6 3F0E     		lsrs	r7, r7, #24
 515              	.LVL40:
 111:src/btctl/btctl.c **** 
 516              		.loc 1 111 2 is_stmt 1 view .LVU135
 517              	.LBB324:
 518              	.LBI311:
  38:src/btctl/btctl.c **** {
 519              		.loc 1 38 13 view .LVU136
 520              	.LBB323:
  40:src/btctl/btctl.c **** 
 521              		.loc 1 40 2 view .LVU137
  43:src/btctl/btctl.c **** 	{
 522              		.loc 1 43 2 view .LVU138
  43:src/btctl/btctl.c **** 	{
 523              		.loc 1 43 8 is_stmt 0 view .LVU139
 524 00e8 01E0     		b	.L25
 525              	.LVL41:
 526              	.L26:
  45:src/btctl/btctl.c **** 	}
 527              		.loc 1 45 3 is_stmt 1 view .LVU140
 528              	.LBB320:
 529              	.LBI320:
  26:include/ubtbr/msg.h **** {
 530              		.loc 4 26 20 view .LVU141
 531              	.LBB321:
 532              		.loc 4 28 2 view .LVU142
 533 00ea FFF7FEFF 		bl	mem_pool_free
 534              	.LVL42:
 535              	.L25:
 536              		.loc 4 28 2 is_stmt 0 view .LVU143
 537              	.LBE321:
 538              	.LBE320:
  43:src/btctl/btctl.c **** 	{
 539              		.loc 1 43 8 is_stmt 1 view .LVU144
 540              	.LBB322:
 541              	.LBI313:
  47:include/ubtbr/btctl_intf.h **** {
 542              		.loc 2 47 22 view .LVU145
 543              	.LBB319:
  49:include/ubtbr/btctl_intf.h **** 	msg_t *msg;
 544              		.loc 2 49 2 view .LVU146
 545              	.LBB315:
 546              	.LBI315:
   5:include/ubtbr/system.h **** {
ARM GAS  /tmp/ccimrUf7.s 			page 20


 547              		.loc 3 5 24 view .LVU147
 548              	.LBB316:
   7:include/ubtbr/system.h **** 
 549              		.loc 3 7 2 view .LVU148
   9:include/ubtbr/system.h **** 	"\tmrs    %0, primask\n"
 550              		.loc 3 9 2 view .LVU149
 551              		.syntax unified
 552              	@ 9 "include/ubtbr/system.h" 1
 553 00ee EFF31085 			mrs    r5, primask
 554 00f2 72B6     		cpsid  i
 555              	
 556              	@ 0 "" 2
 557              	.LVL43:
  16:include/ubtbr/system.h **** }
 558              		.loc 3 16 2 view .LVU150
  16:include/ubtbr/system.h **** }
 559              		.loc 3 16 2 is_stmt 0 view .LVU151
 560              		.thumb
 561              		.syntax unified
 562              	.LBE316:
 563              	.LBE315:
  50:include/ubtbr/btctl_intf.h **** 
 564              		.loc 2 50 2 is_stmt 1 view .LVU152
  52:include/ubtbr/btctl_intf.h **** 	irq_restore(flags);
 565              		.loc 2 52 2 view .LVU153
  52:include/ubtbr/btctl_intf.h **** 	irq_restore(flags);
 566              		.loc 2 52 8 is_stmt 0 view .LVU154
 567 00f4 3046     		mov	r0, r6
 568 00f6 FFF7FEFF 		bl	msg_dequeue
 569              	.LVL44:
  53:include/ubtbr/btctl_intf.h **** 
 570              		.loc 2 53 2 is_stmt 1 view .LVU155
 571              	.LBB317:
 572              	.LBI317:
  19:include/ubtbr/system.h **** {
 573              		.loc 3 19 20 view .LVU156
 574              	.LBB318:
 575              		.loc 3 21 2 view .LVU157
 576              		.syntax unified
 577              	@ 21 "include/ubtbr/system.h" 1
 578 00fa 85F31088 		msr primask, r5
 579              	@ 0 "" 2
 580              	.LVL45:
 581              		.loc 3 21 2 is_stmt 0 view .LVU158
 582              		.thumb
 583              		.syntax unified
 584              	.LBE318:
 585              	.LBE317:
  55:include/ubtbr/btctl_intf.h **** }
 586              		.loc 2 55 2 is_stmt 1 view .LVU159
  55:include/ubtbr/btctl_intf.h **** }
 587              		.loc 2 55 2 is_stmt 0 view .LVU160
 588              	.LBE319:
 589              	.LBE322:
  43:src/btctl/btctl.c **** 	{
 590              		.loc 1 43 8 view .LVU161
 591 00fe 0028     		cmp	r0, #0
ARM GAS  /tmp/ccimrUf7.s 			page 21


 592 0100 F3D1     		bne	.L26
 593              	.LBE323:
 594              	.LBE324:
 114:src/btctl/btctl.c **** }
 595              		.loc 1 114 2 is_stmt 1 view .LVU162
 596 0102 3946     		mov	r1, r7
 597 0104 4046     		mov	r0, r8
 598              	.LVL46:
 114:src/btctl/btctl.c **** }
 599              		.loc 1 114 2 is_stmt 0 view .LVU163
 600 0106 FFF7FEFF 		bl	paging_state_setup
 601              	.LVL47:
 115:src/btctl/btctl.c **** 
 602              		.loc 1 115 1 view .LVU164
 603 010a B1E7     		b	.L19
 604              	.LVL48:
 605              	.L13:
 115:src/btctl/btctl.c **** 
 606              		.loc 1 115 1 view .LVU165
 607              	.LBE310:
 608              	.LBE309:
 200:src/btctl/btctl.c **** 		break;
 609              		.loc 1 200 3 is_stmt 1 view .LVU166
 610              	.LBB325:
 611              	.LBI325:
  99:src/btctl/btctl.c **** {
 612              		.loc 1 99 13 view .LVU167
 613              	.LBB326:
 101:src/btctl/btctl.c **** }
 614              		.loc 1 101 2 view .LVU168
 615 010c FFF7FEFF 		bl	inquiry_state_setup
 616              	.LVL49:
 102:src/btctl/btctl.c **** 
 617              		.loc 1 102 1 is_stmt 0 view .LVU169
 618 0110 AEE7     		b	.L19
 619              	.LVL50:
 620              	.L14:
 102:src/btctl/btctl.c **** 
 621              		.loc 1 102 1 view .LVU170
 622              	.LBE326:
 623              	.LBE325:
 197:src/btctl/btctl.c **** 		break;
 624              		.loc 1 197 3 is_stmt 1 view .LVU171
 625              	.LBB327:
 626              	.LBI327:
  91:src/btctl/btctl.c **** {
 627              		.loc 1 91 13 view .LVU172
 628              	.LBB328:
  93:src/btctl/btctl.c **** 	btctl_set_bdaddr_req_t *req = (btctl_set_bdaddr_req_t*)hdr->data;
 629              		.loc 1 93 2 view .LVU173
  94:src/btctl/btctl.c **** 
 630              		.loc 1 94 2 view .LVU174
  96:src/btctl/btctl.c **** }
 631              		.loc 1 96 2 view .LVU175
 632 0112 00F11001 		add	r1, r0, #16
 633 0116 D1E90001 		ldrd	r0, [r1]
 634              	.LVL51:
ARM GAS  /tmp/ccimrUf7.s 			page 22


  96:src/btctl/btctl.c **** }
 635              		.loc 1 96 2 is_stmt 0 view .LVU176
 636 011a FFF7FEFF 		bl	btphy_set_bdaddr
 637              	.LVL52:
  97:src/btctl/btctl.c **** 
 638              		.loc 1 97 1 view .LVU177
 639 011e A7E7     		b	.L19
 640              	.LVL53:
 641              	.L15:
  97:src/btctl/btctl.c **** 
 642              		.loc 1 97 1 view .LVU178
 643              	.LBE328:
 644              	.LBE327:
 191:src/btctl/btctl.c **** 		break;
 645              		.loc 1 191 3 is_stmt 1 view .LVU179
 646              	.LBB329:
 647              	.LBI329:
  75:src/btctl/btctl.c **** {
 648              		.loc 1 75 13 view .LVU180
 649              	.LBB330:
  77:src/btctl/btctl.c **** 	btctl_set_reg_req_t *req = (btctl_set_reg_req_t*)hdr->data;
 650              		.loc 1 77 2 view .LVU181
  78:src/btctl/btctl.c **** 
 651              		.loc 1 78 2 view .LVU182
  80:src/btctl/btctl.c **** }
 652              		.loc 1 80 2 view .LVU183
 653 0120 007C     		ldrb	r0, [r0, #16]	@ zero_extendqisi2
 654              	.LVL54:
  80:src/btctl/btctl.c **** }
 655              		.loc 1 80 2 is_stmt 0 view .LVU184
 656 0122 00F03F00 		and	r0, r0, #63
 657 0126 FFF7FEFF 		bl	btphy_rf_set_freq_off
 658              	.LVL55:
  81:src/btctl/btctl.c **** 
 659              		.loc 1 81 1 view .LVU185
 660 012a A1E7     		b	.L19
 661              	.LVL56:
 662              	.L16:
  81:src/btctl/btctl.c **** 
 663              		.loc 1 81 1 view .LVU186
 664              	.LBE330:
 665              	.LBE329:
 188:src/btctl/btctl.c **** 		break;
 666              		.loc 1 188 3 is_stmt 1 view .LVU187
 667              	.LBB331:
 668              	.LBI331:
  61:src/btctl/btctl.c **** {
 669              		.loc 1 61 13 view .LVU188
 670              	.LBB332:
  63:src/btctl/btctl.c **** 
 671              		.loc 1 63 2 view .LVU189
  66:src/btctl/btctl.c **** 
 672              		.loc 1 66 2 view .LVU190
 673              	.LBB333:
 674              	.LBI333:
 245:src/btctl/btctl.c **** 
 246:src/btctl/btctl.c **** void btctl_send_state_resp(btctl_state_t state, btctl_reason_t reason)
ARM GAS  /tmp/ccimrUf7.s 			page 23


 247:src/btctl/btctl.c **** {
 248:src/btctl/btctl.c **** 	msg_t *msg = btctl_msg_alloc(BTCTL_STATE_RESP);
 249:src/btctl/btctl.c **** 	btctl_state_resp_t *resp;
 250:src/btctl/btctl.c **** 
 251:src/btctl/btctl.c **** 	resp = (btctl_state_resp_t*)msg_put(msg, sizeof(*resp));
 252:src/btctl/btctl.c **** 	resp->state = state;
 253:src/btctl/btctl.c **** 	resp->reason = reason;
 254:src/btctl/btctl.c **** 	btctl_tx_enqueue(msg);
 255:src/btctl/btctl.c **** }
 256:src/btctl/btctl.c **** 
 257:src/btctl/btctl.c **** static inline int btctl_state_transition_valid(btctl_state_t cur, btctl_state_t next)
 258:src/btctl/btctl.c **** {
 259:src/btctl/btctl.c **** 	/* All states can go standby */
 260:src/btctl/btctl.c **** 	if (next == BTCTL_STATE_STANDBY)
 261:src/btctl/btctl.c **** 		return 1;
 262:src/btctl/btctl.c **** 	/* Connected state must come from page/page scan */
 263:src/btctl/btctl.c **** 	if (next == BTCTL_STATE_CONNECTED)
 264:src/btctl/btctl.c **** 		return cur == BTCTL_STATE_PAGE
 265:src/btctl/btctl.c **** 			|| cur == BTCTL_STATE_PAGE_SCAN
 266:src/btctl/btctl.c **** 			|| cur == BTCTL_STATE_CONNECTED;
 267:src/btctl/btctl.c **** 	/* Others states must come from standby */
 268:src/btctl/btctl.c **** 	return cur == BTCTL_STATE_STANDBY;
 269:src/btctl/btctl.c **** }
 270:src/btctl/btctl.c **** 
 271:src/btctl/btctl.c **** static const char* btctl_state_name(btctl_state_t state)
 272:src/btctl/btctl.c **** {
 273:src/btctl/btctl.c **** 	const char *name;
 274:src/btctl/btctl.c **** 	static const char* btctl_state_name_tbl[BTCTL_STATE_COUNT] = {
 275:src/btctl/btctl.c **** 		[BTCTL_STATE_STANDBY]	= "STANDBY", 
 276:src/btctl/btctl.c **** 		[BTCTL_STATE_INQUIRY]	= "INQUIRY",
 277:src/btctl/btctl.c **** 		[BTCTL_STATE_PAGE]	= "PAGE",
 278:src/btctl/btctl.c **** 		[BTCTL_STATE_CONNECTED]	= "CONNECTED",
 279:src/btctl/btctl.c **** 		[BTCTL_STATE_INQUIRY_SCAN] = "INQUIRY_SCAN",
 280:src/btctl/btctl.c **** 		[BTCTL_STATE_PAGE_SCAN] = "PAGE_SCAN"
 281:src/btctl/btctl.c **** 	};
 282:src/btctl/btctl.c **** 	if (state >= BTCTL_STATE_COUNT)
 283:src/btctl/btctl.c **** 		return "Invalid";
 284:src/btctl/btctl.c **** 
 285:src/btctl/btctl.c **** 	name = btctl_state_name_tbl[state];
 286:src/btctl/btctl.c **** 	if (!name)
 287:src/btctl/btctl.c **** 		name = "TODO";
 288:src/btctl/btctl.c **** 	return name;
 289:src/btctl/btctl.c **** }
 290:src/btctl/btctl.c **** 
 291:src/btctl/btctl.c **** void btctl_set_state(btctl_state_t state, btctl_reason_t reason)
 675              		.loc 1 291 6 view .LVU191
 676              	.LBB334:
 292:src/btctl/btctl.c **** {
 293:src/btctl/btctl.c **** 	uint32_t flags = irq_save_disable();
 677              		.loc 1 293 2 view .LVU192
 678              	.LBB335:
 679              	.LBI335:
   5:include/ubtbr/system.h **** {
 680              		.loc 3 5 24 view .LVU193
 681              	.LBB336:
   7:include/ubtbr/system.h **** 
 682              		.loc 3 7 2 view .LVU194
ARM GAS  /tmp/ccimrUf7.s 			page 24


   9:include/ubtbr/system.h **** 	"\tmrs    %0, primask\n"
 683              		.loc 3 9 2 view .LVU195
 684              		.syntax unified
 685              	@ 9 "include/ubtbr/system.h" 1
 686 012c EFF31088 			mrs    r8, primask
 687 0130 72B6     		cpsid  i
 688              	
 689              	@ 0 "" 2
 690              	.LVL57:
  16:include/ubtbr/system.h **** }
 691              		.loc 3 16 2 view .LVU196
  16:include/ubtbr/system.h **** }
 692              		.loc 3 16 2 is_stmt 0 view .LVU197
 693              		.thumb
 694              		.syntax unified
 695              	.LBE336:
 696              	.LBE335:
 294:src/btctl/btctl.c **** 	btctl_state_t old_state = btctl.state;
 697              		.loc 1 294 2 is_stmt 1 view .LVU198
 698              		.loc 1 294 16 is_stmt 0 view .LVU199
 699 0132 354D     		ldr	r5, .L45+4
 700              	.LVL58:
 701              		.loc 1 294 16 view .LVU200
 702 0134 2E78     		ldrb	r6, [r5]	@ zero_extendqisi2
 703              	.LVL59:
 295:src/btctl/btctl.c **** 
 296:src/btctl/btctl.c **** #if 1
 297:src/btctl/btctl.c **** 	cprintf("State %s -> %s\n",
 704              		.loc 1 297 2 is_stmt 1 view .LVU201
 705              	.LBB337:
 706              	.LBI337:
 271:src/btctl/btctl.c **** {
 707              		.loc 1 271 20 view .LVU202
 708              	.LBB338:
 273:src/btctl/btctl.c **** 	static const char* btctl_state_name_tbl[BTCTL_STATE_COUNT] = {
 709              		.loc 1 273 2 view .LVU203
 274:src/btctl/btctl.c **** 		[BTCTL_STATE_STANDBY]	= "STANDBY", 
 710              		.loc 1 274 2 view .LVU204
 282:src/btctl/btctl.c **** 		return "Invalid";
 711              		.loc 1 282 2 view .LVU205
 282:src/btctl/btctl.c **** 		return "Invalid";
 712              		.loc 1 282 5 is_stmt 0 view .LVU206
 713 0136 052E     		cmp	r6, #5
 714 0138 35D8     		bhi	.L31
 285:src/btctl/btctl.c **** 	if (!name)
 715              		.loc 1 285 2 is_stmt 1 view .LVU207
 285:src/btctl/btctl.c **** 	if (!name)
 716              		.loc 1 285 7 is_stmt 0 view .LVU208
 717 013a 394A     		ldr	r2, .L45+28
 287:src/btctl/btctl.c **** 	return name;
 718              		.loc 1 287 8 view .LVU209
 719 013c 394B     		ldr	r3, .L45+32
 285:src/btctl/btctl.c **** 	if (!name)
 720              		.loc 1 285 7 view .LVU210
 721 013e 52F82610 		ldr	r1, [r2, r6, lsl #2]
 722              	.LVL60:
 286:src/btctl/btctl.c **** 		name = "TODO";
ARM GAS  /tmp/ccimrUf7.s 			page 25


 723              		.loc 1 286 2 is_stmt 1 view .LVU211
 287:src/btctl/btctl.c **** 	return name;
 724              		.loc 1 287 8 is_stmt 0 view .LVU212
 725 0142 0029     		cmp	r1, #0
 726 0144 08BF     		it	eq
 727 0146 1946     		moveq	r1, r3
 728              	.LVL61:
 729              	.L20:
 287:src/btctl/btctl.c **** 	return name;
 730              		.loc 1 287 8 view .LVU213
 731              	.LBE338:
 732              	.LBE337:
 733              	.LBE334:
 734              	.LBE333:
 735              	.LBE332:
 736              	.LBE331:
 737              	.LBE429:
 738              	.LBE437:
 273:src/btctl/btctl.c **** 	static const char* btctl_state_name_tbl[BTCTL_STATE_COUNT] = {
 739              		.loc 1 273 2 is_stmt 1 view .LVU214
 274:src/btctl/btctl.c **** 		[BTCTL_STATE_STANDBY]	= "STANDBY", 
 740              		.loc 1 274 2 view .LVU215
 282:src/btctl/btctl.c **** 		return "Invalid";
 741              		.loc 1 282 2 view .LVU216
 285:src/btctl/btctl.c **** 	if (!name)
 742              		.loc 1 285 2 view .LVU217
 286:src/btctl/btctl.c **** 		name = "TODO";
 743              		.loc 1 286 2 view .LVU218
 744              	.LBB438:
 745              	.LBB430:
 746              	.LBB401:
 747              	.LBB397:
 748              	.LBB393:
 749              	.LBB389:
 298:src/btctl/btctl.c **** 		btctl_state_name(btctl.state),
 299:src/btctl/btctl.c **** 		btctl_state_name(state));
 300:src/btctl/btctl.c **** #endif
 301:src/btctl/btctl.c **** 
 302:src/btctl/btctl.c **** 	if (!btctl_state_transition_valid(old_state, state))
 303:src/btctl/btctl.c **** 	{
 304:src/btctl/btctl.c **** 		irq_restore(flags);
 305:src/btctl/btctl.c **** 		DIE("Invalid state transition %s -> %s\n",
 306:src/btctl/btctl.c **** 			btctl_state_name(old_state),
 307:src/btctl/btctl.c **** 			btctl_state_name(state));
 308:src/btctl/btctl.c **** 	}
 309:src/btctl/btctl.c **** 	btctl.state = state;
 750              		.loc 1 309 14 is_stmt 0 view .LVU219
 751 0148 0027     		movs	r7, #0
 297:src/btctl/btctl.c **** 		btctl_state_name(btctl.state),
 752              		.loc 1 297 2 view .LVU220
 753 014a 374A     		ldr	r2, .L45+36
 754 014c 3748     		ldr	r0, .L45+40
 755              	.LVL62:
 297:src/btctl/btctl.c **** 		btctl_state_name(btctl.state),
 756              		.loc 1 297 2 view .LVU221
 757 014e FFF7FEFF 		bl	cprintf
 758              	.LVL63:
ARM GAS  /tmp/ccimrUf7.s 			page 26


 302:src/btctl/btctl.c **** 	{
 759              		.loc 1 302 2 is_stmt 1 view .LVU222
 302:src/btctl/btctl.c **** 	{
 760              		.loc 1 302 2 is_stmt 0 view .LVU223
 761              	.LBE389:
 762              	.LBE393:
 763              	.LBE397:
 764              	.LBE401:
 765              	.LBE430:
 766              	.LBE438:
 260:src/btctl/btctl.c **** 		return 1;
 767              		.loc 1 260 2 is_stmt 1 view .LVU224
 768              	.LBB439:
 769              	.LBB431:
 770              	.LBB402:
 771              	.LBB398:
 772              	.LBB394:
 773              	.LBB390:
 774              		.loc 1 309 2 view .LVU225
 775              		.loc 1 309 14 is_stmt 0 view .LVU226
 776 0152 2F70     		strb	r7, [r5]
 310:src/btctl/btctl.c **** 	irq_restore(flags);
 777              		.loc 1 310 2 is_stmt 1 view .LVU227
 778              	.LVL64:
 779              	.LBB340:
 780              	.LBI340:
  19:include/ubtbr/system.h **** {
 781              		.loc 3 19 20 view .LVU228
 782              	.LBB341:
 783              		.loc 3 21 2 view .LVU229
 784              		.syntax unified
 785              	@ 21 "include/ubtbr/system.h" 1
 786 0154 88F31088 		msr primask, r8
 787              	@ 0 "" 2
 788              	.LVL65:
 789              		.loc 3 21 2 is_stmt 0 view .LVU230
 790              		.thumb
 791              		.syntax unified
 792              	.LBE341:
 793              	.LBE340:
 311:src/btctl/btctl.c **** 	if (!(old_state == BTCTL_STATE_STANDBY && state == BTCTL_STATE_STANDBY))
 794              		.loc 1 311 2 is_stmt 1 view .LVU231
 795              		.loc 1 311 5 is_stmt 0 view .LVU232
 796 0158 3EBB     		cbnz	r6, .L43
 797              	.L21:
 798              	.LVL66:
 799              		.loc 1 311 5 view .LVU233
 800              	.LBE390:
 801              	.LBE394:
  69:src/btctl/btctl.c **** 
 802              		.loc 1 69 2 is_stmt 1 view .LVU234
  69:src/btctl/btctl.c **** 
 803              		.loc 1 69 14 is_stmt 0 view .LVU235
 804 015a 354D     		ldr	r5, .L45+44
 805 015c 2E68     		ldr	r6, [r5]
  71:src/btctl/btctl.c **** 		usb_work();
 806              		.loc 1 71 9 view .LVU236
ARM GAS  /tmp/ccimrUf7.s 			page 27


 807 015e 2B68     		ldr	r3, [r5]
  69:src/btctl/btctl.c **** 
 808              		.loc 1 69 12 view .LVU237
 809 0160 1E36     		adds	r6, r6, #30
 810              	.LVL67:
  71:src/btctl/btctl.c **** 		usb_work();
 811              		.loc 1 71 2 is_stmt 1 view .LVU238
  71:src/btctl/btctl.c **** 		usb_work();
 812              		.loc 1 71 8 view .LVU239
 813 0162 9E42     		cmp	r6, r3
 814 0164 84D9     		bls	.L19
 815              	.L23:
  72:src/btctl/btctl.c **** }
 816              		.loc 1 72 3 view .LVU240
 817 0166 FFF7FEFF 		bl	usb_work
 818              	.LVL68:
  71:src/btctl/btctl.c **** 		usb_work();
 819              		.loc 1 71 8 view .LVU241
  71:src/btctl/btctl.c **** 		usb_work();
 820              		.loc 1 71 9 is_stmt 0 view .LVU242
 821 016a 2B68     		ldr	r3, [r5]
  71:src/btctl/btctl.c **** 		usb_work();
 822              		.loc 1 71 8 view .LVU243
 823 016c 9E42     		cmp	r6, r3
 824 016e FAD8     		bhi	.L23
 825 0170 7EE7     		b	.L19
 826              	.LVL69:
 827              	.L17:
  71:src/btctl/btctl.c **** 		usb_work();
 828              		.loc 1 71 8 view .LVU244
 829              	.LBE398:
 830              	.LBE402:
 185:src/btctl/btctl.c **** 		break;
 831              		.loc 1 185 3 is_stmt 1 view .LVU245
 832              	.LBB403:
 833              	.LBI403:
  56:src/btctl/btctl.c **** {
 834              		.loc 1 56 13 view .LVU246
 835              	.LBB404:
  58:src/btctl/btctl.c **** }
 836              		.loc 1 58 2 view .LVU247
 837 0172 FFF7FEFF 		bl	reset
 838              	.LVL70:
  59:src/btctl/btctl.c **** 
 839              		.loc 1 59 1 is_stmt 0 view .LVU248
 840 0176 7BE7     		b	.L19
 841              	.LVL71:
 842              	.L18:
  59:src/btctl/btctl.c **** 
 843              		.loc 1 59 1 view .LVU249
 844              	.LBE404:
 845              	.LBE403:
 182:src/btctl/btctl.c **** 		break;
 846              		.loc 1 182 3 is_stmt 1 view .LVU250
 847              	.LBB405:
 848              	.LBI405:
  49:src/btctl/btctl.c **** {
ARM GAS  /tmp/ccimrUf7.s 			page 28


 849              		.loc 1 49 13 view .LVU251
 850              	.LBB406:
  51:src/btctl/btctl.c **** 
 851              		.loc 1 51 2 view .LVU252
  53:src/btctl/btctl.c **** }
 852              		.loc 1 53 2 view .LVU253
 853 0178 00F11001 		add	r1, r0, #16
 854 017c 2D48     		ldr	r0, .L45+48
 855              	.LVL72:
  53:src/btctl/btctl.c **** }
 856              		.loc 1 53 2 is_stmt 0 view .LVU254
 857 017e FFF7FEFF 		bl	cprintf
 858              	.LVL73:
  54:src/btctl/btctl.c **** 
 859              		.loc 1 54 1 view .LVU255
 860 0182 75E7     		b	.L19
 861              	.LVL74:
 862              	.L37:
  54:src/btctl/btctl.c **** 
 863              		.loc 1 54 1 view .LVU256
 864              	.LBE406:
 865              	.LBE405:
 866              	.LBB407:
 867              	.LBB408:
 868              	.LBB409:
 869              	.LBB410:
 870              	.LBB411:
 871              	.LBB412:
  52:include/ubtbr/btctl_intf.h **** 	irq_restore(flags);
 872              		.loc 2 52 8 view .LVU257
 873 0184 254E     		ldr	r6, .L45+24
 874 0186 01E0     		b	.L8
 875              	.LVL75:
 876              	.L27:
  52:include/ubtbr/btctl_intf.h **** 	irq_restore(flags);
 877              		.loc 2 52 8 view .LVU258
 878              	.LBE412:
 879              	.LBE411:
  45:src/btctl/btctl.c **** 	}
 880              		.loc 1 45 3 is_stmt 1 view .LVU259
 881              	.LBB418:
 882              	.LBI418:
  26:include/ubtbr/msg.h **** {
 883              		.loc 4 26 20 view .LVU260
 884              	.LBB419:
 885              		.loc 4 28 2 view .LVU261
 886 0188 FFF7FEFF 		bl	mem_pool_free
 887              	.LVL76:
 888              	.L8:
 889              		.loc 4 28 2 is_stmt 0 view .LVU262
 890              	.LBE419:
 891              	.LBE418:
  43:src/btctl/btctl.c **** 	{
 892              		.loc 1 43 8 is_stmt 1 view .LVU263
 893              	.LBB420:
 894              	.LBI411:
  47:include/ubtbr/btctl_intf.h **** {
ARM GAS  /tmp/ccimrUf7.s 			page 29


 895              		.loc 2 47 22 view .LVU264
 896              	.LBB417:
  49:include/ubtbr/btctl_intf.h **** 	msg_t *msg;
 897              		.loc 2 49 2 view .LVU265
 898              	.LBB413:
 899              	.LBI413:
   5:include/ubtbr/system.h **** {
 900              		.loc 3 5 24 view .LVU266
 901              	.LBB414:
   7:include/ubtbr/system.h **** 
 902              		.loc 3 7 2 view .LVU267
   9:include/ubtbr/system.h **** 	"\tmrs    %0, primask\n"
 903              		.loc 3 9 2 view .LVU268
 904              		.syntax unified
 905              	@ 9 "include/ubtbr/system.h" 1
 906 018c EFF31085 			mrs    r5, primask
 907 0190 72B6     		cpsid  i
 908              	
 909              	@ 0 "" 2
 910              	.LVL77:
  16:include/ubtbr/system.h **** }
 911              		.loc 3 16 2 view .LVU269
  16:include/ubtbr/system.h **** }
 912              		.loc 3 16 2 is_stmt 0 view .LVU270
 913              		.thumb
 914              		.syntax unified
 915              	.LBE414:
 916              	.LBE413:
  50:include/ubtbr/btctl_intf.h **** 
 917              		.loc 2 50 2 is_stmt 1 view .LVU271
  52:include/ubtbr/btctl_intf.h **** 	irq_restore(flags);
 918              		.loc 2 52 2 view .LVU272
  52:include/ubtbr/btctl_intf.h **** 	irq_restore(flags);
 919              		.loc 2 52 8 is_stmt 0 view .LVU273
 920 0192 3046     		mov	r0, r6
 921 0194 FFF7FEFF 		bl	msg_dequeue
 922              	.LVL78:
  53:include/ubtbr/btctl_intf.h **** 
 923              		.loc 2 53 2 is_stmt 1 view .LVU274
 924              	.LBB415:
 925              	.LBI415:
  19:include/ubtbr/system.h **** {
 926              		.loc 3 19 20 view .LVU275
 927              	.LBB416:
 928              		.loc 3 21 2 view .LVU276
 929              		.syntax unified
 930              	@ 21 "include/ubtbr/system.h" 1
 931 0198 85F31088 		msr primask, r5
 932              	@ 0 "" 2
 933              	.LVL79:
 934              		.loc 3 21 2 is_stmt 0 view .LVU277
 935              		.thumb
 936              		.syntax unified
 937              	.LBE416:
 938              	.LBE415:
  55:include/ubtbr/btctl_intf.h **** }
 939              		.loc 2 55 2 is_stmt 1 view .LVU278
ARM GAS  /tmp/ccimrUf7.s 			page 30


  55:include/ubtbr/btctl_intf.h **** }
 940              		.loc 2 55 2 is_stmt 0 view .LVU279
 941              	.LBE417:
 942              	.LBE420:
  43:src/btctl/btctl.c **** 	{
 943              		.loc 1 43 8 view .LVU280
 944 019c 0028     		cmp	r0, #0
 945 019e F3D1     		bne	.L27
 946              	.LBE410:
 947              	.LBE409:
 139:src/btctl/btctl.c **** }
 948              		.loc 1 139 2 is_stmt 1 view .LVU281
 949 01a0 FFF7FEFF 		bl	page_scan_state_setup
 950              	.LVL80:
 140:src/btctl/btctl.c **** 
 951              		.loc 1 140 1 is_stmt 0 view .LVU282
 952 01a4 64E7     		b	.L19
 953              	.LVL81:
 954              	.L31:
 140:src/btctl/btctl.c **** 
 955              		.loc 1 140 1 view .LVU283
 956              	.LBE408:
 957              	.LBE407:
 958              	.LBB421:
 959              	.LBB399:
 960              	.LBB395:
 961              	.LBB391:
 962              	.LBB342:
 963              	.LBB339:
 283:src/btctl/btctl.c **** 
 964              		.loc 1 283 10 view .LVU284
 965 01a6 2449     		ldr	r1, .L45+52
 966 01a8 CEE7     		b	.L20
 967              	.LVL82:
 968              	.L43:
 283:src/btctl/btctl.c **** 
 969              		.loc 1 283 10 view .LVU285
 970              	.LBE339:
 971              	.LBE342:
 312:src/btctl/btctl.c **** 		btctl_send_state_resp(state, reason);
 972              		.loc 1 312 3 is_stmt 1 view .LVU286
 973              	.LBB343:
 974              	.LBI343:
 246:src/btctl/btctl.c **** {
 975              		.loc 1 246 6 view .LVU287
 976              	.LBB344:
 248:src/btctl/btctl.c **** 	btctl_state_resp_t *resp;
 977              		.loc 1 248 2 view .LVU288
 978              	.LBB345:
 979              	.LBI345:
  34:include/ubtbr/btctl_intf.h **** {
 980              		.loc 2 34 22 view .LVU289
 981              	.LBB346:
  36:include/ubtbr/btctl_intf.h **** 	btctl_hdr_t *hdr;
 982              		.loc 2 36 2 view .LVU290
  37:include/ubtbr/btctl_intf.h **** 
 983              		.loc 2 37 2 view .LVU291
ARM GAS  /tmp/ccimrUf7.s 			page 31


  40:include/ubtbr/btctl_intf.h **** 	hdr = (btctl_hdr_t*) msg_put(msg, sizeof(*hdr));
 984              		.loc 2 40 2 view .LVU292
 985              	.LBB347:
 986              	.LBI347:
  15:include/ubtbr/msg.h **** {
 987              		.loc 4 15 22 view .LVU293
 988              	.LBB348:
  17:include/ubtbr/msg.h **** 
 989              		.loc 4 17 2 view .LVU294
  17:include/ubtbr/msg.h **** 
 990              		.loc 4 17 23 is_stmt 0 view .LVU295
 991 01aa 4FF4BA70 		mov	r0, #372
 992 01ae FFF7FEFF 		bl	mem_pool_alloc
 993              	.LVL83:
 994 01b2 0146     		mov	r1, r0
 995              	.LVL84:
  19:include/ubtbr/msg.h **** 	msg->read = msg->data;
 996              		.loc 4 19 2 is_stmt 1 view .LVU296
 997              	.LBE348:
 998              	.LBE347:
  42:include/ubtbr/btctl_intf.h **** 
 999              		.loc 2 42 12 is_stmt 0 view .LVU297
 1000 01b4 2923     		movs	r3, #41
 1001              	.LBB351:
 1002              	.LBB349:
  21:include/ubtbr/msg.h **** 
 1003              		.loc 4 21 16 view .LVU298
 1004 01b6 4FF4B475 		mov	r5, #360
  19:include/ubtbr/msg.h **** 	msg->read = msg->data;
 1005              		.loc 4 19 15 view .LVU299
 1006 01ba 0C30     		adds	r0, r0, #12
 1007              	.LVL85:
  20:include/ubtbr/msg.h **** 	msg->data_len = size;
 1008              		.loc 4 20 2 is_stmt 1 view .LVU300
 1009              	.LBE349:
 1010              	.LBE351:
 1011              	.LBB352:
 1012              	.LBB353:
  29:include/ubtbr/msg.h **** }
  30:include/ubtbr/msg.h **** 
  31:include/ubtbr/msg.h **** /* Return number of bytes written in the data buffer. */
  32:include/ubtbr/msg.h **** static inline int msg_write_len(const msg_t *msg)
  33:include/ubtbr/msg.h **** {
  34:include/ubtbr/msg.h **** 	return (int)(msg->write - msg->data);
  35:include/ubtbr/msg.h **** }
  36:include/ubtbr/msg.h **** 
  37:include/ubtbr/msg.h **** /* Return number of bytes we can pull between
  38:include/ubtbr/msg.h ****  * the data pointer and the end of the buffer. */
  39:include/ubtbr/msg.h **** static inline int msg_read_avail(const msg_t *msg)
  40:include/ubtbr/msg.h **** {
  41:include/ubtbr/msg.h **** 	return (int)(msg->write - msg->read);
  42:include/ubtbr/msg.h **** }
  43:include/ubtbr/msg.h **** 
  44:include/ubtbr/msg.h **** /* Return number of bytes we can put between
  45:include/ubtbr/msg.h ****  * the tail pointer and the end of the buffer. */
  46:include/ubtbr/msg.h **** static inline int msg_write_avail(const msg_t *msg)
  47:include/ubtbr/msg.h **** {
ARM GAS  /tmp/ccimrUf7.s 			page 32


  48:include/ubtbr/msg.h ****         return msg->data_len - msg_write_len(msg);
  49:include/ubtbr/msg.h **** }
  50:include/ubtbr/msg.h **** 
  51:include/ubtbr/msg.h **** /* Set write pointer.
  52:include/ubtbr/msg.h ****  * Meant to trim the msg to the end of data written. */
  53:include/ubtbr/msg.h **** static inline int msg_set_write(msg_t *msg, uint8_t *write)
  54:include/ubtbr/msg.h **** {
  55:include/ubtbr/msg.h **** 	if (write < msg->data || write > (msg->data + msg->data_len))
  56:include/ubtbr/msg.h ****                 return -1;
  57:include/ubtbr/msg.h ****         msg->write = write;
  58:include/ubtbr/msg.h **** 
  59:include/ubtbr/msg.h ****         return 0;
  60:include/ubtbr/msg.h **** }
  61:include/ubtbr/msg.h **** 
  62:include/ubtbr/msg.h **** static inline uint8_t *msg_put(msg_t *msg, unsigned int len)
  63:include/ubtbr/msg.h **** {
  64:include/ubtbr/msg.h ****         uint8_t *tmp = msg->write;
  65:include/ubtbr/msg.h **** 
  66:include/ubtbr/msg.h ****         if (msg_write_avail(msg) < (int) len)
  67:include/ubtbr/msg.h **** 		DIE("msg_put: short buf\n");
  68:include/ubtbr/msg.h ****         msg->write += len;
 1013              		.loc 4 68 20 is_stmt 0 view .LVU301
 1014 01bc 01F11002 		add	r2, r1, #16
 1015              	.LBE353:
 1016              	.LBE352:
  42:include/ubtbr/btctl_intf.h **** 
 1017              		.loc 2 42 12 view .LVU302
 1018 01c0 0B73     		strb	r3, [r1, #12]
 1019              	.LBE346:
 1020              	.LBE345:
 1021              	.LBB359:
 1022              	.LBB360:
 1023              	.LBB361:
 1024              	.LBB362:
 1025              	.LBB363:
 1026              	.LBB364:
  34:include/ubtbr/msg.h **** }
 1027              		.loc 4 34 9 view .LVU303
 1028 01c2 131A     		subs	r3, r2, r0
 1029              	.LBE364:
 1030              	.LBE363:
  48:include/ubtbr/msg.h **** }
 1031              		.loc 4 48 30 view .LVU304
 1032 01c4 EB1A     		subs	r3, r5, r3
 1033              	.LBE362:
 1034              	.LBE361:
  66:include/ubtbr/msg.h **** 		DIE("msg_put: short buf\n");
 1035              		.loc 4 66 12 view .LVU305
 1036 01c6 012B     		cmp	r3, #1
 1037              	.LBE360:
 1038              	.LBE359:
 1039              	.LBB373:
 1040              	.LBB357:
 1041              	.LBB355:
 1042              	.LBB354:
 1043              		.loc 4 68 20 view .LVU306
 1044 01c8 C1E90102 		strd	r0, r2, [r1, #4]
ARM GAS  /tmp/ccimrUf7.s 			page 33


  69:include/ubtbr/msg.h **** 
  70:include/ubtbr/msg.h ****         return tmp;
 1045              		.loc 4 70 9 is_stmt 1 view .LVU307
 1046              	.LVL86:
 1047              		.loc 4 70 9 is_stmt 0 view .LVU308
 1048              	.LBE354:
 1049              	.LBE355:
  42:include/ubtbr/btctl_intf.h **** 
 1050              		.loc 2 42 2 is_stmt 1 view .LVU309
  44:include/ubtbr/btctl_intf.h **** }
 1051              		.loc 2 44 2 view .LVU310
  44:include/ubtbr/btctl_intf.h **** }
 1052              		.loc 2 44 2 is_stmt 0 view .LVU311
 1053              	.LBE357:
 1054              	.LBE373:
 249:src/btctl/btctl.c **** 
 1055              		.loc 1 249 2 is_stmt 1 view .LVU312
 251:src/btctl/btctl.c **** 	resp->state = state;
 1056              		.loc 1 251 2 view .LVU313
 1057              	.LBB374:
 1058              	.LBI359:
  62:include/ubtbr/msg.h **** {
 1059              		.loc 4 62 24 view .LVU314
 1060              	.LBB369:
  64:include/ubtbr/msg.h **** 
 1061              		.loc 4 64 9 view .LVU315
  66:include/ubtbr/msg.h **** 		DIE("msg_put: short buf\n");
 1062              		.loc 4 66 9 view .LVU316
 1063              	.LBB368:
 1064              	.LBI361:
  46:include/ubtbr/msg.h **** {
 1065              		.loc 4 46 19 view .LVU317
 1066              	.LBB367:
  48:include/ubtbr/msg.h **** }
 1067              		.loc 4 48 9 view .LVU318
 1068              	.LBB366:
 1069              	.LBI363:
  32:include/ubtbr/msg.h **** {
 1070              		.loc 4 32 19 view .LVU319
 1071              	.LBB365:
  34:include/ubtbr/msg.h **** }
 1072              		.loc 4 34 2 view .LVU320
  34:include/ubtbr/msg.h **** }
 1073              		.loc 4 34 2 is_stmt 0 view .LVU321
 1074              	.LBE365:
 1075              	.LBE366:
 1076              	.LBE367:
 1077              	.LBE368:
 1078              	.LBE369:
 1079              	.LBE374:
 1080              	.LBB375:
 1081              	.LBB358:
 1082              	.LBB356:
 1083              	.LBB350:
  21:include/ubtbr/msg.h **** 
 1084              		.loc 4 21 16 view .LVU322
 1085 01cc 4D80     		strh	r5, [r1, #2]	@ movhi
ARM GAS  /tmp/ccimrUf7.s 			page 34


 1086              	.LBE350:
 1087              	.LBE356:
 1088              	.LBE358:
 1089              	.LBE375:
 1090              	.LBB376:
 1091              	.LBB370:
  66:include/ubtbr/msg.h **** 		DIE("msg_put: short buf\n");
 1092              		.loc 4 66 12 view .LVU323
 1093 01ce 15DD     		ble	.L44
  68:include/ubtbr/msg.h **** 
 1094              		.loc 4 68 9 is_stmt 1 view .LVU324
  68:include/ubtbr/msg.h **** 
 1095              		.loc 4 68 20 is_stmt 0 view .LVU325
 1096 01d0 01F11203 		add	r3, r1, #18
 1097              	.LBE370:
 1098              	.LBE376:
 252:src/btctl/btctl.c **** 	resp->reason = reason;
 1099              		.loc 1 252 14 view .LVU326
 1100 01d4 0F74     		strb	r7, [r1, #16]
 253:src/btctl/btctl.c **** 	btctl_tx_enqueue(msg);
 1101              		.loc 1 253 15 view .LVU327
 1102 01d6 4F74     		strb	r7, [r1, #17]
 1103              	.LBB377:
 1104              	.LBB371:
  68:include/ubtbr/msg.h **** 
 1105              		.loc 4 68 20 view .LVU328
 1106 01d8 8B60     		str	r3, [r1, #8]
 1107              		.loc 4 70 9 is_stmt 1 view .LVU329
 1108              	.LVL87:
 1109              		.loc 4 70 9 is_stmt 0 view .LVU330
 1110              	.LBE371:
 1111              	.LBE377:
 252:src/btctl/btctl.c **** 	resp->reason = reason;
 1112              		.loc 1 252 2 is_stmt 1 view .LVU331
 253:src/btctl/btctl.c **** 	btctl_tx_enqueue(msg);
 1113              		.loc 1 253 2 view .LVU332
 254:src/btctl/btctl.c **** }
 1114              		.loc 1 254 2 view .LVU333
 1115              	.LBB378:
 1116              	.LBI378:
  76:include/ubtbr/btctl_intf.h **** {
 1117              		.loc 2 76 19 view .LVU334
 1118              	.LBB379:
  78:include/ubtbr/btctl_intf.h **** }
 1119              		.loc 2 78 2 view .LVU335
 1120              	.LBB380:
 1121              	.LBI380:
  58:include/ubtbr/btctl_intf.h **** {
 1122              		.loc 2 58 19 view .LVU336
 1123              	.LBB381:
  60:include/ubtbr/btctl_intf.h **** 	int rc;
 1124              		.loc 2 60 2 view .LVU337
 1125              	.LBB382:
 1126              	.LBI382:
   5:include/ubtbr/system.h **** {
 1127              		.loc 3 5 24 view .LVU338
 1128              	.LBB383:
ARM GAS  /tmp/ccimrUf7.s 			page 35


   7:include/ubtbr/system.h **** 
 1129              		.loc 3 7 2 view .LVU339
   9:include/ubtbr/system.h **** 	"\tmrs    %0, primask\n"
 1130              		.loc 3 9 2 view .LVU340
 1131              		.syntax unified
 1132              	@ 9 "include/ubtbr/system.h" 1
 1133 01da EFF31085 			mrs    r5, primask
 1134 01de 72B6     		cpsid  i
 1135              	
 1136              	@ 0 "" 2
 1137              	.LVL88:
  16:include/ubtbr/system.h **** }
 1138              		.loc 3 16 2 view .LVU341
  16:include/ubtbr/system.h **** }
 1139              		.loc 3 16 2 is_stmt 0 view .LVU342
 1140              		.thumb
 1141              		.syntax unified
 1142              	.LBE383:
 1143              	.LBE382:
  61:include/ubtbr/btctl_intf.h **** 
 1144              		.loc 2 61 2 is_stmt 1 view .LVU343
  63:include/ubtbr/btctl_intf.h **** 	irq_restore(flags);
 1145              		.loc 2 63 2 view .LVU344
  63:include/ubtbr/btctl_intf.h **** 	irq_restore(flags);
 1146              		.loc 2 63 7 is_stmt 0 view .LVU345
 1147 01e0 1648     		ldr	r0, .L45+56
 1148              	.LVL89:
  63:include/ubtbr/btctl_intf.h **** 	irq_restore(flags);
 1149              		.loc 2 63 7 view .LVU346
 1150 01e2 FFF7FEFF 		bl	msg_enqueue
 1151              	.LVL90:
  64:include/ubtbr/btctl_intf.h **** 
 1152              		.loc 2 64 2 is_stmt 1 view .LVU347
 1153              	.LBB384:
 1154              	.LBI384:
  19:include/ubtbr/system.h **** {
 1155              		.loc 3 19 20 view .LVU348
 1156              	.LBB385:
 1157              		.loc 3 21 2 view .LVU349
 1158              		.syntax unified
 1159              	@ 21 "include/ubtbr/system.h" 1
 1160 01e6 85F31088 		msr primask, r5
 1161              	@ 0 "" 2
 1162              	.LVL91:
 1163              		.loc 3 21 2 is_stmt 0 view .LVU350
 1164              		.thumb
 1165              		.syntax unified
 1166              	.LBE385:
 1167              	.LBE384:
  66:include/ubtbr/btctl_intf.h **** }
 1168              		.loc 2 66 2 is_stmt 1 view .LVU351
  66:include/ubtbr/btctl_intf.h **** }
 1169              		.loc 2 66 2 is_stmt 0 view .LVU352
 1170              	.LBE381:
 1171              	.LBE380:
 1172              	.LBE379:
 1173              	.LBE378:
ARM GAS  /tmp/ccimrUf7.s 			page 36


 255:src/btctl/btctl.c **** 
 1174              		.loc 1 255 1 view .LVU353
 1175 01ea B6E7     		b	.L21
 1176              	.LVL92:
 1177              	.L42:
 255:src/btctl/btctl.c **** 
 1178              		.loc 1 255 1 view .LVU354
 1179              	.LBE344:
 1180              	.LBE343:
 1181              	.LBE391:
 1182              	.LBE395:
 1183              	.LBE399:
 1184              	.LBE421:
 1185              	.LBB422:
 1186              	.LBB284:
 162:src/btctl/btctl.c **** 		msg_free(msg);
 1187              		.loc 1 162 3 is_stmt 1 view .LVU355
 1188 01ec 1448     		ldr	r0, .L45+60
 1189              	.LVL93:
 162:src/btctl/btctl.c **** 		msg_free(msg);
 1190              		.loc 1 162 3 is_stmt 0 view .LVU356
 1191 01ee FFF7FEFF 		bl	cprintf
 1192              	.LVL94:
 163:src/btctl/btctl.c **** 		return;
 1193              		.loc 1 163 3 is_stmt 1 view .LVU357
 1194              	.LBB281:
 1195              	.LBI281:
  26:include/ubtbr/msg.h **** {
 1196              		.loc 4 26 20 view .LVU358
 1197              	.LBB282:
  28:include/ubtbr/msg.h **** }
 1198              		.loc 4 28 2 view .LVU359
 1199 01f2 2046     		mov	r0, r4
 1200 01f4 FFF7FEFF 		bl	mem_pool_free
 1201              	.LVL95:
  28:include/ubtbr/msg.h **** }
 1202              		.loc 4 28 2 is_stmt 0 view .LVU360
 1203              	.LBE282:
 1204              	.LBE281:
 164:src/btctl/btctl.c **** 	}
 1205              		.loc 1 164 3 is_stmt 1 view .LVU361
 1206              	.LBE284:
 1207              	.LBE422:
 1208              	.LBE431:
 1209              	.LBE439:
 243:src/btctl/btctl.c **** }
 1210              		.loc 1 243 9 is_stmt 0 view .LVU362
 1211 01f8 0120     		movs	r0, #1
 1212              	.LBB440:
 1213              	.LBB432:
 1214              	.LBB423:
 1215              	.LBB285:
 164:src/btctl/btctl.c **** 	}
 1216              		.loc 1 164 3 view .LVU363
 1217 01fa 34E7     		b	.L1
 1218              	.LVL96:
 1219              	.L44:
ARM GAS  /tmp/ccimrUf7.s 			page 37


 164:src/btctl/btctl.c **** 	}
 1220              		.loc 1 164 3 view .LVU364
 1221              	.LBE285:
 1222              	.LBE423:
 1223              	.LBB424:
 1224              	.LBB400:
 1225              	.LBB396:
 1226              	.LBB392:
 1227              	.LBB388:
 1228              	.LBB387:
 1229              	.LBB386:
 1230              	.LBB372:
  67:include/ubtbr/msg.h ****         msg->write += len;
 1231              		.loc 4 67 3 is_stmt 1 view .LVU365
 1232 01fc 1148     		ldr	r0, .L45+64
 1233              	.LVL97:
  67:include/ubtbr/msg.h ****         msg->write += len;
 1234              		.loc 4 67 3 is_stmt 0 view .LVU366
 1235 01fe FFF7FEFF 		bl	die
 1236              	.LVL98:
 1237              	.L46:
  67:include/ubtbr/msg.h ****         msg->write += len;
 1238              		.loc 4 67 3 view .LVU367
 1239 0202 00BF     		.align	2
 1240              	.L45:
 1241 0204 04000000 		.word	btctl+4
 1242 0208 00000000 		.word	btctl
 1243 020c 70000000 		.word	.LC7
 1244 0210 80000000 		.word	.LC8
 1245 0214 00000000 		.word	.LANCHOR1
 1246 0218 00000000 		.word	hop_cfg_afh
 1247 021c 54000000 		.word	btctl+84
 1248 0220 00000000 		.word	.LANCHOR0
 1249 0224 08000000 		.word	.LC1
 1250 0228 20000000 		.word	.LC3
 1251 022c 28000000 		.word	.LC4
 1252 0230 08800040 		.word	1073774600
 1253 0234 10000000 		.word	.LC2
 1254 0238 00000000 		.word	.LC0
 1255 023c 2C000000 		.word	btctl+44
 1256 0240 54000000 		.word	.LC6
 1257 0244 38000000 		.word	.LC5
 1258              	.LBE372:
 1259              	.LBE386:
 1260              	.LBE387:
 1261              	.LBE388:
 1262              	.LBE392:
 1263              	.LBE396:
 1264              	.LBE400:
 1265              	.LBE424:
 1266              	.LBE432:
 1267              	.LBE440:
 1268              		.cfi_endproc
 1269              	.LFE48:
 1271              		.section	.text.btctl_send_state_resp,"ax",%progbits
 1272              		.align	1
 1273              		.p2align 2,,3
ARM GAS  /tmp/ccimrUf7.s 			page 38


 1274              		.global	btctl_send_state_resp
 1275              		.syntax unified
 1276              		.thumb
 1277              		.thumb_func
 1278              		.fpu softvfp
 1280              	btctl_send_state_resp:
 1281              	.LVL99:
 1282              	.LFB49:
 247:src/btctl/btctl.c **** 	msg_t *msg = btctl_msg_alloc(BTCTL_STATE_RESP);
 1283              		.loc 1 247 1 is_stmt 1 view -0
 1284              		.cfi_startproc
 1285              		@ args = 0, pretend = 0, frame = 0
 1286              		@ frame_needed = 0, uses_anonymous_args = 0
 247:src/btctl/btctl.c **** 	msg_t *msg = btctl_msg_alloc(BTCTL_STATE_RESP);
 1287              		.loc 1 247 1 is_stmt 0 view .LVU369
 1288 0000 70B5     		push	{r4, r5, r6, lr}
 1289              		.cfi_def_cfa_offset 16
 1290              		.cfi_offset 4, -16
 1291              		.cfi_offset 5, -12
 1292              		.cfi_offset 6, -8
 1293              		.cfi_offset 14, -4
 248:src/btctl/btctl.c **** 	btctl_state_resp_t *resp;
 1294              		.loc 1 248 2 is_stmt 1 view .LVU370
 1295              	.LVL100:
 1296              	.LBB461:
 1297              	.LBI461:
  34:include/ubtbr/btctl_intf.h **** {
 1298              		.loc 2 34 22 view .LVU371
 1299              	.LBB462:
  36:include/ubtbr/btctl_intf.h **** 	btctl_hdr_t *hdr;
 1300              		.loc 2 36 2 view .LVU372
  37:include/ubtbr/btctl_intf.h **** 
 1301              		.loc 2 37 2 view .LVU373
  40:include/ubtbr/btctl_intf.h **** 	hdr = (btctl_hdr_t*) msg_put(msg, sizeof(*hdr));
 1302              		.loc 2 40 2 view .LVU374
 1303              	.LBB463:
 1304              	.LBI463:
  15:include/ubtbr/msg.h **** {
 1305              		.loc 4 15 22 view .LVU375
 1306              	.LBB464:
  17:include/ubtbr/msg.h **** 
 1307              		.loc 4 17 2 view .LVU376
 1308              	.LBE464:
 1309              	.LBE463:
 1310              	.LBE462:
 1311              	.LBE461:
 247:src/btctl/btctl.c **** 	msg_t *msg = btctl_msg_alloc(BTCTL_STATE_RESP);
 1312              		.loc 1 247 1 is_stmt 0 view .LVU377
 1313 0002 0546     		mov	r5, r0
 1314              	.LBB481:
 1315              	.LBB477:
 1316              	.LBB469:
 1317              	.LBB465:
  17:include/ubtbr/msg.h **** 
 1318              		.loc 4 17 23 view .LVU378
 1319 0004 4FF4BA70 		mov	r0, #372
 1320              	.LVL101:
ARM GAS  /tmp/ccimrUf7.s 			page 39


  17:include/ubtbr/msg.h **** 
 1321              		.loc 4 17 23 view .LVU379
 1322              	.LBE465:
 1323              	.LBE469:
 1324              	.LBE477:
 1325              	.LBE481:
 247:src/btctl/btctl.c **** 	msg_t *msg = btctl_msg_alloc(BTCTL_STATE_RESP);
 1326              		.loc 1 247 1 view .LVU380
 1327 0008 0C46     		mov	r4, r1
 1328              	.LBB482:
 1329              	.LBB478:
 1330              	.LBB470:
 1331              	.LBB466:
  17:include/ubtbr/msg.h **** 
 1332              		.loc 4 17 23 view .LVU381
 1333 000a FFF7FEFF 		bl	mem_pool_alloc
 1334              	.LVL102:
  17:include/ubtbr/msg.h **** 
 1335              		.loc 4 17 23 view .LVU382
 1336 000e 0146     		mov	r1, r0
 1337              	.LVL103:
  19:include/ubtbr/msg.h **** 	msg->read = msg->data;
 1338              		.loc 4 19 2 is_stmt 1 view .LVU383
 1339              	.LBE466:
 1340              	.LBE470:
  42:include/ubtbr/btctl_intf.h **** 
 1341              		.loc 2 42 12 is_stmt 0 view .LVU384
 1342 0010 2923     		movs	r3, #41
 1343              	.LBB471:
 1344              	.LBB467:
  21:include/ubtbr/msg.h **** 
 1345              		.loc 4 21 16 view .LVU385
 1346 0012 4FF4B476 		mov	r6, #360
  19:include/ubtbr/msg.h **** 	msg->read = msg->data;
 1347              		.loc 4 19 15 view .LVU386
 1348 0016 0C30     		adds	r0, r0, #12
 1349              	.LVL104:
  20:include/ubtbr/msg.h **** 	msg->data_len = size;
 1350              		.loc 4 20 2 is_stmt 1 view .LVU387
 1351              	.LBE467:
 1352              	.LBE471:
 1353              	.LBB472:
 1354              	.LBB473:
  68:include/ubtbr/msg.h **** 
 1355              		.loc 4 68 20 is_stmt 0 view .LVU388
 1356 0018 01F11002 		add	r2, r1, #16
 1357              	.LBE473:
 1358              	.LBE472:
  42:include/ubtbr/btctl_intf.h **** 
 1359              		.loc 2 42 12 view .LVU389
 1360 001c 0B73     		strb	r3, [r1, #12]
 1361              	.LBE478:
 1362              	.LBE482:
 1363              	.LBB483:
 1364              	.LBB484:
 1365              	.LBB485:
 1366              	.LBB486:
ARM GAS  /tmp/ccimrUf7.s 			page 40


 1367              	.LBB487:
 1368              	.LBB488:
  34:include/ubtbr/msg.h **** }
 1369              		.loc 4 34 9 view .LVU390
 1370 001e 131A     		subs	r3, r2, r0
 1371              	.LBE488:
 1372              	.LBE487:
  48:include/ubtbr/msg.h **** }
 1373              		.loc 4 48 30 view .LVU391
 1374 0020 F31A     		subs	r3, r6, r3
 1375              	.LBE486:
 1376              	.LBE485:
  66:include/ubtbr/msg.h **** 		DIE("msg_put: short buf\n");
 1377              		.loc 4 66 12 view .LVU392
 1378 0022 012B     		cmp	r3, #1
 1379              	.LBE484:
 1380              	.LBE483:
 1381              	.LBB497:
 1382              	.LBB479:
 1383              	.LBB475:
 1384              	.LBB474:
  68:include/ubtbr/msg.h **** 
 1385              		.loc 4 68 20 view .LVU393
 1386 0024 C1E90102 		strd	r0, r2, [r1, #4]
 1387              		.loc 4 70 9 is_stmt 1 view .LVU394
 1388              	.LVL105:
 1389              		.loc 4 70 9 is_stmt 0 view .LVU395
 1390              	.LBE474:
 1391              	.LBE475:
  42:include/ubtbr/btctl_intf.h **** 
 1392              		.loc 2 42 2 is_stmt 1 view .LVU396
  44:include/ubtbr/btctl_intf.h **** }
 1393              		.loc 2 44 2 view .LVU397
  44:include/ubtbr/btctl_intf.h **** }
 1394              		.loc 2 44 2 is_stmt 0 view .LVU398
 1395              	.LBE479:
 1396              	.LBE497:
 249:src/btctl/btctl.c **** 
 1397              		.loc 1 249 2 is_stmt 1 view .LVU399
 251:src/btctl/btctl.c **** 	resp->state = state;
 1398              		.loc 1 251 2 view .LVU400
 1399              	.LBB498:
 1400              	.LBI483:
  62:include/ubtbr/msg.h **** {
 1401              		.loc 4 62 24 view .LVU401
 1402              	.LBB493:
  64:include/ubtbr/msg.h **** 
 1403              		.loc 4 64 9 view .LVU402
  66:include/ubtbr/msg.h **** 		DIE("msg_put: short buf\n");
 1404              		.loc 4 66 9 view .LVU403
 1405              	.LBB492:
 1406              	.LBI485:
  46:include/ubtbr/msg.h **** {
 1407              		.loc 4 46 19 view .LVU404
 1408              	.LBB491:
  48:include/ubtbr/msg.h **** }
 1409              		.loc 4 48 9 view .LVU405
ARM GAS  /tmp/ccimrUf7.s 			page 41


 1410              	.LBB490:
 1411              	.LBI487:
  32:include/ubtbr/msg.h **** {
 1412              		.loc 4 32 19 view .LVU406
 1413              	.LBB489:
  34:include/ubtbr/msg.h **** }
 1414              		.loc 4 34 2 view .LVU407
  34:include/ubtbr/msg.h **** }
 1415              		.loc 4 34 2 is_stmt 0 view .LVU408
 1416              	.LBE489:
 1417              	.LBE490:
 1418              	.LBE491:
 1419              	.LBE492:
 1420              	.LBE493:
 1421              	.LBE498:
 1422              	.LBB499:
 1423              	.LBB480:
 1424              	.LBB476:
 1425              	.LBB468:
  21:include/ubtbr/msg.h **** 
 1426              		.loc 4 21 16 view .LVU409
 1427 0028 4E80     		strh	r6, [r1, #2]	@ movhi
 1428              	.LBE468:
 1429              	.LBE476:
 1430              	.LBE480:
 1431              	.LBE499:
 1432              	.LBB500:
 1433              	.LBB494:
  66:include/ubtbr/msg.h **** 		DIE("msg_put: short buf\n");
 1434              		.loc 4 66 12 view .LVU410
 1435 002a 0DDD     		ble	.L49
  68:include/ubtbr/msg.h **** 
 1436              		.loc 4 68 9 is_stmt 1 view .LVU411
  68:include/ubtbr/msg.h **** 
 1437              		.loc 4 68 20 is_stmt 0 view .LVU412
 1438 002c 01F11203 		add	r3, r1, #18
 1439              	.LBE494:
 1440              	.LBE500:
 252:src/btctl/btctl.c **** 	resp->reason = reason;
 1441              		.loc 1 252 14 view .LVU413
 1442 0030 0D74     		strb	r5, [r1, #16]
 253:src/btctl/btctl.c **** 	btctl_tx_enqueue(msg);
 1443              		.loc 1 253 15 view .LVU414
 1444 0032 4C74     		strb	r4, [r1, #17]
 1445              	.LBB501:
 1446              	.LBB495:
  68:include/ubtbr/msg.h **** 
 1447              		.loc 4 68 20 view .LVU415
 1448 0034 8B60     		str	r3, [r1, #8]
 1449              		.loc 4 70 9 is_stmt 1 view .LVU416
 1450              	.LVL106:
 1451              		.loc 4 70 9 is_stmt 0 view .LVU417
 1452              	.LBE495:
 1453              	.LBE501:
 252:src/btctl/btctl.c **** 	resp->reason = reason;
 1454              		.loc 1 252 2 is_stmt 1 view .LVU418
 253:src/btctl/btctl.c **** 	btctl_tx_enqueue(msg);
ARM GAS  /tmp/ccimrUf7.s 			page 42


 1455              		.loc 1 253 2 view .LVU419
 254:src/btctl/btctl.c **** }
 1456              		.loc 1 254 2 view .LVU420
 1457              	.LBB502:
 1458              	.LBI502:
  76:include/ubtbr/btctl_intf.h **** {
 1459              		.loc 2 76 19 view .LVU421
 1460              	.LBB503:
  78:include/ubtbr/btctl_intf.h **** }
 1461              		.loc 2 78 2 view .LVU422
 1462              	.LBB504:
 1463              	.LBI504:
  58:include/ubtbr/btctl_intf.h **** {
 1464              		.loc 2 58 19 view .LVU423
 1465              	.LBB505:
  60:include/ubtbr/btctl_intf.h **** 	int rc;
 1466              		.loc 2 60 2 view .LVU424
 1467              	.LBB506:
 1468              	.LBI506:
   5:include/ubtbr/system.h **** {
 1469              		.loc 3 5 24 view .LVU425
 1470              	.LBB507:
   7:include/ubtbr/system.h **** 
 1471              		.loc 3 7 2 view .LVU426
   9:include/ubtbr/system.h **** 	"\tmrs    %0, primask\n"
 1472              		.loc 3 9 2 view .LVU427
 1473              		.syntax unified
 1474              	@ 9 "include/ubtbr/system.h" 1
 1475 0036 EFF31084 			mrs    r4, primask
 1476 003a 72B6     		cpsid  i
 1477              	
 1478              	@ 0 "" 2
 1479              	.LVL107:
  16:include/ubtbr/system.h **** }
 1480              		.loc 3 16 2 view .LVU428
  16:include/ubtbr/system.h **** }
 1481              		.loc 3 16 2 is_stmt 0 view .LVU429
 1482              		.thumb
 1483              		.syntax unified
 1484              	.LBE507:
 1485              	.LBE506:
  61:include/ubtbr/btctl_intf.h **** 
 1486              		.loc 2 61 2 is_stmt 1 view .LVU430
  63:include/ubtbr/btctl_intf.h **** 	irq_restore(flags);
 1487              		.loc 2 63 2 view .LVU431
  63:include/ubtbr/btctl_intf.h **** 	irq_restore(flags);
 1488              		.loc 2 63 7 is_stmt 0 view .LVU432
 1489 003c 0448     		ldr	r0, .L50
 1490              	.LVL108:
  63:include/ubtbr/btctl_intf.h **** 	irq_restore(flags);
 1491              		.loc 2 63 7 view .LVU433
 1492 003e FFF7FEFF 		bl	msg_enqueue
 1493              	.LVL109:
  64:include/ubtbr/btctl_intf.h **** 
 1494              		.loc 2 64 2 is_stmt 1 view .LVU434
 1495              	.LBB508:
 1496              	.LBI508:
ARM GAS  /tmp/ccimrUf7.s 			page 43


  19:include/ubtbr/system.h **** {
 1497              		.loc 3 19 20 view .LVU435
 1498              	.LBB509:
 1499              		.loc 3 21 2 view .LVU436
 1500              		.syntax unified
 1501              	@ 21 "include/ubtbr/system.h" 1
 1502 0042 84F31088 		msr primask, r4
 1503              	@ 0 "" 2
 1504              	.LVL110:
 1505              		.loc 3 21 2 is_stmt 0 view .LVU437
 1506              		.thumb
 1507              		.syntax unified
 1508              	.LBE509:
 1509              	.LBE508:
  66:include/ubtbr/btctl_intf.h **** }
 1510              		.loc 2 66 2 is_stmt 1 view .LVU438
  66:include/ubtbr/btctl_intf.h **** }
 1511              		.loc 2 66 2 is_stmt 0 view .LVU439
 1512              	.LBE505:
 1513              	.LBE504:
 1514              	.LBE503:
 1515              	.LBE502:
 255:src/btctl/btctl.c **** 
 1516              		.loc 1 255 1 view .LVU440
 1517 0046 70BD     		pop	{r4, r5, r6, pc}
 1518              	.LVL111:
 1519              	.L49:
 1520              	.LBB510:
 1521              	.LBB496:
  67:include/ubtbr/msg.h ****         msg->write += len;
 1522              		.loc 4 67 3 is_stmt 1 view .LVU441
 1523 0048 0248     		ldr	r0, .L50+4
 1524              	.LVL112:
  67:include/ubtbr/msg.h ****         msg->write += len;
 1525              		.loc 4 67 3 is_stmt 0 view .LVU442
 1526 004a FFF7FEFF 		bl	die
 1527              	.LVL113:
 1528              	.L51:
  67:include/ubtbr/msg.h ****         msg->write += len;
 1529              		.loc 4 67 3 view .LVU443
 1530 004e 00BF     		.align	2
 1531              	.L50:
 1532 0050 2C000000 		.word	btctl+44
 1533 0054 38000000 		.word	.LC5
 1534              	.LBE496:
 1535              	.LBE510:
 1536              		.cfi_endproc
 1537              	.LFE49:
 1539              		.section	.rodata.str1.4
 1540 0099 000000   		.align	2
 1541              	.LC9:
 1542 009c 4449457C 		.ascii	"DIE|Invalid state transition %s -> %s\012\012\000"
 1542      496E7661 
 1542      6C696420 
 1542      73746174 
 1542      65207472 
 1543              		.section	.text.btctl_set_state,"ax",%progbits
ARM GAS  /tmp/ccimrUf7.s 			page 44


 1544              		.align	1
 1545              		.p2align 2,,3
 1546              		.global	btctl_set_state
 1547              		.syntax unified
 1548              		.thumb
 1549              		.thumb_func
 1550              		.fpu softvfp
 1552              	btctl_set_state:
 1553              	.LVL114:
 1554              	.LFB52:
 292:src/btctl/btctl.c **** 	uint32_t flags = irq_save_disable();
 1555              		.loc 1 292 1 is_stmt 1 view -0
 1556              		.cfi_startproc
 1557              		@ args = 0, pretend = 0, frame = 0
 1558              		@ frame_needed = 0, uses_anonymous_args = 0
 292:src/btctl/btctl.c **** 	uint32_t flags = irq_save_disable();
 1559              		.loc 1 292 1 is_stmt 0 view .LVU445
 1560 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1561              		.cfi_def_cfa_offset 24
 1562              		.cfi_offset 4, -24
 1563              		.cfi_offset 5, -20
 1564              		.cfi_offset 6, -16
 1565              		.cfi_offset 7, -12
 1566              		.cfi_offset 8, -8
 1567              		.cfi_offset 14, -4
 293:src/btctl/btctl.c **** 	btctl_state_t old_state = btctl.state;
 1568              		.loc 1 293 2 is_stmt 1 view .LVU446
 1569              	.LBB549:
 1570              	.LBI549:
   5:include/ubtbr/system.h **** {
 1571              		.loc 3 5 24 view .LVU447
 1572              	.LBB550:
   7:include/ubtbr/system.h **** 
 1573              		.loc 3 7 2 view .LVU448
   9:include/ubtbr/system.h **** 	"\tmrs    %0, primask\n"
 1574              		.loc 3 9 2 view .LVU449
 1575              	.LBE550:
 1576              	.LBE549:
 292:src/btctl/btctl.c **** 	uint32_t flags = irq_save_disable();
 1577              		.loc 1 292 1 is_stmt 0 view .LVU450
 1578 0004 0446     		mov	r4, r0
 1579 0006 0E46     		mov	r6, r1
 1580              	.LBB552:
 1581              	.LBB551:
   9:include/ubtbr/system.h **** 	"\tmrs    %0, primask\n"
 1582              		.loc 3 9 2 view .LVU451
 1583              		.syntax unified
 1584              	@ 9 "include/ubtbr/system.h" 1
 1585 0008 EFF31088 			mrs    r8, primask
 1586 000c 72B6     		cpsid  i
 1587              	
 1588              	@ 0 "" 2
 1589              	.LVL115:
  16:include/ubtbr/system.h **** }
 1590              		.loc 3 16 2 is_stmt 1 view .LVU452
  16:include/ubtbr/system.h **** }
 1591              		.loc 3 16 2 is_stmt 0 view .LVU453
ARM GAS  /tmp/ccimrUf7.s 			page 45


 1592              		.thumb
 1593              		.syntax unified
 1594              	.LBE551:
 1595              	.LBE552:
 294:src/btctl/btctl.c **** 
 1596              		.loc 1 294 2 is_stmt 1 view .LVU454
 294:src/btctl/btctl.c **** 
 1597              		.loc 1 294 16 is_stmt 0 view .LVU455
 1598 000e 394F     		ldr	r7, .L82
 1599 0010 3D78     		ldrb	r5, [r7]	@ zero_extendqisi2
 1600              	.LVL116:
 297:src/btctl/btctl.c **** 		btctl_state_name(btctl.state),
 1601              		.loc 1 297 2 is_stmt 1 view .LVU456
 1602              	.LBB553:
 1603              	.LBI553:
 271:src/btctl/btctl.c **** {
 1604              		.loc 1 271 20 view .LVU457
 1605              	.LBB554:
 273:src/btctl/btctl.c **** 	static const char* btctl_state_name_tbl[BTCTL_STATE_COUNT] = {
 1606              		.loc 1 273 2 view .LVU458
 274:src/btctl/btctl.c **** 		[BTCTL_STATE_STANDBY]	= "STANDBY", 
 1607              		.loc 1 274 2 view .LVU459
 282:src/btctl/btctl.c **** 		return "Invalid";
 1608              		.loc 1 282 2 view .LVU460
 282:src/btctl/btctl.c **** 		return "Invalid";
 1609              		.loc 1 282 5 is_stmt 0 view .LVU461
 1610 0012 052D     		cmp	r5, #5
 1611 0014 49D8     		bhi	.L64
 285:src/btctl/btctl.c **** 	if (!name)
 1612              		.loc 1 285 2 is_stmt 1 view .LVU462
 285:src/btctl/btctl.c **** 	if (!name)
 1613              		.loc 1 285 7 is_stmt 0 view .LVU463
 1614 0016 384A     		ldr	r2, .L82+4
 287:src/btctl/btctl.c **** 	return name;
 1615              		.loc 1 287 8 view .LVU464
 1616 0018 384B     		ldr	r3, .L82+8
 285:src/btctl/btctl.c **** 	if (!name)
 1617              		.loc 1 285 7 view .LVU465
 1618 001a 52F82510 		ldr	r1, [r2, r5, lsl #2]
 1619              	.LVL117:
 286:src/btctl/btctl.c **** 		name = "TODO";
 1620              		.loc 1 286 2 is_stmt 1 view .LVU466
 287:src/btctl/btctl.c **** 	return name;
 1621              		.loc 1 287 8 is_stmt 0 view .LVU467
 1622 001e 0029     		cmp	r1, #0
 1623 0020 08BF     		it	eq
 1624 0022 1946     		moveq	r1, r3
 1625              	.LVL118:
 1626              	.L53:
 287:src/btctl/btctl.c **** 	return name;
 1627              		.loc 1 287 8 view .LVU468
 1628              	.LBE554:
 1629              	.LBE553:
 1630              	.LBB556:
 1631              	.LBI556:
 271:src/btctl/btctl.c **** {
 1632              		.loc 1 271 20 is_stmt 1 view .LVU469
ARM GAS  /tmp/ccimrUf7.s 			page 46


 1633              	.LBB557:
 273:src/btctl/btctl.c **** 	static const char* btctl_state_name_tbl[BTCTL_STATE_COUNT] = {
 1634              		.loc 1 273 2 view .LVU470
 274:src/btctl/btctl.c **** 		[BTCTL_STATE_STANDBY]	= "STANDBY", 
 1635              		.loc 1 274 2 view .LVU471
 282:src/btctl/btctl.c **** 		return "Invalid";
 1636              		.loc 1 282 2 view .LVU472
 282:src/btctl/btctl.c **** 		return "Invalid";
 1637              		.loc 1 282 5 is_stmt 0 view .LVU473
 1638 0024 052C     		cmp	r4, #5
 1639 0026 39D8     		bhi	.L54
 285:src/btctl/btctl.c **** 	if (!name)
 1640              		.loc 1 285 2 is_stmt 1 view .LVU474
 285:src/btctl/btctl.c **** 	if (!name)
 1641              		.loc 1 285 7 is_stmt 0 view .LVU475
 1642 0028 334A     		ldr	r2, .L82+4
 287:src/btctl/btctl.c **** 	return name;
 1643              		.loc 1 287 8 view .LVU476
 1644 002a 344B     		ldr	r3, .L82+8
 285:src/btctl/btctl.c **** 	if (!name)
 1645              		.loc 1 285 7 view .LVU477
 1646 002c 52F82420 		ldr	r2, [r2, r4, lsl #2]
 1647              	.LVL119:
 286:src/btctl/btctl.c **** 		name = "TODO";
 1648              		.loc 1 286 2 is_stmt 1 view .LVU478
 286:src/btctl/btctl.c **** 		name = "TODO";
 1649              		.loc 1 286 2 is_stmt 0 view .LVU479
 1650              	.LBE557:
 1651              	.LBE556:
 297:src/btctl/btctl.c **** 		btctl_state_name(btctl.state),
 1652              		.loc 1 297 2 view .LVU480
 1653 0030 3348     		ldr	r0, .L82+12
 1654              	.LVL120:
 297:src/btctl/btctl.c **** 		btctl_state_name(btctl.state),
 1655              		.loc 1 297 2 view .LVU481
 1656 0032 002A     		cmp	r2, #0
 1657 0034 08BF     		it	eq
 1658 0036 1A46     		moveq	r2, r3
 1659 0038 FFF7FEFF 		bl	cprintf
 1660              	.LVL121:
 302:src/btctl/btctl.c **** 	{
 1661              		.loc 1 302 2 is_stmt 1 view .LVU482
 1662              	.LBB558:
 1663              	.LBI558:
 257:src/btctl/btctl.c **** {
 1664              		.loc 1 257 19 view .LVU483
 1665              	.LBB559:
 260:src/btctl/btctl.c **** 		return 1;
 1666              		.loc 1 260 2 view .LVU484
 260:src/btctl/btctl.c **** 		return 1;
 1667              		.loc 1 260 5 is_stmt 0 view .LVU485
 1668 003c 4CBB     		cbnz	r4, .L77
 1669              	.LVL122:
 1670              	.L56:
 260:src/btctl/btctl.c **** 		return 1;
 1671              		.loc 1 260 5 view .LVU486
 1672              	.LBE559:
ARM GAS  /tmp/ccimrUf7.s 			page 47


 1673              	.LBE558:
 309:src/btctl/btctl.c **** 	irq_restore(flags);
 1674              		.loc 1 309 2 is_stmt 1 view .LVU487
 309:src/btctl/btctl.c **** 	irq_restore(flags);
 1675              		.loc 1 309 14 is_stmt 0 view .LVU488
 1676 003e 3C70     		strb	r4, [r7]
 310:src/btctl/btctl.c **** 	if (!(old_state == BTCTL_STATE_STANDBY && state == BTCTL_STATE_STANDBY))
 1677              		.loc 1 310 2 is_stmt 1 view .LVU489
 1678              	.LVL123:
 1679              	.LBB563:
 1680              	.LBI563:
  19:include/ubtbr/system.h **** {
 1681              		.loc 3 19 20 view .LVU490
 1682              	.LBB564:
 1683              		.loc 3 21 2 view .LVU491
 1684              		.syntax unified
 1685              	@ 21 "include/ubtbr/system.h" 1
 1686 0040 88F31088 		msr primask, r8
 1687              	@ 0 "" 2
 1688              	.LVL124:
 1689              		.loc 3 21 2 is_stmt 0 view .LVU492
 1690              		.thumb
 1691              		.syntax unified
 1692              	.LBE564:
 1693              	.LBE563:
 311:src/btctl/btctl.c **** 		btctl_send_state_resp(state, reason);
 1694              		.loc 1 311 2 is_stmt 1 view .LVU493
 311:src/btctl/btctl.c **** 		btctl_send_state_resp(state, reason);
 1695              		.loc 1 311 5 is_stmt 0 view .LVU494
 1696 0044 55EA0403 		orrs	r3, r5, r4
 1697 0048 01D1     		bne	.L78
 313:src/btctl/btctl.c **** }
 1698              		.loc 1 313 1 view .LVU495
 1699 004a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1700              	.LVL125:
 1701              	.L78:
 312:src/btctl/btctl.c **** }
 1702              		.loc 1 312 3 is_stmt 1 view .LVU496
 1703              	.LBB565:
 1704              	.LBI565:
 246:src/btctl/btctl.c **** {
 1705              		.loc 1 246 6 view .LVU497
 1706              	.LBB566:
 248:src/btctl/btctl.c **** 	btctl_state_resp_t *resp;
 1707              		.loc 1 248 2 view .LVU498
 1708              	.LBB567:
 1709              	.LBI567:
  34:include/ubtbr/btctl_intf.h **** {
 1710              		.loc 2 34 22 view .LVU499
 1711              	.LBB568:
  36:include/ubtbr/btctl_intf.h **** 	btctl_hdr_t *hdr;
 1712              		.loc 2 36 2 view .LVU500
  37:include/ubtbr/btctl_intf.h **** 
 1713              		.loc 2 37 2 view .LVU501
  40:include/ubtbr/btctl_intf.h **** 	hdr = (btctl_hdr_t*) msg_put(msg, sizeof(*hdr));
 1714              		.loc 2 40 2 view .LVU502
 1715              	.LBB569:
ARM GAS  /tmp/ccimrUf7.s 			page 48


 1716              	.LBI569:
  15:include/ubtbr/msg.h **** {
 1717              		.loc 4 15 22 view .LVU503
 1718              	.LBB570:
  17:include/ubtbr/msg.h **** 
 1719              		.loc 4 17 2 view .LVU504
  17:include/ubtbr/msg.h **** 
 1720              		.loc 4 17 23 is_stmt 0 view .LVU505
 1721 004e 4FF4BA70 		mov	r0, #372
 1722 0052 FFF7FEFF 		bl	mem_pool_alloc
 1723              	.LVL126:
 1724 0056 0146     		mov	r1, r0
 1725              	.LVL127:
  19:include/ubtbr/msg.h **** 	msg->read = msg->data;
 1726              		.loc 4 19 2 is_stmt 1 view .LVU506
 1727              	.LBE570:
 1728              	.LBE569:
  42:include/ubtbr/btctl_intf.h **** 
 1729              		.loc 2 42 12 is_stmt 0 view .LVU507
 1730 0058 2923     		movs	r3, #41
 1731              	.LBB573:
 1732              	.LBB571:
  21:include/ubtbr/msg.h **** 
 1733              		.loc 4 21 16 view .LVU508
 1734 005a 4FF4B475 		mov	r5, #360
 1735              	.LVL128:
  19:include/ubtbr/msg.h **** 	msg->read = msg->data;
 1736              		.loc 4 19 15 view .LVU509
 1737 005e 0C30     		adds	r0, r0, #12
 1738              	.LVL129:
  20:include/ubtbr/msg.h **** 	msg->data_len = size;
 1739              		.loc 4 20 2 is_stmt 1 view .LVU510
 1740              	.LBE571:
 1741              	.LBE573:
 1742              	.LBB574:
 1743              	.LBB575:
  68:include/ubtbr/msg.h **** 
 1744              		.loc 4 68 20 is_stmt 0 view .LVU511
 1745 0060 01F11002 		add	r2, r1, #16
 1746              	.LBE575:
 1747              	.LBE574:
  42:include/ubtbr/btctl_intf.h **** 
 1748              		.loc 2 42 12 view .LVU512
 1749 0064 0B73     		strb	r3, [r1, #12]
 1750              	.LBE568:
 1751              	.LBE567:
 1752              	.LBB581:
 1753              	.LBB582:
 1754              	.LBB583:
 1755              	.LBB584:
 1756              	.LBB585:
 1757              	.LBB586:
  34:include/ubtbr/msg.h **** }
 1758              		.loc 4 34 9 view .LVU513
 1759 0066 131A     		subs	r3, r2, r0
 1760              	.LBE586:
 1761              	.LBE585:
ARM GAS  /tmp/ccimrUf7.s 			page 49


  48:include/ubtbr/msg.h **** }
 1762              		.loc 4 48 30 view .LVU514
 1763 0068 EB1A     		subs	r3, r5, r3
 1764              	.LBE584:
 1765              	.LBE583:
  66:include/ubtbr/msg.h **** 		DIE("msg_put: short buf\n");
 1766              		.loc 4 66 12 view .LVU515
 1767 006a 012B     		cmp	r3, #1
 1768              	.LBE582:
 1769              	.LBE581:
 1770              	.LBB595:
 1771              	.LBB579:
 1772              	.LBB577:
 1773              	.LBB576:
  68:include/ubtbr/msg.h **** 
 1774              		.loc 4 68 20 view .LVU516
 1775 006c C1E90102 		strd	r0, r2, [r1, #4]
 1776              		.loc 4 70 9 is_stmt 1 view .LVU517
 1777              	.LVL130:
 1778              		.loc 4 70 9 is_stmt 0 view .LVU518
 1779              	.LBE576:
 1780              	.LBE577:
  42:include/ubtbr/btctl_intf.h **** 
 1781              		.loc 2 42 2 is_stmt 1 view .LVU519
  44:include/ubtbr/btctl_intf.h **** }
 1782              		.loc 2 44 2 view .LVU520
  44:include/ubtbr/btctl_intf.h **** }
 1783              		.loc 2 44 2 is_stmt 0 view .LVU521
 1784              	.LBE579:
 1785              	.LBE595:
 249:src/btctl/btctl.c **** 
 1786              		.loc 1 249 2 is_stmt 1 view .LVU522
 251:src/btctl/btctl.c **** 	resp->state = state;
 1787              		.loc 1 251 2 view .LVU523
 1788              	.LBB596:
 1789              	.LBI581:
  62:include/ubtbr/msg.h **** {
 1790              		.loc 4 62 24 view .LVU524
 1791              	.LBB591:
  64:include/ubtbr/msg.h **** 
 1792              		.loc 4 64 9 view .LVU525
  66:include/ubtbr/msg.h **** 		DIE("msg_put: short buf\n");
 1793              		.loc 4 66 9 view .LVU526
 1794              	.LBB590:
 1795              	.LBI583:
  46:include/ubtbr/msg.h **** {
 1796              		.loc 4 46 19 view .LVU527
 1797              	.LBB589:
  48:include/ubtbr/msg.h **** }
 1798              		.loc 4 48 9 view .LVU528
 1799              	.LBB588:
 1800              	.LBI585:
  32:include/ubtbr/msg.h **** {
 1801              		.loc 4 32 19 view .LVU529
 1802              	.LBB587:
  34:include/ubtbr/msg.h **** }
 1803              		.loc 4 34 2 view .LVU530
ARM GAS  /tmp/ccimrUf7.s 			page 50


  34:include/ubtbr/msg.h **** }
 1804              		.loc 4 34 2 is_stmt 0 view .LVU531
 1805              	.LBE587:
 1806              	.LBE588:
 1807              	.LBE589:
 1808              	.LBE590:
 1809              	.LBE591:
 1810              	.LBE596:
 1811              	.LBB597:
 1812              	.LBB580:
 1813              	.LBB578:
 1814              	.LBB572:
  21:include/ubtbr/msg.h **** 
 1815              		.loc 4 21 16 view .LVU532
 1816 0070 4D80     		strh	r5, [r1, #2]	@ movhi
 1817              	.LBE572:
 1818              	.LBE578:
 1819              	.LBE580:
 1820              	.LBE597:
 1821              	.LBB598:
 1822              	.LBB592:
  66:include/ubtbr/msg.h **** 		DIE("msg_put: short buf\n");
 1823              		.loc 4 66 12 view .LVU533
 1824 0072 3CDD     		ble	.L79
  68:include/ubtbr/msg.h **** 
 1825              		.loc 4 68 9 is_stmt 1 view .LVU534
  68:include/ubtbr/msg.h **** 
 1826              		.loc 4 68 20 is_stmt 0 view .LVU535
 1827 0074 01F11203 		add	r3, r1, #18
 1828              	.LBE592:
 1829              	.LBE598:
 252:src/btctl/btctl.c **** 	resp->reason = reason;
 1830              		.loc 1 252 14 view .LVU536
 1831 0078 0C74     		strb	r4, [r1, #16]
 253:src/btctl/btctl.c **** 	btctl_tx_enqueue(msg);
 1832              		.loc 1 253 15 view .LVU537
 1833 007a 4E74     		strb	r6, [r1, #17]
 1834              	.LBB599:
 1835              	.LBB593:
  68:include/ubtbr/msg.h **** 
 1836              		.loc 4 68 20 view .LVU538
 1837 007c 8B60     		str	r3, [r1, #8]
 1838              		.loc 4 70 9 is_stmt 1 view .LVU539
 1839              	.LVL131:
 1840              		.loc 4 70 9 is_stmt 0 view .LVU540
 1841              	.LBE593:
 1842              	.LBE599:
 252:src/btctl/btctl.c **** 	resp->reason = reason;
 1843              		.loc 1 252 2 is_stmt 1 view .LVU541
 253:src/btctl/btctl.c **** 	btctl_tx_enqueue(msg);
 1844              		.loc 1 253 2 view .LVU542
 254:src/btctl/btctl.c **** }
 1845              		.loc 1 254 2 view .LVU543
 1846              	.LBB600:
 1847              	.LBI600:
  76:include/ubtbr/btctl_intf.h **** {
 1848              		.loc 2 76 19 view .LVU544
ARM GAS  /tmp/ccimrUf7.s 			page 51


 1849              	.LBB601:
  78:include/ubtbr/btctl_intf.h **** }
 1850              		.loc 2 78 2 view .LVU545
 1851              	.LBB602:
 1852              	.LBI602:
  58:include/ubtbr/btctl_intf.h **** {
 1853              		.loc 2 58 19 view .LVU546
 1854              	.LBB603:
  60:include/ubtbr/btctl_intf.h **** 	int rc;
 1855              		.loc 2 60 2 view .LVU547
 1856              	.LBB604:
 1857              	.LBI604:
   5:include/ubtbr/system.h **** {
 1858              		.loc 3 5 24 view .LVU548
 1859              	.LBB605:
   7:include/ubtbr/system.h **** 
 1860              		.loc 3 7 2 view .LVU549
   9:include/ubtbr/system.h **** 	"\tmrs    %0, primask\n"
 1861              		.loc 3 9 2 view .LVU550
 1862              		.syntax unified
 1863              	@ 9 "include/ubtbr/system.h" 1
 1864 007e EFF31084 			mrs    r4, primask
 1865 0082 72B6     		cpsid  i
 1866              	
 1867              	@ 0 "" 2
 1868              	.LVL132:
  16:include/ubtbr/system.h **** }
 1869              		.loc 3 16 2 view .LVU551
  16:include/ubtbr/system.h **** }
 1870              		.loc 3 16 2 is_stmt 0 view .LVU552
 1871              		.thumb
 1872              		.syntax unified
 1873              	.LBE605:
 1874              	.LBE604:
  61:include/ubtbr/btctl_intf.h **** 
 1875              		.loc 2 61 2 is_stmt 1 view .LVU553
  63:include/ubtbr/btctl_intf.h **** 	irq_restore(flags);
 1876              		.loc 2 63 2 view .LVU554
  63:include/ubtbr/btctl_intf.h **** 	irq_restore(flags);
 1877              		.loc 2 63 7 is_stmt 0 view .LVU555
 1878 0084 1F48     		ldr	r0, .L82+16
 1879              	.LVL133:
  63:include/ubtbr/btctl_intf.h **** 	irq_restore(flags);
 1880              		.loc 2 63 7 view .LVU556
 1881 0086 FFF7FEFF 		bl	msg_enqueue
 1882              	.LVL134:
  64:include/ubtbr/btctl_intf.h **** 
 1883              		.loc 2 64 2 is_stmt 1 view .LVU557
 1884              	.LBB606:
 1885              	.LBI606:
  19:include/ubtbr/system.h **** {
 1886              		.loc 3 19 20 view .LVU558
 1887              	.LBB607:
 1888              		.loc 3 21 2 view .LVU559
 1889              		.syntax unified
 1890              	@ 21 "include/ubtbr/system.h" 1
 1891 008a 84F31088 		msr primask, r4
ARM GAS  /tmp/ccimrUf7.s 			page 52


 1892              	@ 0 "" 2
 1893              	.LVL135:
 1894              		.loc 3 21 2 is_stmt 0 view .LVU560
 1895              		.thumb
 1896              		.syntax unified
 1897              	.LBE607:
 1898              	.LBE606:
  66:include/ubtbr/btctl_intf.h **** }
 1899              		.loc 2 66 2 is_stmt 1 view .LVU561
  66:include/ubtbr/btctl_intf.h **** }
 1900              		.loc 2 66 2 is_stmt 0 view .LVU562
 1901              	.LBE603:
 1902              	.LBE602:
 1903              	.LBE601:
 1904              	.LBE600:
 1905              	.LBE566:
 1906              	.LBE565:
 1907              		.loc 1 313 1 view .LVU563
 1908 008e BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1909              	.LVL136:
 1910              	.L77:
 1911              	.LBB610:
 1912              	.LBB560:
 263:src/btctl/btctl.c **** 		return cur == BTCTL_STATE_PAGE
 1913              		.loc 1 263 2 is_stmt 1 view .LVU564
 263:src/btctl/btctl.c **** 		return cur == BTCTL_STATE_PAGE
 1914              		.loc 1 263 5 is_stmt 0 view .LVU565
 1915 0092 032C     		cmp	r4, #3
 1916 0094 0BD0     		beq	.L80
 268:src/btctl/btctl.c **** }
 1917              		.loc 1 268 2 is_stmt 1 view .LVU566
 1918              	.LVL137:
 268:src/btctl/btctl.c **** }
 1919              		.loc 1 268 2 is_stmt 0 view .LVU567
 1920              	.LBE560:
 1921              	.LBE610:
 302:src/btctl/btctl.c **** 	{
 1922              		.loc 1 302 5 view .LVU568
 1923 0096 002D     		cmp	r5, #0
 1924 0098 D1D0     		beq	.L56
 1925 009a 0DE0     		b	.L60
 1926              	.LVL138:
 1927              	.L54:
 297:src/btctl/btctl.c **** 		btctl_state_name(btctl.state),
 1928              		.loc 1 297 2 view .LVU569
 1929 009c 1A4A     		ldr	r2, .L82+20
 1930 009e 1848     		ldr	r0, .L82+12
 1931              	.LVL139:
 297:src/btctl/btctl.c **** 		btctl_state_name(btctl.state),
 1932              		.loc 1 297 2 view .LVU570
 1933 00a0 FFF7FEFF 		bl	cprintf
 1934              	.LVL140:
 302:src/btctl/btctl.c **** 	{
 1935              		.loc 1 302 2 is_stmt 1 view .LVU571
 1936              	.LBB611:
 257:src/btctl/btctl.c **** {
 1937              		.loc 1 257 19 view .LVU572
ARM GAS  /tmp/ccimrUf7.s 			page 53


 1938              	.LBB561:
 260:src/btctl/btctl.c **** 		return 1;
 1939              		.loc 1 260 2 view .LVU573
 263:src/btctl/btctl.c **** 		return cur == BTCTL_STATE_PAGE
 1940              		.loc 1 263 2 view .LVU574
 268:src/btctl/btctl.c **** }
 1941              		.loc 1 268 2 view .LVU575
 268:src/btctl/btctl.c **** }
 1942              		.loc 1 268 2 is_stmt 0 view .LVU576
 1943              	.LBE561:
 1944              	.LBE611:
 302:src/btctl/btctl.c **** 	{
 1945              		.loc 1 302 5 view .LVU577
 1946 00a4 002D     		cmp	r5, #0
 1947 00a6 CAD0     		beq	.L56
 1948 00a8 06E0     		b	.L60
 1949              	.LVL141:
 1950              	.L64:
 1951              	.LBB612:
 1952              	.LBB555:
 283:src/btctl/btctl.c **** 
 1953              		.loc 1 283 10 view .LVU578
 1954 00aa 1749     		ldr	r1, .L82+20
 1955              	.LVL142:
 283:src/btctl/btctl.c **** 
 1956              		.loc 1 283 10 view .LVU579
 1957 00ac BAE7     		b	.L53
 1958              	.LVL143:
 1959              	.L80:
 283:src/btctl/btctl.c **** 
 1960              		.loc 1 283 10 view .LVU580
 1961              	.LBE555:
 1962              	.LBE612:
 1963              	.LBB613:
 1964              	.LBB562:
 264:src/btctl/btctl.c **** 			|| cur == BTCTL_STATE_PAGE_SCAN
 1965              		.loc 1 264 3 is_stmt 1 view .LVU581
 266:src/btctl/btctl.c **** 	/* Others states must come from standby */
 1966              		.loc 1 266 4 is_stmt 0 view .LVU582
 1967 00ae AB1E     		subs	r3, r5, #2
 1968 00b0 012B     		cmp	r3, #1
 1969 00b2 C4D9     		bls	.L56
 265:src/btctl/btctl.c **** 			|| cur == BTCTL_STATE_CONNECTED;
 1970              		.loc 1 265 4 view .LVU583
 1971 00b4 052D     		cmp	r5, #5
 1972 00b6 C2D0     		beq	.L56
 1973              	.LVL144:
 1974              	.L60:
 265:src/btctl/btctl.c **** 			|| cur == BTCTL_STATE_CONNECTED;
 1975              		.loc 1 265 4 view .LVU584
 1976              	.LBE562:
 1977              	.LBE613:
 304:src/btctl/btctl.c **** 		DIE("Invalid state transition %s -> %s\n",
 1978              		.loc 1 304 3 is_stmt 1 view .LVU585
 1979              	.LBB614:
 1980              	.LBI614:
  19:include/ubtbr/system.h **** {
ARM GAS  /tmp/ccimrUf7.s 			page 54


 1981              		.loc 3 19 20 view .LVU586
 1982              	.LBB615:
 1983              		.loc 3 21 2 view .LVU587
 1984              		.syntax unified
 1985              	@ 21 "include/ubtbr/system.h" 1
 1986 00b8 88F31088 		msr primask, r8
 1987              	@ 0 "" 2
 1988              	.LVL145:
 1989              		.loc 3 21 2 is_stmt 0 view .LVU588
 1990              		.thumb
 1991              		.syntax unified
 1992              	.LBE615:
 1993              	.LBE614:
 305:src/btctl/btctl.c **** 			btctl_state_name(old_state),
 1994              		.loc 1 305 3 is_stmt 1 view .LVU589
 1995              	.LBB616:
 1996              	.LBI616:
 271:src/btctl/btctl.c **** {
 1997              		.loc 1 271 20 view .LVU590
 1998              	.LBB617:
 273:src/btctl/btctl.c **** 	static const char* btctl_state_name_tbl[BTCTL_STATE_COUNT] = {
 1999              		.loc 1 273 2 view .LVU591
 274:src/btctl/btctl.c **** 		[BTCTL_STATE_STANDBY]	= "STANDBY", 
 2000              		.loc 1 274 2 view .LVU592
 282:src/btctl/btctl.c **** 		return "Invalid";
 2001              		.loc 1 282 2 view .LVU593
 282:src/btctl/btctl.c **** 		return "Invalid";
 2002              		.loc 1 282 5 is_stmt 0 view .LVU594
 2003 00bc 052D     		cmp	r5, #5
 2004 00be 12D8     		bhi	.L81
 285:src/btctl/btctl.c **** 	if (!name)
 2005              		.loc 1 285 2 is_stmt 1 view .LVU595
 285:src/btctl/btctl.c **** 	if (!name)
 2006              		.loc 1 285 7 is_stmt 0 view .LVU596
 2007 00c0 0D4A     		ldr	r2, .L82+4
 287:src/btctl/btctl.c **** 	return name;
 2008              		.loc 1 287 8 view .LVU597
 2009 00c2 0E4B     		ldr	r3, .L82+8
 285:src/btctl/btctl.c **** 	if (!name)
 2010              		.loc 1 285 7 view .LVU598
 2011 00c4 52F82510 		ldr	r1, [r2, r5, lsl #2]
 2012              	.LVL146:
 286:src/btctl/btctl.c **** 		name = "TODO";
 2013              		.loc 1 286 2 is_stmt 1 view .LVU599
 287:src/btctl/btctl.c **** 	return name;
 2014              		.loc 1 287 8 is_stmt 0 view .LVU600
 2015 00c8 0029     		cmp	r1, #0
 2016 00ca 08BF     		it	eq
 2017 00cc 1946     		moveq	r1, r3
 2018              	.LVL147:
 2019              	.L58:
 287:src/btctl/btctl.c **** 	return name;
 2020              		.loc 1 287 8 view .LVU601
 2021              	.LBE617:
 2022              	.LBE616:
 2023              	.LBB619:
 2024              	.LBI619:
ARM GAS  /tmp/ccimrUf7.s 			page 55


 271:src/btctl/btctl.c **** {
 2025              		.loc 1 271 20 is_stmt 1 view .LVU602
 2026              	.LBB620:
 273:src/btctl/btctl.c **** 	static const char* btctl_state_name_tbl[BTCTL_STATE_COUNT] = {
 2027              		.loc 1 273 2 view .LVU603
 274:src/btctl/btctl.c **** 		[BTCTL_STATE_STANDBY]	= "STANDBY", 
 2028              		.loc 1 274 2 view .LVU604
 282:src/btctl/btctl.c **** 		return "Invalid";
 2029              		.loc 1 282 2 view .LVU605
 282:src/btctl/btctl.c **** 		return "Invalid";
 2030              		.loc 1 282 5 is_stmt 0 view .LVU606
 2031 00ce 052C     		cmp	r4, #5
 2032 00d0 0BD8     		bhi	.L66
 285:src/btctl/btctl.c **** 	if (!name)
 2033              		.loc 1 285 2 is_stmt 1 view .LVU607
 285:src/btctl/btctl.c **** 	if (!name)
 2034              		.loc 1 285 7 is_stmt 0 view .LVU608
 2035 00d2 094A     		ldr	r2, .L82+4
 287:src/btctl/btctl.c **** 	return name;
 2036              		.loc 1 287 8 view .LVU609
 2037 00d4 094B     		ldr	r3, .L82+8
 285:src/btctl/btctl.c **** 	if (!name)
 2038              		.loc 1 285 7 view .LVU610
 2039 00d6 52F82420 		ldr	r2, [r2, r4, lsl #2]
 2040              	.LVL148:
 286:src/btctl/btctl.c **** 		name = "TODO";
 2041              		.loc 1 286 2 is_stmt 1 view .LVU611
 287:src/btctl/btctl.c **** 	return name;
 2042              		.loc 1 287 8 is_stmt 0 view .LVU612
 2043 00da 002A     		cmp	r2, #0
 2044 00dc 08BF     		it	eq
 2045 00de 1A46     		moveq	r2, r3
 2046              	.LVL149:
 2047              	.L61:
 287:src/btctl/btctl.c **** 	return name;
 2048              		.loc 1 287 8 view .LVU613
 2049              	.LBE620:
 2050              	.LBE619:
 305:src/btctl/btctl.c **** 			btctl_state_name(old_state),
 2051              		.loc 1 305 3 view .LVU614
 2052 00e0 0A48     		ldr	r0, .L82+24
 2053 00e2 FFF7FEFF 		bl	die
 2054              	.LVL150:
 2055              	.L81:
 2056              	.LBB622:
 2057              	.LBB618:
 283:src/btctl/btctl.c **** 
 2058              		.loc 1 283 10 view .LVU615
 2059 00e6 0849     		ldr	r1, .L82+20
 2060 00e8 F1E7     		b	.L58
 2061              	.LVL151:
 2062              	.L66:
 283:src/btctl/btctl.c **** 
 2063              		.loc 1 283 10 view .LVU616
 2064              	.LBE618:
 2065              	.LBE622:
 2066              	.LBB623:
ARM GAS  /tmp/ccimrUf7.s 			page 56


 2067              	.LBB621:
 2068 00ea 074A     		ldr	r2, .L82+20
 2069 00ec F8E7     		b	.L61
 2070              	.LVL152:
 2071              	.L79:
 283:src/btctl/btctl.c **** 
 2072              		.loc 1 283 10 view .LVU617
 2073              	.LBE621:
 2074              	.LBE623:
 2075              	.LBB624:
 2076              	.LBB609:
 2077              	.LBB608:
 2078              	.LBB594:
  67:include/ubtbr/msg.h ****         msg->write += len;
 2079              		.loc 4 67 3 is_stmt 1 view .LVU618
 2080 00ee 0848     		ldr	r0, .L82+28
 2081              	.LVL153:
  67:include/ubtbr/msg.h ****         msg->write += len;
 2082              		.loc 4 67 3 is_stmt 0 view .LVU619
 2083 00f0 FFF7FEFF 		bl	die
 2084              	.LVL154:
 2085              	.L83:
  67:include/ubtbr/msg.h ****         msg->write += len;
 2086              		.loc 4 67 3 view .LVU620
 2087              		.align	2
 2088              	.L82:
 2089 00f4 00000000 		.word	btctl
 2090 00f8 00000000 		.word	.LANCHOR0
 2091 00fc 08000000 		.word	.LC1
 2092 0100 28000000 		.word	.LC4
 2093 0104 2C000000 		.word	btctl+44
 2094 0108 00000000 		.word	.LC0
 2095 010c 9C000000 		.word	.LC9
 2096 0110 38000000 		.word	.LC5
 2097              	.LBE594:
 2098              	.LBE608:
 2099              	.LBE609:
 2100              	.LBE624:
 2101              		.cfi_endproc
 2102              	.LFE52:
 2104              		.section	.text.btctl_init,"ax",%progbits
 2105              		.align	1
 2106              		.p2align 2,,3
 2107              		.global	btctl_init
 2108              		.syntax unified
 2109              		.thumb
 2110              		.thumb_func
 2111              		.fpu softvfp
 2113              	btctl_init:
 2114              	.LFB53:
 314:src/btctl/btctl.c **** 
 315:src/btctl/btctl.c **** void btctl_init(void)
 316:src/btctl/btctl.c **** {
 2115              		.loc 1 316 1 is_stmt 1 view -0
 2116              		.cfi_startproc
 2117              		@ args = 0, pretend = 0, frame = 0
 2118              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  /tmp/ccimrUf7.s 			page 57


 2119 0000 10B5     		push	{r4, lr}
 2120              		.cfi_def_cfa_offset 8
 2121              		.cfi_offset 4, -8
 2122              		.cfi_offset 14, -4
 317:src/btctl/btctl.c **** 	btctl.state = BTCTL_STATE_STANDBY;
 2123              		.loc 1 317 2 view .LVU622
 2124              		.loc 1 317 14 is_stmt 0 view .LVU623
 2125 0002 0023     		movs	r3, #0
 2126 0004 084C     		ldr	r4, .L85
 318:src/btctl/btctl.c **** 	btctl.eir_msg = NULL;
 319:src/btctl/btctl.c **** 	btctl.eir_pkt = NULL;
 320:src/btctl/btctl.c **** 	msg_queue_init(&btctl.rx_q);
 2127              		.loc 1 320 2 view .LVU624
 2128 0006 201D     		adds	r0, r4, #4
 319:src/btctl/btctl.c **** 	msg_queue_init(&btctl.rx_q);
 2129              		.loc 1 319 16 view .LVU625
 2130 0008 C4E91F33 		strd	r3, r3, [r4, #124]
 317:src/btctl/btctl.c **** 	btctl.state = BTCTL_STATE_STANDBY;
 2131              		.loc 1 317 14 view .LVU626
 2132 000c 2370     		strb	r3, [r4]
 318:src/btctl/btctl.c **** 	btctl.eir_msg = NULL;
 2133              		.loc 1 318 2 is_stmt 1 view .LVU627
 2134              		.loc 1 320 2 view .LVU628
 2135 000e FFF7FEFF 		bl	msg_queue_init
 2136              	.LVL155:
 321:src/btctl/btctl.c **** 	msg_queue_init(&btctl.tx_q);
 2137              		.loc 1 321 2 view .LVU629
 2138 0012 04F12C00 		add	r0, r4, #44
 2139 0016 FFF7FEFF 		bl	msg_queue_init
 2140              	.LVL156:
 322:src/btctl/btctl.c **** 	msg_queue_init(&btctl.acl_tx_q);
 2141              		.loc 1 322 2 view .LVU630
 2142 001a 04F15400 		add	r0, r4, #84
 323:src/btctl/btctl.c **** }
 2143              		.loc 1 323 1 is_stmt 0 view .LVU631
 2144 001e BDE81040 		pop	{r4, lr}
 2145              		.cfi_restore 14
 2146              		.cfi_restore 4
 2147              		.cfi_def_cfa_offset 0
 322:src/btctl/btctl.c **** 	msg_queue_init(&btctl.acl_tx_q);
 2148              		.loc 1 322 2 view .LVU632
 2149 0022 FFF7FEBF 		b	msg_queue_init
 2150              	.LVL157:
 2151              	.L86:
 2152 0026 00BF     		.align	2
 2153              	.L85:
 2154 0028 00000000 		.word	btctl
 2155              		.cfi_endproc
 2156              	.LFE53:
 2158              		.section	.rodata.str1.4
 2159              		.align	2
 2160              	.LC10:
 2161 00c4 494E5155 		.ascii	"INQUIRY\000"
 2161      49525900 
 2162              		.align	2
 2163              	.LC11:
 2164 00cc 50414745 		.ascii	"PAGE\000"
ARM GAS  /tmp/ccimrUf7.s 			page 58


 2164      00
 2165 00d1 000000   		.align	2
 2166              	.LC12:
 2167 00d4 434F4E4E 		.ascii	"CONNECTED\000"
 2167      45435445 
 2167      4400
 2168 00de 0000     		.align	2
 2169              	.LC13:
 2170 00e0 494E5155 		.ascii	"INQUIRY_SCAN\000"
 2170      4952595F 
 2170      5343414E 
 2170      00
 2171 00ed 000000   		.align	2
 2172              	.LC14:
 2173 00f0 50414745 		.ascii	"PAGE_SCAN\000"
 2173      5F534341 
 2173      4E00
 2174              		.comm	btctl,132,4
 2175              		.section	.rodata
 2176              		.align	2
 2177              		.set	.LANCHOR0,. + 0
 2180              	btctl_state_name_tbl.5216:
 2181 0000 20000000 		.word	.LC3
 2182 0004 C4000000 		.word	.LC10
 2183 0008 CC000000 		.word	.LC11
 2184 000c D4000000 		.word	.LC12
 2185 0010 E0000000 		.word	.LC13
 2186 0014 F0000000 		.word	.LC14
 2187              		.bss
 2188              		.align	2
 2189              		.set	.LANCHOR1,. + 0
 2192              	afh_buf.5169:
 2193 0000 00000000 		.space	11
 2193      00000000 
 2193      000000
 2194              		.text
 2195              	.Letext0:
 2196              		.file 5 "/usr/lib/gcc/arm-none-eabi/9.2.1/include/stddef.h"
 2197              		.file 6 "/usr/include/newlib/sys/_types.h"
 2198              		.file 7 "/usr/include/newlib/sys/reent.h"
 2199              		.file 8 "/usr/include/newlib/sys/lock.h"
 2200              		.file 9 "/usr/include/newlib/stdlib.h"
 2201              		.file 10 "/usr/lib/gcc/arm-none-eabi/9.2.1/include/stdint.h"
 2202              		.file 11 "../../host/libubertooth/src/ubertooth_interface.h"
 2203              		.file 12 "../common/ubertooth.h"
 2204              		.file 13 "include/ubtbr/queue.h"
 2205              		.file 14 "include/ubtbr/btphy.h"
 2206              		.file 15 "include/ubtbr/rf.h"
 2207              		.file 16 "include/ubtbr/hop.h"
 2208              		.file 17 "include/ubtbr/mem_pool.h"
 2209              		.file 18 "include/ubtbr/debug.h"
 2210              		.file 19 "include/ubtbr/monitor_state.h"
 2211              		.file 20 "/usr/include/newlib/string.h"
 2212              		.file 21 "include/ubtbr/inquiry_scan_state.h"
 2213              		.file 22 "include/ubtbr/paging_state.h"
 2214              		.file 23 "include/ubtbr/inquiry_state.h"
 2215              		.file 24 "include/ubtbr/ubertooth_usb.h"
ARM GAS  /tmp/ccimrUf7.s 			page 59


 2216              		.file 25 "include/ubtbr/page_scan_state.h"
ARM GAS  /tmp/ccimrUf7.s 			page 60


DEFINED SYMBOLS
                            *ABS*:0000000000000000 btctl.c
     /tmp/ccimrUf7.s:16     .rodata.str1.4:0000000000000000 $d
     /tmp/ccimrUf7.s:44     .text.btctl_work:0000000000000000 $t
     /tmp/ccimrUf7.s:53     .text.btctl_work:0000000000000000 btctl_work
     /tmp/ccimrUf7.s:151    .text.btctl_work:0000000000000022 $d
     /tmp/ccimrUf7.s:1241   .text.btctl_work:0000000000000204 $d
                            *COM*:0000000000000084 btctl
     /tmp/ccimrUf7.s:1272   .text.btctl_send_state_resp:0000000000000000 $t
     /tmp/ccimrUf7.s:1280   .text.btctl_send_state_resp:0000000000000000 btctl_send_state_resp
     /tmp/ccimrUf7.s:1532   .text.btctl_send_state_resp:0000000000000050 $d
     /tmp/ccimrUf7.s:1544   .text.btctl_set_state:0000000000000000 $t
     /tmp/ccimrUf7.s:1552   .text.btctl_set_state:0000000000000000 btctl_set_state
     /tmp/ccimrUf7.s:2089   .text.btctl_set_state:00000000000000f4 $d
     /tmp/ccimrUf7.s:2105   .text.btctl_init:0000000000000000 $t
     /tmp/ccimrUf7.s:2113   .text.btctl_init:0000000000000000 btctl_init
     /tmp/ccimrUf7.s:2154   .text.btctl_init:0000000000000028 $d
     /tmp/ccimrUf7.s:2176   .rodata:0000000000000000 $d
     /tmp/ccimrUf7.s:2180   .rodata:0000000000000000 btctl_state_name_tbl.5216
     /tmp/ccimrUf7.s:2188   .bss:0000000000000000 $d
     /tmp/ccimrUf7.s:2192   .bss:0000000000000000 afh_buf.5169
     /tmp/ccimrUf7.s:184    .text.btctl_work:0000000000000043 $d
     /tmp/ccimrUf7.s:184    .text.btctl_work:0000000000000044 $t

UNDEFINED SYMBOLS
msg_dequeue
mem_pool_free
cprintf
monitor1_state_setup
memcpy
btphy_timer_add
inquiry_scan_state_setup
msg_enqueue
btphy_rf_set_max_ac_errors
paging_state_setup
inquiry_state_setup
btphy_set_bdaddr
btphy_rf_set_freq_off
usb_work
reset
page_scan_state_setup
mem_pool_alloc
die
hop_cfg_afh
msg_queue_init
