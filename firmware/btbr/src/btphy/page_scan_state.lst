ARM GAS  /tmp/ccrSV1Te.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 2
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"page_scan_state.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.rodata.str1.4,"aMS",%progbits,1
  16              		.align	2
  17              	.LC0:
  18 0000 6668733A 		.ascii	"fhs: ba=%llx clk27_2=%x lta=%d\012\000"
  18      2062613D 
  18      256C6C78 
  18      20636C6B 
  18      32375F32 
  19              		.section	.text.page_scan_tx_cb,"ax",%progbits
  20              		.align	1
  21              		.p2align 2,,3
  22              		.arch armv7-m
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  26              		.fpu softvfp
  28              	page_scan_tx_cb:
  29              	.LVL0:
  30              	.LFB32:
  31              		.file 1 "src/btphy/page_scan_state.c"
   1:src/btphy/page_scan_state.c **** /* Page scan state
   2:src/btphy/page_scan_state.c ****  *
   3:src/btphy/page_scan_state.c ****  * Copyright 2020 Etienne Helluy-Lafont, Univ. Lille, CNRS.
   4:src/btphy/page_scan_state.c ****  *
   5:src/btphy/page_scan_state.c ****  * This file is part of Project Ubertooth.
   6:src/btphy/page_scan_state.c ****  *
   7:src/btphy/page_scan_state.c ****  * This program is free software; you can redistribute it and/or modify
   8:src/btphy/page_scan_state.c ****  * it under the terms of the GNU General Public License as published by
   9:src/btphy/page_scan_state.c ****  * the Free Software Foundation; either version 2, or (at your option)
  10:src/btphy/page_scan_state.c ****  * any later version.
  11:src/btphy/page_scan_state.c ****  *
  12:src/btphy/page_scan_state.c ****  * This program is distributed in the hope that it will be useful,
  13:src/btphy/page_scan_state.c ****  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  14:src/btphy/page_scan_state.c ****  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  15:src/btphy/page_scan_state.c ****  * GNU General Public License for more details.
  16:src/btphy/page_scan_state.c ****  *
  17:src/btphy/page_scan_state.c ****  * You should have received a copy of the GNU General Public License
  18:src/btphy/page_scan_state.c ****  * along with this program; see the file COPYING.  If not, write to
  19:src/btphy/page_scan_state.c ****  * the Free Software Foundation, Inc., 51 Franklin Street,
  20:src/btphy/page_scan_state.c ****  * Boston, MA 02110-1301, USA.
  21:src/btphy/page_scan_state.c ****  */
  22:src/btphy/page_scan_state.c **** #include <stdlib.h>
  23:src/btphy/page_scan_state.c **** #include <ubtbr/cfg.h>
ARM GAS  /tmp/ccrSV1Te.s 			page 2


  24:src/btphy/page_scan_state.c **** #include <ubtbr/btctl_intf.h>
  25:src/btphy/page_scan_state.c **** #include <ubtbr/btphy.h>
  26:src/btphy/page_scan_state.c **** #include <ubtbr/bb.h>
  27:src/btphy/page_scan_state.c **** #include <ubtbr/tdma_sched.h>
  28:src/btphy/page_scan_state.c **** #include <ubtbr/scan_task.h>
  29:src/btphy/page_scan_state.c **** #include <ubtbr/rx_task.h>
  30:src/btphy/page_scan_state.c **** #include <ubtbr/tx_task.h>
  31:src/btphy/page_scan_state.c **** #include <ubtbr/slave_state.h>
  32:src/btphy/page_scan_state.c **** 
  33:src/btphy/page_scan_state.c **** #define PAGE_SCAN_MAX_TICKS (CLKN_RATE*60)
  34:src/btphy/page_scan_state.c **** #define TX_PREPARE_IDX	1  // We will transmit at clkn1_0 = 2
  35:src/btphy/page_scan_state.c **** 
  36:src/btphy/page_scan_state.c **** struct {
  37:src/btphy/page_scan_state.c **** 	fhs_info_t fhs_info;
  38:src/btphy/page_scan_state.c **** 	uint32_t clkn_start;
  39:src/btphy/page_scan_state.c **** } page_scan_state;
  40:src/btphy/page_scan_state.c **** 
  41:src/btphy/page_scan_state.c **** static void page_scan_schedule(unsigned delay);
  42:src/btphy/page_scan_state.c **** 
  43:src/btphy/page_scan_state.c **** static int page_scan_canceled(void)
  44:src/btphy/page_scan_state.c **** {
  45:src/btphy/page_scan_state.c **** 	return btctl_get_state() != BTCTL_STATE_PAGE_SCAN;
  46:src/btphy/page_scan_state.c **** }
  47:src/btphy/page_scan_state.c **** 
  48:src/btphy/page_scan_state.c **** static void page_scan_tx_cb(void *arg)
  49:src/btphy/page_scan_state.c **** {
  32              		.loc 1 49 1 view -0
  33              		.cfi_startproc
  34              		@ args = 0, pretend = 0, frame = 0
  35              		@ frame_needed = 0, uses_anonymous_args = 0
  36              		.loc 1 49 1 is_stmt 0 view .LVU1
  37 0000 10B5     		push	{r4, lr}
  38              		.cfi_def_cfa_offset 8
  39              		.cfi_offset 4, -8
  40              		.cfi_offset 14, -4
  41 0002 82B0     		sub	sp, sp, #8
  42              		.cfi_def_cfa_offset 16
  50:src/btphy/page_scan_state.c **** 	cprintf("fhs: ba=%llx clk27_2=%x lta=%d\n",
  43              		.loc 1 50 2 is_stmt 1 view .LVU2
  44 0004 084C     		ldr	r4, .L3
  45 0006 0948     		ldr	r0, .L3+4
  46              	.LVL1:
  47              		.loc 1 50 2 is_stmt 0 view .LVU3
  48 0008 227B     		ldrb	r2, [r4, #12]	@ zero_extendqisi2
  49 000a A368     		ldr	r3, [r4, #8]
  50 000c CDE90032 		strd	r3, r2, [sp]
  51 0010 D4E90023 		ldrd	r2, [r4]
  52 0014 FFF7FEFF 		bl	cprintf
  53              	.LVL2:
  51:src/btphy/page_scan_state.c **** 		page_scan_state.fhs_info.bdaddr,
  52:src/btphy/page_scan_state.c **** 		page_scan_state.fhs_info.clk27_2,
  53:src/btphy/page_scan_state.c **** 		page_scan_state.fhs_info.lt_addr);
  54:src/btphy/page_scan_state.c **** 
  55:src/btphy/page_scan_state.c **** 	slave_state_init(page_scan_state.fhs_info.bdaddr,
  54              		.loc 1 55 2 is_stmt 1 view .LVU4
  55 0018 D4E90001 		ldrd	r0, [r4]
  56 001c 227B     		ldrb	r2, [r4, #12]	@ zero_extendqisi2
ARM GAS  /tmp/ccrSV1Te.s 			page 3


  56:src/btphy/page_scan_state.c **** 			page_scan_state.fhs_info.lt_addr);
  57:src/btphy/page_scan_state.c **** }
  57              		.loc 1 57 1 is_stmt 0 view .LVU5
  58 001e 02B0     		add	sp, sp, #8
  59              		.cfi_def_cfa_offset 8
  60              		@ sp needed
  61 0020 BDE81040 		pop	{r4, lr}
  62              		.cfi_restore 14
  63              		.cfi_restore 4
  64              		.cfi_def_cfa_offset 0
  55:src/btphy/page_scan_state.c **** 			page_scan_state.fhs_info.lt_addr);
  65              		.loc 1 55 2 view .LVU6
  66 0024 FFF7FEBF 		b	slave_state_init
  67              	.LVL3:
  68              	.L4:
  69              		.align	2
  70              	.L3:
  71 0028 00000000 		.word	page_scan_state
  72 002c 00000000 		.word	.LC0
  73              		.cfi_endproc
  74              	.LFE32:
  76              		.section	.rodata.str1.4
  77              		.align	2
  78              	.LC1:
  79 0020 70616765 		.ascii	"page scan canceled\012\000"
  79      20736361 
  79      6E206361 
  79      6E63656C 
  79      65640A00 
  80              		.align	2
  81              	.LC2:
  82 0034 28626164 		.ascii	"(bad type %d)\000"
  82      20747970 
  82      65202564 
  82      2900
  83 0042 0000     		.align	2
  84              	.LC3:
  85 0044 70616765 		.ascii	"page scan timeout\012\000"
  85      20736361 
  85      6E207469 
  85      6D656F75 
  85      740A00
  86              		.section	.text.page_scan_rx_fhs_cb,"ax",%progbits
  87              		.align	1
  88              		.p2align 2,,3
  89              		.syntax unified
  90              		.thumb
  91              		.thumb_func
  92              		.fpu softvfp
  94              	page_scan_rx_fhs_cb:
  95              	.LVL4:
  96              	.LFB33:
  58:src/btphy/page_scan_state.c **** 
  59:src/btphy/page_scan_state.c **** /* RX FHS cb */
  60:src/btphy/page_scan_state.c **** static int page_scan_rx_fhs_cb(msg_t *msg, void *arg, int time_offset)
  61:src/btphy/page_scan_state.c **** {
  97              		.loc 1 61 1 is_stmt 1 view -0
ARM GAS  /tmp/ccrSV1Te.s 			page 4


  98              		.cfi_startproc
  99              		@ args = 0, pretend = 0, frame = 0
 100              		@ frame_needed = 0, uses_anonymous_args = 0
 101              		.loc 1 61 1 is_stmt 0 view .LVU8
 102 0000 70B5     		push	{r4, r5, r6, lr}
 103              		.cfi_def_cfa_offset 16
 104              		.cfi_offset 4, -16
 105              		.cfi_offset 5, -12
 106              		.cfi_offset 6, -8
 107              		.cfi_offset 14, -4
 108 0002 82B0     		sub	sp, sp, #8
 109              		.cfi_def_cfa_offset 24
  62:src/btphy/page_scan_state.c **** 	btctl_hdr_t *h = (btctl_hdr_t*)msg->data;
 110              		.loc 1 62 2 is_stmt 1 view .LVU9
 111              	.LVL5:
  63:src/btphy/page_scan_state.c **** 	btctl_rx_pkt_t *pkt;
 112              		.loc 1 63 2 view .LVU10
  64:src/btphy/page_scan_state.c **** 
  65:src/btphy/page_scan_state.c **** 	if (page_scan_canceled())
 113              		.loc 1 65 2 view .LVU11
 114              	.LBB27:
 115              	.LBI27:
  43:src/btphy/page_scan_state.c **** {
 116              		.loc 1 43 12 view .LVU12
 117              	.LBE27:
  45:src/btphy/page_scan_state.c **** }
 118              		.loc 1 45 2 view .LVU13
 119              	.LBB30:
 120              	.LBB28:
 121              	.LBI28:
 122              		.file 2 "include/ubtbr/btctl_intf.h"
   1:include/ubtbr/btctl_intf.h **** #ifndef __BTCTL_INTF_H
   2:include/ubtbr/btctl_intf.h **** #define __BTCTL_INTF_H
   3:include/ubtbr/btctl_intf.h **** #include <ubtbr/bb_msg.h>
   4:include/ubtbr/btctl_intf.h **** #include <ubtbr/queue.h>
   5:include/ubtbr/btctl_intf.h **** #include <ubtbr/system.h>
   6:include/ubtbr/btctl_intf.h **** #include <ubertooth_interface.h>
   7:include/ubtbr/btctl_intf.h **** 
   8:include/ubtbr/btctl_intf.h **** typedef struct btctl_s {
   9:include/ubtbr/btctl_intf.h **** 	btctl_state_t state;
  10:include/ubtbr/btctl_intf.h **** 	msg_queue_t rx_q;
  11:include/ubtbr/btctl_intf.h **** 	msg_queue_t tx_q;
  12:include/ubtbr/btctl_intf.h **** 	msg_queue_t acl_tx_q;
  13:include/ubtbr/btctl_intf.h **** 	msg_t *eir_msg;
  14:include/ubtbr/btctl_intf.h **** 	btctl_tx_pkt_t *eir_pkt;
  15:include/ubtbr/btctl_intf.h **** } btctl_t;
  16:include/ubtbr/btctl_intf.h **** 
  17:include/ubtbr/btctl_intf.h **** extern btctl_t btctl;
  18:include/ubtbr/btctl_intf.h **** 
  19:include/ubtbr/btctl_intf.h **** void btctl_init(void);
  20:include/ubtbr/btctl_intf.h **** int btctl_work(void);
  21:include/ubtbr/btctl_intf.h **** 
  22:include/ubtbr/btctl_intf.h **** void btctl_set_state(btctl_state_t state, btctl_reason_t reason);
  23:include/ubtbr/btctl_intf.h **** 
  24:include/ubtbr/btctl_intf.h **** static inline btctl_state_t btctl_get_state(void)
 123              		.loc 2 24 29 view .LVU14
 124              	.LBB29:
ARM GAS  /tmp/ccrSV1Te.s 			page 5


  25:include/ubtbr/btctl_intf.h **** {
  26:include/ubtbr/btctl_intf.h **** 	return btctl.state;
 125              		.loc 2 26 2 view .LVU15
 126              		.loc 2 26 14 is_stmt 0 view .LVU16
 127 0004 2C4B     		ldr	r3, .L13
 128              	.LBE29:
 129              	.LBE28:
 130              	.LBE30:
  61:src/btphy/page_scan_state.c **** 	btctl_hdr_t *h = (btctl_hdr_t*)msg->data;
 131              		.loc 1 61 1 view .LVU17
 132 0006 0446     		mov	r4, r0
 133              		.loc 1 65 5 view .LVU18
 134 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 135 000a 052B     		cmp	r3, #5
 136 000c 24D1     		bne	.L11
  66:src/btphy/page_scan_state.c **** 	{
  67:src/btphy/page_scan_state.c **** 		cprintf("page scan canceled\n");
  68:src/btphy/page_scan_state.c **** 		goto end;
  69:src/btphy/page_scan_state.c **** 	}
  70:src/btphy/page_scan_state.c **** 	pkt = (btctl_rx_pkt_t *)h->data;
 137              		.loc 1 70 2 is_stmt 1 view .LVU19
 138              	.LVL6:
  71:src/btphy/page_scan_state.c **** 	if (BBPKT_GOOD_CRC(pkt))
 139              		.loc 1 71 2 view .LVU20
 140              		.loc 1 71 5 is_stmt 0 view .LVU21
 141 000e 427D     		ldrb	r2, [r0, #21]	@ zero_extendqisi2
 142              	.LVL7:
 143              		.loc 1 71 5 view .LVU22
 144 0010 12F00805 		ands	r5, r2, #8
 145 0014 0BD0     		beq	.L8
  72:src/btphy/page_scan_state.c **** 	{
  73:src/btphy/page_scan_state.c **** 		if (pkt->bb_hdr.type != BB_TYPE_FHS)
 146              		.loc 1 73 3 is_stmt 1 view .LVU23
 147              		.loc 1 73 18 is_stmt 0 view .LVU24
 148 0016 417E     		ldrb	r1, [r0, #25]	@ zero_extendqisi2
 149              	.LVL8:
 150              		.loc 1 73 6 view .LVU25
 151 0018 0229     		cmp	r1, #2
 152 001a 26D0     		beq	.L9
  74:src/btphy/page_scan_state.c **** 		{
  75:src/btphy/page_scan_state.c **** 			cprintf("(bad type %d)", pkt->bb_hdr.type);
 153              		.loc 1 75 4 is_stmt 1 view .LVU26
 154 001c 2748     		ldr	r0, .L13+4
 155              	.LVL9:
 156              		.loc 1 75 4 is_stmt 0 view .LVU27
 157 001e FFF7FEFF 		bl	cprintf
 158              	.LVL10:
  76:src/btphy/page_scan_state.c **** 			goto end;
 159              		.loc 1 76 4 is_stmt 1 view .LVU28
 160              	.L7:
  77:src/btphy/page_scan_state.c **** 		}
  78:src/btphy/page_scan_state.c **** 		// Parse fhs to get bdaddr/clkn/ltaddr
  79:src/btphy/page_scan_state.c **** 		bbpkt_decode_fhs(pkt->bt_data, &page_scan_state.fhs_info);
  80:src/btphy/page_scan_state.c **** 
  81:src/btphy/page_scan_state.c **** 
  82:src/btphy/page_scan_state.c **** 		// Set slave clkn
  83:src/btphy/page_scan_state.c **** 		btphy.slave_clkn = (page_scan_state.fhs_info.clk27_2<<2)
ARM GAS  /tmp/ccrSV1Te.s 			page 6


  84:src/btphy/page_scan_state.c **** 				 + (btphy.slave_clkn-pkt->clkn);
  85:src/btphy/page_scan_state.c **** 		
  86:src/btphy/page_scan_state.c **** 		/* Schedule TX ID(3)*/
  87:src/btphy/page_scan_state.c **** 		tx_task_schedule(3&(TX_PREPARE_IDX-CUR_SLAVE_SLOT_IDX()),
  88:src/btphy/page_scan_state.c **** 			page_scan_tx_cb, NULL,
  89:src/btphy/page_scan_state.c **** 			NULL, NULL); 	// no header / no payload
  90:src/btphy/page_scan_state.c **** 		
  91:src/btphy/page_scan_state.c **** 	}
  92:src/btphy/page_scan_state.c **** 	else{
  93:src/btphy/page_scan_state.c **** 		page_scan_schedule(0);
  94:src/btphy/page_scan_state.c **** 	}
  95:src/btphy/page_scan_state.c **** end:
  96:src/btphy/page_scan_state.c **** 	msg_free(msg);
 161              		.loc 1 96 2 view .LVU29
 162              	.LBB31:
 163              	.LBI31:
 164              		.file 3 "include/ubtbr/msg.h"
   1:include/ubtbr/msg.h **** #ifndef __DEF_MSG_H
   2:include/ubtbr/msg.h **** #define __DEF_MSG_H
   3:include/ubtbr/msg.h **** #include <stdint.h>
   4:include/ubtbr/msg.h **** 
   5:include/ubtbr/msg.h **** typedef struct msg_s {
   6:include/ubtbr/msg.h **** 	uint16_t len;
   7:include/ubtbr/msg.h **** 	uint16_t data_len;
   8:include/ubtbr/msg.h **** 	uint8_t *read;
   9:include/ubtbr/msg.h **** 	uint8_t *write;
  10:include/ubtbr/msg.h **** 	/* never move head */
  11:include/ubtbr/msg.h **** 	uint8_t data[0];
  12:include/ubtbr/msg.h **** } msg_t;
  13:include/ubtbr/msg.h **** 
  14:include/ubtbr/msg.h **** /* Allocate a msg_t wigh given room*/
  15:include/ubtbr/msg.h **** static inline msg_t *msg_alloc(unsigned size)
  16:include/ubtbr/msg.h **** {
  17:include/ubtbr/msg.h **** 	msg_t *msg = (msg_t*)btctl_mem_alloc(sizeof(msg_t)+size);
  18:include/ubtbr/msg.h **** 
  19:include/ubtbr/msg.h **** 	msg->write = msg->data;
  20:include/ubtbr/msg.h **** 	msg->read = msg->data;
  21:include/ubtbr/msg.h **** 	msg->data_len = size;
  22:include/ubtbr/msg.h **** 
  23:include/ubtbr/msg.h **** 	return msg;
  24:include/ubtbr/msg.h **** }
  25:include/ubtbr/msg.h **** 
  26:include/ubtbr/msg.h **** static inline void msg_free(msg_t *msg)
 165              		.loc 3 26 20 view .LVU30
 166              	.LBB32:
  27:include/ubtbr/msg.h **** {
  28:include/ubtbr/msg.h **** 	btctl_mem_free(msg);
 167              		.loc 3 28 2 view .LVU31
 168 0022 2046     		mov	r0, r4
 169 0024 FFF7FEFF 		bl	mem_pool_free
 170              	.LVL11:
 171              		.loc 3 28 2 is_stmt 0 view .LVU32
 172              	.LBE32:
 173              	.LBE31:
  97:src/btphy/page_scan_state.c **** 	return 0;
 174              		.loc 1 97 2 is_stmt 1 view .LVU33
  98:src/btphy/page_scan_state.c **** }
ARM GAS  /tmp/ccrSV1Te.s 			page 7


 175              		.loc 1 98 1 is_stmt 0 view .LVU34
 176 0028 0020     		movs	r0, #0
 177 002a 02B0     		add	sp, sp, #8
 178              		.cfi_remember_state
 179              		.cfi_def_cfa_offset 16
 180              		@ sp needed
 181 002c 70BD     		pop	{r4, r5, r6, pc}
 182              	.LVL12:
 183              	.L8:
 184              		.cfi_restore_state
  93:src/btphy/page_scan_state.c **** 	}
 185              		.loc 1 93 3 is_stmt 1 view .LVU35
 186              	.LBB36:
 187              	.LBI36:
  99:src/btphy/page_scan_state.c **** 
 100:src/btphy/page_scan_state.c **** /* RX ID(1) cb */
 101:src/btphy/page_scan_state.c **** static void page_scan_rx_id_cb(int sw_detected, void *arg)
 102:src/btphy/page_scan_state.c **** {
 103:src/btphy/page_scan_state.c **** 	unsigned delay;
 104:src/btphy/page_scan_state.c **** 	if(page_scan_canceled())
 105:src/btphy/page_scan_state.c **** 	{
 106:src/btphy/page_scan_state.c **** 		cprintf("page scan canceled\n");
 107:src/btphy/page_scan_state.c **** 		return;
 108:src/btphy/page_scan_state.c **** 	}
 109:src/btphy/page_scan_state.c **** 	if (sw_detected)
 110:src/btphy/page_scan_state.c **** 	{
 111:src/btphy/page_scan_state.c **** 		/* we should be at slave_clk = 0, prepare in one slot*/
 112:src/btphy/page_scan_state.c **** 		console_putc('!');
 113:src/btphy/page_scan_state.c **** 		/* Schedule TX ID(2) */
 114:src/btphy/page_scan_state.c **** 		delay = 3&(TX_PREPARE_IDX-CUR_SLAVE_SLOT_IDX());
 115:src/btphy/page_scan_state.c **** 		tx_task_schedule(delay,
 116:src/btphy/page_scan_state.c **** 			NULL, NULL,	// no tx callback
 117:src/btphy/page_scan_state.c **** 			NULL, NULL); 	// no header / no payload
 118:src/btphy/page_scan_state.c **** 
 119:src/btphy/page_scan_state.c **** 		/* Schedule rx FHS */
 120:src/btphy/page_scan_state.c **** 		rx_task_schedule(delay+2,
 121:src/btphy/page_scan_state.c **** 			page_scan_rx_fhs_cb, NULL,	// ID rx callback
 122:src/btphy/page_scan_state.c **** 			1<<RX_F_PAYLOAD			// FHS packet has payload
 123:src/btphy/page_scan_state.c **** 			);
 124:src/btphy/page_scan_state.c **** 	}
 125:src/btphy/page_scan_state.c **** 	else
 126:src/btphy/page_scan_state.c **** 	{
 127:src/btphy/page_scan_state.c **** 		page_scan_schedule(0);
 128:src/btphy/page_scan_state.c **** 	}
 129:src/btphy/page_scan_state.c **** }
 130:src/btphy/page_scan_state.c **** 
 131:src/btphy/page_scan_state.c **** static void page_scan_schedule(unsigned delay)
 188              		.loc 1 131 13 view .LVU36
 189              	.LBB37:
 132:src/btphy/page_scan_state.c **** {
 133:src/btphy/page_scan_state.c **** 	if (MASTER_CLKN >= page_scan_state.clkn_start + PAGE_SCAN_MAX_TICKS)
 190              		.loc 1 133 2 view .LVU37
 191              		.loc 1 133 36 is_stmt 0 view .LVU38
 192 002e 244B     		ldr	r3, .L13+8
 193              		.loc 1 133 6 view .LVU39
 194 0030 244A     		ldr	r2, .L13+12
 195              		.loc 1 133 48 view .LVU40
ARM GAS  /tmp/ccrSV1Te.s 			page 8


 196 0032 1B69     		ldr	r3, [r3, #16]
 197              		.loc 1 133 6 view .LVU41
 198 0034 1268     		ldr	r2, [r2]
 199              		.loc 1 133 48 view .LVU42
 200 0036 03F53B33 		add	r3, r3, #191488
 201 003a 03F50073 		add	r3, r3, #512
 202              		.loc 1 133 5 view .LVU43
 203 003e 9A42     		cmp	r2, r3
 204 0040 31D2     		bcs	.L12
 134:src/btphy/page_scan_state.c **** 	{
 135:src/btphy/page_scan_state.c **** 		cprintf("page scan timeout\n");
 136:src/btphy/page_scan_state.c **** 		btctl_set_state(BTCTL_STATE_STANDBY, BTCTL_REASON_TIMEOUT);
 137:src/btphy/page_scan_state.c **** 		return;
 138:src/btphy/page_scan_state.c **** 	}
 139:src/btphy/page_scan_state.c **** 	scan_task_schedule(delay, page_scan_rx_id_cb, NULL);
 205              		.loc 1 139 2 is_stmt 1 view .LVU44
 206 0042 2A46     		mov	r2, r5
 207 0044 2846     		mov	r0, r5
 208              	.LVL13:
 209              		.loc 1 139 2 is_stmt 0 view .LVU45
 210 0046 2049     		ldr	r1, .L13+16
 211              	.LVL14:
 212              		.loc 1 139 2 view .LVU46
 213 0048 FFF7FEFF 		bl	scan_task_schedule
 214              	.LVL15:
 215              		.loc 1 139 2 view .LVU47
 216              	.LBE37:
 217              	.LBE36:
  96:src/btphy/page_scan_state.c **** 	return 0;
 218              		.loc 1 96 2 is_stmt 1 view .LVU48
 219              	.LBB41:
  26:include/ubtbr/msg.h **** {
 220              		.loc 3 26 20 view .LVU49
 221              	.LBB33:
 222              		.loc 3 28 2 view .LVU50
 223 004c 2046     		mov	r0, r4
 224 004e FFF7FEFF 		bl	mem_pool_free
 225              	.LVL16:
 226              		.loc 3 28 2 is_stmt 0 view .LVU51
 227              	.LBE33:
 228              	.LBE41:
  97:src/btphy/page_scan_state.c **** }
 229              		.loc 1 97 2 is_stmt 1 view .LVU52
  98:src/btphy/page_scan_state.c **** 
 230              		.loc 1 98 1 is_stmt 0 view .LVU53
 231 0052 0020     		movs	r0, #0
 232 0054 02B0     		add	sp, sp, #8
 233              		.cfi_remember_state
 234              		.cfi_def_cfa_offset 16
 235              		@ sp needed
 236 0056 70BD     		pop	{r4, r5, r6, pc}
 237              	.LVL17:
 238              	.L11:
 239              		.cfi_restore_state
  67:src/btphy/page_scan_state.c **** 		goto end;
 240              		.loc 1 67 3 is_stmt 1 view .LVU54
 241 0058 1C48     		ldr	r0, .L13+20
ARM GAS  /tmp/ccrSV1Te.s 			page 9


 242              	.LVL18:
  67:src/btphy/page_scan_state.c **** 		goto end;
 243              		.loc 1 67 3 is_stmt 0 view .LVU55
 244 005a FFF7FEFF 		bl	cprintf
 245              	.LVL19:
  68:src/btphy/page_scan_state.c **** 	}
 246              		.loc 1 68 3 is_stmt 1 view .LVU56
  96:src/btphy/page_scan_state.c **** 	return 0;
 247              		.loc 1 96 2 view .LVU57
 248              	.LBB42:
  26:include/ubtbr/msg.h **** {
 249              		.loc 3 26 20 view .LVU58
 250              	.LBB34:
 251              		.loc 3 28 2 view .LVU59
 252 005e 2046     		mov	r0, r4
 253 0060 FFF7FEFF 		bl	mem_pool_free
 254              	.LVL20:
 255              		.loc 3 28 2 is_stmt 0 view .LVU60
 256              	.LBE34:
 257              	.LBE42:
  97:src/btphy/page_scan_state.c **** }
 258              		.loc 1 97 2 is_stmt 1 view .LVU61
  98:src/btphy/page_scan_state.c **** 
 259              		.loc 1 98 1 is_stmt 0 view .LVU62
 260 0064 0020     		movs	r0, #0
 261 0066 02B0     		add	sp, sp, #8
 262              		.cfi_remember_state
 263              		.cfi_def_cfa_offset 16
 264              		@ sp needed
 265 0068 70BD     		pop	{r4, r5, r6, pc}
 266              	.LVL21:
 267              	.L9:
 268              		.cfi_restore_state
  79:src/btphy/page_scan_state.c **** 
 269              		.loc 1 79 3 is_stmt 1 view .LVU63
 270 006a 154E     		ldr	r6, .L13+8
 271 006c 1C30     		adds	r0, r0, #28
 272              	.LVL22:
  79:src/btphy/page_scan_state.c **** 
 273              		.loc 1 79 3 is_stmt 0 view .LVU64
 274 006e 3146     		mov	r1, r6
 275 0070 FFF7FEFF 		bl	bbpkt_decode_fhs
 276              	.LVL23:
  83:src/btphy/page_scan_state.c **** 				 + (btphy.slave_clkn-pkt->clkn);
 277              		.loc 1 83 3 is_stmt 1 view .LVU65
  87:src/btphy/page_scan_state.c **** 			page_scan_tx_cb, NULL,
 278              		.loc 1 87 3 is_stmt 0 view .LVU66
 279 0074 0023     		movs	r3, #0
  84:src/btphy/page_scan_state.c **** 		
 280              		.loc 1 84 14 view .LVU67
 281 0076 164D     		ldr	r5, .L13+24
  83:src/btphy/page_scan_state.c **** 				 + (btphy.slave_clkn-pkt->clkn);
 282              		.loc 1 83 55 view .LVU68
 283 0078 B068     		ldr	r0, [r6, #8]
 284 007a AA68     		ldr	r2, [r5, #8]
  84:src/btphy/page_scan_state.c **** 		
 285              		.loc 1 84 29 view .LVU69
ARM GAS  /tmp/ccrSV1Te.s 			page 10


 286 007c 2169     		ldr	r1, [r4, #16]	@ unaligned
 287 007e 02EB8002 		add	r2, r2, r0, lsl #2
  87:src/btphy/page_scan_state.c **** 			page_scan_tx_cb, NULL,
 288              		.loc 1 87 21 view .LVU70
 289 0082 C2F10100 		rsb	r0, r2, #1
 290 0086 0844     		add	r0, r0, r1
  84:src/btphy/page_scan_state.c **** 		
 291              		.loc 1 84 6 view .LVU71
 292 0088 511A     		subs	r1, r2, r1
  87:src/btphy/page_scan_state.c **** 			page_scan_tx_cb, NULL,
 293              		.loc 1 87 3 view .LVU72
 294 008a 0093     		str	r3, [sp]
 295 008c 1A46     		mov	r2, r3
  83:src/btphy/page_scan_state.c **** 				 + (btphy.slave_clkn-pkt->clkn);
 296              		.loc 1 83 20 view .LVU73
 297 008e A960     		str	r1, [r5, #8]
  87:src/btphy/page_scan_state.c **** 			page_scan_tx_cb, NULL,
 298              		.loc 1 87 3 is_stmt 1 view .LVU74
 299 0090 00F00300 		and	r0, r0, #3
 300 0094 0F49     		ldr	r1, .L13+28
 301 0096 FFF7FEFF 		bl	tx_task_schedule
 302              	.LVL24:
  96:src/btphy/page_scan_state.c **** 	return 0;
 303              		.loc 1 96 2 view .LVU75
 304              	.LBB43:
  26:include/ubtbr/msg.h **** {
 305              		.loc 3 26 20 view .LVU76
 306              	.LBB35:
 307              		.loc 3 28 2 view .LVU77
 308 009a 2046     		mov	r0, r4
 309 009c FFF7FEFF 		bl	mem_pool_free
 310              	.LVL25:
 311              		.loc 3 28 2 is_stmt 0 view .LVU78
 312              	.LBE35:
 313              	.LBE43:
  97:src/btphy/page_scan_state.c **** }
 314              		.loc 1 97 2 is_stmt 1 view .LVU79
  98:src/btphy/page_scan_state.c **** 
 315              		.loc 1 98 1 is_stmt 0 view .LVU80
 316 00a0 0020     		movs	r0, #0
 317 00a2 02B0     		add	sp, sp, #8
 318              		.cfi_remember_state
 319              		.cfi_def_cfa_offset 16
 320              		@ sp needed
 321 00a4 70BD     		pop	{r4, r5, r6, pc}
 322              	.LVL26:
 323              	.L12:
 324              		.cfi_restore_state
 325              	.LBB44:
 326              	.LBB40:
 327              	.LBB38:
 328              	.LBI38:
 131:src/btphy/page_scan_state.c **** {
 329              		.loc 1 131 13 is_stmt 1 view .LVU81
 330              	.LBB39:
 135:src/btphy/page_scan_state.c **** 		btctl_set_state(BTCTL_STATE_STANDBY, BTCTL_REASON_TIMEOUT);
 331              		.loc 1 135 3 view .LVU82
ARM GAS  /tmp/ccrSV1Te.s 			page 11


 332 00a6 0C48     		ldr	r0, .L13+32
 333              	.LVL27:
 135:src/btphy/page_scan_state.c **** 		btctl_set_state(BTCTL_STATE_STANDBY, BTCTL_REASON_TIMEOUT);
 334              		.loc 1 135 3 is_stmt 0 view .LVU83
 335 00a8 FFF7FEFF 		bl	cprintf
 336              	.LVL28:
 136:src/btphy/page_scan_state.c **** 		return;
 337              		.loc 1 136 3 is_stmt 1 view .LVU84
 338 00ac 2846     		mov	r0, r5
 339 00ae 0121     		movs	r1, #1
 340 00b0 FFF7FEFF 		bl	btctl_set_state
 341              	.LVL29:
 137:src/btphy/page_scan_state.c **** 	}
 342              		.loc 1 137 3 view .LVU85
 343 00b4 B5E7     		b	.L7
 344              	.L14:
 345 00b6 00BF     		.align	2
 346              	.L13:
 347 00b8 00000000 		.word	btctl
 348 00bc 34000000 		.word	.LC2
 349 00c0 00000000 		.word	page_scan_state
 350 00c4 08800040 		.word	1073774600
 351 00c8 00000000 		.word	page_scan_rx_id_cb
 352 00cc 20000000 		.word	.LC1
 353 00d0 00000000 		.word	btphy
 354 00d4 00000000 		.word	page_scan_tx_cb
 355 00d8 44000000 		.word	.LC3
 356              	.LBE39:
 357              	.LBE38:
 358              	.LBE40:
 359              	.LBE44:
 360              		.cfi_endproc
 361              	.LFE33:
 363              		.section	.text.page_scan_rx_id_cb,"ax",%progbits
 364              		.align	1
 365              		.p2align 2,,3
 366              		.syntax unified
 367              		.thumb
 368              		.thumb_func
 369              		.fpu softvfp
 371              	page_scan_rx_id_cb:
 372              	.LVL30:
 373              	.LFB34:
 102:src/btphy/page_scan_state.c **** 	unsigned delay;
 374              		.loc 1 102 1 view -0
 375              		.cfi_startproc
 376              		@ args = 0, pretend = 0, frame = 0
 377              		@ frame_needed = 0, uses_anonymous_args = 0
 102:src/btphy/page_scan_state.c **** 	unsigned delay;
 378              		.loc 1 102 1 is_stmt 0 view .LVU87
 379 0000 30B5     		push	{r4, r5, lr}
 380              		.cfi_def_cfa_offset 12
 381              		.cfi_offset 4, -12
 382              		.cfi_offset 5, -8
 383              		.cfi_offset 14, -4
 384 0002 83B0     		sub	sp, sp, #12
 385              		.cfi_def_cfa_offset 24
ARM GAS  /tmp/ccrSV1Te.s 			page 12


 103:src/btphy/page_scan_state.c **** 	if(page_scan_canceled())
 386              		.loc 1 103 2 is_stmt 1 view .LVU88
 104:src/btphy/page_scan_state.c **** 	{
 387              		.loc 1 104 2 view .LVU89
 388              	.LBB58:
 389              	.LBI58:
  43:src/btphy/page_scan_state.c **** {
 390              		.loc 1 43 12 view .LVU90
 391              	.LBE58:
  45:src/btphy/page_scan_state.c **** }
 392              		.loc 1 45 2 view .LVU91
 393              	.LBB61:
 394              	.LBB59:
 395              	.LBI59:
  24:include/ubtbr/btctl_intf.h **** {
 396              		.loc 2 24 29 view .LVU92
 397              	.LBB60:
 398              		.loc 2 26 2 view .LVU93
 399              		.loc 2 26 14 is_stmt 0 view .LVU94
 400 0004 204B     		ldr	r3, .L22
 401              	.LBE60:
 402              	.LBE59:
 403              	.LBE61:
 102:src/btphy/page_scan_state.c **** 	unsigned delay;
 404              		.loc 1 102 1 view .LVU95
 405 0006 0446     		mov	r4, r0
 104:src/btphy/page_scan_state.c **** 	{
 406              		.loc 1 104 4 view .LVU96
 407 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 408 000a 052B     		cmp	r3, #5
 409 000c 2BD1     		bne	.L19
 109:src/btphy/page_scan_state.c **** 	{
 410              		.loc 1 109 2 is_stmt 1 view .LVU97
 109:src/btphy/page_scan_state.c **** 	{
 411              		.loc 1 109 5 is_stmt 0 view .LVU98
 412 000e 80B9     		cbnz	r0, .L20
 127:src/btphy/page_scan_state.c **** 	}
 413              		.loc 1 127 3 is_stmt 1 view .LVU99
 414              	.LVL31:
 415              	.LBB62:
 416              	.LBI62:
 131:src/btphy/page_scan_state.c **** {
 417              		.loc 1 131 13 view .LVU100
 418              	.LBB63:
 133:src/btphy/page_scan_state.c **** 	{
 419              		.loc 1 133 2 view .LVU101
 133:src/btphy/page_scan_state.c **** 	{
 420              		.loc 1 133 36 is_stmt 0 view .LVU102
 421 0010 1E4B     		ldr	r3, .L22+4
 133:src/btphy/page_scan_state.c **** 	{
 422              		.loc 1 133 6 view .LVU103
 423 0012 1F4A     		ldr	r2, .L22+8
 133:src/btphy/page_scan_state.c **** 	{
 424              		.loc 1 133 48 view .LVU104
 425 0014 1B69     		ldr	r3, [r3, #16]
 133:src/btphy/page_scan_state.c **** 	{
 426              		.loc 1 133 6 view .LVU105
ARM GAS  /tmp/ccrSV1Te.s 			page 13


 427 0016 1268     		ldr	r2, [r2]
 133:src/btphy/page_scan_state.c **** 	{
 428              		.loc 1 133 48 view .LVU106
 429 0018 03F53B33 		add	r3, r3, #191488
 430 001c 03F50073 		add	r3, r3, #512
 133:src/btphy/page_scan_state.c **** 	{
 431              		.loc 1 133 5 view .LVU107
 432 0020 9A42     		cmp	r2, r3
 433 0022 26D2     		bcs	.L21
 434              		.loc 1 139 2 is_stmt 1 view .LVU108
 435 0024 0246     		mov	r2, r0
 436 0026 1B49     		ldr	r1, .L22+12
 437              	.LVL32:
 438              		.loc 1 139 2 is_stmt 0 view .LVU109
 439              	.LBE63:
 440              	.LBE62:
 129:src/btphy/page_scan_state.c **** 
 441              		.loc 1 129 1 view .LVU110
 442 0028 03B0     		add	sp, sp, #12
 443              		.cfi_remember_state
 444              		.cfi_def_cfa_offset 12
 445              		@ sp needed
 446 002a BDE83040 		pop	{r4, r5, lr}
 447              		.cfi_restore 14
 448              		.cfi_restore 5
 449              		.cfi_restore 4
 450              		.cfi_def_cfa_offset 0
 451              	.LBB71:
 452              	.LBB68:
 453              		.loc 1 139 2 view .LVU111
 454 002e FFF7FEBF 		b	scan_task_schedule
 455              	.LVL33:
 456              	.L20:
 457              		.cfi_restore_state
 458              		.loc 1 139 2 view .LVU112
 459              	.LBE68:
 460              	.LBE71:
 461              	.LBB72:
 462              	.LBI72:
 101:src/btphy/page_scan_state.c **** {
 463              		.loc 1 101 13 is_stmt 1 view .LVU113
 464              	.LBB73:
 112:src/btphy/page_scan_state.c **** 		/* Schedule TX ID(2) */
 465              		.loc 1 112 3 view .LVU114
 115:src/btphy/page_scan_state.c **** 			NULL, NULL,	// no tx callback
 466              		.loc 1 115 3 is_stmt 0 view .LVU115
 467 0032 0025     		movs	r5, #0
 112:src/btphy/page_scan_state.c **** 		/* Schedule TX ID(2) */
 468              		.loc 1 112 3 view .LVU116
 469 0034 2120     		movs	r0, #33
 470              	.LVL34:
 112:src/btphy/page_scan_state.c **** 		/* Schedule TX ID(2) */
 471              		.loc 1 112 3 view .LVU117
 472 0036 FFF7FEFF 		bl	console_putc
 473              	.LVL35:
 114:src/btphy/page_scan_state.c **** 		tx_task_schedule(delay,
 474              		.loc 1 114 3 is_stmt 1 view .LVU118
ARM GAS  /tmp/ccrSV1Te.s 			page 14


 114:src/btphy/page_scan_state.c **** 		tx_task_schedule(delay,
 475              		.loc 1 114 29 is_stmt 0 view .LVU119
 476 003a 174B     		ldr	r3, .L22+16
 115:src/btphy/page_scan_state.c **** 			NULL, NULL,	// no tx callback
 477              		.loc 1 115 3 view .LVU120
 478 003c 0095     		str	r5, [sp]
 114:src/btphy/page_scan_state.c **** 		tx_task_schedule(delay,
 479              		.loc 1 114 12 view .LVU121
 480 003e 9C68     		ldr	r4, [r3, #8]
 481              	.LVL36:
 115:src/btphy/page_scan_state.c **** 			NULL, NULL,	// no tx callback
 482              		.loc 1 115 3 view .LVU122
 483 0040 2A46     		mov	r2, r5
 114:src/btphy/page_scan_state.c **** 		tx_task_schedule(delay,
 484              		.loc 1 114 12 view .LVU123
 485 0042 C4F10104 		rsb	r4, r4, #1
 114:src/btphy/page_scan_state.c **** 		tx_task_schedule(delay,
 486              		.loc 1 114 9 view .LVU124
 487 0046 04F00304 		and	r4, r4, #3
 488              	.LVL37:
 115:src/btphy/page_scan_state.c **** 			NULL, NULL,	// no tx callback
 489              		.loc 1 115 3 is_stmt 1 view .LVU125
 490 004a 2B46     		mov	r3, r5
 491 004c 2046     		mov	r0, r4
 492 004e 2946     		mov	r1, r5
 493 0050 FFF7FEFF 		bl	tx_task_schedule
 494              	.LVL38:
 120:src/btphy/page_scan_state.c **** 			page_scan_rx_fhs_cb, NULL,	// ID rx callback
 495              		.loc 1 120 3 view .LVU126
 496 0054 2A46     		mov	r2, r5
 497 0056 0123     		movs	r3, #1
 498 0058 1049     		ldr	r1, .L22+20
 499 005a A01C     		adds	r0, r4, #2
 500              	.LBE73:
 501              	.LBE72:
 129:src/btphy/page_scan_state.c **** 
 502              		.loc 1 129 1 is_stmt 0 view .LVU127
 503 005c 03B0     		add	sp, sp, #12
 504              		.cfi_remember_state
 505              		.cfi_def_cfa_offset 12
 506              		@ sp needed
 507 005e BDE83040 		pop	{r4, r5, lr}
 508              		.cfi_restore 14
 509              		.cfi_restore 5
 510              		.cfi_restore 4
 511              		.cfi_def_cfa_offset 0
 512              	.LVL39:
 513              	.LBB75:
 514              	.LBB74:
 120:src/btphy/page_scan_state.c **** 			page_scan_rx_fhs_cb, NULL,	// ID rx callback
 515              		.loc 1 120 3 view .LVU128
 516 0062 FFF7FEBF 		b	rx_task_schedule
 517              	.LVL40:
 518              	.L19:
 519              		.cfi_restore_state
 120:src/btphy/page_scan_state.c **** 			page_scan_rx_fhs_cb, NULL,	// ID rx callback
 520              		.loc 1 120 3 view .LVU129
ARM GAS  /tmp/ccrSV1Te.s 			page 15


 521              	.LBE74:
 522              	.LBE75:
 106:src/btphy/page_scan_state.c **** 		return;
 523              		.loc 1 106 3 is_stmt 1 view .LVU130
 524 0066 0E48     		ldr	r0, .L22+24
 525              	.LVL41:
 129:src/btphy/page_scan_state.c **** 
 526              		.loc 1 129 1 is_stmt 0 view .LVU131
 527 0068 03B0     		add	sp, sp, #12
 528              		.cfi_remember_state
 529              		.cfi_def_cfa_offset 12
 530              		@ sp needed
 531 006a BDE83040 		pop	{r4, r5, lr}
 532              		.cfi_restore 14
 533              		.cfi_restore 5
 534              		.cfi_restore 4
 535              		.cfi_def_cfa_offset 0
 536              	.LVL42:
 106:src/btphy/page_scan_state.c **** 		return;
 537              		.loc 1 106 3 view .LVU132
 538 006e FFF7FEBF 		b	cprintf
 539              	.LVL43:
 540              	.L21:
 541              		.cfi_restore_state
 542              	.LBB76:
 543              	.LBB69:
 544              	.LBB64:
 545              	.LBI64:
 131:src/btphy/page_scan_state.c **** {
 546              		.loc 1 131 13 is_stmt 1 view .LVU133
 547              	.LBB65:
 135:src/btphy/page_scan_state.c **** 		btctl_set_state(BTCTL_STATE_STANDBY, BTCTL_REASON_TIMEOUT);
 548              		.loc 1 135 3 view .LVU134
 549 0072 0C48     		ldr	r0, .L22+28
 550              	.LVL44:
 135:src/btphy/page_scan_state.c **** 		btctl_set_state(BTCTL_STATE_STANDBY, BTCTL_REASON_TIMEOUT);
 551              		.loc 1 135 3 is_stmt 0 view .LVU135
 552 0074 FFF7FEFF 		bl	cprintf
 553              	.LVL45:
 136:src/btphy/page_scan_state.c **** 		return;
 554              		.loc 1 136 3 is_stmt 1 view .LVU136
 555 0078 2046     		mov	r0, r4
 556 007a 0121     		movs	r1, #1
 557              	.LBE65:
 558              	.LBE64:
 559              	.LBE69:
 560              	.LBE76:
 129:src/btphy/page_scan_state.c **** 
 561              		.loc 1 129 1 is_stmt 0 view .LVU137
 562 007c 03B0     		add	sp, sp, #12
 563              		.cfi_def_cfa_offset 12
 564              		@ sp needed
 565 007e BDE83040 		pop	{r4, r5, lr}
 566              		.cfi_restore 14
 567              		.cfi_restore 5
 568              		.cfi_restore 4
 569              		.cfi_def_cfa_offset 0
ARM GAS  /tmp/ccrSV1Te.s 			page 16


 570              	.LVL46:
 571              	.LBB77:
 572              	.LBB70:
 573              	.LBB67:
 574              	.LBB66:
 136:src/btphy/page_scan_state.c **** 		return;
 575              		.loc 1 136 3 view .LVU138
 576 0082 FFF7FEBF 		b	btctl_set_state
 577              	.LVL47:
 578              	.L23:
 136:src/btphy/page_scan_state.c **** 		return;
 579              		.loc 1 136 3 view .LVU139
 580 0086 00BF     		.align	2
 581              	.L22:
 582 0088 00000000 		.word	btctl
 583 008c 00000000 		.word	page_scan_state
 584 0090 08800040 		.word	1073774600
 585 0094 00000000 		.word	page_scan_rx_id_cb
 586 0098 00000000 		.word	btphy
 587 009c 00000000 		.word	page_scan_rx_fhs_cb
 588 00a0 20000000 		.word	.LC1
 589 00a4 44000000 		.word	.LC3
 590              	.LBE66:
 591              	.LBE67:
 592              	.LBE70:
 593              	.LBE77:
 594              		.cfi_endproc
 595              	.LFE34:
 597              		.section	.text.page_scan_state_setup,"ax",%progbits
 598              		.align	1
 599              		.p2align 2,,3
 600              		.global	page_scan_state_setup
 601              		.syntax unified
 602              		.thumb
 603              		.thumb_func
 604              		.fpu softvfp
 606              	page_scan_state_setup:
 607              	.LFB36:
 140:src/btphy/page_scan_state.c **** }
 141:src/btphy/page_scan_state.c **** 
 142:src/btphy/page_scan_state.c **** /*
 143:src/btphy/page_scan_state.c ****  * Page slave
 144:src/btphy/page_scan_state.c ****  */
 145:src/btphy/page_scan_state.c **** void page_scan_state_setup(void)
 146:src/btphy/page_scan_state.c **** {
 608              		.loc 1 146 1 is_stmt 1 view -0
 609              		.cfi_startproc
 610              		@ args = 0, pretend = 0, frame = 0
 611              		@ frame_needed = 0, uses_anonymous_args = 0
 612 0000 08B5     		push	{r3, lr}
 613              		.cfi_def_cfa_offset 8
 614              		.cfi_offset 3, -8
 615              		.cfi_offset 14, -4
 147:src/btphy/page_scan_state.c **** 	btphy_set_mode(BT_MODE_PAGE_SCAN, btphy.my_lap, btphy.my_uap);
 616              		.loc 1 147 2 view .LVU141
 617 0002 134B     		ldr	r3, .L27
 618 0004 0320     		movs	r0, #3
ARM GAS  /tmp/ccrSV1Te.s 			page 17


 619 0006 93F83820 		ldrb	r2, [r3, #56]	@ zero_extendqisi2
 620 000a 596B     		ldr	r1, [r3, #52]
 621 000c FFF7FEFF 		bl	btphy_set_mode
 622              	.LVL48:
 148:src/btphy/page_scan_state.c **** 	btctl_set_state(BTCTL_STATE_PAGE_SCAN, BTCTL_REASON_SUCCESS);
 623              		.loc 1 148 2 view .LVU142
 624 0010 0021     		movs	r1, #0
 625 0012 0520     		movs	r0, #5
 626 0014 FFF7FEFF 		bl	btctl_set_state
 627              	.LVL49:
 149:src/btphy/page_scan_state.c **** 	page_scan_state.clkn_start = MASTER_CLKN+1;
 628              		.loc 1 149 2 view .LVU143
 629              		.loc 1 149 31 is_stmt 0 view .LVU144
 630 0018 0E4A     		ldr	r2, .L27+4
 631              		.loc 1 149 29 view .LVU145
 632 001a 0F48     		ldr	r0, .L27+8
 633              		.loc 1 149 31 view .LVU146
 634 001c 1368     		ldr	r3, [r2]
 635              	.LBB82:
 636              	.LBB83:
 133:src/btphy/page_scan_state.c **** 	{
 637              		.loc 1 133 6 view .LVU147
 638 001e 1168     		ldr	r1, [r2]
 133:src/btphy/page_scan_state.c **** 	{
 639              		.loc 1 133 48 view .LVU148
 640 0020 03F53B32 		add	r2, r3, #191488
 641 0024 02F20122 		addw	r2, r2, #513
 642              	.LBE83:
 643              	.LBE82:
 644              		.loc 1 149 42 view .LVU149
 645 0028 0133     		adds	r3, r3, #1
 646              	.LBB92:
 647              	.LBB88:
 133:src/btphy/page_scan_state.c **** 	{
 648              		.loc 1 133 5 view .LVU150
 649 002a 9142     		cmp	r1, r2
 650              	.LBE88:
 651              	.LBE92:
 652              		.loc 1 149 29 view .LVU151
 653 002c 0361     		str	r3, [r0, #16]
 150:src/btphy/page_scan_state.c **** 	page_scan_schedule(1);
 654              		.loc 1 150 2 is_stmt 1 view .LVU152
 655              	.LVL50:
 656              	.LBB93:
 657              	.LBI82:
 131:src/btphy/page_scan_state.c **** {
 658              		.loc 1 131 13 view .LVU153
 659              	.LBB89:
 133:src/btphy/page_scan_state.c **** 	{
 660              		.loc 1 133 2 view .LVU154
 133:src/btphy/page_scan_state.c **** 	{
 661              		.loc 1 133 5 is_stmt 0 view .LVU155
 662 002e 06D2     		bcs	.L26
 139:src/btphy/page_scan_state.c **** }
 663              		.loc 1 139 2 is_stmt 1 view .LVU156
 664              	.LBE89:
 665              	.LBE93:
ARM GAS  /tmp/ccrSV1Te.s 			page 18


 151:src/btphy/page_scan_state.c **** }
 666              		.loc 1 151 1 is_stmt 0 view .LVU157
 667 0030 BDE80840 		pop	{r3, lr}
 668              		.cfi_remember_state
 669              		.cfi_restore 14
 670              		.cfi_restore 3
 671              		.cfi_def_cfa_offset 0
 672              	.LBB94:
 673              	.LBB90:
 139:src/btphy/page_scan_state.c **** }
 674              		.loc 1 139 2 view .LVU158
 675 0034 0022     		movs	r2, #0
 676 0036 0120     		movs	r0, #1
 677 0038 0849     		ldr	r1, .L27+12
 678 003a FFF7FEBF 		b	scan_task_schedule
 679              	.LVL51:
 680              	.L26:
 681              		.cfi_restore_state
 682              	.LBB84:
 683              	.LBI84:
 131:src/btphy/page_scan_state.c **** {
 684              		.loc 1 131 13 is_stmt 1 view .LVU159
 685              	.LBB85:
 135:src/btphy/page_scan_state.c **** 		btctl_set_state(BTCTL_STATE_STANDBY, BTCTL_REASON_TIMEOUT);
 686              		.loc 1 135 3 view .LVU160
 687 003e 0848     		ldr	r0, .L27+16
 688 0040 FFF7FEFF 		bl	cprintf
 689              	.LVL52:
 136:src/btphy/page_scan_state.c **** 		return;
 690              		.loc 1 136 3 view .LVU161
 691              	.LBE85:
 692              	.LBE84:
 693              	.LBE90:
 694              	.LBE94:
 695              		.loc 1 151 1 is_stmt 0 view .LVU162
 696 0044 BDE80840 		pop	{r3, lr}
 697              		.cfi_restore 14
 698              		.cfi_restore 3
 699              		.cfi_def_cfa_offset 0
 700              	.LBB95:
 701              	.LBB91:
 702              	.LBB87:
 703              	.LBB86:
 136:src/btphy/page_scan_state.c **** 		return;
 704              		.loc 1 136 3 view .LVU163
 705 0048 0121     		movs	r1, #1
 706 004a 0020     		movs	r0, #0
 707 004c FFF7FEBF 		b	btctl_set_state
 708              	.LVL53:
 709              	.L28:
 710              		.align	2
 711              	.L27:
 712 0050 00000000 		.word	btphy
 713 0054 08800040 		.word	1073774600
 714 0058 00000000 		.word	page_scan_state
 715 005c 00000000 		.word	page_scan_rx_id_cb
 716 0060 44000000 		.word	.LC3
ARM GAS  /tmp/ccrSV1Te.s 			page 19


 717              	.LBE86:
 718              	.LBE87:
 719              	.LBE91:
 720              	.LBE95:
 721              		.cfi_endproc
 722              	.LFE36:
 724              		.comm	page_scan_state,24,8
 725              		.text
 726              	.Letext0:
 727              		.file 4 "/usr/lib/gcc/arm-none-eabi/9.2.1/include/stddef.h"
 728              		.file 5 "/usr/include/newlib/sys/_types.h"
 729              		.file 6 "/usr/include/newlib/sys/reent.h"
 730              		.file 7 "/usr/include/newlib/sys/lock.h"
 731              		.file 8 "/usr/include/newlib/stdlib.h"
 732              		.file 9 "/usr/lib/gcc/arm-none-eabi/9.2.1/include/stdint.h"
 733              		.file 10 "../../host/libubertooth/src/ubertooth_interface.h"
 734              		.file 11 "../common/ubertooth.h"
 735              		.file 12 "include/ubtbr/queue.h"
 736              		.file 13 "include/ubtbr/btphy.h"
 737              		.file 14 "include/ubtbr/bb.h"
 738              		.file 15 "include/ubtbr/debug.h"
 739              		.file 16 "include/ubtbr/scan_task.h"
 740              		.file 17 "include/ubtbr/mem_pool.h"
 741              		.file 18 "include/ubtbr/tx_task.h"
 742              		.file 19 "include/ubtbr/slave_state.h"
 743              		.file 20 "include/ubtbr/console.h"
 744              		.file 21 "include/ubtbr/rx_task.h"
ARM GAS  /tmp/ccrSV1Te.s 			page 20


DEFINED SYMBOLS
                            *ABS*:0000000000000000 page_scan_state.c
     /tmp/ccrSV1Te.s:16     .rodata.str1.4:0000000000000000 $d
     /tmp/ccrSV1Te.s:20     .text.page_scan_tx_cb:0000000000000000 $t
     /tmp/ccrSV1Te.s:28     .text.page_scan_tx_cb:0000000000000000 page_scan_tx_cb
     /tmp/ccrSV1Te.s:71     .text.page_scan_tx_cb:0000000000000028 $d
                            *COM*:0000000000000018 page_scan_state
     /tmp/ccrSV1Te.s:87     .text.page_scan_rx_fhs_cb:0000000000000000 $t
     /tmp/ccrSV1Te.s:94     .text.page_scan_rx_fhs_cb:0000000000000000 page_scan_rx_fhs_cb
     /tmp/ccrSV1Te.s:347    .text.page_scan_rx_fhs_cb:00000000000000b8 $d
     /tmp/ccrSV1Te.s:371    .text.page_scan_rx_id_cb:0000000000000000 page_scan_rx_id_cb
     /tmp/ccrSV1Te.s:364    .text.page_scan_rx_id_cb:0000000000000000 $t
     /tmp/ccrSV1Te.s:582    .text.page_scan_rx_id_cb:0000000000000088 $d
     /tmp/ccrSV1Te.s:598    .text.page_scan_state_setup:0000000000000000 $t
     /tmp/ccrSV1Te.s:606    .text.page_scan_state_setup:0000000000000000 page_scan_state_setup
     /tmp/ccrSV1Te.s:712    .text.page_scan_state_setup:0000000000000050 $d

UNDEFINED SYMBOLS
cprintf
slave_state_init
mem_pool_free
scan_task_schedule
bbpkt_decode_fhs
tx_task_schedule
btctl_set_state
btctl
btphy
console_putc
rx_task_schedule
btphy_set_mode
