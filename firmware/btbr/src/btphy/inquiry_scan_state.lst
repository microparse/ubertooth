ARM GAS  /tmp/cclNRwHN.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 2
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"inquiry_scan_state.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.rodata.str1.4,"aMS",%progbits,1
  16              		.align	2
  17              	.LC0:
  18 0000 696E7175 		.ascii	"inquiry scan timeout\012\000"
  18      69727920 
  18      7363616E 
  18      2074696D 
  18      656F7574 
  19              		.section	.text.tx_fhs_cb,"ax",%progbits
  20              		.align	1
  21              		.p2align 2,,3
  22              		.arch armv7-m
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  26              		.fpu softvfp
  28              	tx_fhs_cb:
  29              	.LVL0:
  30              	.LFB33:
  31              		.file 1 "src/btphy/inquiry_scan_state.c"
   1:src/btphy/inquiry_scan_state.c **** /* Inquiry scan state
   2:src/btphy/inquiry_scan_state.c ****  *
   3:src/btphy/inquiry_scan_state.c ****  * Copyright 2020 Etienne Helluy-Lafont, Univ. Lille, CNRS.
   4:src/btphy/inquiry_scan_state.c ****  *
   5:src/btphy/inquiry_scan_state.c ****  * This file is part of Project Ubertooth.
   6:src/btphy/inquiry_scan_state.c ****  *
   7:src/btphy/inquiry_scan_state.c ****  * This program is free software; you can redistribute it and/or modify
   8:src/btphy/inquiry_scan_state.c ****  * it under the terms of the GNU General Public License as published by
   9:src/btphy/inquiry_scan_state.c ****  * the Free Software Foundation; either version 2, or (at your option)
  10:src/btphy/inquiry_scan_state.c ****  * any later version.
  11:src/btphy/inquiry_scan_state.c ****  *
  12:src/btphy/inquiry_scan_state.c ****  * This program is distributed in the hope that it will be useful,
  13:src/btphy/inquiry_scan_state.c ****  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  14:src/btphy/inquiry_scan_state.c ****  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  15:src/btphy/inquiry_scan_state.c ****  * GNU General Public License for more details.
  16:src/btphy/inquiry_scan_state.c ****  *
  17:src/btphy/inquiry_scan_state.c ****  * You should have received a copy of the GNU General Public License
  18:src/btphy/inquiry_scan_state.c ****  * along with this program; see the file COPYING.  If not, write to
  19:src/btphy/inquiry_scan_state.c ****  * the Free Software Foundation, Inc., 51 Franklin Street,
  20:src/btphy/inquiry_scan_state.c ****  * Boston, MA 02110-1301, USA.
  21:src/btphy/inquiry_scan_state.c ****  */
  22:src/btphy/inquiry_scan_state.c **** #include <stdlib.h>
  23:src/btphy/inquiry_scan_state.c **** #include <ubtbr/cfg.h>
ARM GAS  /tmp/cclNRwHN.s 			page 2


  24:src/btphy/inquiry_scan_state.c **** #include <ubtbr/btctl_intf.h>
  25:src/btphy/inquiry_scan_state.c **** #include <ubtbr/btphy.h>
  26:src/btphy/inquiry_scan_state.c **** #include <ubtbr/bb.h>
  27:src/btphy/inquiry_scan_state.c **** #include <ubtbr/tdma_sched.h>
  28:src/btphy/inquiry_scan_state.c **** #include <ubtbr/scan_task.h>
  29:src/btphy/inquiry_scan_state.c **** #include <ubtbr/tx_task.h>
  30:src/btphy/inquiry_scan_state.c **** 
  31:src/btphy/inquiry_scan_state.c **** #define INQ_SCAN_MAX_TICKS (CLKN_RATE*60)
  32:src/btphy/inquiry_scan_state.c **** #define TX_PREPARE_IDX	1  // We will transmit at clkn1_0 = 2
  33:src/btphy/inquiry_scan_state.c **** 
  34:src/btphy/inquiry_scan_state.c **** 
  35:src/btphy/inquiry_scan_state.c **** static struct {
  36:src/btphy/inquiry_scan_state.c **** 	uint32_t clkn_start;
  37:src/btphy/inquiry_scan_state.c **** 	bbhdr_t fhs_hdr;
  38:src/btphy/inquiry_scan_state.c **** 	uint8_t fhs_data[20];
  39:src/btphy/inquiry_scan_state.c **** } inquiry_scan_state;
  40:src/btphy/inquiry_scan_state.c **** 
  41:src/btphy/inquiry_scan_state.c **** static void inquiry_scan_schedule(unsigned delay);
  42:src/btphy/inquiry_scan_state.c **** 
  43:src/btphy/inquiry_scan_state.c **** static int inquiry_scan_canceled(void)
  44:src/btphy/inquiry_scan_state.c **** {
  45:src/btphy/inquiry_scan_state.c **** 	return btctl_get_state() != BTCTL_STATE_INQUIRY_SCAN;
  46:src/btphy/inquiry_scan_state.c **** }
  47:src/btphy/inquiry_scan_state.c **** 
  48:src/btphy/inquiry_scan_state.c **** static void tx_eir_cb(void *arg)
  49:src/btphy/inquiry_scan_state.c **** {
  50:src/btphy/inquiry_scan_state.c **** 	inquiry_scan_schedule(1);
  51:src/btphy/inquiry_scan_state.c **** }
  52:src/btphy/inquiry_scan_state.c **** 
  53:src/btphy/inquiry_scan_state.c **** static void tx_fhs_cb(void *arg)
  54:src/btphy/inquiry_scan_state.c **** {
  32              		.loc 1 54 1 view -0
  33              		.cfi_startproc
  34              		@ args = 0, pretend = 0, frame = 8
  35              		@ frame_needed = 0, uses_anonymous_args = 0
  36              		.loc 1 54 1 is_stmt 0 view .LVU1
  37 0000 00B5     		push	{lr}
  38              		.cfi_def_cfa_offset 4
  39              		.cfi_offset 14, -4
  40 0002 85B0     		sub	sp, sp, #20
  41              		.cfi_def_cfa_offset 24
  55:src/btphy/inquiry_scan_state.c **** 	btctl_tx_pkt_t *eir_pkt = btctl_get_eir();
  42              		.loc 1 55 2 is_stmt 1 view .LVU2
  43              	.LBB22:
  44              	.LBI22:
  45              		.file 2 "include/ubtbr/btctl_intf.h"
   1:include/ubtbr/btctl_intf.h **** #ifndef __BTCTL_INTF_H
   2:include/ubtbr/btctl_intf.h **** #define __BTCTL_INTF_H
   3:include/ubtbr/btctl_intf.h **** #include <ubtbr/bb_msg.h>
   4:include/ubtbr/btctl_intf.h **** #include <ubtbr/queue.h>
   5:include/ubtbr/btctl_intf.h **** #include <ubtbr/system.h>
   6:include/ubtbr/btctl_intf.h **** #include <ubertooth_interface.h>
   7:include/ubtbr/btctl_intf.h **** 
   8:include/ubtbr/btctl_intf.h **** typedef struct btctl_s {
   9:include/ubtbr/btctl_intf.h **** 	btctl_state_t state;
  10:include/ubtbr/btctl_intf.h **** 	msg_queue_t rx_q;
  11:include/ubtbr/btctl_intf.h **** 	msg_queue_t tx_q;
ARM GAS  /tmp/cclNRwHN.s 			page 3


  12:include/ubtbr/btctl_intf.h **** 	msg_queue_t acl_tx_q;
  13:include/ubtbr/btctl_intf.h **** 	msg_t *eir_msg;
  14:include/ubtbr/btctl_intf.h **** 	btctl_tx_pkt_t *eir_pkt;
  15:include/ubtbr/btctl_intf.h **** } btctl_t;
  16:include/ubtbr/btctl_intf.h **** 
  17:include/ubtbr/btctl_intf.h **** extern btctl_t btctl;
  18:include/ubtbr/btctl_intf.h **** 
  19:include/ubtbr/btctl_intf.h **** void btctl_init(void);
  20:include/ubtbr/btctl_intf.h **** int btctl_work(void);
  21:include/ubtbr/btctl_intf.h **** 
  22:include/ubtbr/btctl_intf.h **** void btctl_set_state(btctl_state_t state, btctl_reason_t reason);
  23:include/ubtbr/btctl_intf.h **** 
  24:include/ubtbr/btctl_intf.h **** static inline btctl_state_t btctl_get_state(void)
  25:include/ubtbr/btctl_intf.h **** {
  26:include/ubtbr/btctl_intf.h **** 	return btctl.state;
  27:include/ubtbr/btctl_intf.h **** }
  28:include/ubtbr/btctl_intf.h **** 
  29:include/ubtbr/btctl_intf.h **** static inline btctl_tx_pkt_t *btctl_get_eir(void)
  46              		.loc 2 29 31 view .LVU3
  47              	.LBB23:
  30:include/ubtbr/btctl_intf.h **** {
  31:include/ubtbr/btctl_intf.h **** 	return btctl.eir_pkt;
  48              		.loc 2 31 2 view .LVU4
  49              		.loc 2 31 14 is_stmt 0 view .LVU5
  50 0004 184B     		ldr	r3, .L8
  51 0006 D3F88030 		ldr	r3, [r3, #128]
  52              	.LVL1:
  53              		.loc 2 31 14 view .LVU6
  54              	.LBE23:
  55              	.LBE22:
  56:src/btphy/inquiry_scan_state.c **** 	if (eir_pkt)
  56              		.loc 1 56 2 is_stmt 1 view .LVU7
  57              		.loc 1 56 5 is_stmt 0 view .LVU8
  58 000a 73B1     		cbz	r3, .L2
  57:src/btphy/inquiry_scan_state.c **** 	{
  58:src/btphy/inquiry_scan_state.c **** 		tx_task_schedule(3&(TX_PREPARE_IDX-CUR_SLAVE_SLOT_IDX()),
  59              		.loc 1 58 3 is_stmt 1 view .LVU9
  60              		.loc 1 58 38 is_stmt 0 view .LVU10
  61 000c 1749     		ldr	r1, .L8+4
  59:src/btphy/inquiry_scan_state.c **** 			tx_eir_cb, NULL,
  60:src/btphy/inquiry_scan_state.c **** 			&eir_pkt->bb_hdr, eir_pkt->bt_data);
  62              		.loc 1 60 29 view .LVU11
  63 000e 1A1D     		adds	r2, r3, #4
  58:src/btphy/inquiry_scan_state.c **** 			tx_eir_cb, NULL,
  64              		.loc 1 58 21 view .LVU12
  65 0010 8868     		ldr	r0, [r1, #8]
  66              	.LVL2:
  58:src/btphy/inquiry_scan_state.c **** 			tx_eir_cb, NULL,
  67              		.loc 1 58 3 view .LVU13
  68 0012 0092     		str	r2, [sp]
  58:src/btphy/inquiry_scan_state.c **** 			tx_eir_cb, NULL,
  69              		.loc 1 58 21 view .LVU14
  70 0014 C0F10100 		rsb	r0, r0, #1
  58:src/btphy/inquiry_scan_state.c **** 			tx_eir_cb, NULL,
  71              		.loc 1 58 3 view .LVU15
  72 0018 0022     		movs	r2, #0
  73 001a 1549     		ldr	r1, .L8+8
ARM GAS  /tmp/cclNRwHN.s 			page 4


  74 001c 00F00300 		and	r0, r0, #3
  75 0020 FFF7FEFF 		bl	tx_task_schedule
  76              	.LVL3:
  61:src/btphy/inquiry_scan_state.c **** 	}
  62:src/btphy/inquiry_scan_state.c **** 	else
  63:src/btphy/inquiry_scan_state.c **** 	{
  64:src/btphy/inquiry_scan_state.c **** 		inquiry_scan_schedule(1);
  65:src/btphy/inquiry_scan_state.c **** 	}
  66:src/btphy/inquiry_scan_state.c **** }
  77              		.loc 1 66 1 view .LVU16
  78 0024 05B0     		add	sp, sp, #20
  79              		.cfi_remember_state
  80              		.cfi_def_cfa_offset 4
  81              		@ sp needed
  82 0026 5DF804FB 		ldr	pc, [sp], #4
  83              	.LVL4:
  84              	.L2:
  85              		.cfi_restore_state
  64:src/btphy/inquiry_scan_state.c **** 	}
  86              		.loc 1 64 3 is_stmt 1 view .LVU17
  87              	.LBB24:
  88              	.LBI24:
  67:src/btphy/inquiry_scan_state.c **** 
  68:src/btphy/inquiry_scan_state.c **** static void inquiry_scan_rx_cb(int sw_detected, void *arg)
  69:src/btphy/inquiry_scan_state.c **** {
  70:src/btphy/inquiry_scan_state.c **** 
  71:src/btphy/inquiry_scan_state.c **** 	if (inquiry_scan_canceled())
  72:src/btphy/inquiry_scan_state.c **** 	{
  73:src/btphy/inquiry_scan_state.c **** 		cprintf("inq scan canceled\n");
  74:src/btphy/inquiry_scan_state.c **** 		return;
  75:src/btphy/inquiry_scan_state.c **** 	}
  76:src/btphy/inquiry_scan_state.c **** 
  77:src/btphy/inquiry_scan_state.c **** 	if (sw_detected)
  78:src/btphy/inquiry_scan_state.c **** 	{
  79:src/btphy/inquiry_scan_state.c **** 		console_putc('!');
  80:src/btphy/inquiry_scan_state.c **** 		/* Schedule TX FHS
  81:src/btphy/inquiry_scan_state.c **** 		 * We're in the scan_wait, in same tick as rx.
  82:src/btphy/inquiry_scan_state.c **** 		 * we must prepare in next tick to start tx at rx+2 */
  83:src/btphy/inquiry_scan_state.c **** 			
  84:src/btphy/inquiry_scan_state.c **** 		/* Write clk27_2 in fhs payload
  85:src/btphy/inquiry_scan_state.c **** 		 * Will tx at (clkn+2) */
  86:src/btphy/inquiry_scan_state.c **** 		bbpkt_fhs_finalize_payload(inquiry_scan_state.fhs_data, (btphy.master_clkn+2)>>2);
  87:src/btphy/inquiry_scan_state.c **** 
  88:src/btphy/inquiry_scan_state.c **** 		/* Schedule tx FHS */
  89:src/btphy/inquiry_scan_state.c **** 		tx_task_schedule(3&(TX_PREPARE_IDX-CUR_SLAVE_SLOT_IDX()),
  90:src/btphy/inquiry_scan_state.c **** 			tx_fhs_cb, NULL,
  91:src/btphy/inquiry_scan_state.c **** 			&inquiry_scan_state.fhs_hdr, inquiry_scan_state.fhs_data);
  92:src/btphy/inquiry_scan_state.c **** 	}
  93:src/btphy/inquiry_scan_state.c **** 	else
  94:src/btphy/inquiry_scan_state.c **** 	{
  95:src/btphy/inquiry_scan_state.c **** 		inquiry_scan_schedule(0); // do it again
  96:src/btphy/inquiry_scan_state.c **** 	}
  97:src/btphy/inquiry_scan_state.c **** }
  98:src/btphy/inquiry_scan_state.c **** 
  99:src/btphy/inquiry_scan_state.c **** static void inquiry_scan_schedule(unsigned delay)
  89              		.loc 1 99 13 view .LVU18
  90              	.LBB25:
ARM GAS  /tmp/cclNRwHN.s 			page 5


 100:src/btphy/inquiry_scan_state.c **** {
 101:src/btphy/inquiry_scan_state.c **** 	if (MASTER_CLKN >= inquiry_scan_state.clkn_start + INQ_SCAN_MAX_TICKS)
  91              		.loc 1 101 2 view .LVU19
  92              		.loc 1 101 39 is_stmt 0 view .LVU20
  93 002a 124A     		ldr	r2, .L8+12
  94              		.loc 1 101 6 view .LVU21
  95 002c 1249     		ldr	r1, .L8+16
  96              		.loc 1 101 51 view .LVU22
  97 002e 1268     		ldr	r2, [r2]
  98              		.loc 1 101 6 view .LVU23
  99 0030 0968     		ldr	r1, [r1]
 100              		.loc 1 101 51 view .LVU24
 101 0032 02F53B32 		add	r2, r2, #191488
 102 0036 02F50072 		add	r2, r2, #512
 103              		.loc 1 101 5 view .LVU25
 104 003a 9142     		cmp	r1, r2
 105 003c 07D2     		bcs	.L7
 102:src/btphy/inquiry_scan_state.c **** 	{
 103:src/btphy/inquiry_scan_state.c **** 		cprintf("inquiry scan timeout\n");
 104:src/btphy/inquiry_scan_state.c **** 		btctl_set_state(BTCTL_STATE_STANDBY, BTCTL_REASON_TIMEOUT);
 105:src/btphy/inquiry_scan_state.c **** 		return;
 106:src/btphy/inquiry_scan_state.c **** 	}
 107:src/btphy/inquiry_scan_state.c **** 	scan_task_schedule(delay, inquiry_scan_rx_cb, NULL);
 106              		.loc 1 107 2 is_stmt 1 view .LVU26
 107 003e 1A46     		mov	r2, r3
 108 0040 0120     		movs	r0, #1
 109              	.LVL5:
 110              		.loc 1 107 2 is_stmt 0 view .LVU27
 111 0042 0E49     		ldr	r1, .L8+20
 112              	.LBE25:
 113              	.LBE24:
  66:src/btphy/inquiry_scan_state.c **** 
 114              		.loc 1 66 1 view .LVU28
 115 0044 05B0     		add	sp, sp, #20
 116              		.cfi_remember_state
 117              		.cfi_def_cfa_offset 4
 118              		@ sp needed
 119 0046 5DF804EB 		ldr	lr, [sp], #4
 120              		.cfi_restore 14
 121              		.cfi_def_cfa_offset 0
 122              	.LBB33:
 123              	.LBB31:
 124              		.loc 1 107 2 view .LVU29
 125 004a FFF7FEBF 		b	scan_task_schedule
 126              	.LVL6:
 127              	.L7:
 128              		.cfi_restore_state
 129              	.LBB26:
 130              	.LBB27:
 103:src/btphy/inquiry_scan_state.c **** 		btctl_set_state(BTCTL_STATE_STANDBY, BTCTL_REASON_TIMEOUT);
 131              		.loc 1 103 3 view .LVU30
 132 004e 0C48     		ldr	r0, .L8+24
 133              	.LVL7:
 103:src/btphy/inquiry_scan_state.c **** 		btctl_set_state(BTCTL_STATE_STANDBY, BTCTL_REASON_TIMEOUT);
 134              		.loc 1 103 3 view .LVU31
 135 0050 0393     		str	r3, [sp, #12]
 136              	.LBE27:
ARM GAS  /tmp/cclNRwHN.s 			page 6


 137              	.LBI26:
  99:src/btphy/inquiry_scan_state.c **** {
 138              		.loc 1 99 13 is_stmt 1 view .LVU32
 139              	.LVL8:
 140              	.LBB28:
 103:src/btphy/inquiry_scan_state.c **** 		btctl_set_state(BTCTL_STATE_STANDBY, BTCTL_REASON_TIMEOUT);
 141              		.loc 1 103 3 view .LVU33
 142 0052 FFF7FEFF 		bl	cprintf
 143              	.LVL9:
 104:src/btphy/inquiry_scan_state.c **** 		return;
 144              		.loc 1 104 3 view .LVU34
 145 0056 039B     		ldr	r3, [sp, #12]
 146 0058 0121     		movs	r1, #1
 147 005a 1846     		mov	r0, r3
 148              	.LBE28:
 149              	.LBE26:
 150              	.LBE31:
 151              	.LBE33:
  66:src/btphy/inquiry_scan_state.c **** 
 152              		.loc 1 66 1 is_stmt 0 view .LVU35
 153 005c 05B0     		add	sp, sp, #20
 154              		.cfi_def_cfa_offset 4
 155              		@ sp needed
 156 005e 5DF804EB 		ldr	lr, [sp], #4
 157              		.cfi_restore 14
 158              		.cfi_def_cfa_offset 0
 159              	.LVL10:
 160              	.LBB34:
 161              	.LBB32:
 162              	.LBB30:
 163              	.LBB29:
 104:src/btphy/inquiry_scan_state.c **** 		return;
 164              		.loc 1 104 3 view .LVU36
 165 0062 FFF7FEBF 		b	btctl_set_state
 166              	.LVL11:
 167              	.L9:
 168 0066 00BF     		.align	2
 169              	.L8:
 170 0068 00000000 		.word	btctl
 171 006c 00000000 		.word	btphy
 172 0070 00000000 		.word	tx_eir_cb
 173 0074 00000000 		.word	.LANCHOR0
 174 0078 08800040 		.word	1073774600
 175 007c 00000000 		.word	inquiry_scan_rx_cb
 176 0080 00000000 		.word	.LC0
 177              	.LBE29:
 178              	.LBE30:
 179              	.LBE32:
 180              	.LBE34:
 181              		.cfi_endproc
 182              	.LFE33:
 184              		.section	.text.tx_eir_cb,"ax",%progbits
 185              		.align	1
 186              		.p2align 2,,3
 187              		.syntax unified
 188              		.thumb
 189              		.thumb_func
ARM GAS  /tmp/cclNRwHN.s 			page 7


 190              		.fpu softvfp
 192              	tx_eir_cb:
 193              	.LVL12:
 194              	.LFB32:
  49:src/btphy/inquiry_scan_state.c **** 	inquiry_scan_schedule(1);
 195              		.loc 1 49 1 is_stmt 1 view -0
 196              		.cfi_startproc
 197              		@ args = 0, pretend = 0, frame = 0
 198              		@ frame_needed = 0, uses_anonymous_args = 0
  49:src/btphy/inquiry_scan_state.c **** 	inquiry_scan_schedule(1);
 199              		.loc 1 49 1 is_stmt 0 view .LVU38
 200 0000 08B5     		push	{r3, lr}
 201              		.cfi_def_cfa_offset 8
 202              		.cfi_offset 3, -8
 203              		.cfi_offset 14, -4
  50:src/btphy/inquiry_scan_state.c **** }
 204              		.loc 1 50 2 is_stmt 1 view .LVU39
 205              	.LVL13:
 206              	.LBB39:
 207              	.LBI39:
  99:src/btphy/inquiry_scan_state.c **** {
 208              		.loc 1 99 13 view .LVU40
 209              	.LBB40:
 101:src/btphy/inquiry_scan_state.c **** 	{
 210              		.loc 1 101 2 view .LVU41
 101:src/btphy/inquiry_scan_state.c **** 	{
 211              		.loc 1 101 39 is_stmt 0 view .LVU42
 212 0002 0D4B     		ldr	r3, .L13
 101:src/btphy/inquiry_scan_state.c **** 	{
 213              		.loc 1 101 6 view .LVU43
 214 0004 0D4A     		ldr	r2, .L13+4
 101:src/btphy/inquiry_scan_state.c **** 	{
 215              		.loc 1 101 51 view .LVU44
 216 0006 1B68     		ldr	r3, [r3]
 101:src/btphy/inquiry_scan_state.c **** 	{
 217              		.loc 1 101 6 view .LVU45
 218 0008 1268     		ldr	r2, [r2]
 101:src/btphy/inquiry_scan_state.c **** 	{
 219              		.loc 1 101 51 view .LVU46
 220 000a 03F53B33 		add	r3, r3, #191488
 221 000e 03F50073 		add	r3, r3, #512
 101:src/btphy/inquiry_scan_state.c **** 	{
 222              		.loc 1 101 5 view .LVU47
 223 0012 9A42     		cmp	r2, r3
 224 0014 06D2     		bcs	.L12
 225              		.loc 1 107 2 is_stmt 1 view .LVU48
 226              	.LBE40:
 227              	.LBE39:
  51:src/btphy/inquiry_scan_state.c **** 
 228              		.loc 1 51 1 is_stmt 0 view .LVU49
 229 0016 BDE80840 		pop	{r3, lr}
 230              		.cfi_remember_state
 231              		.cfi_restore 14
 232              		.cfi_restore 3
 233              		.cfi_def_cfa_offset 0
 234              	.LBB47:
 235              	.LBB45:
ARM GAS  /tmp/cclNRwHN.s 			page 8


 236              		.loc 1 107 2 view .LVU50
 237 001a 0022     		movs	r2, #0
 238 001c 0120     		movs	r0, #1
 239              	.LVL14:
 240              		.loc 1 107 2 view .LVU51
 241 001e 0849     		ldr	r1, .L13+8
 242 0020 FFF7FEBF 		b	scan_task_schedule
 243              	.LVL15:
 244              	.L12:
 245              		.cfi_restore_state
 246              	.LBB41:
 247              	.LBI41:
  99:src/btphy/inquiry_scan_state.c **** {
 248              		.loc 1 99 13 is_stmt 1 view .LVU52
 249              	.LBB42:
 103:src/btphy/inquiry_scan_state.c **** 		btctl_set_state(BTCTL_STATE_STANDBY, BTCTL_REASON_TIMEOUT);
 250              		.loc 1 103 3 view .LVU53
 251 0024 0748     		ldr	r0, .L13+12
 252              	.LVL16:
 103:src/btphy/inquiry_scan_state.c **** 		btctl_set_state(BTCTL_STATE_STANDBY, BTCTL_REASON_TIMEOUT);
 253              		.loc 1 103 3 is_stmt 0 view .LVU54
 254 0026 FFF7FEFF 		bl	cprintf
 255              	.LVL17:
 104:src/btphy/inquiry_scan_state.c **** 		return;
 256              		.loc 1 104 3 is_stmt 1 view .LVU55
 257              	.LBE42:
 258              	.LBE41:
 259              	.LBE45:
 260              	.LBE47:
  51:src/btphy/inquiry_scan_state.c **** 
 261              		.loc 1 51 1 is_stmt 0 view .LVU56
 262 002a BDE80840 		pop	{r3, lr}
 263              		.cfi_restore 14
 264              		.cfi_restore 3
 265              		.cfi_def_cfa_offset 0
 266              	.LBB48:
 267              	.LBB46:
 268              	.LBB44:
 269              	.LBB43:
 104:src/btphy/inquiry_scan_state.c **** 		return;
 270              		.loc 1 104 3 view .LVU57
 271 002e 0121     		movs	r1, #1
 272 0030 0020     		movs	r0, #0
 273 0032 FFF7FEBF 		b	btctl_set_state
 274              	.LVL18:
 275              	.L14:
 276 0036 00BF     		.align	2
 277              	.L13:
 278 0038 00000000 		.word	.LANCHOR0
 279 003c 08800040 		.word	1073774600
 280 0040 00000000 		.word	inquiry_scan_rx_cb
 281 0044 00000000 		.word	.LC0
 282              	.LBE43:
 283              	.LBE44:
 284              	.LBE46:
 285              	.LBE48:
 286              		.cfi_endproc
ARM GAS  /tmp/cclNRwHN.s 			page 9


 287              	.LFE32:
 289              		.section	.rodata.str1.4
 290 0016 0000     		.align	2
 291              	.LC1:
 292 0018 696E7120 		.ascii	"inq scan canceled\012\000"
 292      7363616E 
 292      2063616E 
 292      63656C65 
 292      640A00
 293              		.section	.text.inquiry_scan_rx_cb,"ax",%progbits
 294              		.align	1
 295              		.p2align 2,,3
 296              		.syntax unified
 297              		.thumb
 298              		.thumb_func
 299              		.fpu softvfp
 301              	inquiry_scan_rx_cb:
 302              	.LVL19:
 303              	.LFB34:
  69:src/btphy/inquiry_scan_state.c **** 
 304              		.loc 1 69 1 is_stmt 1 view -0
 305              		.cfi_startproc
 306              		@ args = 0, pretend = 0, frame = 0
 307              		@ frame_needed = 0, uses_anonymous_args = 0
  69:src/btphy/inquiry_scan_state.c **** 
 308              		.loc 1 69 1 is_stmt 0 view .LVU59
 309 0000 30B5     		push	{r4, r5, lr}
 310              		.cfi_def_cfa_offset 12
 311              		.cfi_offset 4, -12
 312              		.cfi_offset 5, -8
 313              		.cfi_offset 14, -4
 314 0002 83B0     		sub	sp, sp, #12
 315              		.cfi_def_cfa_offset 24
  71:src/btphy/inquiry_scan_state.c **** 	{
 316              		.loc 1 71 2 is_stmt 1 view .LVU60
 317              	.LBB62:
 318              	.LBI62:
  43:src/btphy/inquiry_scan_state.c **** {
 319              		.loc 1 43 12 view .LVU61
 320              	.LBE62:
  45:src/btphy/inquiry_scan_state.c **** }
 321              		.loc 1 45 2 view .LVU62
 322              	.LBB65:
 323              	.LBB63:
 324              	.LBI63:
  24:include/ubtbr/btctl_intf.h **** {
 325              		.loc 2 24 29 view .LVU63
 326              	.LBB64:
  26:include/ubtbr/btctl_intf.h **** }
 327              		.loc 2 26 2 view .LVU64
  26:include/ubtbr/btctl_intf.h **** }
 328              		.loc 2 26 14 is_stmt 0 view .LVU65
 329 0004 1F4B     		ldr	r3, .L24
 330              	.LBE64:
 331              	.LBE63:
 332              	.LBE65:
  69:src/btphy/inquiry_scan_state.c **** 
ARM GAS  /tmp/cclNRwHN.s 			page 10


 333              		.loc 1 69 1 view .LVU66
 334 0006 0446     		mov	r4, r0
  71:src/btphy/inquiry_scan_state.c **** 	{
 335              		.loc 1 71 5 view .LVU67
 336 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 337 000a 042B     		cmp	r3, #4
 338 000c 29D1     		bne	.L21
  77:src/btphy/inquiry_scan_state.c **** 	{
 339              		.loc 1 77 2 is_stmt 1 view .LVU68
  77:src/btphy/inquiry_scan_state.c **** 	{
 340              		.loc 1 77 5 is_stmt 0 view .LVU69
 341 000e 80B9     		cbnz	r0, .L22
  95:src/btphy/inquiry_scan_state.c **** 	}
 342              		.loc 1 95 3 is_stmt 1 view .LVU70
 343              	.LVL20:
 344              	.LBB66:
 345              	.LBI66:
  99:src/btphy/inquiry_scan_state.c **** {
 346              		.loc 1 99 13 view .LVU71
 347              	.LBB67:
 101:src/btphy/inquiry_scan_state.c **** 	{
 348              		.loc 1 101 2 view .LVU72
 101:src/btphy/inquiry_scan_state.c **** 	{
 349              		.loc 1 101 39 is_stmt 0 view .LVU73
 350 0010 1D4B     		ldr	r3, .L24+4
 101:src/btphy/inquiry_scan_state.c **** 	{
 351              		.loc 1 101 6 view .LVU74
 352 0012 1E4A     		ldr	r2, .L24+8
 101:src/btphy/inquiry_scan_state.c **** 	{
 353              		.loc 1 101 51 view .LVU75
 354 0014 1B68     		ldr	r3, [r3]
 101:src/btphy/inquiry_scan_state.c **** 	{
 355              		.loc 1 101 6 view .LVU76
 356 0016 1268     		ldr	r2, [r2]
 101:src/btphy/inquiry_scan_state.c **** 	{
 357              		.loc 1 101 51 view .LVU77
 358 0018 03F53B33 		add	r3, r3, #191488
 359 001c 03F50073 		add	r3, r3, #512
 101:src/btphy/inquiry_scan_state.c **** 	{
 360              		.loc 1 101 5 view .LVU78
 361 0020 9A42     		cmp	r2, r3
 362 0022 24D2     		bcs	.L23
 363              		.loc 1 107 2 is_stmt 1 view .LVU79
 364 0024 0246     		mov	r2, r0
 365 0026 1A49     		ldr	r1, .L24+12
 366              	.LVL21:
 367              		.loc 1 107 2 is_stmt 0 view .LVU80
 368              	.LBE67:
 369              	.LBE66:
  97:src/btphy/inquiry_scan_state.c **** 
 370              		.loc 1 97 1 view .LVU81
 371 0028 03B0     		add	sp, sp, #12
 372              		.cfi_remember_state
 373              		.cfi_def_cfa_offset 12
 374              		@ sp needed
 375 002a BDE83040 		pop	{r4, r5, lr}
 376              		.cfi_restore 14
ARM GAS  /tmp/cclNRwHN.s 			page 11


 377              		.cfi_restore 5
 378              		.cfi_restore 4
 379              		.cfi_def_cfa_offset 0
 380              	.LBB75:
 381              	.LBB72:
 382              		.loc 1 107 2 view .LVU82
 383 002e FFF7FEBF 		b	scan_task_schedule
 384              	.LVL22:
 385              	.L22:
 386              		.cfi_restore_state
 387              		.loc 1 107 2 view .LVU83
 388              	.LBE72:
 389              	.LBE75:
 390              	.LBB76:
 391              	.LBI76:
  68:src/btphy/inquiry_scan_state.c **** {
 392              		.loc 1 68 13 is_stmt 1 view .LVU84
 393              	.LBB77:
  79:src/btphy/inquiry_scan_state.c **** 		/* Schedule TX FHS
 394              		.loc 1 79 3 view .LVU85
  86:src/btphy/inquiry_scan_state.c **** 
 395              		.loc 1 86 65 is_stmt 0 view .LVU86
 396 0032 184D     		ldr	r5, .L24+16
  79:src/btphy/inquiry_scan_state.c **** 		/* Schedule TX FHS
 397              		.loc 1 79 3 view .LVU87
 398 0034 2120     		movs	r0, #33
 399              	.LVL23:
  79:src/btphy/inquiry_scan_state.c **** 		/* Schedule TX FHS
 400              		.loc 1 79 3 view .LVU88
 401 0036 FFF7FEFF 		bl	console_putc
 402              	.LVL24:
  86:src/btphy/inquiry_scan_state.c **** 
 403              		.loc 1 86 3 is_stmt 1 view .LVU89
  86:src/btphy/inquiry_scan_state.c **** 
 404              		.loc 1 86 77 is_stmt 0 view .LVU90
 405 003a 6968     		ldr	r1, [r5, #4]
  86:src/btphy/inquiry_scan_state.c **** 
 406              		.loc 1 86 3 view .LVU91
 407 003c 164C     		ldr	r4, .L24+20
 408              	.LVL25:
  86:src/btphy/inquiry_scan_state.c **** 
 409              		.loc 1 86 77 view .LVU92
 410 003e 0231     		adds	r1, r1, #2
  86:src/btphy/inquiry_scan_state.c **** 
 411              		.loc 1 86 3 view .LVU93
 412 0040 2046     		mov	r0, r4
 413 0042 8908     		lsrs	r1, r1, #2
 414 0044 FFF7FEFF 		bl	bbpkt_fhs_finalize_payload
 415              	.LVL26:
  89:src/btphy/inquiry_scan_state.c **** 			tx_fhs_cb, NULL,
 416              		.loc 1 89 3 is_stmt 1 view .LVU94
  89:src/btphy/inquiry_scan_state.c **** 			tx_fhs_cb, NULL,
 417              		.loc 1 89 21 is_stmt 0 view .LVU95
 418 0048 A868     		ldr	r0, [r5, #8]
  89:src/btphy/inquiry_scan_state.c **** 			tx_fhs_cb, NULL,
 419              		.loc 1 89 3 view .LVU96
 420 004a 0022     		movs	r2, #0
ARM GAS  /tmp/cclNRwHN.s 			page 12


  89:src/btphy/inquiry_scan_state.c **** 			tx_fhs_cb, NULL,
 421              		.loc 1 89 21 view .LVU97
 422 004c C0F10100 		rsb	r0, r0, #1
  89:src/btphy/inquiry_scan_state.c **** 			tx_fhs_cb, NULL,
 423              		.loc 1 89 3 view .LVU98
 424 0050 1249     		ldr	r1, .L24+24
 425 0052 0094     		str	r4, [sp]
 426 0054 00F00300 		and	r0, r0, #3
 427 0058 231F     		subs	r3, r4, #4
 428 005a FFF7FEFF 		bl	tx_task_schedule
 429              	.LVL27:
 430              	.LBE77:
 431              	.LBE76:
  97:src/btphy/inquiry_scan_state.c **** 
 432              		.loc 1 97 1 view .LVU99
 433 005e 03B0     		add	sp, sp, #12
 434              		.cfi_remember_state
 435              		.cfi_def_cfa_offset 12
 436              		@ sp needed
 437 0060 30BD     		pop	{r4, r5, pc}
 438              	.LVL28:
 439              	.L21:
 440              		.cfi_restore_state
  73:src/btphy/inquiry_scan_state.c **** 		return;
 441              		.loc 1 73 3 is_stmt 1 view .LVU100
 442 0062 0F48     		ldr	r0, .L24+28
 443              	.LVL29:
  97:src/btphy/inquiry_scan_state.c **** 
 444              		.loc 1 97 1 is_stmt 0 view .LVU101
 445 0064 03B0     		add	sp, sp, #12
 446              		.cfi_remember_state
 447              		.cfi_def_cfa_offset 12
 448              		@ sp needed
 449 0066 BDE83040 		pop	{r4, r5, lr}
 450              		.cfi_restore 14
 451              		.cfi_restore 5
 452              		.cfi_restore 4
 453              		.cfi_def_cfa_offset 0
 454              	.LVL30:
  73:src/btphy/inquiry_scan_state.c **** 		return;
 455              		.loc 1 73 3 view .LVU102
 456 006a FFF7FEBF 		b	cprintf
 457              	.LVL31:
 458              	.L23:
 459              		.cfi_restore_state
 460              	.LBB78:
 461              	.LBB73:
 462              	.LBB68:
 463              	.LBI68:
  99:src/btphy/inquiry_scan_state.c **** {
 464              		.loc 1 99 13 is_stmt 1 view .LVU103
 465              	.LBB69:
 103:src/btphy/inquiry_scan_state.c **** 		btctl_set_state(BTCTL_STATE_STANDBY, BTCTL_REASON_TIMEOUT);
 466              		.loc 1 103 3 view .LVU104
 467 006e 0D48     		ldr	r0, .L24+32
 468              	.LVL32:
 103:src/btphy/inquiry_scan_state.c **** 		btctl_set_state(BTCTL_STATE_STANDBY, BTCTL_REASON_TIMEOUT);
ARM GAS  /tmp/cclNRwHN.s 			page 13


 469              		.loc 1 103 3 is_stmt 0 view .LVU105
 470 0070 FFF7FEFF 		bl	cprintf
 471              	.LVL33:
 104:src/btphy/inquiry_scan_state.c **** 		return;
 472              		.loc 1 104 3 is_stmt 1 view .LVU106
 473 0074 2046     		mov	r0, r4
 474 0076 0121     		movs	r1, #1
 475              	.LBE69:
 476              	.LBE68:
 477              	.LBE73:
 478              	.LBE78:
  97:src/btphy/inquiry_scan_state.c **** 
 479              		.loc 1 97 1 is_stmt 0 view .LVU107
 480 0078 03B0     		add	sp, sp, #12
 481              		.cfi_def_cfa_offset 12
 482              		@ sp needed
 483 007a BDE83040 		pop	{r4, r5, lr}
 484              		.cfi_restore 14
 485              		.cfi_restore 5
 486              		.cfi_restore 4
 487              		.cfi_def_cfa_offset 0
 488              	.LVL34:
 489              	.LBB79:
 490              	.LBB74:
 491              	.LBB71:
 492              	.LBB70:
 104:src/btphy/inquiry_scan_state.c **** 		return;
 493              		.loc 1 104 3 view .LVU108
 494 007e FFF7FEBF 		b	btctl_set_state
 495              	.LVL35:
 496              	.L25:
 104:src/btphy/inquiry_scan_state.c **** 		return;
 497              		.loc 1 104 3 view .LVU109
 498 0082 00BF     		.align	2
 499              	.L24:
 500 0084 00000000 		.word	btctl
 501 0088 00000000 		.word	.LANCHOR0
 502 008c 08800040 		.word	1073774600
 503 0090 00000000 		.word	inquiry_scan_rx_cb
 504 0094 00000000 		.word	btphy
 505 0098 08000000 		.word	.LANCHOR0+8
 506 009c 00000000 		.word	tx_fhs_cb
 507 00a0 18000000 		.word	.LC1
 508 00a4 00000000 		.word	.LC0
 509              	.LBE70:
 510              	.LBE71:
 511              	.LBE74:
 512              	.LBE79:
 513              		.cfi_endproc
 514              	.LFE34:
 516              		.section	.text.inquiry_scan_state_setup,"ax",%progbits
 517              		.align	1
 518              		.p2align 2,,3
 519              		.global	inquiry_scan_state_setup
 520              		.syntax unified
 521              		.thumb
 522              		.thumb_func
ARM GAS  /tmp/cclNRwHN.s 			page 14


 523              		.fpu softvfp
 525              	inquiry_scan_state_setup:
 526              	.LFB36:
 108:src/btphy/inquiry_scan_state.c **** }
 109:src/btphy/inquiry_scan_state.c **** 
 110:src/btphy/inquiry_scan_state.c **** /*
 111:src/btphy/inquiry_scan_state.c ****  * Inquiry slave
 112:src/btphy/inquiry_scan_state.c ****  */
 113:src/btphy/inquiry_scan_state.c **** void inquiry_scan_state_setup(void)
 114:src/btphy/inquiry_scan_state.c **** {
 527              		.loc 1 114 1 is_stmt 1 view -0
 528              		.cfi_startproc
 529              		@ args = 0, pretend = 0, frame = 0
 530              		@ frame_needed = 0, uses_anonymous_args = 0
 531 0000 70B5     		push	{r4, r5, r6, lr}
 532              		.cfi_def_cfa_offset 16
 533              		.cfi_offset 4, -16
 534              		.cfi_offset 5, -12
 535              		.cfi_offset 6, -8
 536              		.cfi_offset 14, -4
 537 0002 86B0     		sub	sp, sp, #24
 538              		.cfi_def_cfa_offset 40
 115:src/btphy/inquiry_scan_state.c **** 	/* Init only with the lap, DCI(0) is used as UAP */
 116:src/btphy/inquiry_scan_state.c **** 	btphy_set_mode(BT_MODE_INQUIRY_SCAN, GIAC, 0);
 539              		.loc 1 116 2 view .LVU111
 117:src/btphy/inquiry_scan_state.c **** 
 118:src/btphy/inquiry_scan_state.c **** 	btctl_set_state(BTCTL_STATE_INQUIRY_SCAN, BTCTL_REASON_SUCCESS);
 119:src/btphy/inquiry_scan_state.c **** 
 120:src/btphy/inquiry_scan_state.c **** 	/* A simple Header for our fhs */ 
 121:src/btphy/inquiry_scan_state.c **** 	inquiry_scan_state.fhs_hdr.lt_addr = 0;
 122:src/btphy/inquiry_scan_state.c **** 	inquiry_scan_state.fhs_hdr.type = BB_TYPE_FHS;
 123:src/btphy/inquiry_scan_state.c **** 	inquiry_scan_state.fhs_hdr.flags = 0; 		// Depends on devices, some sends BTHDR_FLOW|BTHDR_SEQN, o
 540              		.loc 1 123 35 is_stmt 0 view .LVU112
 541 0004 0024     		movs	r4, #0
 116:src/btphy/inquiry_scan_state.c **** 
 542              		.loc 1 116 2 view .LVU113
 543 0006 0022     		movs	r2, #0
 544 0008 0220     		movs	r0, #2
 545 000a 2049     		ldr	r1, .L29
 546 000c FFF7FEFF 		bl	btphy_set_mode
 547              	.LVL36:
 118:src/btphy/inquiry_scan_state.c **** 
 548              		.loc 1 118 2 is_stmt 1 view .LVU114
 549 0010 0021     		movs	r1, #0
 550 0012 0420     		movs	r0, #4
 551 0014 FFF7FEFF 		bl	btctl_set_state
 552              	.LVL37:
 121:src/btphy/inquiry_scan_state.c **** 	inquiry_scan_state.fhs_hdr.type = BB_TYPE_FHS;
 553              		.loc 1 121 2 view .LVU115
 122:src/btphy/inquiry_scan_state.c **** 	inquiry_scan_state.fhs_hdr.flags = 0; 		// Depends on devices, some sends BTHDR_FLOW|BTHDR_SEQN, o
 554              		.loc 1 122 2 view .LVU116
 555              		.loc 1 123 2 view .LVU117
 556              	.LBB86:
 557              	.LBB87:
 558              		.loc 2 31 14 is_stmt 0 view .LVU118
 559 0018 1D4B     		ldr	r3, .L29+4
 560              	.LBE87:
ARM GAS  /tmp/cclNRwHN.s 			page 15


 561              	.LBE86:
 121:src/btphy/inquiry_scan_state.c **** 	inquiry_scan_state.fhs_hdr.type = BB_TYPE_FHS;
 562              		.loc 1 121 37 view .LVU119
 563 001a 4FF40071 		mov	r1, #512
 124:src/btphy/inquiry_scan_state.c **** 
 125:src/btphy/inquiry_scan_state.c **** 	/* Prepare constant part of FHS payload */
 126:src/btphy/inquiry_scan_state.c **** 	bbpkt_fhs_prepare_payload(inquiry_scan_state.fhs_data,
 564              		.loc 1 126 2 view .LVU120
 565 001e D3F88020 		ldr	r2, [r3, #128]
 127:src/btphy/inquiry_scan_state.c **** 		btphy.my_sw&0xffffffff,	// parity: low32 bits of master's sw
 566              		.loc 1 127 8 view .LVU121
 567 0022 1C4B     		ldr	r3, .L29+8
 126:src/btphy/inquiry_scan_state.c **** 		btphy.my_sw&0xffffffff,	// parity: low32 bits of master's sw
 568              		.loc 1 126 2 view .LVU122
 569 0024 121B     		subs	r2, r2, r4
 570 0026 18BF     		it	ne
 571 0028 0122     		movne	r2, #1
 572 002a 588F     		ldrh	r0, [r3, #58]
 573 002c 93F83860 		ldrb	r6, [r3, #56]	@ zero_extendqisi2
 574 0030 0592     		str	r2, [sp, #20]
 575 0032 5A6B     		ldr	r2, [r3, #52]
 121:src/btphy/inquiry_scan_state.c **** 	inquiry_scan_state.fhs_hdr.type = BB_TYPE_FHS;
 576              		.loc 1 121 37 view .LVU123
 577 0034 184D     		ldr	r5, .L29+12
 126:src/btphy/inquiry_scan_state.c **** 		btphy.my_sw&0xffffffff,	// parity: low32 bits of master's sw
 578              		.loc 1 126 2 view .LVU124
 579 0036 CDE90026 		strd	r2, r6, [sp]
 580 003a 0290     		str	r0, [sp, #8]
 581 003c 1748     		ldr	r0, .L29+16
 582 003e 1A6C     		ldr	r2, [r3, #64]
 583 0040 2346     		mov	r3, r4
 584 0042 0390     		str	r0, [sp, #12]
 585 0044 0494     		str	r4, [sp, #16]
 586 0046 05F10800 		add	r0, r5, #8
 121:src/btphy/inquiry_scan_state.c **** 	inquiry_scan_state.fhs_hdr.type = BB_TYPE_FHS;
 587              		.loc 1 121 37 view .LVU125
 588 004a A980     		strh	r1, [r5, #4]	@ movhi
 123:src/btphy/inquiry_scan_state.c **** 
 589              		.loc 1 123 35 view .LVU126
 590 004c AC71     		strb	r4, [r5, #6]
 126:src/btphy/inquiry_scan_state.c **** 		btphy.my_sw&0xffffffff,	// parity: low32 bits of master's sw
 591              		.loc 1 126 2 is_stmt 1 view .LVU127
 592              	.LBB89:
 593              	.LBI86:
  29:include/ubtbr/btctl_intf.h **** {
 594              		.loc 2 29 31 view .LVU128
 595              	.LBB88:
 596              		.loc 2 31 2 view .LVU129
 597              	.LBE88:
 598              	.LBE89:
 126:src/btphy/inquiry_scan_state.c **** 		btphy.my_sw&0xffffffff,	// parity: low32 bits of master's sw
 599              		.loc 1 126 2 is_stmt 0 view .LVU130
 600 004e FFF7FEFF 		bl	bbpkt_fhs_prepare_payload
 601              	.LVL38:
 128:src/btphy/inquiry_scan_state.c **** 		btphy.my_lap,		// master's bdaddr
 129:src/btphy/inquiry_scan_state.c **** 		btphy.my_uap,		// 
 130:src/btphy/inquiry_scan_state.c **** 		btphy.my_nap,		// 
ARM GAS  /tmp/cclNRwHN.s 			page 16


 131:src/btphy/inquiry_scan_state.c **** 		0x5A020C,		// class: FIXME: make this configurable
 132:src/btphy/inquiry_scan_state.c **** 		0,			// lt_addr
 133:src/btphy/inquiry_scan_state.c **** 		btctl_get_eir() != NULL
 134:src/btphy/inquiry_scan_state.c **** 		);
 135:src/btphy/inquiry_scan_state.c **** 
 136:src/btphy/inquiry_scan_state.c **** 	inquiry_scan_state.clkn_start = MASTER_CLKN+1;
 602              		.loc 1 136 2 is_stmt 1 view .LVU131
 603              		.loc 1 136 34 is_stmt 0 view .LVU132
 604 0052 134B     		ldr	r3, .L29+20
 605 0054 1A68     		ldr	r2, [r3]
 606              		.loc 1 136 45 view .LVU133
 607 0056 511C     		adds	r1, r2, #1
 608              		.loc 1 136 32 view .LVU134
 609 0058 2960     		str	r1, [r5]
 137:src/btphy/inquiry_scan_state.c **** 	inquiry_scan_schedule(1);
 610              		.loc 1 137 2 is_stmt 1 view .LVU135
 611              	.LVL39:
 612              	.LBB90:
 613              	.LBI90:
  99:src/btphy/inquiry_scan_state.c **** {
 614              		.loc 1 99 13 view .LVU136
 615              	.LBB91:
 101:src/btphy/inquiry_scan_state.c **** 	{
 616              		.loc 1 101 2 view .LVU137
 101:src/btphy/inquiry_scan_state.c **** 	{
 617              		.loc 1 101 6 is_stmt 0 view .LVU138
 618 005a 1B68     		ldr	r3, [r3]
 101:src/btphy/inquiry_scan_state.c **** 	{
 619              		.loc 1 101 51 view .LVU139
 620 005c 02F53B32 		add	r2, r2, #191488
 621 0060 02F20122 		addw	r2, r2, #513
 101:src/btphy/inquiry_scan_state.c **** 	{
 622              		.loc 1 101 5 view .LVU140
 623 0064 9342     		cmp	r3, r2
 624 0066 07D2     		bcs	.L28
 107:src/btphy/inquiry_scan_state.c **** }
 625              		.loc 1 107 2 is_stmt 1 view .LVU141
 626 0068 2246     		mov	r2, r4
 627 006a 0120     		movs	r0, #1
 628 006c 0D49     		ldr	r1, .L29+24
 629              	.LBE91:
 630              	.LBE90:
 138:src/btphy/inquiry_scan_state.c **** }
 631              		.loc 1 138 1 is_stmt 0 view .LVU142
 632 006e 06B0     		add	sp, sp, #24
 633              		.cfi_remember_state
 634              		.cfi_def_cfa_offset 16
 635              		@ sp needed
 636 0070 BDE87040 		pop	{r4, r5, r6, lr}
 637              		.cfi_restore 14
 638              		.cfi_restore 6
 639              		.cfi_restore 5
 640              		.cfi_restore 4
 641              		.cfi_def_cfa_offset 0
 642              	.LBB98:
 643              	.LBB96:
 107:src/btphy/inquiry_scan_state.c **** }
ARM GAS  /tmp/cclNRwHN.s 			page 17


 644              		.loc 1 107 2 view .LVU143
 645 0074 FFF7FEBF 		b	scan_task_schedule
 646              	.LVL40:
 647              	.L28:
 648              		.cfi_restore_state
 649              	.LBB92:
 650              	.LBI92:
  99:src/btphy/inquiry_scan_state.c **** {
 651              		.loc 1 99 13 is_stmt 1 view .LVU144
 652              	.LBB93:
 103:src/btphy/inquiry_scan_state.c **** 		btctl_set_state(BTCTL_STATE_STANDBY, BTCTL_REASON_TIMEOUT);
 653              		.loc 1 103 3 view .LVU145
 654 0078 0B48     		ldr	r0, .L29+28
 655 007a FFF7FEFF 		bl	cprintf
 656              	.LVL41:
 104:src/btphy/inquiry_scan_state.c **** 		return;
 657              		.loc 1 104 3 view .LVU146
 658 007e 2046     		mov	r0, r4
 659 0080 0121     		movs	r1, #1
 660              	.LBE93:
 661              	.LBE92:
 662              	.LBE96:
 663              	.LBE98:
 664              		.loc 1 138 1 is_stmt 0 view .LVU147
 665 0082 06B0     		add	sp, sp, #24
 666              		.cfi_def_cfa_offset 16
 667              		@ sp needed
 668 0084 BDE87040 		pop	{r4, r5, r6, lr}
 669              		.cfi_restore 14
 670              		.cfi_restore 6
 671              		.cfi_restore 5
 672              		.cfi_restore 4
 673              		.cfi_def_cfa_offset 0
 674              	.LBB99:
 675              	.LBB97:
 676              	.LBB95:
 677              	.LBB94:
 104:src/btphy/inquiry_scan_state.c **** 		return;
 678              		.loc 1 104 3 view .LVU148
 679 0088 FFF7FEBF 		b	btctl_set_state
 680              	.LVL42:
 681              	.L30:
 682              		.align	2
 683              	.L29:
 684 008c 338B9E00 		.word	10390323
 685 0090 00000000 		.word	btctl
 686 0094 00000000 		.word	btphy
 687 0098 00000000 		.word	.LANCHOR0
 688 009c 0C025A00 		.word	5898764
 689 00a0 08800040 		.word	1073774600
 690 00a4 00000000 		.word	inquiry_scan_rx_cb
 691 00a8 00000000 		.word	.LC0
 692              	.LBE94:
 693              	.LBE95:
 694              	.LBE97:
 695              	.LBE99:
 696              		.cfi_endproc
ARM GAS  /tmp/cclNRwHN.s 			page 18


 697              	.LFE36:
 699              		.bss
 700              		.align	2
 701              		.set	.LANCHOR0,. + 0
 704              	inquiry_scan_state:
 705 0000 00000000 		.space	28
 705      00000000 
 705      00000000 
 705      00000000 
 705      00000000 
 706              		.text
 707              	.Letext0:
 708              		.file 3 "/usr/lib/gcc/arm-none-eabi/9.2.1/include/stddef.h"
 709              		.file 4 "/usr/include/newlib/sys/_types.h"
 710              		.file 5 "/usr/include/newlib/sys/reent.h"
 711              		.file 6 "/usr/include/newlib/sys/lock.h"
 712              		.file 7 "/usr/include/newlib/stdlib.h"
 713              		.file 8 "/usr/lib/gcc/arm-none-eabi/9.2.1/include/stdint.h"
 714              		.file 9 "../../host/libubertooth/src/ubertooth_interface.h"
 715              		.file 10 "../common/ubertooth.h"
 716              		.file 11 "include/ubtbr/msg.h"
 717              		.file 12 "include/ubtbr/queue.h"
 718              		.file 13 "include/ubtbr/btphy.h"
 719              		.file 14 "include/ubtbr/bb.h"
 720              		.file 15 "include/ubtbr/debug.h"
 721              		.file 16 "include/ubtbr/scan_task.h"
 722              		.file 17 "include/ubtbr/tx_task.h"
 723              		.file 18 "include/ubtbr/console.h"
ARM GAS  /tmp/cclNRwHN.s 			page 19


DEFINED SYMBOLS
                            *ABS*:0000000000000000 inquiry_scan_state.c
     /tmp/cclNRwHN.s:16     .rodata.str1.4:0000000000000000 $d
     /tmp/cclNRwHN.s:20     .text.tx_fhs_cb:0000000000000000 $t
     /tmp/cclNRwHN.s:28     .text.tx_fhs_cb:0000000000000000 tx_fhs_cb
     /tmp/cclNRwHN.s:170    .text.tx_fhs_cb:0000000000000068 $d
     /tmp/cclNRwHN.s:192    .text.tx_eir_cb:0000000000000000 tx_eir_cb
     /tmp/cclNRwHN.s:301    .text.inquiry_scan_rx_cb:0000000000000000 inquiry_scan_rx_cb
     /tmp/cclNRwHN.s:185    .text.tx_eir_cb:0000000000000000 $t
     /tmp/cclNRwHN.s:278    .text.tx_eir_cb:0000000000000038 $d
     /tmp/cclNRwHN.s:294    .text.inquiry_scan_rx_cb:0000000000000000 $t
     /tmp/cclNRwHN.s:500    .text.inquiry_scan_rx_cb:0000000000000084 $d
     /tmp/cclNRwHN.s:517    .text.inquiry_scan_state_setup:0000000000000000 $t
     /tmp/cclNRwHN.s:525    .text.inquiry_scan_state_setup:0000000000000000 inquiry_scan_state_setup
     /tmp/cclNRwHN.s:684    .text.inquiry_scan_state_setup:000000000000008c $d
     /tmp/cclNRwHN.s:700    .bss:0000000000000000 $d
     /tmp/cclNRwHN.s:704    .bss:0000000000000000 inquiry_scan_state

UNDEFINED SYMBOLS
tx_task_schedule
scan_task_schedule
cprintf
btctl_set_state
btctl
btphy
console_putc
bbpkt_fhs_finalize_payload
btphy_set_mode
bbpkt_fhs_prepare_payload
